[
  {
    "step_definition_id": 1215,
    "annotation": "\n\t@Given(\"^assert defaultValue is (.*) for tableName (.*) and columnName (.*)$\")",
    "glue_code": "\t@Given(\"^assert defaultValue is (.*) for tableName (.*) and columnName (.*)$\")\n\tpublic void assertDefaultValue(\n\t\t\t@NonNull final String expectedDefaultValue,\n\t\t\t@NonNull final String tableName,\n\t\t\t@NonNull final String columnName)\n\t{\n\t\tfinal AdTableId tableId = AdTableId.ofRepoIdOrNull(tableDAO.retrieveTableId(tableName));\n\t\tassertThat(tableId).isNotNull();\n\n\t\tfinal String defaultValue = queryBL.createQueryBuilder(I_AD_Column.class)\n\t\t\t\t.addEqualsFilter(I_AD_Column.COLUMNNAME_AD_Table_ID, tableId)\n\t\t\t\t.addEqualsFilter(I_AD_Column.COLUMNNAME_ColumnName, columnName)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_AD_Column.class)\n\t\t\t\t.getDefaultValue();\n\n\t\tassertThat(defaultValue).isEqualTo(expectedDefaultValue);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_Column_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_Column_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1216,
    "annotation": "\n\t@And(\"update AD_Column:\")",
    "glue_code": "\t@And(\"update AD_Column:\")\n\tpublic void update_AD_Columns(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::updateAD_Column);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 93,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_Column_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_Column_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1217,
    "annotation": "\n\t@When(\"^set custom columns for C_Order( expecting error:|:)$\")",
    "glue_code": "\t@When(\"^set custom columns for C_Order( expecting error:|:)$\")\n\tpublic void setCustomColumn_C_Order(@NonNull final String semantics, @NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tsetC_Order_CustomColumnsValues(row);\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 122,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_Column_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_Column_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1218,
    "annotation": "\n\t@When(\"set custom columns for S_ResourceType:\")",
    "glue_code": "\t@When(\"set custom columns for S_ResourceType:\")\n\tpublic void setCustomColumn_S_ResourceType(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tsetS_ResourceType_customColumnsValues(row);\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 131,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_Column_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_Column_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1219,
    "annotation": "\n\t@Then(\"validate customColumns:\")",
    "glue_code": "\t@Then(\"validate customColumns:\")\n\tpublic void validate_customColumns(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Order.COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String resourceTypeIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_S_ResourceType.COLUMNNAME_S_ResourceType_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal Map<String, Object> columns;\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tcolumns = getOrderCustomColumns(orderIdentifier);\n\t\t\t}\n\t\t\telse if (Check.isNotBlank(resourceTypeIdentifier))\n\t\t\t{\n\t\t\t\tcolumns = getResourceTypeCustomColumns(resourceTypeIdentifier);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new RuntimeException(\"One of \" + \"OPT.\" + I_C_Order.COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER\n\t\t\t\t\t\t+ \" OR \" + \"OPT.\" + I_S_ResourceType.COLUMNNAME_S_ResourceType_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" must be set!\");\n\t\t\t}\n\n\t\t\tfinal String customColumnJSONValue = DataTableUtil.extractStringForColumnName(row, \"CustomColumnJSONValue\");\n\t\t\tfinal String retrievedColumns = objectMapper.writeValueAsString(columns);\n\n\t\t\tassertThat(retrievedColumns).isEqualTo(customColumnJSONValue);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 140,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_Column_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_Column_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1211,
    "annotation": "\n\t@And(\"metasfresh has no AD_EventLog_Entry records\")",
    "glue_code": "\t@And(\"metasfresh has no AD_EventLog_Entry records\")\n\tpublic void delete_AD_EventLog_Entry_records()\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"DELETE FROM AD_EventLog_Entry;\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 77,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_EventLog_Entry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_EventLog_Entry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1212,
    "annotation": "\n\t@And(\"metasfresh has no AD_EventLog records\")",
    "glue_code": "\t@And(\"metasfresh has no AD_EventLog records\")\n\tpublic void delete_AD_EventLog_records()\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"DELETE FROM AD_EventLog_Entry;\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_EventLog_Entry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_EventLog_Entry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1213,
    "annotation": "\n\t@And(\"^after not more than (.*)s, AD_EventLog_Entry are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, AD_EventLog_Entry are found$\")\n\tpublic void findAD_EventLog_Entry(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String classname = DataTableUtil.extractStringForColumnName(row, I_AD_EventLog_Entry.COLUMNNAME_Classname);\n\t\t\tfinal String msgText = DataTableUtil.extractStringForColumnName(row, I_AD_EventLog_Entry.COLUMNNAME_MsgText);\n\t\t\tfinal boolean processed = DataTableUtil.extractBooleanForColumnName(row, I_AD_EventLog_Entry.COLUMNNAME_Processed);\n\t\t\tfinal String eventLogIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_EventLog.COLUMNNAME_AD_EventLog_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal int eventLogId = eventLogTable.get(eventLogIdentifier).getAD_EventLog_ID();\n\n\t\t\tfinal String eventLogEntryIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_EventLog_Entry.COLUMNNAME_AD_EventLog_Entry_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal Supplier<Boolean> logEntryRecordFound = () -> {\n\t\t\t\tfinal I_AD_EventLog_Entry eventLogEntryRecord = queryBL.createQueryBuilder(I_AD_EventLog_Entry.class)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_EventLog_Entry.COLUMNNAME_AD_EventLog_ID, eventLogId)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_EventLog_Entry.COLUMNNAME_Classname, classname)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_EventLog_Entry.COLUMNNAME_Processed, processed)\n\t\t\t\t\t\t.addStringLikeFilter(I_AD_EventLog_Entry.COLUMNNAME_MsgText, msgText, true)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.firstOnly(I_AD_EventLog_Entry.class);\n\n\t\t\t\tif (eventLogEntryRecord == null)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\teventLogEntryTable.put(eventLogEntryIdentifier, eventLogEntryRecord);\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, logEntryRecordFound, () -> logCurrentContext(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 89,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_EventLog_Entry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_EventLog_Entry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1214,
    "annotation": "\n\t@And(\"^after not more than (.*)s, AD_EventLog are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, AD_EventLog are found$\")\n\tpublic void findAD_EventLog(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String eventName = DataTableUtil.extractStringForColumnName(row, \"EventName\");\n\n\t\t\tfinal Supplier<Optional<I_AD_EventLog>> getEventLogRecord = () -> {\n\n\t\t\t\tfinal List<I_AD_EventLog> eventLogRecords = queryBL.createQueryBuilder(I_AD_EventLog.class)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_EventLog.COLUMNNAME_EventName, eventName)\n\t\t\t\t\t\t.orderByDescending(I_AD_EventLog.COLUMNNAME_Created)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.list(I_AD_EventLog.class);\n\t\t\t\tif (eventLogRecords.isEmpty())\n\t\t\t\t{\n\t\t\t\t\treturn Optional.empty();\n\t\t\t\t}\n\t\t\t\tif (Check.equals(eventName, SupplyRequiredEvent.TYPE))\n\t\t\t\t{\n\t\t\t\t\treturn extractSupplyRequiredEventLog(row, eventLogRecords);\n\t\t\t\t}\n\t\t\t\tthrow new AdempiereException(\"EventName \" + eventName + \" not supported\");\n\t\t\t};\n\n\t\t\tfinal I_AD_EventLog eventLog = StepDefUtil.tryAndWaitForItem(timeoutSec,\n\t\t\t\t\t500,\n\t\t\t\t\tgetEventLogRecord,\n\t\t\t\t\tthis::logCurrentContextForEventLogRecords);\n\n\t\t\tfinal String eventLogIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_EventLog.COLUMNNAME_AD_EventLog_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\teventLogTable.put(eventLogIdentifier, eventLog);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 124,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_EventLog_Entry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_EventLog_Entry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1209,
    "annotation": "\n\t@Given(\"load AD_JavaClass:\")",
    "glue_code": "\t@Given(\"load AD_JavaClass:\")\n\tpublic void load_ad_javaclass(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadAdJavaClass(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_JavaClass_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_JavaClass_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1210,
    "annotation": "\n\t@Given(\"metasfresh contains AD_JavaClass:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_JavaClass:\")\n\tpublic void metasfresh_contains_ad_javaclass(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateAdJavaClass(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_JavaClass_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_JavaClass_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1221,
    "annotation": "\n\t@Given(\"load AD_JavaClass_Type:\")",
    "glue_code": "\t@Given(\"load AD_JavaClass_Type:\")\n\tpublic void load_ad_javaclass_type(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadAdJavaClassType(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_JavaClass_Type_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_JavaClass_Type_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1222,
    "annotation": "\n\t@Given(\"metasfresh contains AD_JavaClass_Type:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_JavaClass_Type:\")\n\tpublic void metasfresh_contains_ad_javaclass_type(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateAdJavaClassType(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_JavaClass_Type_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_JavaClass_Type_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1229,
    "annotation": "\n\t@Given(\"metasfresh contains AD_Replication_Strategy\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_Replication_Strategy\")\n\tpublic void create_AD_Replication_Strategy(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcreateReplicationStrategy(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_ReplicationStrategy_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_ReplicationStrategy_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1207,
    "annotation": "\n\t@And(\"^set sys config (String|boolean|int) value (.*) for sys config (.*)$\")",
    "glue_code": "\t@And(\"^set sys config (String|boolean|int) value (.*) for sys config (.*)$\")\n\tpublic void enable_sys_config(@NonNull final String sysconfigType, @NonNull final String sysconfigValue, @NonNull final String sysConfigName)\n\t{\n\t\tswitch (sysconfigType)\n\t\t{\n\t\t\tcase \"String\":\n\t\t\t\tfinal String value = DataTableUtil.nullToken2Null(sysconfigValue);\n\t\t\t\tsysConfigBL.setValue(sysConfigName, value, ClientId.SYSTEM, StepDefConstants.ORG_ID_SYSTEM);\n\t\t\t\tbreak;\n\t\t\tcase \"boolean\":\n\t\t\t\tfinal boolean booleanValue = Boolean.parseBoolean(sysconfigValue);\n\t\t\t\tsysConfigBL.setValue(sysConfigName, booleanValue, ClientId.SYSTEM, StepDefConstants.ORG_ID_SYSTEM);\n\t\t\t\tbreak;\n\t\t\tcase \"int\":\n\t\t\t\tfinal int intValue = Integer.parseInt(sysconfigValue);\n\t\t\t\tsetSysConfigIntValue(sysConfigName, intValue);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled sysConfig type\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"type:\", sysconfigType);\n\t\t}\n\t\tCacheMgt.get().reset(I_AD_SysConfig.Table_Name); // also without this, we fire a CacheInvalidation event, but that event may not be processed in time\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_SysConfig_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_SysConfig_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1208,
    "annotation": "\n\t@And(\"update AD_SysConfig with login AD_User_ID\")",
    "glue_code": "\t@And(\"update AD_SysConfig with login AD_User_ID\")\n\tpublic void set_sysConfig_login_user(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_AD_SysConfig.COLUMNNAME_Name);\n\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_User.COLUMNNAME_AD_User_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_User user = userTable.get(userIdentifier);\n\t\t\tassertThat(user).isNotNull();\n\n\t\t\tsetSysConfigIntValue(name, user.getAD_User_ID());\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_SysConfig_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_SysConfig_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1223,
    "annotation": "\n\t@And(\"validate all AD_Tables, except:\")",
    "glue_code": "\t@And(\"validate all AD_Tables, except:\")\n\tpublic void assertAllTablesAreValid(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal TableNamesSkipList tableNamesSkipList = TableNamesSkipList.ofDataTable(dataTable);\n\n\t\tfinal Progress progress = new Progress();\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal POInfo.POInfoMap poInfoMap = POInfo.getPOInfoMap();\n\t\tpoInfoMap.stream()\n\t\t\t\t.forEach(poInfo -> {\n\t\t\t\t\tfinal String tableName = poInfo.getTableName();\n\n\t\t\t\t\tif (tableNamesSkipList.isSkipped(tableName))\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.info(\"{} is SKIPPED\", tableName);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tsoftly.assertThatCode(() -> tryRetrieveFirstRow(poInfo, progress))\n\t\t\t\t\t\t\t.as(() -> \"Expect table \" + tableName + \" is valid\")\n\t\t\t\t\t\t\t.doesNotThrowAnyException();\n\t\t\t\t});\n\n\t\t//\n\t\t// Hygiene: make sure the skip rules are still matching.\n\t\t// If not, advice the developer to remote the rule.\n\t\ttableNamesSkipList.forEachTableNameUC(tableNameUC -> {\n\t\t\tsoftly.assertThatCode(() -> {\n\t\t\t\t\t\tfinal POInfo poInfo = poInfoMap.getByTableName(tableNameUC);\n\t\t\t\t\t\ttryRetrieveFirstRow(poInfo, null); // expect failure\n\t\t\t\t\t})\n\t\t\t\t\t.as(() -> \"Expected table \" + tableNameUC + \" is still invalid but it's OK. GREAT! Consider removing this exclude rule.\")\n\t\t\t\t\t.isInstanceOf(Throwable.class);\n\t\t});\n\n\t\tprogress.logSummary();\n\n\t\tsoftly.assertThat(progress.countErrors()).as(\"Expect no errors\").isZero();\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 30,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_Table_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_Table_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1224,
    "annotation": "\n\t@And(\"metasfresh contains AD_UserGroup:\")",
    "glue_code": "\t@And(\"metasfresh contains AD_UserGroup:\")\n\tpublic void metasfresh_contains_ad_userGroup(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_AD_UserGroup.COLUMNNAME_Name);\n\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_AD_UserGroup.COLUMNNAME_Description);\n\t\t\tfinal boolean active = DataTableUtil.extractBooleanForColumnName(row, I_AD_UserGroup.COLUMNNAME_IsActive);\n\n\t\t\tfinal I_AD_UserGroup userGroup = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_AD_UserGroup.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_AD_UserGroup.COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyOrNull(I_AD_UserGroup.class),\n\t\t\t\t\t() -> newInstanceOutOfTrx(I_AD_UserGroup.class));\n\n\t\t\tassertThat(userGroup).isNotNull();\n\n\t\t\tuserGroup.setName(name);\n\t\t\tuserGroup.setIsActive(active);\n\n\t\t\tif (Check.isNotBlank(description))\n\t\t\t{\n\t\t\t\tuserGroup.setDescription(description);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(userGroup);\n\n\t\t\tfinal String userGroupIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_UserGroup.COLUMNNAME_AD_UserGroup_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tuserGroupTable.put(userGroupIdentifier, userGroup);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 54,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_UserGroup_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_UserGroup_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1225,
    "annotation": "\n\t@And(\"load AD_UserGroup from AD_SysConfig:\")",
    "glue_code": "\t@And(\"load AD_UserGroup from AD_SysConfig:\")\n\tpublic void load_userGroup_from_sysConfig(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String sysConfigName = DataTableUtil.extractStringForColumnName(row, I_AD_SysConfig.Table_Name + \".\" + I_AD_SysConfig.COLUMNNAME_Name);\n\n\t\t\tfinal int userGroupSysConfigValue = sysConfigBL.getIntValue(sysConfigName, -1);\n\t\t\tassertThat(userGroupSysConfigValue).isGreaterThan(0);\n\n\t\t\tfinal I_AD_UserGroup userGroup = InterfaceWrapperHelper.load(userGroupSysConfigValue, I_AD_UserGroup.class);\n\t\t\tassertThat(userGroup).isNotNull();\n\n\t\t\tfinal String userGroupIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_UserGroup.COLUMNNAME_AD_UserGroup_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tuserGroupTable.putOrReplace(userGroupIdentifier, userGroup);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 87,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_UserGroup_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_UserGroup_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1220,
    "annotation": "\n\t@And(\"metasfresh contains AD_UserGroup_User_Assign:\")",
    "glue_code": "\t@And(\"metasfresh contains AD_UserGroup_User_Assign:\")\n\tpublic void metasfresh_contains_AD_UserGroup_User_Assign(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_UserGroup_User_Assign.COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal int userId = userTable.get(userIdentifier).getAD_User_ID();\n\n\t\t\tfinal String userGroupIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_UserGroup_User_Assign.COLUMNNAME_AD_UserGroup_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_UserGroup userGroup = userGroupTable.get(userGroupIdentifier);\n\t\t\tassertThat(userGroup).isNotNull();\n\n\t\t\tfinal boolean active = DataTableUtil.extractBooleanForColumnName(row, I_AD_UserGroup_User_Assign.COLUMNNAME_IsActive);\n\n\t\t\tfinal I_AD_UserGroup_User_Assign userGroupAssign = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_AD_UserGroup_User_Assign.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_AD_UserGroup_User_Assign.COLUMNNAME_AD_User_ID, userId)\n\t\t\t\t\t\t\t.addEqualsFilter(I_AD_UserGroup_User_Assign.COLUMN_AD_UserGroup_ID, userGroup.getAD_UserGroup_ID())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyOrNull(I_AD_UserGroup_User_Assign.class),\n\t\t\t\t\t() -> newInstanceOutOfTrx(I_AD_UserGroup_User_Assign.class));\n\n\t\t\tassertThat(userGroupAssign).isNotNull();\n\n\t\t\tuserGroupAssign.setAD_User_ID(userId);\n\t\t\tuserGroupAssign.setAD_UserGroup_ID(userGroup.getAD_UserGroup_ID());\n\t\t\tuserGroupAssign.setIsActive(active);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(userGroupAssign);\n\n\t\t\tfinal String userGroupAssignIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_UserGroup_User_Assign_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tuserGroupUserAssignTable.put(userGroupAssignIdentifier, userGroupAssign);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_UserGroup_User_Assign_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_UserGroup_User_Assign_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1235,
    "annotation": "\n\t@Given(\"metasfresh contains AD_Users:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_Users:\")\n\tpublic void metasfresh_contains_ad_users(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateUser(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_User_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_User_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1236,
    "annotation": "\n\t@And(\"load AD_User:\")",
    "glue_code": "\t@And(\"load AD_User:\")\n\tpublic void load_ad_user(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String login = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Login);\n\n\t\t\tfinal I_AD_User userRecord = queryBL.createQueryBuilder(I_AD_User.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Login, login)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_AD_User.class);\n\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tuserTable.put(userIdentifier, userRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_User_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_User_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1237,
    "annotation": "\n\t@And(\"update AD_User:\")",
    "glue_code": "\t@And(\"update AD_User:\")\n\tpublic void update_ad_user(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_User user = userTable.get(userIdentifier);\n\t\t\tassertThat(user).isNotNull();\n\n\t\t\tfinal String email = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_EMail);\n\t\t\tif (Check.isNotBlank(email))\n\t\t\t{\n\t\t\t\tuser.setEMail(email);\n\t\t\t}\n\n\t\t\tfinal String phone = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Phone);\n\t\t\tif (Check.isNotBlank(phone))\n\t\t\t{\n\t\t\t\tuser.setPhone(phone);\n\t\t\t}\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\t\t\t\tuser.setC_BPartner_ID(bPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(user);\n\t\t\tuserTable.putOrReplace(userIdentifier, user);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 109,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/AD_User_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "AD_User_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1230,
    "annotation": "\n\t@And(\"metasfresh contains C_BP_BankAccount\")",
    "glue_code": "\t@And(\"metasfresh contains C_BP_BankAccount\")\n\tpublic void addOrUpdateBPartnerBankAccount(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> createOrUpdateBankAccount(row, false));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 88,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BP_BankAccount_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BP_BankAccount_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1231,
    "annotation": "\n\t@And(\"metasfresh contains organization bank accounts\")",
    "glue_code": "\t@And(\"metasfresh contains organization bank accounts\")\n\tpublic void addOrUpdateOrgBankAccount(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> createOrUpdateBankAccount(row, true));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 94,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BP_BankAccount_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BP_BankAccount_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1232,
    "annotation": "\n\t@And(\"load C_BP_BankAccount:\")",
    "glue_code": "\t@And(\"load C_BP_BankAccount:\")\n\tpublic void load_C_BP_BankAccount(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : rows)\n\t\t{\n\t\t\tloadBankAccount(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 100,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BP_BankAccount_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BP_BankAccount_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1233,
    "annotation": "\n\t@And(\"update C_BP_BankAccount:\")",
    "glue_code": "\t@And(\"update C_BP_BankAccount:\")\n\tpublic void update_C_BP_BankAccount(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : rows)\n\t\t{\n\t\t\tupdateBankAccount(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 110,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BP_BankAccount_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BP_BankAccount_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1234,
    "annotation": "\n\t@And(\"validate C_BP_BankAccount:\")",
    "glue_code": "\t@And(\"validate C_BP_BankAccount:\")\n\tpublic void validate_C_BP_BankAccount(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bpBankAccountIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BP_BankAccount.COLUMNNAME_C_BP_BankAccount_ID);\n\t\t\tfinal I_C_BP_BankAccount bpBankAccount = bpBankAccountTable.get(bpBankAccountIdentifier);\n\n\t\t\tfinal String bpIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Location.COLUMNNAME_C_BPartner_ID);\n\t\t\tfinal I_C_BPartner bPartnerRecord = bpartnerTable.get(bpIdentifier);\n\t\t\tsoftly.assertThat(bpBankAccount.getC_BPartner_ID()).as(\"C_BPartner_ID\").isEqualTo(bPartnerRecord.getC_BPartner_ID());\n\n\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, I_C_BP_BankAccount.COLUMNNAME_Description);\n\t\t\tif (Check.isNotBlank(description))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getDescription()).as(\"Description\").isEqualTo(description);\n\t\t\t}\n\n\t\t\tfinal String iban = DataTableUtil.extractStringOrNullForColumnName(row, I_C_BP_BankAccount.COLUMNNAME_IBAN);\n\t\t\tif (Check.isNotBlank(iban))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getIBAN()).as(\"IBAN\").isEqualTo(iban);\n\t\t\t}\n\n\t\t\tfinal String qrIban = DataTableUtil.extractStringOrNullForColumnName(row, I_C_BP_BankAccount.COLUMNNAME_QR_IBAN);\n\t\t\tif (Check.isNotBlank(qrIban))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getQR_IBAN()).as(\"QR_IBAN\").isEqualTo(qrIban);\n\t\t\t}\n\n\t\t\tfinal String isoCurrencyCode = DataTableUtil.extractStringOrNullForColumnName(row, \"ISO_Code\");\n\t\t\tif (Check.isNotBlank(isoCurrencyCode))\n\t\t\t{\n\t\t\t\tfinal CurrencyId currencyId = currencyBL.getByCurrencyCode(CurrencyCode.ofThreeLetterCode(isoCurrencyCode)).getId();\n\t\t\t\tsoftly.assertThat(bpBankAccount.getC_Currency_ID()).as(\"C_Currency_ID\").isEqualTo(currencyId.getRepoId());\n\t\t\t}\n\n\t\t\tfinal String name = DataTableUtil.extractStringOrNullForColumnName(row, I_C_BP_BankAccount.COLUMNNAME_Name);\n\t\t\tif (Check.isNotBlank(name))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getName()).as(\"Name\").isEqualTo(name);\n\t\t\t}\n\n\t\t\tfinal Boolean isActive = DataTableUtil.extractBooleanForColumnNameOrNull(row, I_C_BP_BankAccount.COLUMNNAME_IsActive);\n\t\t\tif (isActive != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.isActive()).as(\"IsActive\").isEqualTo(isActive);\n\t\t\t}\n\n\t\t\tfinal Boolean isDefault = DataTableUtil.extractBooleanForColumnNameOrNull(row, I_C_BP_BankAccount.COLUMNNAME_IsDefault);\n\t\t\tif (isDefault != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.isDefault()).as(\"isDefault\").isEqualTo(isDefault);\n\t\t\t}\n\n\t\t\tfinal String accountName = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_A_Name);\n\t\t\tif (Check.isNotBlank(accountName))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getA_Name()).as(COLUMNNAME_A_Name).isEqualTo(DataTableUtil.nullToken2Null(accountName));\n\t\t\t}\n\n\t\t\tfinal String accountStreet = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_A_Street);\n\t\t\tif (Check.isNotBlank(accountStreet))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getA_Street()).as(COLUMNNAME_A_Street).isEqualTo(DataTableUtil.nullToken2Null(accountStreet));\n\t\t\t}\n\n\t\t\tfinal String accountZip = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_A_Zip);\n\t\t\tif (Check.isNotBlank(accountZip))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getA_Zip()).as(COLUMNNAME_A_Zip).isEqualTo(DataTableUtil.nullToken2Null(accountZip));\n\t\t\t}\n\n\t\t\tfinal String accountCity = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_A_City);\n\t\t\tif (Check.isNotBlank(accountCity))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getA_City()).as(COLUMNNAME_A_City).isEqualTo(DataTableUtil.nullToken2Null(accountCity));\n\t\t\t}\n\n\t\t\tfinal String accountCountry = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_A_Country);\n\t\t\tif (Check.isNotBlank(accountCountry))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpBankAccount.getA_Country()).as(COLUMNNAME_A_Country).isEqualTo(DataTableUtil.nullToken2Null(accountCountry));\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 240,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BP_BankAccount_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BP_BankAccount_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1226,
    "annotation": "\n\t@And(\"^C_BPartner is (blocked|unblocked)$\")",
    "glue_code": "\t@And(\"^C_BPartner is (blocked|unblocked)$\")\n\tpublic void bPartner_update_blockStatus(\n\t\t\t@NonNull final String status,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> dataRows = dataTable.asMaps();\n\t\tfinal BlockStatus blockStatus = getBlockStatus(status);\n\t\tfor (final Map<String, String> row : dataRows)\n\t\t{\n\n\t\t\tcreateBPartnerBlockStatus(row, blockStatus);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 62,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_BlockStatus_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_BlockStatus_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1227,
    "annotation": "\t\n\t@And(\"load latest C_BPartner_BlockStatus for C_BPartner:\")",
    "glue_code": "\t@And(\"load latest C_BPartner_BlockStatus for C_BPartner:\")\n\tpublic void load_latest_C_Bpartner_BlockStatus_for_C_BPartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> dataRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : dataRows)\n\t\t{\n\t\t\tloadLatestBPartnerBlockStatus(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_BlockStatus_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_BlockStatus_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1228,
    "annotation": "\n\t@And(\"validate C_BPartner_BlockStatus:\")",
    "glue_code": "\t@And(\"validate C_BPartner_BlockStatus:\")\n\tpublic void validate_C_Bpartner_BlockStatus(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> dataRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : dataRows)\n\t\t{\n\t\t\tvalidateBPartnerBlockStatus(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_BlockStatus_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_BlockStatus_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1261,
    "annotation": "\n\t@And(\"metasfresh contains C_BPartner_CreditLimit:\")",
    "glue_code": "\t@And(\"metasfresh contains C_BPartner_CreditLimit:\")\n\tpublic void metasfresh_contains_c_bPartner_creditLimit(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateCBPartnerCreditLimit(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_CreditLimit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_CreditLimit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1262,
    "annotation": "\n\t@And(\"update C_BPartner_CreditLimits\")",
    "glue_code": "\t@And(\"update C_BPartner_CreditLimits\")\n\tpublic void update_creditLimit(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateCreditLimit(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_CreditLimit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_CreditLimit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1263,
    "annotation": "\n\t@And(\"^validate no credit limit records found for: (.*)$\")",
    "glue_code": "\t@And(\"^validate no credit limit records found for: (.*)$\")\n\tpublic void no_creditLimit_records_for_bpartner(@NonNull final String bpartnerIdentifier)\n\t{\n\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bpartnerIdentifier);\n\t\tassertThat(bPartner).isNotNull();\n\n\t\tfinal Optional<I_C_BPartner_CreditLimit> first = queryBL.createQueryBuilder(I_C_BPartner_CreditLimit.class)\n\t\t\t\t.addEqualsFilter(I_C_BPartner_CreditLimit.COLUMNNAME_C_BPartner_ID, bPartner.getC_BPartner_ID())\n\t\t\t\t.orderBy(I_C_BPartner_CreditLimit.COLUMNNAME_C_BPartner_CreditLimit_ID)\n\t\t\t\t.create()\n\t\t\t\t.firstOptional(I_C_BPartner_CreditLimit.class);\n\n\t\tassertThat(first.isPresent()).isFalse();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_CreditLimit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_CreditLimit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1290,
    "annotation": "\n\t@Given(\"metasfresh contains C_BPartner_Locations:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_BPartner_Locations:\")\n\tpublic void createC_BPartner_Location(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createC_BPartner_Location);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Location_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Location_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1291,
    "annotation": "\n\t@Given(\"update C_BPartner_Location:\")",
    "glue_code": "\t@Given(\"update C_BPartner_Location:\")\n\tpublic void update_C_BPartner_Location(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateCBPartnerLocation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Location_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Location_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1292,
    "annotation": "\n\t@Given(\"update C_Location of the following C_BPartner_Location\")",
    "glue_code": "\t@Given(\"update C_Location of the following C_BPartner_Location\")\n\tpublic void update_C_Location_of_the_C_BPartner_Location(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateLocationOfTheBPartnerLocation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Location_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Location_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1293,
    "annotation": "\n\t@Given(\"load C_BPartner_Location:\")",
    "glue_code": "\t@Given(\"load C_BPartner_Location:\")\n\tpublic void load_bpartner_location(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::load_bpartner_location);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 101,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Location_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Location_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1294,
    "annotation": "\n\t@And(\"validate C_BPartner_Location:\")",
    "glue_code": "\t@And(\"validate C_BPartner_Location:\")\n\tpublic void validate_C_BPartner_Location(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bpLocationIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Location.COLUMNNAME_C_BPartner_Location_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner_Location bpLocation = bPartnerLocationTable.get(bpLocationIdentifier);\n\n\t\t\tfinal String bpIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Location.COLUMNNAME_C_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartnerRecord = bPartnerTable.get(bpIdentifier);\n\t\t\tsoftly.assertThat(bpLocation.getC_BPartner_ID()).as(\"C_BPartner_ID\").isEqualTo(bPartnerRecord.getC_BPartner_ID());\n\n\t\t\tfinal String address = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_Address);\n\t\t\tif (Check.isNotBlank(address))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpLocation.getAddress()).as(\"Address\").isEqualTo(address);\n\t\t\t}\n\n\t\t\tfinal String name = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_Name);\n\t\t\tif (Check.isNotBlank(name))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bpLocation.getName()).as(\"Name\").isEqualTo(name);\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 285,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Location_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Location_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1244,
    "annotation": "\n\t@And(\"locate bpartner product by product and bpartner\")",
    "glue_code": "\t@And(\"locate bpartner product by product and bpartner\")\n\tpublic void locate_bpartnerProduct_by_product_and_bpartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tlocateBPartnerProductByProductAndBPartner(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 66,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1245,
    "annotation": "\n\t@Then(\"verify bpartner product info\")",
    "glue_code": "\t@Then(\"verify bpartner product info\")\n\tpublic void verify_bpartner_product_info(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> productTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : productTableList)\n\t\t{\n\t\t\tverifyBPartnerProductInfo(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1246,
    "annotation": "\n\t@Given(\"metasfresh contains C_BPartner_Product\")",
    "glue_code": "\t@Given(\"metasfresh contains C_BPartner_Product\")\n\tpublic void create_C_BPartner_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> productTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : productTableList)\n\t\t{\n\t\t\tcreateBPartnerProduct(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1268,
    "annotation": "\n\t@And(\"upsert C_BPartner_Stats\")",
    "glue_code": "\t@And(\"upsert C_BPartner_Stats\")\n\tpublic void upsert_c_bpartner_stats(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupsertCBPartnerStats(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Stats_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Stats_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1269,
    "annotation": "\n\t@And(\"validate C_BPartner_Stats\")",
    "glue_code": "\t@And(\"validate C_BPartner_Stats\")\n\tpublic void validate_C_BPartner_Stats_for_BP(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Stats.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String creditStatus = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_BPartner_Stats.COLUMNNAME_SOCreditStatus);\n\t\t\tfinal BigDecimal creditUsed = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_BPartner_Stats.COLUMNNAME_SO_CreditUsed);\n\n\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bPartnerIdentifier);\n\t\t\tassertThat(bPartner).isNotNull();\n\n\t\t\tfinal I_C_BPartner_Stats bPartnerStats = queryBL.createQueryBuilder(I_C_BPartner_Stats.class)\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_Stats.COLUMNNAME_C_BPartner_ID, bPartner.getC_BPartner_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_BPartner_Stats.class);\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tif (Check.isNotBlank(creditStatus))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerStats.getSOCreditStatus()).isEqualTo(creditStatus);\n\t\t\t}\n\n\t\t\tif (creditUsed != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerStats.getSO_CreditUsed()).isEqualTo(creditUsed);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_Stats_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_Stats_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1248,
    "annotation": "\n\t@Given(\"metasfresh contains C_BPartners:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_BPartners:\")\n\tpublic void metasfresh_contains_c_bpartners(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> createC_BPartner(row, true));\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 128,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1249,
    "annotation": "\n\t@Given(\"metasfresh contains C_BPartners without locations:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_BPartners without locations:\")\n\tpublic void metasfresh_contains_c_bpartners_without_locations(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> createC_BPartner(row, false));\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 134,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1250,
    "annotation": "\n\t@And(\"preexisting test data is put into tableData\")",
    "glue_code": "\t@And(\"preexisting test data is put into tableData\")\n\tpublic void store_test_data_in_table_data(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal int bpartnerId = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_C_BPartner_ID);\n\t\t\tfinal I_C_BPartner bPartner = bpartnerDAO.getById(bpartnerId);\n\t\t\tassertThat(bPartner).isNotNull();\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tbPartnerTable.put(bpartnerIdentifier, bPartner);\n\n\t\t\tfinal int bpartnerLocationId = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_C_BPartner_Location_ID);\n\t\t\tfinal BPartnerLocationId bPartnerLocationId = BPartnerLocationId.ofRepoId(bpartnerId, bpartnerLocationId);\n\n\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bpartnerDAO.getBPartnerLocationByIdInTrx(bPartnerLocationId);\n\t\t\tassertThat(bPartnerLocation).isNotNull();\n\n\t\t\tfinal String bpartnerLocationIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tbPartnerLocationTable.put(bpartnerLocationIdentifier, bPartnerLocation);\n\n\t\t\tfinal int productId = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_M_Product_ID);\n\n\t\t\tfinal I_M_Product product = productDAO.getById(productId);\n\t\t\tassertThat(product).isNotNull();\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tproductTable.put(productIdentifier, product);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 140,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1251,
    "annotation": "\n\t@And(\"the following c_bpartner is changed\")",
    "glue_code": "\t@And(\"the following c_bpartner is changed\")\n\tpublic void change_bpartner(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_C_BPartner_ID)\n\t\t\t\t.forEach(this::changeBPartner);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 172,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1252,
    "annotation": "\n\t@And(\"locate bpartner by external identifier\")",
    "glue_code": "\t@And(\"locate bpartner by external identifier\")\n\tpublic void locate_bpartner_by_external_identifier(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tlocate_bpartner_by_external_identifier(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 180,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1253,
    "annotation": "\n\t@Given(\"load C_BPartner:\")",
    "glue_code": "\t@Given(\"load C_BPartner:\")\n\tpublic void load_bpartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tload_bpartner(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 190,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1254,
    "annotation": "\n\t@Given(\"update C_BPartner:\")",
    "glue_code": "\t@Given(\"update C_BPartner:\")\n\tpublic void update_c_bpartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateBPartner(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 200,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1255,
    "annotation": "\n\t@And(\"validate C_BPartner:\")",
    "glue_code": "\t@And(\"validate C_BPartner:\")\n\tpublic void validate_C_BPartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bpIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartnerRecord = bPartnerTable.get(bpIdentifier);\n\n\t\t\tfinal String bpValue = DataTableUtil.extractStringForColumnName(row, I_C_BPartner.COLUMNNAME_Value);\n\t\t\tsoftly.assertThat(bPartnerRecord.getValue()).as(\"Value\").isEqualTo(bpValue);\n\n\t\t\tfinal String companyName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_BPartner.COLUMNNAME_CompanyName);\n\t\t\tif (Check.isNotBlank(companyName))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getCompanyName()).as(\"CompanyName\").isEqualTo(companyName);\n\t\t\t}\n\n\t\t\tfinal String vaTaxID = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_BPartner.COLUMNNAME_VATaxID);\n\t\t\tif (Check.isNotBlank(vaTaxID))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getVATaxID()).as(\"VATaxID\").isEqualTo(vaTaxID);\n\t\t\t}\n\n\t\t\tfinal Boolean isManuallyCreated = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_BPartner.COLUMNNAME_IsManuallyCreated, false);\n\t\t\tsoftly.assertThat(bPartnerRecord.isManuallyCreated()).as(\"IsManuallyCreated\").isEqualTo(isManuallyCreated);\n\n\t\t\tfinal String paymentTermIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.C_PaymentTerm_ID\" + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(paymentTermIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_PaymentTerm paymentTerm = paymentTermTable.get(paymentTermIdentifier);\n\t\t\t\tsoftly.assertThat(paymentTerm.getC_PaymentTerm_ID()).as(\"C_PaymentTerm_ID\").isEqualTo(bPartnerRecord.getC_PaymentTerm_ID());\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 456,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1256,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_BPartner are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_BPartner are found:$\")\n\tpublic void validate_created_c_bPartners(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> tableRow : dataTable)\n\t\t{\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal IQueryBuilder<I_C_BPartner> query = queryBL.createQueryBuilder(I_C_BPartner.class);\n\n\t\t\tfinal String bPartnerName = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_Name);\n\t\t\tif (!Check.isEmpty(bPartnerName))\n\t\t\t{\n\t\t\t\tquery.addEqualsFilter(I_C_BPartner.COLUMNNAME_Name, bPartnerName);\n\t\t\t}\n\n\t\t\tfinal String bPartnerValue = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_Value);\n\t\t\tif (!Check.isEmpty(bPartnerValue))\n\t\t\t{\n\t\t\t\tquery.addEqualsFilter(I_C_BPartner.COLUMNNAME_Value, bPartnerValue);\n\t\t\t}\n\n\t\t\tfinal int orgId = Optional.ofNullable(DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_AD_Org_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER))\n\t\t\t\t\t.map(orgTable::get)\n\t\t\t\t\t.map(I_AD_Org::getAD_Org_ID)\n\t\t\t\t\t.orElse(StepDefConstants.ORG_ID.getRepoId());\n\t\t\tquery.addEqualsFilter(I_C_BPartner.COLUMNNAME_AD_Org_ID, orgId);\n\n\t\t\tfinal Supplier<Boolean> QueryExecutor = () -> {\n\t\t\t\tfinal I_C_BPartner bPartnerRecord = query.create().firstOnly(I_C_BPartner.class);\n\n\t\t\t\tif (bPartnerRecord == null)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tbPartnerTable.putOrReplace(bPartnerIdentifier, bPartnerRecord);\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, QueryExecutor);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 495,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1257,
    "annotation": "\n\t@Given(\"C_BPartner_MoveToAnotherOrg is invoked with parameters:\")",
    "glue_code": "\t@Given(\"C_BPartner_MoveToAnotherOrg is invoked with parameters:\")\n\tpublic void C_BPartner_MoveToAnotherOrg(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_BPartner.COLUMNNAME_C_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartnerRecord = bPartnerTable.get(bPartnerIdentifier);\n\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_Org.COLUMNNAME_AD_Org_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Org orgRecord = orgTable.get(orgIdentifier);\n\n\t\t\tfinal Timestamp changeDate = DataTableUtil.extractDateTimestampForColumnName(tableRow, PARAM_DATE_ORG_CHANGE);\n\n\t\t\tfinal AdProcessId processId = adProcessDAO.retrieveProcessIdByClass(C_BPartner_MoveToAnotherOrg.class);\n\n\t\t\tfinal ProcessInfo.ProcessInfoBuilder processInfoBuilder = ProcessInfo.builder();\n\t\t\tprocessInfoBuilder.setAD_Process_ID(processId.getRepoId());\n\t\t\tprocessInfoBuilder.setRecord(I_C_BPartner.Table_Name, bPartnerRecord.getC_BPartner_ID());\n\t\t\tprocessInfoBuilder.addParameter(PARAM_AD_ORG_TARGET_ID, orgRecord.getAD_Org_ID());\n\t\t\tprocessInfoBuilder.addParameter(PARAM_DATE_ORG_CHANGE, changeDate);\n\t\t\tprocessInfoBuilder.addParameter(PARAM_IS_SHOW_MEMBERSHIP_PARAMETER, false);\n\n\t\t\tprocessInfoBuilder\n\t\t\t\t\t.buildAndPrepareExecution()\n\t\t\t\t\t.executeSync()\n\t\t\t\t\t.getResult();\n\t\t}\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 538,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1264,
    "annotation": "\n\t@And(\"load C_Conversion_Rate:\")",
    "glue_code": "\t@And(\"load C_Conversion_Rate:\")\n\tpublic void createC_Conversion_Rate(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadConversionRate(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Conversion_Rate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Conversion_Rate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1265,
    "annotation": "\n\t@And(\"validate C_Conversion_Rate:\")",
    "glue_code": "\t@And(\"validate C_Conversion_Rate:\")\n\tpublic void validateC_Conversion_Rate(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateConversionRate(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 66,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Conversion_Rate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Conversion_Rate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1266,
    "annotation": "\n\t@And(\"load C_Currency:\")",
    "glue_code": "\t@And(\"load C_Currency:\")\n\tpublic void load_C_Currency(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : rows)\n\t\t{\n\t\t\tloadCurrency(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Currency_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Currency_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1267,
    "annotation": "\n\t@And(\"load C_Currency by ISO Code:\")",
    "glue_code": "\t@And(\"load C_Currency by ISO Code:\")\n\tpublic void metasfresh_contains_C_Currency(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String isoCode = DataTableUtil.extractStringForColumnName(row, I_C_Currency.COLUMNNAME_ISO_Code);\n\n\t\t\tfinal I_C_Currency currency = queryBL.createQueryBuilder(I_C_Currency.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Currency.COLUMNNAME_ISO_Code, isoCode)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Currency.class);\n\n\t\t\tfinal String currencyIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Currency.COLUMNNAME_C_Currency_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tcurrencyTable.putOrReplace(currencyIdentifier, currency);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Currency_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Currency_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1295,
    "annotation": "\n\t@And(\"load C_ElementValue:\")",
    "glue_code": "\t@And(\"load C_ElementValue:\")\n\tpublic void load_C_ElementValue(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tloadElementValue(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 52,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_ElementValue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_ElementValue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1287,
    "annotation": "\n\t@And(\"load C_Element:\")",
    "glue_code": "\t@And(\"load C_Element:\")\n\tpublic void load_C_Element(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tloadElement(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 44,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Element_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Element_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1288,
    "annotation": "\n\t@And(\"metasfresh contains C_Location:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Location:\")\n\tpublic void add_C_Location(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_C_Location location = newInstanceOutOfTrx(I_C_Location.class);\n\t\t\tassertThat(location).isNotNull();\n\n\t\t\tfinal String countryCode = DataTableUtil.extractStringForColumnName(row, I_C_Country.COLUMNNAME_CountryCode);\n\t\t\tfinal I_C_Country country = queryBL.createQueryBuilder(I_C_Country.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Country.COLUMNNAME_CountryCode, countryCode)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Country.class);\n\n\t\t\tlocation.setC_Country_ID(country.getC_Country_ID());\n\n\t\t\tfinal String address1 = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Location.COLUMNNAME_Address1);\n\t\t\tfinal String postalCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Location.COLUMNNAME_Postal);\n\t\t\tfinal String city = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Location.COLUMNNAME_City);\n\t\t\tfinal String regionName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Location.COLUMNNAME_RegionName);\n\t\t\tfinal boolean isActive = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_Location.COLUMNNAME_IsActive, true);\n\n\t\t\tlocation.setAddress1(address1);\n\t\t\tlocation.setPostal(postalCode);\n\t\t\tlocation.setCity(city);\n\t\t\tlocation.setRegionName(regionName);\n\t\t\tlocation.setIsActive(isActive);\n\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Location.COLUMNNAME_AD_Org_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orgIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_Org org = orgTable.get(orgIdentifier);\n\t\t\t\tlocation.setAD_Org_ID(org.getAD_Org_ID());\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(location);\n\n\t\t\tfinal String locationIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tlocationTable.put(locationIdentifier, location);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Location_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Location_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1296,
    "annotation": "\n\t@Given(\"metasfresh contains C_OrderLines:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_OrderLines:\")\n\tpublic void metasfresh_contains_c_order_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_C_OrderLine.COLUMNNAME_C_OrderLine_ID)\n\t\t\t\t.forEach(tableRow -> {\n\t\t\t\t\tfinal de.metas.handlingunits.model.I_C_OrderLine orderLine = newInstance(de.metas.handlingunits.model.I_C_OrderLine.class);\n\t\t\t\t\torderLine.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\n\t\t\t\t\tfinal StepDefDataIdentifier productIdentifier = tableRow.getAsIdentifier(COLUMNNAME_M_Product_ID);\n\t\t\t\t\tfinal ProductId productId = productTable.getIdOptional(productIdentifier)\n\t\t\t\t\t\t\t.orElseGet(() -> productIdentifier.getAsId(ProductId.class));\n\n\t\t\t\t\torderLine.setM_Product_ID(productId.getRepoId());\n\t\t\t\t\torderLine.setQtyEntered(tableRow.getAsBigDecimal(I_C_OrderLine.COLUMNNAME_QtyEntered));\n\n\t\t\t\t\ttableRow.getAsOptionalIdentifier(I_C_OrderLine.COLUMNNAME_M_AttributeSetInstance_ID)\n\t\t\t\t\t\t\t.map(attributeSetInstanceTable::getId)\n\t\t\t\t\t\t\t.ifPresent(asiId -> orderLine.setM_AttributeSetInstance_ID(asiId.getRepoId()));\n\n\t\t\t\t\tfinal OrderId orderId = tableRow.getAsIdentifier(I_C_OrderLine.COLUMNNAME_C_Order_ID).lookupIdIn(orderTable);\n\t\t\t\t\torderLine.setC_Order_ID(orderId.getRepoId());\n\n\t\t\t\t\ttableRow.getAsOptionalIdentifier(I_C_OrderLine.COLUMNNAME_C_BPartner_ID)\n\t\t\t\t\t\t\t.map(partnerTable::getId)\n\t\t\t\t\t\t\t.ifPresent(bpartnerId -> orderLine.setC_BPartner_ID(bpartnerId.getRepoId()));\n\n\t\t\t\t\tfinal String flatrateConditionsIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(flatrateConditionsIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Flatrate_Conditions flatrateConditions = flatrateConditionsTable.get(flatrateConditionsIdentifier);\n\t\t\t\t\t\torderLine.setC_Flatrate_Conditions_ID(flatrateConditions.getC_Flatrate_Conditions_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\ttableRow.getAsOptionalIdentifier(de.metas.handlingunits.model.I_C_OrderLine.COLUMNNAME_M_HU_PI_Item_Product_ID)\n\t\t\t\t\t\t\t.ifPresent(itemProductIdentifier -> {\n\t\t\t\t\t\t\t\tif (itemProductIdentifier.isNullPlaceholder())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\torderLine.setM_HU_PI_Item_Product_ID(-1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfinal HUPIItemProductId huPiItemProductId = huPiItemProductTable.getIdOptional(itemProductIdentifier)\n\t\t\t\t\t\t\t\t\t\t\t.orElseGet(() -> itemProductIdentifier.getAsId(HUPIItemProductId.class));\n\n\t\t\t\t\t\t\t\t\torderLine.setM_HU_PI_Item_Product_ID(huPiItemProductId.getRepoId());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\tfinal BigDecimal qtyEnteredTU = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, de.metas.handlingunits.model.I_C_OrderLine.COLUMNNAME_QtyEnteredTU);\n\t\t\t\t\tif (qtyEnteredTU != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torderLine.setQtyEnteredTU(qtyEnteredTU);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal BigDecimal qtyItemCapacity = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_QtyItemCapacity);\n\t\t\t\t\tif (qtyItemCapacity != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torderLine.setQtyItemCapacity(qtyItemCapacity);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(warehouseIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_M_Warehouse warehouse = warehouseTable.get(warehouseIdentifier);\n\t\t\t\t\t\tassertThat(warehouse).isNotNull();\n\n\t\t\t\t\t\torderLine.setM_Warehouse_ID(warehouse.getM_Warehouse_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String shipperIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_M_Shipper_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(shipperIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\t\t\t\tassertThat(shipper).isNotNull();\n\n\t\t\t\t\t\torderLine.setM_Shipper_ID(shipper.getM_Shipper_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal ZonedDateTime datePromised = DataTableUtil.extractZonedDateTimeOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_DatePromised);\n\t\t\t\t\tif (datePromised != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torderLine.setDatePromised(TimeUtil.asTimestamp(datePromised));\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String bpLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(bpLocationIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(bpLocationIdentifier);\n\t\t\t\t\t\tassertThat(bPartnerLocation).isNotNull();\n\t\t\t\t\t\torderLine.setC_BPartner_Location_ID(bPartnerLocation.getC_BPartner_Location_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String currencyIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_Currency_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(currencyIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Currency currency = currencyTable.get(currencyIdentifier);\n\t\t\t\t\t\tassertThat(currency).isNotNull();\n\n\t\t\t\t\t\torderLine.setC_Currency_ID(currency.getC_Currency_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal Timestamp dateOrdered = DataTableUtil.extractDateTimestampForColumnNameOrNull(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_DateOrdered);\n\t\t\t\t\tif (dateOrdered != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torderLine.setDateOrdered(dateOrdered);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String uomX12DE355 = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_UOM_ID + \".\" + I_C_UOM.COLUMNNAME_X12DE355);\n\t\t\t\t\tif (Check.isNotBlank(uomX12DE355))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal UomId uomId = queryBL.createQueryBuilder(I_C_UOM.class)\n\t\t\t\t\t\t\t\t.addEqualsFilter(I_C_UOM.COLUMNNAME_X12DE355, uomX12DE355)\n\t\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t.firstIdOnly(UomId::ofRepoIdOrNull);\n\t\t\t\t\t\tassertThat(uomId).as(\"Found no C_UOM with X12DE355=%s\", uomX12DE355).isNotNull();\n\t\t\t\t\t\torderLine.setC_UOM_ID(UomId.toRepoId(uomId));\n\t\t\t\t\t}\n\n\t\t\t\t\ttableRow.getAsOptionalBigDecimal(\"Price\")\n\t\t\t\t\t\t\t.ifPresent(price -> {\n\t\t\t\t\t\t\t\torderLine.setIsManualPrice(true);\n\t\t\t\t\t\t\t\torderLine.setPriceEntered(price);\n\t\t\t\t\t\t\t\torderLine.setPriceActual(price);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\ttableRow.getAsOptionalString(I_C_OrderLine.COLUMNNAME_Description)\n\t\t\t\t\t\t\t.ifPresent(orderLine::setDescription);\n\n\t\t\t\t\tsaveRecord(orderLine);\n\n\t\t\t\t\torderLineTable.putOrReplace(tableRow.getAsIdentifier(), orderLine);\n\t\t\t\t});\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 173,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1297,
    "annotation": "\n\t@Then(\"the purchase order {string} with document subtype {string} linked to order {string} has lines:\")",
    "glue_code": "\t@Then(\"the purchase order {string} with document subtype {string} linked to order {string} has lines:\")\n\tpublic void thePurchaseOrderLinkedToOrderO_HasLines(\n\t\t\t@NonNull final String orderIdentifier,\n\t\t\t@Nullable final String docSubType,\n\t\t\t@NonNull final String linkedOrderIdentifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal I_C_Order purchaseOrder = queryBL\n\t\t\t\t.createQueryBuilder(I_C_Order.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_Order.COLUMNNAME_Link_Order_ID, orderTable.get(linkedOrderIdentifier).getC_Order_ID())\n\t\t\t\t.create().firstOnly(I_C_Order.class);\n\n\t\tsoftly.assertThat(purchaseOrder).isNotNull();\n\t\torderTable.putOrReplace(orderIdentifier, purchaseOrder);\n\n\t\tfinal I_C_DocType docType = queryBL\n\t\t\t\t.createQueryBuilder(I_C_DocType.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_DocType.COLUMN_C_DocType_ID, purchaseOrder.getC_DocTypeTarget_ID())\n\t\t\t\t.create().firstOnly(I_C_DocType.class);\n\n\t\tsoftly.assertThat(docType).isNotNull();\n\n\t\tif (Check.isNotBlank(docSubType))\n\t\t{\n\t\t\tsoftly.assertThat(docType.getDocSubType()).as(I_C_DocType.COLUMNNAME_DocSubType).isEqualTo(docSubType);\n\t\t}\n\n\t\tfinal List<I_C_OrderLine> purchaseOrderLines = queryBL\n\t\t\t\t.createQueryBuilder(I_C_OrderLine.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_C_Order_ID, purchaseOrder.getC_Order_ID())\n\t\t\t\t.create()\n\t\t\t\t.list(I_C_OrderLine.class);\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal BigDecimal qtyOrdered = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_QtyOrdered);\n\t\t\tfinal BigDecimal netAmt = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_LineNetAmt);\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".Identifier\");\n\t\t\tfinal String partnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_BPartner_ID + \".Identifier\");\n\t\t\tfinal int partnerId = Check.isBlank(partnerIdentifier) ? 0 : partnerTable.get(partnerIdentifier).getC_BPartner_ID();\n\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal ZonedDateTime datePromised = DataTableUtil.extractZonedDateTimeOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_DatePromised);\n\n\t\t\tboolean linePresent = false;\n\n\t\t\tfor (final I_C_OrderLine orderLine : purchaseOrderLines)\n\t\t\t{\n\t\t\t\tlinePresent = orderLine.getLineNetAmt().compareTo(netAmt) == 0\n\t\t\t\t\t\t&& orderLine.getQtyOrdered().compareTo(qtyOrdered) == 0\n\t\t\t\t\t\t&& orderLine.getM_Product_ID() == productTable.get(productIdentifier).getM_Product_ID();\n\t\t\t\tif (partnerId > 0)\n\t\t\t\t{\n\t\t\t\t\tlinePresent = linePresent && orderLine.getC_BPartner_ID() == partnerId;\n\t\t\t\t}\n\n\t\t\t\tif (Check.isNotBlank(warehouseIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_Warehouse warehouse = warehouseTable.get(warehouseIdentifier);\n\t\t\t\t\tsoftly.assertThat(warehouse).isNotNull();\n\n\t\t\t\t\tlinePresent = linePresent && (orderLine.getM_Warehouse_ID() == warehouse.getM_Warehouse_ID());\n\t\t\t\t}\n\n\t\t\t\tif (datePromised != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(orderLine.getDatePromised()).as(I_C_OrderLine.COLUMNNAME_DatePromised).isNotNull();\n\t\t\t\t\tlinePresent = linePresent && (orderLine.getDatePromised().equals(TimeUtil.asTimestamp(datePromised)));\n\t\t\t\t}\n\n\t\t\t\tif (linePresent)\n\t\t\t\t{\n\t\t\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\torderLineTable.putOrReplace(orderLineIdentifier, orderLine);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsoftly.assertThat(linePresent).isTrue();\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 309,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1298,
    "annotation": "\n\t@And(\"validate the created order lines\")",
    "glue_code": "\t@And(\"validate the created order lines\")\n\tpublic void validate_created_order_lines(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(row, \"C_Order_ID.Identifier\");\n\n\t\t\tfinal I_C_Order orderRecord = orderTable.get(orderIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_OLCand.COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedProductId = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\n\t\t\tfinal BigDecimal qtyOrdered = DataTableUtil.extractBigDecimalForColumnName(row, I_C_OrderLine.COLUMNNAME_QtyOrdered);\n\n\t\t\t//dev-note: we assume the tests are not using the same product on different lines\n\t\t\tfinal I_C_OrderLine orderLineRecord = queryBL.createQueryBuilder(I_C_OrderLine.class)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_C_Order_ID, orderRecord.getC_Order_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_M_Product_ID, expectedProductId)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_QtyOrdered, qtyOrdered)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_OrderLine.class);\n\n\t\t\tvalidateOrderLine(orderLineRecord, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 402,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1299,
    "annotation": "\n\t@And(\"validate C_OrderLine:\")",
    "glue_code": "\t@And(\"validate C_OrderLine:\")\n\tpublic void validate_C_OrderLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> table = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : table)\n\t\t{\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_OrderLine.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\tassertThat(orderLine).isNotNull();\n\n\t\t\tInterfaceWrapperHelper.refresh(orderLine);\n\n\t\t\tvalidateOrderLine(orderLine, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 431,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1300,
    "annotation": "\n\t@And(\"update C_OrderLine:\")",
    "glue_code": "\t@And(\"update C_OrderLine:\")\n\tpublic void update_C_OrderLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> table = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : table)\n\t\t{\n\t\t\tfinal String olIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_OrderLine.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal de.metas.handlingunits.model.I_C_OrderLine orderLine = InterfaceWrapperHelper.create(orderLineTable.get(olIdentifier), de.metas.handlingunits.model.I_C_OrderLine.class);\n\n\t\t\tfinal String contractIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_OrderLine.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tif (Check.isNotBlank(contractIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Flatrate_Term contract = contractTable.get(contractIdentifier);\n\n\t\t\t\torderLine.setC_Flatrate_Term_ID(contract.getC_Flatrate_Term_ID());\n\t\t\t}\n\n\t\t\tfinal BigDecimal updatedQtyEntered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_OrderLine.COLUMNNAME_QtyEntered);\n\t\t\tif (updatedQtyEntered != null)\n\t\t\t{\n\t\t\t\torderLine.setQtyEntered(updatedQtyEntered);\n\t\t\t}\n\n\t\t\tfinal String piItemProductIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + de.metas.handlingunits.model.I_C_OrderLine.COLUMNNAME_M_HU_PI_Item_Product_ID);\n\t\t\tif (Check.isNotBlank(piItemProductIdentifier))\n\t\t\t{\n\t\t\t\tfinal Integer piItemProductId = huPiItemProductTable.getOptional(piItemProductIdentifier)\n\t\t\t\t\t\t.map(I_M_HU_PI_Item_Product::getM_HU_PI_Item_Product_ID)\n\t\t\t\t\t\t.orElseGet(() -> Integer.parseInt(piItemProductIdentifier));\n\n\t\t\t\torderLine.setM_HU_PI_Item_Product_ID(piItemProductId);\n\t\t\t}\n\n\t\t\tfinal String attributeSetInstanceIdentifier = DataTableUtil.extractNullableStringForColumnName(row, \"OPT.\" + COLUMNNAME_M_AttributeSetInstance_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (de.metas.util.Check.isNotBlank(attributeSetInstanceIdentifier))\n\t\t\t{\n\t\t\t\tfinal String asiIdentifierValue = DataTableUtil.nullToken2Null(attributeSetInstanceIdentifier);\n\t\t\t\tif (asiIdentifierValue == null)\n\t\t\t\t{\n\t\t\t\t\torderLine.setM_AttributeSetInstance_ID(-1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_AttributeSetInstance attributeSetInstance = attributeSetInstanceTable.get(attributeSetInstanceIdentifier);\n\t\t\t\t\tassertThat(attributeSetInstance).isNotNull();\n\n\t\t\t\t\torderLine.setM_AttributeSetInstance_ID(attributeSetInstance.getM_AttributeSetInstance_ID());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfinal BigDecimal updatedQtyOrdered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_OrderLine.COLUMNNAME_QtyOrdered);\n\t\t\tif (updatedQtyOrdered != null)\n\t\t\t{\n\t\t\t\torderLine.setQtyOrdered(updatedQtyOrdered);\n\t\t\t}\n\n\t\t\tsaveRecord(orderLine);\n\n\t\t\torderLineTable.putOrReplace(olIdentifier, orderLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 447,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1301,
    "annotation": "\n\t@And(\"^delete C_OrderLine identified by (.*), but keep its id into identifierIds table$\")",
    "glue_code": "\t@And(\"^delete C_OrderLine identified by (.*), but keep its id into identifierIds table$\")\n\tpublic void delete_orderLine(@NonNull final String orderLineIdentifier)\n\t{\n\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\tidentifierIdsTable.put(orderLineIdentifier, orderLine.getC_OrderLine_ID());\n\t\tInterfaceWrapperHelper.delete(orderLine);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 510,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1302,
    "annotation": "\n\t@And(\"load C_Order from C_OrderLine\")",
    "glue_code": "\t@And(\"load C_Order from C_OrderLine\")\n\tpublic void loadC_Order(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> table = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : table)\n\t\t{\n\t\t\tloadC_Order(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 518,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1303,
    "annotation": "\n\t@Given(\"metasfresh contains C_OrderLine expecting error:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_OrderLine expecting error:\")\n\tpublic void metasfresh_contains_c_order_lines_expecting_error(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tif (tableRows.size() > 1)\n\t\t{\n\t\t\tthrow new IllegalArgumentException(\"Multiple rows are not supported!\");\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tmetasfresh_contains_c_order_lines(dataTable);\n\n\t\t\tAssertions.fail(\"An Exception should have been thrown !\");\n\t\t}\n\t\tcatch (final AdempiereException exception)\n\t\t{\n\t\t\tfinal String errorCode = DataTableUtil.extractStringOrNullForColumnName(tableRows.get(0), \"ErrorCode\");\n\n\t\t\tassertThat(exception.getErrorCode()).isEqualTo(errorCode);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 541,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1304,
    "annotation": "\n\t@Given(\"^the order line identified by (.*) is (deleted) expecting error$\")",
    "glue_code": "\t@Given(\"^the order line identified by (.*) is (deleted) expecting error$\")\n\tpublic void order_action_expecting_error(@NonNull final String orderLineIdentifier, @NonNull final String action, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tboolean errorThrown = false;\n\n\t\ttry\n\t\t{\n\t\t\torderLineAction(orderLineIdentifier, action);\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\terrorThrown = true;\n\n\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tif (errorMessageIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t}\n\t\t}\n\n\t\tassertThat(errorThrown).isTrue();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 799,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1273,
    "annotation": "\n\t@Given(\"metasfresh contains C_Orders:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Orders:\")\n\tpublic void metasfresh_contains_c_orders(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_C_Order_ID)\n\t\t\t\t.forEach(tableRow -> {\n\t\t\t\t\tfinal String poReference = tableRow.getAsOptionalName(I_C_Order.COLUMNNAME_POReference).orElse(null);\n\t\t\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_Description);\n\t\t\t\t\tfinal int paymentTermId = tableRow.getAsOptionalInt(I_C_Order.COLUMNNAME_C_PaymentTerm_ID).orElse(-1);\n\t\t\t\t\tfinal StepDefDataIdentifier pricingSystemIdentifier = tableRow.getAsOptionalIdentifier(COLUMNNAME_M_PricingSystem_ID).orElse(null);\n\t\t\t\t\tfinal Boolean isSOTrx = tableRow.getAsOptionalBoolean(I_C_Order.COLUMNNAME_IsSOTrx).toBooleanOrNull();\n\t\t\t\t\tfinal DocBaseType docBaseType = Optionals.firstPresentOfSuppliers(\n\t\t\t\t\t\t\t() -> tableRow.getAsOptionalEnum(COLUMNNAME_DocBaseType, DocBaseType.class),\n\t\t\t\t\t\t\t() -> isSOTrx != null && !isSOTrx ? Optional.of(DocBaseType.PurchaseOrder) : Optional.empty() // if we don't do this, MOrder.beforeSave will automatically set IsSOTrx=true because C_DocTypeTarget_ID is not set \n\t\t\t\t\t).orElse(null);\n\n\t\t\t\t\tfinal int dropShipPartnerId = DataTableUtil.extractIntOrMinusOneForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DropShip_BPartner_ID);\n\t\t\t\t\tfinal Boolean isDropShip = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_IsDropShip, false);\n\n\t\t\t\t\tfinal int orgId = Optional.ofNullable(DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER))\n\t\t\t\t\t\t\t.map(orgTable::get)\n\t\t\t\t\t\t\t.map(I_AD_Org::getAD_Org_ID)\n\t\t\t\t\t\t\t.orElse(StepDefConstants.ORG_ID.getRepoId());\n\n\t\t\t\t\tfinal StepDefDataIdentifier bpartnerIdentifier = tableRow.getAsIdentifier(COLUMNNAME_C_BPartner_ID);\n\t\t\t\t\tfinal BPartnerId bpartnerId = bpartnerTable.getIdOptional(bpartnerIdentifier)\n\t\t\t\t\t\t\t.orElseGet(() -> bpartnerIdentifier.getAsId(BPartnerId.class));\n\n\t\t\t\t\tfinal I_C_Order order = newInstance(I_C_Order.class);\n\t\t\t\t\torder.setC_BPartner_ID(bpartnerId.getRepoId());\n\t\t\t\t\tif (isSOTrx != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setIsSOTrx(isSOTrx);\n\t\t\t\t\t}\n\t\t\t\t\torder.setDateOrdered(tableRow.getAsLocalDateTimestamp(I_C_Order.COLUMNNAME_DateOrdered));\n\t\t\t\t\torder.setDropShip_BPartner_ID(dropShipPartnerId);\n\t\t\t\t\torder.setIsDropShip(isDropShip);\n\t\t\t\t\torder.setAD_Org_ID(orgId);\n\n\t\t\t\t\tif (paymentTermId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setC_PaymentTerm_ID(paymentTermId);\n\t\t\t\t\t}\n\n\t\t\t\t\ttableRow.getAsOptionalIdentifier(I_C_Order.COLUMNNAME_C_BPartner_Location_ID)\n\t\t\t\t\t\t\t.map(bpartnerLocationTable::getId)\n\t\t\t\t\t\t\t.ifPresent(bpLocationId -> order.setC_BPartner_Location_ID(bpLocationId.getRepoId()));\n\n\t\t\t\t\tfinal String userIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(userIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_AD_User user = userTable.get(userIdentifier);\n\t\t\t\t\t\torder.setAD_User_ID(user.getAD_User_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String billBPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_Bill_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(billBPartnerIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_BPartner billBPartner = bpartnerTable.get(billBPartnerIdentifier);\n\t\t\t\t\t\torder.setBill_BPartner_ID(billBPartner.getC_BPartner_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String bpBillLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_Bill_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(bpBillLocationIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_BPartner_Location billBPartnerLocation = bpartnerLocationTable.get(bpBillLocationIdentifier);\n\t\t\t\t\t\torder.setBill_BPartner_ID(billBPartnerLocation.getC_BPartner_ID());\n\t\t\t\t\t\torder.setBill_Location_ID(billBPartnerLocation.getC_BPartner_Location_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String deliveryRule = tableRow.getAsOptionalString(I_C_Order.COLUMNNAME_DeliveryRule).orElse(null);\n\t\t\t\t\tif (Check.isNotBlank(deliveryRule))\n\t\t\t\t\t{\n\t\t\t\t\t\t// note that IF the C_BPartner has a deliveryRule set, this values will be overwritten by it\n\t\t\t\t\t\torder.setDeliveryRule(deliveryRule);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String deliveryViaRule = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_DeliveryViaRule);\n\t\t\t\t\tif (Check.isNotBlank(deliveryViaRule))\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setDeliveryViaRule(deliveryViaRule);\n\t\t\t\t\t}\n\n\t\t\t\t\ttableRow.getAsOptionalString(I_C_Order.COLUMNNAME_InvoiceRule).ifPresent(order::setInvoiceRule);\n\n\t\t\t\t\tfinal String paymentTermValue = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_C_PaymentTerm_ID + \".Value\");\n\t\t\t\t\tif (de.metas.util.Check.isNotBlank(paymentTermValue))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_PaymentTerm paymentTerm = queryBL.createQueryBuilder(I_C_PaymentTerm.class)\n\t\t\t\t\t\t\t\t.addEqualsFilter(I_C_PaymentTerm.COLUMNNAME_Value, paymentTermValue)\n\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t.firstOnlyNotNull(I_C_PaymentTerm.class);\n\n\t\t\t\t\t\torder.setC_PaymentTerm_ID(paymentTerm.getC_PaymentTerm_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String email = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_EMail);\n\t\t\t\t\tif (Check.isNotBlank(email))\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setEMail(email);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal Instant preparationDate = tableRow.getAsOptionalInstant(I_C_Order.COLUMNNAME_PreparationDate).orElse(null);\n\t\t\t\t\tfinal Instant datePromised = tableRow.getAsOptionalInstant(I_C_Order.COLUMNNAME_DatePromised).orElse(null);\n\n\t\t\t\t\tfinal Instant preparationDateToBeSet = CoalesceUtil.coalesce(preparationDate, datePromised);\n\t\t\t\t\tif (preparationDateToBeSet != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setPreparationDate(Timestamp.from(preparationDateToBeSet));\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal Instant datePromisedToBeSet = CoalesceUtil.coalesce(datePromised, preparationDate);\n\t\t\t\t\tif (datePromisedToBeSet != null)\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setDatePromised(Timestamp.from(datePromisedToBeSet));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (EmptyUtil.isNotBlank(poReference))\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setPOReference(poReference);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (EmptyUtil.isNotBlank(description))\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setDescription(description);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (pricingSystemIdentifier != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_M_PricingSystem pricingSystem = pricingSystemDataTable.get(pricingSystemIdentifier);\n\t\t\t\t\t\tassertThat(pricingSystem).isNotNull();\n\t\t\t\t\t\torder.setM_PricingSystem_ID(pricingSystem.getM_PricingSystem_ID());\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (docBaseType != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal String docSubType = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DocSubType);\n\n\t\t\t\t\t\tfinal I_C_DocType docType = queryBL.createQueryBuilder(I_C_DocType.class)\n\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_DocBaseType, docBaseType)\n\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_DocSubType, docSubType)\n\t\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t\t.orderByDescending(COLUMNNAME_IsDefault)\n\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t.firstNotNull(I_C_DocType.class);\n\n\t\t\t\t\t\tassertThat(docType).isNotNull();\n\n\t\t\t\t\t\torder.setIsSOTrx(docType.isSOTrx());\n\t\t\t\t\t\torder.setC_DocType_ID(docType.getC_DocType_ID());\n\t\t\t\t\t\torder.setC_DocTypeTarget_ID(docType.getC_DocType_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String paymentRule = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_PaymentRule);\n\t\t\t\t\tif (Check.isNotBlank(paymentRule))\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setPaymentRule(paymentRule);\n\t\t\t\t\t}\n\n\t\t\t\t\ttableRow.getAsOptionalIdentifier(COLUMNNAME_M_Warehouse_ID)\n\t\t\t\t\t\t\t.map(warehouseIdentifier -> warehouseTable.getIdOptional(warehouseIdentifier).orElseGet(() -> warehouseIdentifier.getAsId(WarehouseId.class)))\n\t\t\t\t\t\t\t.ifPresent(warehouseId -> order.setM_Warehouse_ID(warehouseId.getRepoId()));\n\n\t\t\t\t\tfinal String billUserIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_Bill_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(billUserIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_AD_User billUser = userTable.get(billUserIdentifier);\n\t\t\t\t\t\torder.setBill_User_ID(billUser.getAD_User_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String dropShipBPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DropShip_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(dropShipBPartnerIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_BPartner dropShipBPartner = bpartnerTable.get(dropShipBPartnerIdentifier);\n\t\t\t\t\t\torder.setDropShip_BPartner_ID(dropShipBPartner.getC_BPartner_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String dropShipLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DropShip_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(dropShipLocationIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_BPartner_Location dropShipLocation = bpartnerLocationTable.get(dropShipLocationIdentifier);\n\t\t\t\t\t\torder.setDropShip_Location_ID(dropShipLocation.getC_BPartner_Location_ID());\n\t\t\t\t\t\torder.setDropShip_BPartner_ID(dropShipLocation.getC_BPartner_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String dropShipUserIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DropShip_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(dropShipUserIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_AD_User dropShipUser = userTable.get(dropShipUserIdentifier);\n\t\t\t\t\t\torder.setDropShip_User_ID(dropShipUser.getAD_User_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal int salesRepID = DataTableUtil.extractIntOrMinusOneForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_SalesRep_ID);\n\t\t\t\t\tif (salesRepID > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setSalesRep_ID(salesRepID);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String taxDepartureCountryIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_C_Tax_Departure_Country_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(taxDepartureCountryIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Country taxDepartureCountry = countryTable.get(taxDepartureCountryIdentifier);\n\t\t\t\t\t\torder.setC_Tax_Departure_Country_ID(taxDepartureCountry.getC_Country_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String harvestingCalendarIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_C_Harvesting_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(harvestingCalendarIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Calendar harvestingCalendarRecord = calendarTable.get(harvestingCalendarIdentifier);\n\t\t\t\t\t\torder.setC_Harvesting_Calendar_ID(harvestingCalendarRecord.getC_Calendar_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String harvestingYearIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_Harvesting_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(harvestingYearIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Year harvestingYearRecord = yearTable.get(harvestingYearIdentifier);\n\t\t\t\t\t\torder.setHarvesting_Year_ID(harvestingYearRecord.getC_Year_ID());\n\t\t\t\t\t\torder.setC_Harvesting_Calendar_ID(harvestingYearRecord.getC_Calendar_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String locatorIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_M_Locator_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(locatorIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal int locatorId = locatorTable.getOptional(locatorIdentifier)\n\t\t\t\t\t\t\t\t.map(I_M_Locator::getM_Locator_ID)\n\t\t\t\t\t\t\t\t.orElseGet(() -> Integer.parseInt(locatorIdentifier));\n\t\t\t\t\t\torder.setM_Locator_ID(locatorId);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String auctionIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_C_Auction_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\t\tif (Check.isNotBlank(auctionIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Auction auction = auctionStepDefData.get(auctionIdentifier);\n\t\t\t\t\t\torder.setC_Auction_ID(auction.getC_Auction_ID());\n\t\t\t\t\t}\n\n\t\t\t\t\tsaveRecord(order);\n\n\t\t\t\t\t//\n\t\t\t\t\t// Before description might be overriden by some other model interceptors, in case is set, make sure ours is used\n\t\t\t\t\tif (EmptyUtil.isNotBlank(description))\n\t\t\t\t\t{\n\t\t\t\t\t\torder.setDescription(description);\n\t\t\t\t\t}\n\n\t\t\t\t\tsaveRecord(order);\n\n\t\t\t\t\torderTable.putOrReplace(tableRow.getAsIdentifier(), order);\n\t\t\t\t});\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 205,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1274,
    "annotation": "\n\t@And(\"^the order identified by (.*) is (reactivated|completed|closed|voided|reversed)$\")",
    "glue_code": "\t@And(\"^the order identified by (.*) is (reactivated|completed|closed|voided|reversed)$\")\n\tpublic void order_action(@NonNull final String orderIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase reactivated ->\n\t\t\t{\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MOrder.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_ReActivate, IDocument.STATUS_InProgress);\n\t\t\t\tlogger.info(\"Order {} was reactivated\", order);\n\t\t\t}\n\t\t\tcase completed ->\n\t\t\t{\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MOrder.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tlogger.info(\"Order {} was completed\", order);\n\t\t\t}\n\t\t\tcase closed ->\n\t\t\t{\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Close, IDocument.STATUS_Closed);\n\t\t\t}\n\t\t\tcase voided ->\n\t\t\t{\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Void, IDocument.STATUS_Voided);\n\t\t\t}\n\t\t\tcase reversed ->\n\t\t\t{\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t}\n\t\t\tdefault -> throw new AdempiereException(\"Unhandled C_Order action\")\n\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 457,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1275,
    "annotation": "\n\t@Given(\"^the order identified by (.*) is (reactivated|completed|closed|voided|reversed) expecting error$\")",
    "glue_code": "\t@Given(\"^the order identified by (.*) is (reactivated|completed|closed|voided|reversed) expecting error$\")\n\tpublic void order_action_expecting_error(@NonNull final String orderIdentifier, @NonNull final String action, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tboolean errorThrown = false;\n\n\t\ttry\n\t\t{\n\t\t\torder_action(orderIdentifier, action);\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\terrorThrown = true;\n\n\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tif (errorMessageIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\n\t\t\t\tfinal String inoutIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_InOut.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(inoutIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_InOut inout = inoutTable.get(inoutIdentifier);\n\n\t\t\t\t\tfinal String expectedErrorMessage = msgBL.getTranslatableMsgText(AdMessageKey.of(errorMessage.getValue()), String.valueOf(inout.getM_InOut_ID())).translate(Env.getAD_Language());\n\n\t\t\t\t\tassertThat(e.getMessage()).contains(expectedErrorMessage);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tassertThat(errorThrown).isTrue();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 497,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1276,
    "annotation": "\n\t@And(\"^the order identified by (.*) is (completed) and an exception with error-code (.*) is thrown$\")",
    "glue_code": "\t@And(\"^the order identified by (.*) is (completed) and an exception with error-code (.*) is thrown$\")\n\tpublic void order_action(@NonNull final String orderIdentifier, @NonNull final String action, @NonNull final String errorCode)\n\t{\n\t\ttry\n\t\t{\n\t\t\torder_action(orderIdentifier, action);\n\t\t\tassertThat(1).as(\"An Exception should have been thrown !\").isEqualTo(2);\n\t\t}\n\t\tcatch (final AdempiereException exception)\n\t\t{\n\t\t\tassertThat(exception.getErrorCode()).as(\"ErrorCode of %s\", exception).isEqualTo(errorCode);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 537,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1277,
    "annotation": "\n\t@Given(\"generate PO from SO is invoked with parameters:\")",
    "glue_code": "\t@Given(\"generate PO from SO is invoked with parameters:\")\n\tpublic void generate_PO_from_SO_invoked(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String purchaseType = DataTableUtil.extractStringForColumnName(tableRow, \"PurchaseType\");\n\t\t\tfinal boolean purchaseBomComponents = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"IsPurchaseBOMComponents\", false);\n\n\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\tfinal I_C_BPartner bpartner = bpartnerTable.get(bpartnerIdentifier);\n\n\t\t\tfinal AdProcessId processId = adProcessDAO.retrieveProcessIdByClass(C_Order_CreatePOFromSOs.class);\n\n\t\t\tfinal ProcessInfo.ProcessInfoBuilder processInfoBuilder = ProcessInfo.builder();\n\t\t\tprocessInfoBuilder.setAD_Process_ID(processId.getRepoId());\n\t\t\tprocessInfoBuilder.addParameter(\"DatePromised_From\", Timestamp.from(Instant.now()));\n\t\t\tprocessInfoBuilder.addParameter(\"DatePromised_To\", Timestamp.from(Instant.now()));\n\t\t\tprocessInfoBuilder.addParameter(\"C_BPartner_ID\", bpartner.getC_BPartner_ID());\n\t\t\tprocessInfoBuilder.addParameter(\"C_Order_ID\", order.getC_Order_ID());\n\t\t\tprocessInfoBuilder.addParameter(\"TypeOfPurchase\", purchaseType);\n\t\t\tprocessInfoBuilder.addParameter(\"IsPurchaseBOMComponents\", purchaseBomComponents);\n\n\t\t\tprocessInfoBuilder\n\t\t\t\t\t.buildAndPrepareExecution()\n\t\t\t\t\t.executeSync()\n\t\t\t\t\t.getResult();\n\t\t}\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 551,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1278,
    "annotation": "\n\t@Then(\"the order is created:\")",
    "glue_code": "\t@Then(\"the order is created:\")\n\tpublic void thePurchaseOrderIsCreated(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String linkedOrderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Link_Order_ID + \".Identifier\");\n\n\t\t\tfinal I_C_Order purchaseOrder = Services.get(IQueryBL.class)\n\t\t\t\t\t.createQueryBuilder(I_C_Order.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_C_Order.COLUMNNAME_Link_Order_ID, orderTable.get(linkedOrderIdentifier).getC_Order_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_C_Order.class);\n\n\t\t\tfinal boolean isSOTrx = DataTableUtil.extractBooleanForColumnName(tableRow, I_C_Order.COLUMNNAME_IsSOTrx);\n\t\t\tsoftly.assertThat(purchaseOrder).isNotNull();\n\t\t\tsoftly.assertThat(purchaseOrder.isSOTrx()).as(I_C_Order.COLUMNNAME_IsSOTrx).isEqualTo(isSOTrx);\n\n\t\t\tfinal I_C_DocType docType = load(purchaseOrder.getC_DocTypeTarget_ID(), I_C_DocType.class);\n\n\t\t\tfinal String docBaseType = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_DocBaseType);\n\t\t\tsoftly.assertThat(docType.getDocBaseType()).as(COLUMNNAME_DocBaseType).isEqualTo(docBaseType);\n\n\t\t\tfinal String docSubType = DataTableUtil.extractStringOrNullForColumnName(tableRow, COLUMNNAME_DocSubType);\n\t\t\tsoftly.assertThat(docType.getDocSubType()).as(COLUMNNAME_DocSubType).isEqualTo(docSubType);\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DocStatus);\n\t\t\tif (docStatus != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(purchaseOrder.getDocStatus()).as(COLUMNNAME_DocStatus).isEqualTo(docStatus);\n\t\t\t}\n\n\t\t\tfinal boolean isDropShip = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_IsDropShip, false);\n\t\t\tsoftly.assertThat(purchaseOrder.isDropShip()).as(I_C_Order.COLUMNNAME_IsDropShip).isEqualTo(isDropShip);\n\n\t\t\tfinal String dropShipBPIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_DropShip_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipBPIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner dropShipBP = bpartnerTable.get(dropShipBPIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipBP).isNotNull();\n\n\t\t\t\tsoftly.assertThat(purchaseOrder.getDropShip_BPartner_ID()).as(I_C_Order.COLUMNNAME_DropShip_BPartner_ID).isEqualTo(dropShipBP.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String dropShipLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DropShip_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location dropShipBPLocation = bpartnerLocationTable.get(dropShipLocationIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipBPLocation).isNotNull();\n\n\t\t\t\tsoftly.assertThat(purchaseOrder.getDropShip_Location_ID()).as(COLUMNNAME_DropShip_Location_ID).isEqualTo(dropShipBPLocation.getC_BPartner_Location_ID());\n\t\t\t\tsoftly.assertThat(purchaseOrder.getDropShip_BPartner_ID()).as(I_C_Order.COLUMNNAME_DropShip_BPartner_ID).isEqualTo(dropShipBPLocation.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal I_C_Order salesOrder = orderTable.get(linkedOrderIdentifier);\n\t\t\tif (salesOrder.getC_Tax_Departure_Country_ID() > 0)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(purchaseOrder.getC_Tax_Departure_Country_ID())\n\t\t\t\t\t\t.as(COLUMNNAME_C_Tax_Departure_Country_ID)\n\t\t\t\t\t\t.isNotEqualTo(salesOrder.getC_Tax_Departure_Country_ID());\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 584,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1279,
    "annotation": "\n\t@Then(\"the sales order identified by {string} is closed\")",
    "glue_code": "\t@Then(\"the sales order identified by {string} is closed\")\n\tpublic void salesOrderIsClosed(\n\t\t\t@NonNull final String orderIdentifier)\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\tfinal I_C_Order salesOrder = orderBL.getById(OrderId.ofRepoId(order.getC_Order_ID()));\n\n\t\tassertThat(salesOrder.getDocStatus()).isEqualTo(IDocument.STATUS_Closed);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 653,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1280,
    "annotation": "\n\t@Then(\"the sales order identified by {string} is not closed\")",
    "glue_code": "\t@Then(\"the sales order identified by {string} is not closed\")\n\tpublic void salesOrderIsNotClosed(@NonNull final String orderIdentifier)\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\tfinal I_C_Order salesOrder = orderBL.getById(OrderId.ofRepoId(order.getC_Order_ID()));\n\n\t\tassertThat(salesOrder.getDocStatus()).isNotEqualTo(IDocument.STATUS_Closed);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 663,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1281,
    "annotation": "\n\t@Then(\"a PurchaseOrder with externalId {string} is created after not more than {int} seconds and has values\")",
    "glue_code": "\t@Then(\"a PurchaseOrder with externalId {string} is created after not more than {int} seconds and has values\")\n\tpublic void verifyOrder(final String externalId, final int timeoutSec,\n\t\t\t\t\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal Map<String, String> dataTableRow = dataTable.asMaps().get(0);\n\n\t\tfinal Supplier<Boolean> purchaseOrderQueryExecutor = () -> {\n\n\t\t\tfinal I_C_Order purchaseOrderRecord = queryBL.createQueryBuilder(I_C_Order.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Order.COLUMNNAME_ExternalId, externalId)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_C_Order.class);\n\n\t\t\treturn purchaseOrderRecord != null;\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, purchaseOrderQueryExecutor);\n\n\t\tfinal I_C_Order purchaseOrderRecord = queryBL.createQueryBuilder(I_C_Order.class)\n\t\t\t\t.addEqualsFilter(I_C_Order.COLUMNNAME_ExternalId, externalId)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_C_Order.class);\n\n\t\tfinal String externalPurchaseOrderUrl = DataTableUtil.extractStringForColumnName(dataTableRow, I_C_Order.COLUMNNAME_ExternalPurchaseOrderURL);\n\t\tassertThat(purchaseOrderRecord.getExternalPurchaseOrderURL()).isEqualTo(externalPurchaseOrderUrl);\n\n\t\tfinal String poReference = DataTableUtil.extractStringForColumnName(dataTableRow, I_C_Order.COLUMNNAME_POReference);\n\t\tassertThat(purchaseOrderRecord.getPOReference()).isEqualTo(poReference);\n\n\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tif (EmptyUtil.isNotBlank(orderIdentifier))\n\t\t{\n\t\t\torderTable.putOrReplace(orderIdentifier, purchaseOrderRecord);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 672,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1282,
    "annotation": "\n\t@And(\"validate the created orders\")",
    "glue_code": "\t@And(\"validate the created orders\")\n\tpublic void validate_created_order(\n\t\t\t@NonNull final DataTable table)\n\t{\n\t\tfor (final Map<String, String> row : table.asMaps())\n\t\t{\n\t\t\tvalidateOrder(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 708,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1283,
    "annotation": "\n\t@And(\"update order\")",
    "glue_code": "\t@And(\"update order\")\n\tpublic void update_order(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t\tfinal DocBaseType docBaseType = DocBaseType.ofNullableCode(DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DocBaseType));\n\t\t\tfinal String docSubType = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_DocSubType);\n\n\t\t\tif (docBaseType != null && Check.isNotBlank(docSubType))\n\t\t\t{\n\t\t\t\tfinal DocTypeQuery docTypeQuery = DocTypeQuery.builder()\n\t\t\t\t\t\t.docBaseType(docBaseType)\n\t\t\t\t\t\t.docSubType(DocSubType.ofNullableCode(docSubType))\n\t\t\t\t\t\t.adClientId(order.getAD_Client_ID())\n\t\t\t\t\t\t.adOrgId(order.getAD_Org_ID())\n\t\t\t\t\t\t.build();\n\n\t\t\t\tfinal DocTypeId docTypeId = docTypeDAO.getDocTypeId(docTypeQuery);\n\n\t\t\t\torder.setC_DocType_ID(docTypeId.getRepoId());\n\t\t\t\torder.setC_DocTypeTarget_ID(docTypeId.getRepoId());\n\t\t\t}\n\n\t\t\tfinal String paymentRule = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_PaymentRule);\n\t\t\tif (Check.isNotBlank(paymentRule))\n\t\t\t{\n\t\t\t\torder.setPaymentRule(paymentRule);\n\t\t\t}\n\n\t\t\tfinal Timestamp preparationDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(tableRow, \"OPT.\" + COLUMNNAME_PreparationDate);\n\t\t\tif (preparationDate != null)\n\t\t\t{\n\t\t\t\torder.setPreparationDate(preparationDate);\n\t\t\t}\n\n\t\t\tfinal ZonedDateTime datePromised = DataTableUtil.extractZonedDateTimeOrNullForColumnName(tableRow, \"OPT.\" + I_C_Order.COLUMNNAME_DatePromised);\n\t\t\tif (datePromised != null)\n\t\t\t{\n\t\t\t\torder.setDatePromised(TimeUtil.asTimestamp(datePromised));\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(order);\n\n\t\t\torderTable.putOrReplace(orderIdentifier, order);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 718,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1284,
    "annotation": "\n\t@And(\"^after not more than (.*)s the order is found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s the order is found$\")\n\tpublic void lookup_order(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> retrieveOrder(tableRow));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 769,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1285,
    "annotation": "\n\t@Then(\"the following group compensation order lines were created for externalHeaderId: {string}\")",
    "glue_code": "\t@Then(\"the following group compensation order lines were created for externalHeaderId: {string}\")\n\tpublic void verifyOrderLines(final String externalHeaderId,\n\t\t\t\t\t\t\t\t @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal int line = DataTableUtil.extractIntForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_Line);\n\t\t\tfinal Boolean isGroupCompensationLine = DataTableUtil.extractBooleanForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_IsGroupCompensationLine);\n\t\t\tfinal BigDecimal groupCompensationPercentage = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_GroupCompensationPercentage);\n\t\t\tfinal String groupCompensationType = DataTableUtil.extractStringForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_GroupCompensationType);\n\t\t\tfinal String groupCompensationAmtType = DataTableUtil.extractStringForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_GroupCompensationAmtType);\n\n\t\t\tfinal I_C_Order orderRecord = queryBL.createQueryBuilder(I_C_Order.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Order.COLUMNNAME_ExternalId, externalHeaderId)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Order.class);\n\n\t\t\tfinal Optional<I_C_OrderLine> orderLine = queryBL.createQueryBuilder(I_C_OrderLine.class)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_C_Order_ID, orderRecord.getC_Order_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_Line, line)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_IsGroupCompensationLine, isGroupCompensationLine)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_GroupCompensationPercentage, groupCompensationPercentage)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_GroupCompensationType, groupCompensationType)\n\t\t\t\t\t.addEqualsFilter(I_C_OrderLine.COLUMNNAME_GroupCompensationAmtType, groupCompensationAmtType)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOptional(I_C_OrderLine.class);\n\n\t\t\tassertThat(orderLine).isPresent();\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 1005,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1286,
    "annotation": "\n\t@When(\"C_Order is cloned\")",
    "glue_code": "\t@When(\"C_Order is cloned\")\n\tpublic void clone_order(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String clonedOrderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, \"ClonedOrder.\" + COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t\tassertThat(order).isNotNull();\n\n\t\t\tfinal TableRecordReference recordReference = TableRecordReference.of(I_C_Order.Table_Name, order.getC_Order_ID());\n\t\t\tfinal CopyRecordRequest copyRecordRequest = CopyRecordRequest.builder()\n\t\t\t\t\t.tableRecordReference(recordReference)\n\t\t\t\t\t.build();\n\n\t\t\tfinal PO po = copyRecordService.copyRecord(copyRecordRequest);\n\n\t\t\tfinal I_C_Order clonedOrder = load(po.get_ID(), I_C_Order.class);\n\t\t\torderTable.putOrReplace(clonedOrderIdentifier, clonedOrder);\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 1037,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1259,
    "annotation": "\n\t@And(\"update C_ReferenceNo:\")",
    "glue_code": "\t@And(\"update C_ReferenceNo:\")\n\tpublic void update_C_ReferenceNo(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : rows)\n\t\t{\n\t\t\tupdateReferenceNo(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_ReferenceNo_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_ReferenceNo_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1260,
    "annotation": "\n\t@And(\"load C_ReferenceNo:\")",
    "glue_code": "\t@And(\"load C_ReferenceNo:\")\n\tpublic void load_C_ReferenceNo(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : rows)\n\t\t{\n\t\t\tloadReferenceNo(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 85,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_ReferenceNo_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_ReferenceNo_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1271,
    "annotation": "\n\t@And(\"load C_TaxCategory:\")",
    "glue_code": "\t@And(\"load C_TaxCategory:\")\n\tpublic void load_C_TaxCategory(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadTaxCategory(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_TaxCategory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_TaxCategory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1272,
    "annotation": "\n\t@And(\"update C_TaxCategory:\")",
    "glue_code": "\t@And(\"update C_TaxCategory:\")\n\tpublic void update_C_TaxCategory(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateTaxCategory(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_TaxCategory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_TaxCategory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1238,
    "annotation": "\n\t@And(\"metasfresh contains C_Tax\")",
    "glue_code": "\t@And(\"metasfresh contains C_Tax\")\n\tpublic void add_C_Tax(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateC_Tax(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Tax_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Tax_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1239,
    "annotation": "\n\t@And(\"load C_Tax:\")",
    "glue_code": "\t@And(\"load C_Tax:\")\n\tpublic void load_C_Tax(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tloadTax(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Tax_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Tax_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1240,
    "annotation": "\n\t@And(\"update C_Tax:\")",
    "glue_code": "\t@And(\"update C_Tax:\")\n\tpublic void update_C_Tax(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tupdateTax(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Tax_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Tax_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1247,
    "annotation": "\n\t@And(\"metasfresh contains C_Vat_Code:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Vat_Code:\")\n\tpublic void add_C_Vat_Code(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateVatCode(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/C_Vat_Code_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "C_Vat_Code_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1258,
    "annotation": "\t@And(\"set context properties:\")",
    "glue_code": "\tpublic void setContextProperties(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> externalReferencesTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : externalReferencesTableList)\n\t\t{\n\t\t\tfinal String key = DataTableUtil.extractStringForColumnName(row, \"Key\");\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, \"Value\");\n\n\t\t\tEnv.getCtx().setProperty(key, value);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 35,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/Context_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "Context_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1289,
    "annotation": "\t@Given(\"infrastructure and metasfresh are running\")",
    "glue_code": "\tpublic void infrastructure()\n\t{\n\t\tCucumberLifeCycleSupport.beforeEach();\n\t\t\n\t\t// note: we can't use something like CucumberLifeCycleSupport_StepDefData,\n\t\t// because the state needs to be shared not between StepDefs of the same scenario, but between different Scenarios.\n\t\tCucumberLifeCycleSupport.beforeAll();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 30,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/CucumberLifeCycleSupport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "CucumberLifeCycleSupport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1241,
    "annotation": "\n\t@And(\"^load DHL_ShipmentOrder:$\")",
    "glue_code": "\t@And(\"^load DHL_ShipmentOrder:$\")\n\tpublic void load_DHL_ShipmentOrder(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String packageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Package.COLUMNNAME_M_Package_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal PackageId packageId = PackageId.ofRepoId(packageTable.get(packageIdentifier).getM_Package_ID());\n\n\t\t\tfinal I_DHL_ShipmentOrder dhlShipmentOrder = queryBL.createQueryBuilder(I_DHL_ShipmentOrder.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_DHL_ShipmentOrder.COLUMNNAME_PackageId, packageId)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly();\n\t\t\tassertThat(dhlShipmentOrder).as(\"DHL_ShipmentOrder\").isNotNull();\n\n\t\t\tfinal String dhlShipmentOrderIdentifier = DataTableUtil.extractStringForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_DHL_ShipmentOrder_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdhlShipmentOrderTable.putOrReplace(dhlShipmentOrderIdentifier, dhlShipmentOrder);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 52,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/DHL_ShipmentOrder_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "DHL_ShipmentOrder_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1242,
    "annotation": "\n\t@And(\"validate DHL_ShipmentOrder:\")",
    "glue_code": "\t@And(\"validate DHL_ShipmentOrder:\")\n\tpublic void validate_DHL_ShipmentOrder(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String dhlShipmentOrderIdentifier = DataTableUtil.extractStringForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_DHL_ShipmentOrder_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_DHL_ShipmentOrder dhlShipmentOrder = dhlShipmentOrderTable.get(dhlShipmentOrderIdentifier);\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\n\t\t\tsoftly.assertThat(bPartner.getC_BPartner_ID()).isEqualTo(dhlShipmentOrder.getC_BPartner_ID());\n\n\t\t\tfinal Integer lengthInCm = DataTableUtil.extractIntForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_DHL_LengthInCm);\n\t\t\tsoftly.assertThat(lengthInCm).as(\"lengthInCm\").isEqualTo(dhlShipmentOrder.getDHL_LengthInCm());\n\t\t\tfinal Integer heightInCm = DataTableUtil.extractIntForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_DHL_HeightInCm);\n\t\t\tsoftly.assertThat(heightInCm).as(\"heightInCm\").isEqualTo(dhlShipmentOrder.getDHL_HeightInCm());\n\t\t\tfinal Integer widthInCm = DataTableUtil.extractIntForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_DHL_WidthInCm);\n\t\t\tsoftly.assertThat(widthInCm).as(\"widthInCm\").isEqualTo(dhlShipmentOrder.getDHL_WidthInCm());\n\t\t\tfinal BigDecimal weightInKg = DataTableUtil.extractBigDecimalForColumnName(row, I_DHL_ShipmentOrder.COLUMNNAME_DHL_WeightInKg);\n\t\t\tsoftly.assertThat(weightInKg).as(\"weightInKg\").isEqualTo(dhlShipmentOrder.getDHL_WeightInKg());\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 72,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/DHL_ShipmentOrder_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "DHL_ShipmentOrder_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1305,
    "annotation": "\n\t@Given(\"metasfresh contains DHL Configuration:\")",
    "glue_code": "\t@Given(\"metasfresh contains DHL Configuration:\")\n\tpublic void metasfresh_contains_dhl_configuration(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\n\t\t\tfinal String configIdentifier = DataTableUtil.extractRecordIdentifier(tableRow, I_DHL_Shipper_Config.COLUMNNAME_DHL_Shipper_Config_ID);\n\t\t\tfinal I_DHL_Shipper_Config config = dhlConfigTable.getOptional(configIdentifier)\n\t\t\t\t\t.orElseGet(() -> this.createConfig(tableRow));\n\n\t\t\tfinal String accountNumber = DataTableUtil.extractStringForColumnName(tableRow, I_DHL_Shipper_Config.COLUMNNAME_AccountNumber);\n\t\t\tconfig.setAccountNumber(accountNumber);\n\n\t\t\tsaveRecord(config);\n\n\t\t\tdhlConfigTable.putOrReplace(configIdentifier, config);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 29,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/DHL_Shipper_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "DHL_Shipper_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1270,
    "annotation": "\n\t@Given(\"update EXP_ProcessorParameter for the following EXP_Processor\")",
    "glue_code": "\t@Given(\"update EXP_ProcessorParameter for the following EXP_Processor\")\n\tpublic void update_EXP_ProcessorParameters(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tupdateEXPProcessorParameters(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/EXP_ProcessorParameter_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "EXP_ProcessorParameter_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1243,
    "annotation": "\n\t@Given(\"metasfresh contains Exp_Processor\")",
    "glue_code": "\t@Given(\"metasfresh contains Exp_Processor\")\n\tpublic void create_EXP_Processor(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcreateExpProcessor(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 54,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/EXP_Processor_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "EXP_Processor_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1315,
    "annotation": "\n\t@Given(\"load EXP_Processor_Type\")",
    "glue_code": "\t@Given(\"load EXP_Processor_Type\")\n\tpublic void load_EXP_Processor_Type(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tloadEXPProcessorType(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 47,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/EXP_processor_Type_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "EXP_processor_Type_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1322,
    "annotation": "\n\t@And(\"a lock on the record with AD_Table {string} and Record_ID {int} is requested for a lock owner with prefix {string}\")",
    "glue_code": "\t@And(\"a lock on the record with AD_Table {string} and Record_ID {int} is requested for a lock owner with prefix {string}\")\n\tpublic void aLockOnTheRecordWithAD_TableAD_PInstanceAndRecord_IDIsRequested(\n\t\t\t@NonNull final String tableName,\n\t\t\tfinal int recordId,\n\t\t\t@NonNull final String lockOwnerPrefix)\n\t{\n\t\tfinal TableRecordReference tableRecordReference = TableRecordReference.of(tableName, recordId);\n\t\ttry\n\t\t{\n\t\t\tfinal ILock lock = lockManager.lock()\n\t\t\t\t\t.setOwner(LockOwner.newOwner(lockOwnerPrefix))\n\t\t\t\t\t.setFailIfAlreadyLocked(true)\n\t\t\t\t\t.addRecordByModel(tableRecordReference)\n\t\t\t\t\t.acquire();\n\t\t\tlastLockAcquireResult = LockAcquireResult.success(lock.getOwner());\n\t\t}\n\t\tcatch (final Throwable t)\n\t\t{\n\t\t\tlastLockAcquireResult = LockAcquireResult.fail(t);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/Lock_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "Lock_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1323,
    "annotation": "\n\t@And(\"the lock request was successful and the lock owner has the prefix {string}\")",
    "glue_code": "\t@And(\"the lock request was successful and the lock owner has the prefix {string}\")\n\tpublic void theLockRequestWasSuccessful(@NonNull final String lockOwnerPrefix)\n\t{\n\t\tassertThat(lastLockAcquireResult.isSuccess()).isTrue();\n\t\tassertThat(lastLockAcquireResult.getOwner().getOwnerName()).startsWith(lockOwnerPrefix);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 67,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/Lock_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "Lock_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1324,
    "annotation": "\n\t@Then(\"the lock request failed\")",
    "glue_code": "\t@Then(\"the lock request failed\")\n\tpublic void theLockRequestFailed()\n\t{\n\t\tassertThat(lastLockAcquireResult.isSuccess()).isFalse();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/Lock_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "Lock_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1314,
    "annotation": "\n\t@And(\"MD_Stock_Update_From_M_HUs process is called\")",
    "glue_code": "\t@And(\"MD_Stock_Update_From_M_HUs process is called\")\n\tpublic void call_MD_Stock_Update_From_M_HUs_process()\n\t{\n\t\tfinal PInstanceId pInstanceId = instanceDAO.createSelectionId();\n\n\t\thuStockService.createAndHandleDataUpdateRequests(pInstanceId);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 36,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/MD_Stock_Update_From_M_HUs_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "MD_Stock_Update_From_M_HUs_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1321,
    "annotation": "\n\t@And(\"metasfresh contains M_HU_Item:\")",
    "glue_code": "\t@And(\"metasfresh contains M_HU_Item:\")\n\tpublic void create_M_HU_Item(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateHuItem(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_HU_Item_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_HU_Item_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1328,
    "annotation": "\n\t@And(\"load M_HU_PackagingCode:\")",
    "glue_code": "\t@And(\"load M_HU_PackagingCode:\")\n\tpublic void load_M_HU_PackagingCode(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_HU_PackagingCode.COLUMNNAME_M_HU_PackagingCode_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal String packagingCode = row.getAsString(I_M_HU_PackagingCode.COLUMNNAME_PackagingCode);\n\t\t\t\t\tfinal String unitType = row.getAsString(I_M_HU_PackagingCode.COLUMNNAME_HU_UnitType);\n\n\t\t\t\t\tfinal I_M_HU_PackagingCode huPackagingCodeRecord = queryBL.createQueryBuilder(I_M_HU_PackagingCode.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_HU_PackagingCode.COLUMNNAME_PackagingCode, packagingCode)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_HU_PackagingCode.COLUMNNAME_HU_UnitType, unitType)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_M_HU_PackagingCode.class);\n\n\t\t\t\t\thuPackagingCodeTable.put(row.getAsIdentifier(), huPackagingCodeRecord);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 38,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_HU_PackagingCode_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_HU_PackagingCode_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1319,
    "annotation": "\n\t@And(\"load M_Locator:\")",
    "glue_code": "\t@And(\"load M_Locator:\")\n\tpublic void loadLocators(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Locator_ID)\n\t\t\t\t.forEach(this::loadLocator);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_Locator_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_Locator_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1320,
    "annotation": "\n\t@And(\"metasfresh contains M_Locator:\")",
    "glue_code": "\t@And(\"metasfresh contains M_Locator:\")\n\tpublic void create_M_Locator_record(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Locator_ID)\n\t\t\t\t.forEach((row) -> {\n\t\t\t\t\tcreateLocator(row);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 87,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_Locator_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_Locator_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1307,
    "annotation": "\n\t@And(\"^load M_Package for M_ShipperTransportation: (.*)$\")",
    "glue_code": "\t@And(\"^load M_Package for M_ShipperTransportation: (.*)$\")\n\tpublic void load_M_Package(@NonNull final String deliveryInstructionIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_M_ShipperTransportation deliveryInstruction = deliveryInstructionTable.get(deliveryInstructionIdentifier);\n\t\tassertThat(deliveryInstruction).isNotNull();\n\n\t\tfinal List<I_M_ShippingPackage> shippingPackages = queryBL.createQueryBuilder(I_M_ShippingPackage.class)\n\t\t\t\t.addEqualsFilter(I_M_ShippingPackage.COLUMNNAME_M_ShipperTransportation_ID, deliveryInstruction.getM_ShipperTransportation_ID())\n\t\t\t\t.orderByDescending(I_M_ShippingPackage.COLUMNNAME_Created)\n\t\t\t\t.create()\n\t\t\t\t.list();\n\n\t\tfinal List<Map<String, String>> dataMaps = dataTable.asMaps();\n\t\t// it's possible that other packages have been added to the transportation order\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\tfor (final Map<String, String> row : dataMaps)\n\t\t{\n\t\t\tI_M_ShippingPackage shippingPackage = null;\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShippingPackage.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShippingPackage.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tsoftly.assertThat(CoalesceUtil.firstNotBlank(productIdentifier, shipmentIdentifier)).as(\"Product or shipment identifiers\").isNotBlank();\n\n\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t{\n\t\t\t\tfinal ProductId productId = ProductId.ofRepoId(productTable.get(productIdentifier).getM_Product_ID());\n\n\t\t\t\tshippingPackage = shippingPackages.stream()\n\t\t\t\t\t\t.filter(pkg -> Objects.equals(pkg.getM_Product_ID(), productId.getRepoId()))\n\t\t\t\t\t\t.findFirst()\n\t\t\t\t\t\t.orElse(null);\n\t\t\t}\n\t\t\telse if (Check.isNotBlank(shipmentIdentifier))\n\t\t\t{\n\t\t\t\tfinal InOutId shipmentId = InOutId.ofRepoId(shipmentTable.get(shipmentIdentifier).getM_InOut_ID());\n\t\t\t\tshippingPackage = shippingPackages.stream()\n\t\t\t\t\t\t.filter(pkg -> Objects.equals(pkg.getM_InOut_ID(), shipmentId.getRepoId()))\n\t\t\t\t\t\t.findFirst()\n\t\t\t\t\t\t.orElse(null);\n\t\t\t}\n\t\t\tsoftly.assertThat(shippingPackage).as(\"Shipping package\").isNotNull();\n\n\t\t\tif (shippingPackage != null)\n\t\t\t{\n\t\t\t\tfinal I_M_Package packageRecord = InterfaceWrapperHelper.load(shippingPackage.getM_Package_ID(), I_M_Package.class);\n\t\t\t\tsoftly.assertThat(packageRecord).as(\"Package\").isNotNull();\n\n\t\t\t\tfinal String packageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Package.COLUMNNAME_M_Package_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tpackageTable.putOrReplace(packageIdentifier, packageRecord);\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 68,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_Package_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_Package_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1308,
    "annotation": "\n\t@And(\"validate M_Package:\")",
    "glue_code": "\t@And(\"validate M_Package:\")\n\tpublic void validate_M_Package(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String packageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Package.COLUMNNAME_M_Package_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Package packageRecord = packageTable.get(packageIdentifier);\n\t\t\tsoftly.assertThat(packageRecord).isNotNull();\n\n\t\t\tfinal String shipperIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Package.COLUMNNAME_M_Shipper_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\tsoftly.assertThat(shipper).isNotNull();\n\t\t\tsoftly.assertThat(packageRecord.getM_Shipper_ID()).as(I_M_Package.COLUMNNAME_M_Shipper_ID).isEqualTo(shipper.getM_Shipper_ID());\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Package.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bpartnerIdentifier);\n\t\t\t\tsoftly.assertThat(bPartner).isNotNull();\n\t\t\t\tsoftly.assertThat(packageRecord.getC_BPartner_ID()).as(I_M_Package.COLUMNNAME_C_BPartner_ID).isEqualTo(bPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String bpartnerLocIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Package.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpartnerLocIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(bpartnerLocIdentifier);\n\t\t\t\tsoftly.assertThat(bPartnerLocation).isNotNull();\n\t\t\t\tsoftly.assertThat(packageRecord.getC_BPartner_Location_ID()).as(I_M_Package.COLUMNNAME_C_BPartner_Location_ID).isEqualTo(bPartnerLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal Timestamp shipDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(row, \"OPT.\" + I_M_Package.COLUMNNAME_ShipDate);\n\t\t\tif (shipDate != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(packageRecord.getShipDate()).as(I_M_Package.COLUMNNAME_ShipDate).isEqualTo(shipDate);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 124,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_Package_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_Package_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1354,
    "annotation": "\n\t@And(\"load M_PricingSystem:\")",
    "glue_code": "\t@And(\"load M_PricingSystem:\")\n\tpublic void load_bpartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tload_pricingSystem(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 43,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/M_PricingSystem_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "M_PricingSystem_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1329,
    "annotation": "\n\t@And(\"perform document action\")",
    "glue_code": "\t@And(\"perform document action\")\n\tpublic void perform_doc_action(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String docAction = DataTableUtil.extractStringForColumnName(tableRow, \"DocAction\");\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow,  COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t\t\tdocumentBL.processEx(InterfaceWrapperHelper.load(order.getC_Order_ID(), I_C_Order.class), docAction);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/OrderDocAction_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "OrderDocAction_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1306,
    "annotation": "\n\t@Given(\"metasfresh contains PMM_Products:\")",
    "glue_code": "\t@Given(\"metasfresh contains PMM_Products:\")\n\tpublic void metasfresh_contains_PMM_Products(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String productIdentifier = tableRow.get(COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product productRecord = productStepDefData.get(productIdentifier);\n\n\t\t\tfinal I_PMM_Product pmmProductRecord = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_PMM_Product.class)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_Product_ID, productRecord.getM_Product_ID())\n\t\t\t\t\t\t\t.create().firstOnly(I_PMM_Product.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_PMM_Product.class));\n\n\t\t\tpmmProductRecord.setM_Product_ID(productRecord.getM_Product_ID());\n\n\t\t\tpmmProductRecord.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\t\t\tpmmProductRecord.setM_Warehouse_ID(StepDefConstants.WAREHOUSE_ID.getRepoId());\n\n\t\t\tInterfaceWrapperHelper.save(pmmProductRecord);\n\t\t\t\n\t\t\tpmmProductStepDefData.put(\n\t\t\t\t\tDataTableUtil.extractRecordIdentifier(tableRow, \"PMM_Product\"),\n\t\t\t\t\tpmmProductRecord);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/PMM_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "PMM_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1332,
    "annotation": "\n\t@Given(\"the existing user with login {string} receives a random a API token for the existing role with name {string}\")",
    "glue_code": "\t@Given(\"the existing user with login {string} receives a random a API token for the existing role with name {string}\")\n\tpublic void the_existing_user_has_the_authtoken(@NonNull final String userLogin, @NonNull final String roleName)\n\t{\n\t\tuserAuthToken = RESTUtil.getAuthToken(userLogin, roleName);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1333,
    "annotation": "\n\t@When(\"a {string} request with the below payload is sent to the metasfresh REST-API {string} and fulfills with {string} status code\")",
    "glue_code": "\t@When(\"a {string} request with the below payload is sent to the metasfresh REST-API {string} and fulfills with {string} status code\")\n\tpublic void metasfresh_rest_api_endpoint_receives_a_request_responds_with_code_for_payload(\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String statusCode,\n\t\t\t@NonNull final String payload) throws IOException\n\t{\n\t\tfinal String payloadResolved = resolveContextVariables(payload);\n\t\ttestContext.setRequestPayload(payloadResolved);\n\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(statusCode))\n\t\t\t\t\t\t.payload(payloadResolved)\n\t\t\t\t\t\t.additionalHeaders(testContext.getHttpHeaders())\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1334,
    "annotation": "\n\t@When(\"a {string} request is sent to metasfresh REST-API with endpointPath from context and fulfills with {string} status code\")",
    "glue_code": "\t@When(\"a {string} request is sent to metasfresh REST-API with endpointPath from context and fulfills with {string} status code\")\n\tpublic void metasfresh_rest_api_endpoint_receives_a_request_from_context_responds_with_code_for_payload(\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String statusCode) throws IOException\n\t{\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(testContext.getEndpointPath())\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(statusCode))\n\t\t\t\t\t\t.additionalHeaders(testContext.getHttpHeaders())\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 116,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1335,
    "annotation": "\n\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request with the payload\")",
    "glue_code": "\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request with the payload\")\n\tpublic void metasfresh_rest_api_endpoint_api_external_ref_receives_get_request_with_the_payload(\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String payload) throws IOException\n\t{\n\t\tfinal String payloadResolved = resolveContextVariables(payload);\n\t\ttestContext.setRequestPayload(payloadResolved);\n\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.payload(payloadResolved)\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 131,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1336,
    "annotation": "\n\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request with the payload from context and responds with {string} status code\")",
    "glue_code": "\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request with the payload from context and responds with {string} status code\")\n\tpublic void metasfresh_rest_api_endpoint_api_external_ref_receives_get_request_with_the_payload_from_context(\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String statusCode) throws IOException\n\t{\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.payload(testContext.getRequestPayload())\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(statusCode))\n\t\t\t\t\t\t.additionalHeaders(testContext.getHttpHeaders())\n\t\t\t\t\t\t.build());\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 149,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1337,
    "annotation": "\n\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request\")",
    "glue_code": "\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request\")\n\tpublic void metasfresh_rest_api_endpoint_api_external_ref_receives_get_request_without_payload(\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String verb) throws IOException\n\t{\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 165,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1338,
    "annotation": "\n\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request with the headers from context, expecting status={string}\")",
    "glue_code": "\t@When(\"the metasfresh REST-API endpoint path {string} receives a {string} request with the headers from context, expecting status={string}\")\n\tpublic void metasfresh_rest_api_endpoint_api_external_ref_receives_request_with_additional_headers(\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String status) throws IOException\n\t{\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.additionalHeaders(testContext.getHttpHeaders())\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(status))\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 178,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1339,
    "annotation": "\n\t@When(\"a {string} request is sent to metasfresh REST-API with endpointPath and payload from context and fulfills with {string} status code\")",
    "glue_code": "\t@When(\"a {string} request is sent to metasfresh REST-API with endpointPath and payload from context and fulfills with {string} status code\")\n\tpublic void metasfresh_rest_api_endpoint_receives_endpointPath_and_request_from_context_responds_with_code_for_payload(\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String statusCode) throws IOException\n\t{\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(testContext.getEndpointPath())\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(statusCode))\n\t\t\t\t\t\t.additionalHeaders(testContext.getHttpHeaders())\n\t\t\t\t\t\t.payload(testContext.getRequestPayload())\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 194,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1340,
    "annotation": "\n\t@When(\"a {string} request with the below payload and headers from context is sent to the metasfresh REST-API {string} and fulfills with {string} status code\")",
    "glue_code": "\t@When(\"a {string} request with the below payload and headers from context is sent to the metasfresh REST-API {string} and fulfills with {string} status code\")\n\tpublic void metasfresh_rest_api_endpoint_api_external_ref_receives_request_with_additional_headers_and_below_payload(\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String statusCode,\n\t\t\t@NonNull final String payload) throws IOException\n\t{\n\t\tfinal String payloadResolved = resolveContextVariables(payload);\n\t\ttestContext.setRequestPayload(payloadResolved);\n\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(statusCode))\n\t\t\t\t\t\t.additionalHeaders(testContext.getHttpHeaders())\n\t\t\t\t\t\t.payload(payloadResolved)\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 210,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1341,
    "annotation": "\n\t@Then(\"the metasfresh REST-API responds with\")",
    "glue_code": "\t@Then(\"the metasfresh REST-API responds with\")\n\tpublic void the_metasfresh_REST_API_responds_with(@NonNull final String expectedResponse) throws JSONException\n\t{\n\t\tfinal String expectedResponseResolved = resolveContextVariables(expectedResponse);\n\t\tJSONAssert.assertEquals(expectedResponseResolved, testContext.getApiResponseBodyAsString(), JSONCompareMode.LENIENT);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 231,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1342,
    "annotation": "\n\t@When(\"invoke {string} {string} with response code {string}\")",
    "glue_code": "\t@When(\"invoke {string} {string} with response code {string}\")\n\tpublic void invoke_httpMethod_with_url(\n\t\t\t@NonNull final String verb,\n\t\t\t@NonNull final String endpointPath,\n\t\t\t@NonNull final String responseCode) throws IOException\n\t{\n\t\tperformHTTPRequest(\n\t\t\t\tnewAPIRequest()\n\t\t\t\t\t\t.endpointPath(endpointPath)\n\t\t\t\t\t\t.method(verb)\n\t\t\t\t\t\t.expectedStatusCode(Integer.parseInt(responseCode))\n\t\t\t\t\t\t.build()\n\t\t);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 238,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1343,
    "annotation": "\n\t@And(\"the actual response body is\")",
    "glue_code": "\t@And(\"the actual response body is\")\n\tpublic void validate_response_body(@NonNull final String expectedResponseBodyString) throws JsonProcessingException\n\t{\n\t\tfinal JsonTestResponse actualResponseBody = testContext.getApiResponseBodyAs(JsonTestResponse.class);\n\t\tfinal JsonTestResponse expectedResponseBody = JsonObjectMapperHolder.sharedJsonObjectMapper().readValue(expectedResponseBodyString, JsonTestResponse.class);\n\n\t\tassertThat(actualResponseBody.getMessageBody()).isEqualTo(expectedResponseBody.getMessageBody());\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 253,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1344,
    "annotation": "\n\t@And(\"the actual response body is empty\")",
    "glue_code": "\t@And(\"the actual response body is empty\")\n\tpublic void validate_empty_response_body()\n\t{\n\t\tfinal String responseJson = testContext.getApiResponse().getContent();\n\n\t\tassertThat(responseJson).isBlank();\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 262,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1345,
    "annotation": "\n\t@And(\"the actual non JSON response body is\")",
    "glue_code": "\t@And(\"the actual non JSON response body is\")\n\tpublic void validate_non_JSON_response_body(@NonNull final String responseBody)\n\t{\n\t\tfinal String content = testContext.getApiResponse().getContent();\n\n\t\tassertThat(content).isEqualTo(responseBody);\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 270,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1346,
    "annotation": "\n\t@When(\"add HTTP header\")",
    "glue_code": "\t@When(\"add HTTP header\")\n\tpublic void add_http_header(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> additionalHeaders = new HashMap<>();\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String key = DataTableUtil.extractStringForColumnName(row, \"Key\");\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, \"Value\");\n\n\t\t\tadditionalHeaders.put(key, value);\n\t\t}\n\n\t\ttestContext.setHttpHeaders(additionalHeaders);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 278,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1347,
    "annotation": "\n\t@And(\"following http headers are set on context\")",
    "glue_code": "\t@And(\"following http headers are set on context\")\n\tpublic void add_http_headers(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> customHeaders = new HashMap<>();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String headerName = DataTableUtil.extractStringForColumnName(row, \"Name\");\n\t\t\tfinal String headerValue = DataTableUtil.extractStringForColumnName(row, \"Value\");\n\n\t\t\tcustomHeaders.put(headerName, headerValue);\n\t\t}\n\n\t\ttestContext.setHttpHeaders(customHeaders);\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 293,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1348,
    "annotation": "\n\t@And(\"put REST context variables\")",
    "glue_code": "\t@And(\"put REST context variables\")\n\tpublic void putContextVariables(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::putContextVariable);\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 309,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1349,
    "annotation": "\n\t@And(\"validate the following content is present in the response\")",
    "glue_code": "\t@And(\"validate the following content is present in the response\")\n\tpublic void validate_content_presence_in_response(@NonNull final DataTable table)\n\t{\n\t\tfinal String apiResponse = testContext.getApiResponse().getContent();\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String expectedContent = DataTableUtil.extractStringForColumnName(row, \"Content\");\n\n\t\tassertThat(apiResponse).contains(expectedContent);\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 329,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/REST_API_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "REST_API_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1312,
    "annotation": "\n\t@And(\"^after not more than (.*)s, the (invoice) document with identifier (.*) has the following related documents:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, the (invoice) document with identifier (.*) has the following related documents:$\")\n\tpublic void checkRelatedDocumentsUntilTimeout(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String tableType,\n\t\t\t@NonNull final String identifier,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal IZoomSource zoomSource = getZoomSource(tableType, identifier);\n\t\tfinal DataTableRows rows = DataTableRows.of(dataTable);\n\t\tassertThat(rows.size()).isGreaterThan(0);\n\n\t\tfinal RelatedDocumentsFactory relatedDocumentsFactory = SpringContextHolder.instance.getBean(RelatedDocumentsFactory.class);\n\t\tfinal RelatedDocumentsChecker checker = new RelatedDocumentsChecker(relatedDocumentsFactory, zoomSource, rows);\n\n\t\tStepDefUtil.tryAndWaitForItem(timeoutSec, 500, checker, checker::getCurrentContext);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 33,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/RelatedDocuments_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "RelatedDocuments_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1325,
    "annotation": "\n\t@Given(\"metasfresh contains SAP_GLJournalLines:\")",
    "glue_code": "\t@Given(\"metasfresh contains SAP_GLJournalLines:\")\n\tpublic void metasfresh_contains_sap_gl_journal_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_SAP_GLJournalLine glJournalLine = newInstance(I_SAP_GLJournalLine.class);\n\n\t\t\tglJournalLine.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\n\t\t\t// Line\n\t\t\tfinal Integer line = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_Line);\n\t\t\tassertThat(line).isNotNull();\n\n\t\t\tglJournalLine.setLine(line);\n\n\t\t\t// SAP_GLJournal_ID.Identifier\n\t\t\tfinal String sapGlJournalIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_SAP_GLJournal_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(sapGlJournalIdentifier).isNotBlank();\n\n\t\t\tfinal I_SAP_GLJournal header = glJournalTable.get(sapGlJournalIdentifier);\n\t\t\tglJournalLine.setSAP_GLJournal(header);\n\n\t\t\t// PostingSign\n\t\t\tfinal String postingSign = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_PostingSign);\n\t\t\tassertThat(postingSign).isNotBlank();\n\n\t\t\tglJournalLine.setPostingSign(postingSign);\n\n\t\t\t// C_ValidCombination_ID\n\t\t\tfinal String c_ValidCombination_ID = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_ValidCombination_ID);\n\t\t\tassertThat(c_ValidCombination_ID).isNotBlank();\n\n\t\t\tglJournalLine.setC_ValidCombination_ID(Integer.valueOf(c_ValidCombination_ID));\n\n\t\t\t// Amount\n\t\t\tfinal BigDecimal amount = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_Amount);\n\t\t\tassertThat(amount).isNotNull();\n\n\t\t\tglJournalLine.setAmount(amount);\n\t\t\tglJournalLine.setAmtAcct(amount);  // same amount, as same currency is used\n\n\t\t\t// M_SectionCode_ID.Identifier\n\t\t\tfinal String sectionCodeIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_SectionCode_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(sectionCodeIdentifier).isNotBlank();\n\n\t\t\tfinal I_M_SectionCode sectionCode = sectionCodeTable.get(sectionCodeIdentifier);\n\t\t\tassertThat(sectionCode).isNotNull();\n\n\t\t\tglJournalLine.setM_SectionCode(sectionCode);\n\n\t\t\t// OPT.C_Tax_ID.Identifier\n\t\t\tfinal String taxIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_C_Tax_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(taxIdentifier).isNotBlank();\n\n\t\t\tfinal TaxId tax = taxTable.getId(taxIdentifier);\n\t\t\tassertThat(tax).isNotNull();\n\n\t\t\tglJournalLine.setC_Tax_ID(TaxId.toRepoId(tax));\n\n\t\t\t// OPT.IsTaxIncluded\n\t\t\tfinal boolean isTaxIncluded = DataTableUtil.extractBooleanForColumnName(tableRow, \"OPT.\" + COLUMNNAME_IsTaxIncluded);\n\t\t\tglJournalLine.setIsTaxIncluded(isTaxIncluded);\n\n\t\t\t// OPT.Parent_ID\n\t\t\tfinal String parentIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_Parent_ID);\n\t\t\tif (EmptyUtil.isNotBlank(parentIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_SAP_GLJournalLine parent = glJournalLineTable.get(parentIdentifier);\n\t\t\t\tassertThat(parent).isNotNull();\n\n\t\t\t\tglJournalLine.setParent(parent);\n\t\t\t}\n\n\t\t\tsaveRecord(glJournalLine);\n\n\t\t\tglJournalLineTable.putOrReplace(DataTableUtil.extractRecordIdentifier(tableRow, I_SAP_GLJournalLine.COLUMNNAME_SAP_GLJournalLine_ID), glJournalLine);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SAP_GLJournalLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SAP_GLJournalLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1326,
    "annotation": "\n\t@Given(\"validate generated lines:\")",
    "glue_code": "\t@Given(\"validate generated lines:\")\n\tpublic void validate_tax_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal I_SAP_GLJournal header = extractHeader(row);\n\t\tassertThat(header).as(\"Record not found\").isNotNull();\n\n\t\t// Amount\n\t\tfinal BigDecimal amount = DataTableUtil.extractBigDecimalForColumnName(row, COLUMNNAME_Amount);\n\t\tassertThat(amount).as(\"Please provide a valid amount\").isNotNull();\n\n\t\t// ParentID\n\t\tfinal String parentLineIdentifier = DataTableUtil.extractStringForColumnName(row, \"OPT.\" + COLUMNNAME_Parent_ID);\n\t\tassertThat(parentLineIdentifier).as(\"%s is mandatory in this context\", COLUMNNAME_Parent_ID).isNotBlank();\n\n\t\t// PostingSign\n\t\tfinal String postingSign = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_PostingSign);\n\t\tassertThat(postingSign).as(\"%s is mandatory in this context\", COLUMNNAME_PostingSign).isNotBlank();\n\n\t\tfinal I_SAP_GLJournalLine parentLine = glJournalLineTable.get(parentLineIdentifier);\n\t\tassertThat(parentLine).as(\"No record found\").isNotNull();\n\n\t\t// validate\n\t\tfinal SAPGLJournalLoaderAndSaver loaderAndSaver = new SAPGLJournalLoaderAndSaver();\n\n\t\tfinal SAPGLJournalId sapglJournalId = SAPGLJournalId.ofRepoId(header.getSAP_GLJournal_ID());\n\t\tfinal ArrayList<I_SAP_GLJournalLine> lineRecords = loaderAndSaver.getLineRecords(sapglJournalId);\n\n\t\t// extract generated line by parent\n\t\tfinal I_SAP_GLJournalLine generatedLine = lineRecords.stream()\n\t\t\t\t.filter(line -> line.getParent_ID() == parentLine.getSAP_GLJournalLine_ID())\n\t\t\t\t.findFirst()\n\t\t\t\t.get();\n\n\t\tassertThat(generatedLine).as(\"No generated line\").isNotNull();\n\t\tassertThat(generatedLine.getPostingSign()).isEqualTo(postingSign);\n\t\tassertThat(generatedLine.getAmount()).isEqualByComparingTo(amount);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 154,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SAP_GLJournalLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SAP_GLJournalLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1327,
    "annotation": "\n\t@Given(\"base tax line updated:\")",
    "glue_code": "\t@Given(\"base tax line updated:\")\n\tpublic void base_tax_line_updated(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal I_SAP_GLJournal header = extractHeader(row);\n\t\tassertThat(header).as(\"Record not found\").isNotNull();\n\n\t\t// PostingSign\n\t\tfinal String postingSign = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_PostingSign);\n\t\tassertThat(postingSign).as(\"%s is mandatory in this context\", COLUMNNAME_PostingSign).isNotBlank();\n\n\t\tfinal BigDecimal amount = DataTableUtil.extractBigDecimalForColumnName(row, COLUMNNAME_Amount);\n\t\tassertThat(amount).as(\"Please provide a valid amount\").isNotNull();\n\n\t\tfinal boolean isTaxIncluded = DataTableUtil.extractBooleanForColumnName(row, \"OPT.\" + COLUMNNAME_IsTaxIncluded);\n\n\t\t//\n\t\t// validate\n\t\tfinal SAPGLJournalLoaderAndSaver loaderAndSaver = new SAPGLJournalLoaderAndSaver();\n\n\t\tfinal SAPGLJournalId sapglJournalId = SAPGLJournalId.ofRepoId(header.getSAP_GLJournal_ID());\n\t\tfinal ArrayList<I_SAP_GLJournalLine> lineRecords = loaderAndSaver.getLineRecords(sapglJournalId);\n\n\t\t// extract generated line by parent = null\n\t\tfinal I_SAP_GLJournalLine baseLine = lineRecords.stream()\n\t\t\t\t.filter(line -> line.getParent_ID() <= 0)\n\t\t\t\t.findFirst()\n\t\t\t\t.get();\n\n\t\tassertThat(baseLine.getPostingSign()).isEqualTo(postingSign);\n\t\tassertThat(baseLine.getAmount()).isEqualByComparingTo(amount);\n\t\tassertThat(baseLine.isTaxIncluded()).isEqualTo(isTaxIncluded);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 194,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SAP_GLJournalLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SAP_GLJournalLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1317,
    "annotation": "\n\t@Given(\"metasfresh contains SAP_GLJournal:\")",
    "glue_code": "\t@Given(\"metasfresh contains SAP_GLJournal:\")\n\tpublic void metasfresh_contains_sap_gljournal(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\t// Description\n\t\tfinal String description = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Description);\n\t\tassertThat(description).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_Description)).isNotBlank();\n\n\t\t// PostingType\n\t\tfinal String postingType = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_PostingType);\n\t\tassertThat(postingType).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_PostingType)).isNotBlank();\n\n\t\t// DocStatus\n\t\tfinal String docStatus = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_DocStatus);\n\t\tassertThat(docStatus).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_DocStatus)).isNotBlank();\n\n\t\t// DocBaseType\n\t\tfinal String docBaseType = DataTableUtil.extractStringOrNullForColumnName(tableRow, COLUMNNAME_DocBaseType);\n\t\tassertThat(docBaseType).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_DocBaseType)).isNotBlank();\n\n\t\t// DateDoc\n\t\tfinal Timestamp dateDoc = DataTableUtil.extractDateTimestampForColumnName(tableRow, COLUMNNAME_DateDoc);\n\t\tassertThat(dateDoc).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_DateDoc)).isNotNull();\n\n\t\t// DateAcct\n\t\tfinal Timestamp dateAcct = DataTableUtil.extractDateTimestampForColumnName(tableRow, COLUMNNAME_DateAcct);\n\t\tassertThat(dateAcct).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_DateAcct)).isNotNull();\n\n\t\t// C_AcctSchema_ID\n\t\tfinal String acctSchemaIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_AcctSchema_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(acctSchemaIdentifier).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_C_AcctSchema_ID)).isNotBlank();\n\n\t\t// ad_org_id\n\t\tfinal int orgId = Optional.ofNullable(DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER))\n\t\t\t\t.map(orgTable::get)\n\t\t\t\t.map(I_AD_Org::getAD_Org_ID)\n\t\t\t\t.orElse(StepDefConstants.ORG_ID.getRepoId());\n\n\t\t// DateDoc\n\t\tfinal Integer conversionType_ID = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_C_ConversionType_ID);\n\t\tassertThat(conversionType_ID).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_C_ConversionType_ID)).isNotNull();\n\n\t\t// DateDoc\n\t\tfinal Integer gl_Category_ID = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_GL_Category_ID);\n\t\tassertThat(gl_Category_ID).as(String.format(\"%s column is mandatory in this context\", COLUMNNAME_GL_Category_ID)).isNotNull();\n\n\t\tfinal I_SAP_GLJournal sap_glJournal = newInstance(I_SAP_GLJournal.class);\n\n\t\t// docBaseType\n\t\tfinal String docSubType = DataTableUtil.extractStringOrNullForColumnName(tableRow, COLUMNNAME_DocSubType);\n\t\tfinal I_C_DocType docType = queryBL.createQueryBuilder(I_C_DocType.class)\n\t\t\t\t.addEqualsFilter(COLUMNNAME_DocBaseType, docBaseType)\n\t\t\t\t.addEqualsFilter(COLUMNNAME_DocSubType, docSubType)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_C_DocType.class);\n\n\t\tassertThat(docType).isNotNull();\n\t\tsap_glJournal.setC_DocType_ID(docType.getC_DocType_ID());\n\n\t\tfinal I_C_AcctSchema acctSchema = acctSchemaTable.get(acctSchemaIdentifier);\n\t\tassertThat(acctSchema).isNotNull();\n\n\t\tsap_glJournal.setDescription(description);\n\t\tsap_glJournal.setDocStatus(docStatus);\n\t\tsap_glJournal.setPostingType(postingType);\n\t\tsap_glJournal.setAD_Org_ID(orgId);\n\t\tsap_glJournal.setDateDoc(dateDoc);\n\t\tsap_glJournal.setDateAcct(dateAcct);\n\t\tsap_glJournal.setC_AcctSchema(acctSchema);\n\t\tsap_glJournal.setC_Currency_ID(acctSchema.getC_Currency_ID());\n\t\tsap_glJournal.setAcct_Currency_ID(acctSchema.getC_Currency_ID());\n\t\tsap_glJournal.setC_ConversionType_ID(conversionType_ID);\n\t\tsap_glJournal.setGL_Category_ID(gl_Category_ID);\n\n\t\tsaveRecord(sap_glJournal);\n\n\t\tglJournalTable.putOrReplace(DataTableUtil.extractRecordIdentifier(tableRow, COLUMNNAME_SAP_GLJournal_ID), sap_glJournal);\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SAP_GLJournal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SAP_GLJournal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1318,
    "annotation": "\n\t@Given(\"regenerate tax lines:\")",
    "glue_code": "\t@Given(\"regenerate tax lines:\")\n\tpublic void regenerate_tax_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\t\tfinal String headerIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_SAP_GLJournal_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\tassertThat(headerIdentifier).as(\"%s is mandatory in this context\", COLUMNNAME_SAP_GLJournal_ID).isNotBlank();\n\n\t\tfinal I_SAP_GLJournal sap_glJournal = glJournalTable.get(headerIdentifier);\n\t\tassertThat(sap_glJournal).as(\"No SAP_GLJournal record found\").isNotNull();\n\n\t\tfinal SAPGLJournalId glJournalId = SAPGLJournalId.ofRepoId(sap_glJournal.getSAP_GLJournal_ID());\n\n\t\t// generate tax line, process main method\n\t\tglJournalService.regenerateTaxLines(glJournalId);\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 163,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SAP_GLJournal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SAP_GLJournal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1316,
    "annotation": "\n\t@And(\"^wait for (.*)s$\")",
    "glue_code": "\t@And(\"^wait for (.*)s$\")\n\tpublic void waitFor(final int waitingTimeSec) throws InterruptedException\n\t{\n\t\tfinal long waitingTimeMillis = waitingTimeSec * 1000L;\n\t\tThread.sleep(waitingTimeMillis);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 95,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/StepDefUtil.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "StepDefUtil.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1350,
    "annotation": "\t@Given(\"^metasfresh has date and time (.*)$\")",
    "glue_code": "\tpublic void metasfresh_has_the_local_time(String zonedDateTime)\n\t{\n\t\tSystemTime.setFixedTimeSource(zonedDateTime);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 33,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SystemTime_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SystemTime_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1351,
    "annotation": "\n\t@Given(\"metasfresh has current date and time\")",
    "glue_code": "\t@Given(\"metasfresh has current date and time\")\n\tpublic void metasfresh_has_current_date_and_time()\n\t{\n\t\tSystemTime.setFixedTimeSource(ZonedDateTime.now());\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 38,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SystemTime_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SystemTime_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1352,
    "annotation": "\n\t@Given(\"metasfresh time source is reseted\")",
    "glue_code": "\t@Given(\"metasfresh time source is reseted\")\n\tpublic void metasfresh_time_source_is_reseted()\n\t{\n\t\tSystemTime.resetTimeSource();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 44,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SystemTime_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SystemTime_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1353,
    "annotation": "\n\t@And(\"we wait for {int} ms\")",
    "glue_code": "\t@And(\"we wait for {int} ms\")\n\tpublic void thread_sleep(final int sleepTime) throws InterruptedException\n\t{\n\t\tThread.sleep(sleepTime);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/SystemTime_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "SystemTime_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1310,
    "annotation": "\n\t@And(\"using Test record, validate save and load of following fields:\")",
    "glue_code": "\t@And(\"using Test record, validate save and load of following fields:\")\n\tpublic void saveAndLoad(@NonNull final DataTable dataTable)\n\t{\n\t\tString dbTimezone = getDBTimezone();\n\t\tSystem.out.println(\"Database timezone: \" + dbTimezone);\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tSharedTestContext.put(\"dbTimezone\", dbTimezone);\n\n\t\t\tfinal LocalDate expectedDate = row.getAsOptionalLocalDate(\"T_Date\").orElse(null);\n\t\t\tfinal Instant expectedDateTime = row.getAsOptionalString(\"T_DateTime\").map(Instant::parse).orElse(null);\n\t\t\tfinal LocalTime expectedTime = row.getAsOptionalString(\"T_Time\").map(LocalTime::parse).orElse(null);\n\t\t\tforEachTestTimeZone(() -> testDates(softly, expectedDate, expectedDateTime, expectedTime));\n\t\t});\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 41,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/TestRecord_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs",
      "filename": "TestRecord_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1313,
    "annotation": "\n\t@And(\"documents are accounted immediately\")",
    "glue_code": "\t@And(\"documents are accounted immediately\")\n\tpublic void enablePostImmediate()\n\t{\n\t\tfinal ClientId clientId = Env.getClientId();\n\t\tassertThat(clientId)\n\t\t\t\t.as(\"Client shall be metasfresh\")\n\t\t\t\t.isEqualTo(ClientId.METASFRESH); // just to make sure we are not configuring the wrong AD_Client\n\n\t\tfinal I_AD_Client client = clientDAO.getById(clientId);\n\t\tclient.setIsPostImmediate(true);\n\t\tInterfaceWrapperHelper.save(client);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 16,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting/Accounting_Config.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting",
      "filename": "Accounting_Config.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1330,
    "annotation": "\n\t@And(\"^Fact_Acct records are matching$\")",
    "glue_code": "\t@And(\"^Fact_Acct records are matching$\")\n\tpublic void validateFullyMatchingAndPartialMatchingFactAccts(\n\t\t\t@NonNull final DataTable table) throws Throwable\n\t{\n\t\tnewFactAcctValidator()\n\t\t\t\t.factAcctTabularStringConverter(factAcctTabularStringConverter)\n\t\t\t\t.matchers(factAcctMatchersFactory.ofDataTable(table))\n\t\t\t\t.validate();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting/Fact_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting",
      "filename": "Fact_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1331,
    "annotation": "\n\t@And(\"^no Fact_Acct records are found for documents (.*)$\")",
    "glue_code": "\t@And(\"^no Fact_Acct records are found for documents (.*)$\")\n\tpublic void assertNoFactAccts(@NonNull final String identifiersStr) throws Throwable\n\t{\n\t\tnewFactAcctValidator()\n\t\t\t\t.factAcctTabularStringConverter(factAcctTabularStringConverter)\n\t\t\t\t.matchers(FactAcctMatchers.noRecords(identifiersResolver.getTableRecordReferencesOfCommaSeparatedIdentifiers(identifiersStr)))\n\t\t\t\t.validate();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting/Fact_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting",
      "filename": "Fact_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1309,
    "annotation": "\n\t@Then(\"expect inventory valuation report\")",
    "glue_code": "\t@Then(\"expect inventory valuation report\")\n\tpublic void expectInventoryValue(final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::expectInventoryValueRow);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 27,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting/Report_InventoryValue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/accounting",
      "filename": "Report_InventoryValue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1311,
    "annotation": "\n\t@And(\"metasfresh contains C_AcctSchema_Element:\")",
    "glue_code": "\t@And(\"metasfresh contains C_AcctSchema_Element:\")\n\tpublic void metasfreshContainsC_AcctSchema_Element(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcreateC_AcctSchema_Element(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema/C_AcctSchema_Element_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema",
      "filename": "C_AcctSchema_Element_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1359,
    "annotation": "\n\t@And(\"load C_AcctSchema:\")",
    "glue_code": "\t@And(\"load C_AcctSchema:\")\n\tpublic void load_C_AcctSchemas(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_C_AcctSchema.COLUMNNAME_C_AcctSchema_ID)\n\t\t\t\t.forEach(this::loadAcctSchema);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema/C_AcctSchema_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema",
      "filename": "C_AcctSchema_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1360,
    "annotation": "\n\t@And(\"update C_AcctSchema:\")",
    "glue_code": "\t@And(\"update C_AcctSchema:\")\n\tpublic void update_C_AcctSchemas(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_C_AcctSchema.COLUMNNAME_C_AcctSchema_ID)\n\t\t\t\t.forEach(this::updateAcctSchema);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema/C_AcctSchema_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema",
      "filename": "C_AcctSchema_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1361,
    "annotation": "\n\t@And(\"load and update C_AcctSchema:\")",
    "glue_code": "\t@And(\"load and update C_AcctSchema:\")\n\tpublic void loadAndUpdate_C_AcctSchemas(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_C_AcctSchema.COLUMNNAME_C_AcctSchema_ID)\n\t\t\t\t.forEach(this::loadAndUpdate);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema/C_AcctSchema_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/acctschema",
      "filename": "C_AcctSchema_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1363,
    "annotation": "\n\t@And(\"metasfresh contains C_Activity:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Activity:\")\n\tpublic void add_C_Activity(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_C_Activity.COLUMNNAME_Value);\n\n\t\t\tfinal I_C_Activity activity = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_C_Activity.class)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.addEqualsFilter(I_C_Activity.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyOrNull(I_C_Activity.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_C_Activity.class));\n\n\t\t\tassertThat(activity).isNotNull();\n\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_Activity.COLUMNNAME_Name);\n\n\t\t\tactivity.setName(name);\n\t\t\tactivity.setValue(value);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(activity);\n\n\t\t\tfinal String activityIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Activity.COLUMNNAME_C_Activity_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tactivityTable.putOrReplace(activityIdentifier, activity);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/activity/C_Activity_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/activity",
      "filename": "C_Activity_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1364,
    "annotation": "\n\t@And(\"validate C_Activity:$\")",
    "glue_code": "\t@And(\"validate C_Activity:$\")\n\tpublic void retrieve_C_Activity(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_C_Activity.COLUMNNAME_Value);\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_Activity.COLUMNNAME_Name);\n\n\t\t\tfinal String activityIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Activity.COLUMNNAME_C_Activity_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Activity activity = activityTable.get(activityIdentifier);\n\n\t\t\tassertThat(activity.getName()).isEqualTo(name);\n\t\t\tassertThat(activity.getValue()).isEqualTo(value);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/activity/C_Activity_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/activity",
      "filename": "C_Activity_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1355,
    "annotation": "\n\t@Given(\"metasfresh contains C_AggregationItems:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_AggregationItems:\")\n\tpublic void metasfresh_contains_c_aggregation_item(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateC_Aggregation_Item(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_AggregationItem_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_AggregationItem_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1356,
    "annotation": "\t\n\t@And(\"load C_AggregationItem\")",
    "glue_code": "\t@And(\"load C_AggregationItem\")\n\tpublic void load_C_AggregationItem(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadAggregationItem(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_AggregationItem_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_AggregationItem_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1357,
    "annotation": "\n\t@And(\"update C_AggregationItem\")",
    "glue_code": "\t@And(\"update C_AggregationItem\")\n\tpublic void update_C_AggregationItem(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateAggregationItem(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_AggregationItem_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_AggregationItem_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1358,
    "annotation": "\n\t@And(\"update C_AggregationItem:\")",
    "glue_code": "\t@And(\"update C_AggregationItem:\")\n\tpublic void update_C_AggregationItem_directly(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal int aggregationId = DataTableUtil.extractIntForColumnName(row, I_C_AggregationItem.COLUMNNAME_C_Aggregation_ID);\n\t\t\tfinal int columnId = DataTableUtil.extractIntForColumnName(row, I_C_AggregationItem.COLUMNNAME_AD_Column_ID);\n\t\t\tfinal Boolean isActive = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_AggregationItem.COLUMNNAME_IsActive, null);\n\n\t\t\tfinal I_C_AggregationItem aggItem = queryBL.createQueryBuilder(I_C_AggregationItem.class)\n\t\t\t\t\t.addEqualsFilter(I_C_AggregationItem.COLUMNNAME_C_Aggregation_ID, aggregationId)\n\t\t\t\t\t.addEqualsFilter(I_C_AggregationItem.COLUMNNAME_AD_Column_ID, columnId)\n\t\t\t\t\t.orderBy(I_C_AggregationItem.COLUMN_C_AggregationItem_ID)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstNotNull(I_C_AggregationItem.class);\n\n\t\t\tif (isActive != null)\n\t\t\t{\n\t\t\t\taggItem.setIsActive(isActive);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.save(aggItem);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 90,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_AggregationItem_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_AggregationItem_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1375,
    "annotation": "\n\t@Given(\"load C_Aggregation_Attributes:\")",
    "glue_code": "\t@Given(\"load C_Aggregation_Attributes:\")\n\tpublic void load_C_Aggregation_Attribute(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadC_Aggregation_Attribute(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 43,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_Aggregation_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_Aggregation_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1368,
    "annotation": "\n\t@And(\"load C_Aggregation:\")",
    "glue_code": "\t@And(\"load C_Aggregation:\")\n\tpublic void load_C_Aggregation(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::loadAggregation);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 54,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_Aggregation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_Aggregation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1369,
    "annotation": "\n\t@And(\"update C_Aggregation:\")",
    "glue_code": "\t@And(\"update C_Aggregation:\")\n\tpublic void update_C_Aggregation(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::updateAggregation);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_Aggregation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_Aggregation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1370,
    "annotation": "\n\t@Given(\"metasfresh contains C_Aggregations:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Aggregations:\")\n\tpublic void metasfresh_contains_c_aggregation(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateC_Aggregation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 66,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation/C_Aggregation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/aggregation",
      "filename": "C_Aggregation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1383,
    "annotation": "\n\t@And(\"^apply (.*) to invoices$\")",
    "glue_code": "\t@And(\"^apply (.*) to invoices$\")\n\tpublic void apply_write_off_or_discount_to_invoice(final String processToApply, @NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(row -> {\n\t\t\tfinal I_C_Invoice invoice = row.getAsIdentifier(COLUMNNAME_C_Invoice_ID).lookupNotNullIn(invoiceTable);\n\n\t\t\tfinal InvoiceToAllocate invoiceToAllocate = getInvoiceToAllocate(invoice);\n\n\t\t\tfinal InvoiceAmtMultiplier amtMultiplier = invoiceToAllocate.getMultiplier();\n\t\t\tfinal Money amountToDiscountOrWriteOff = amtMultiplier.convertToRealValue(invoiceToAllocate.getOpenAmountConverted())\n\t\t\t\t\t.toMoney(moneyService::getCurrencyIdByCurrencyCode);\n\n\t\t\ttrxManager.runInThreadInheritedTrx(() -> allocationBL.invoiceDiscountAndWriteOff(\n\t\t\t\t\tIAllocationBL.InvoiceDiscountAndWriteOffRequest.builder()\n\t\t\t\t\t\t\t.invoice(invoice)\n\t\t\t\t\t\t\t.dateTrx(Instant.now())\n\t\t\t\t\t\t\t.discountAmt(processToApply.equals(DISCOUNT_PROCESS) ? amountToDiscountOrWriteOff : null)\n\t\t\t\t\t\t\t.writeOffAmt(processToApply.equals(WRITE_OFF_PROCESS) ? amountToDiscountOrWriteOff : null)\n\t\t\t\t\t\t\t.build()));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation/AllocatePayments_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation",
      "filename": "AllocatePayments_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1384,
    "annotation": "\n\t@And(\"allocate payments to invoices\")",
    "glue_code": "\t@And(\"allocate payments to invoices\")\n\tpublic void allocate_payment_to_invoice(@NonNull final DataTable table)\n\t{\n\t\tfinal ArrayList<PayableDocument> payableDocuments = new ArrayList<>();\n\t\tfinal ArrayList<PaymentDocument> paymentDocuments = new ArrayList<>();\n\n\t\tDataTableRows.of(table).forEach(row -> {\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_C_Invoice_ID)\n\t\t\t\t\t.map(this::buildPayableDocument)\n\t\t\t\t\t.ifPresent(payableDocuments::add);\n\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_C_Payment_ID)\n\t\t\t\t\t.map(this::buildPaymentDocument)\n\t\t\t\t\t.ifPresent(paymentDocuments::add);\n\t\t});\n\n\t\tPaymentAllocationBuilder.newBuilder()\n\t\t\t\t.invoiceProcessingServiceCompanyService(invoiceProcessingServiceCompanyService)\n\t\t\t\t.defaultDateTrx(LocalDate.now())\n\t\t\t\t.paymentDocuments(paymentDocuments)\n\t\t\t\t.payableDocuments(payableDocuments)\n\t\t\t\t.allowPartialAllocations(true)\n\t\t\t\t.payableRemainingOpenAmtPolicy(PaymentAllocationBuilder.PayableRemainingOpenAmtPolicy.DO_NOTHING)\n\t\t\t\t.allowPurchaseSalesInvoiceCompensation(paymentDocuments.isEmpty() && payableDocuments.size() > 1)\n\t\t\t\t.build();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation/AllocatePayments_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation",
      "filename": "AllocatePayments_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1385,
    "annotation": "\n\t@And(\"^allocate invoices \\\\(credit memo/purchase\\\\) to invoices$\")",
    "glue_code": "\t@And(\"^allocate invoices \\\\(credit memo/purchase\\\\) to invoices$\")\n\tpublic void allocate_credit_memo_to_invoice(@NonNull final DataTable table)\n\t{\n\t\tfinal ArrayList<PayableDocument> payableDocuments = new ArrayList<>();\n\n\t\tDataTableRows.of(table).forEach(row -> {\n\t\t\trow.getAsOptionalIdentifier(\"C_Invoice_ID\")\n\t\t\t\t\t.map(this::buildPayableDocument)\n\t\t\t\t\t.ifPresent(payableDocuments::add);\n\t\t\trow.getAsOptionalIdentifier(\"CreditMemo.C_Invoice_ID\")\n\t\t\t\t\t.map(this::buildPayableDocument)\n\t\t\t\t\t.ifPresent(payableDocuments::add);\n\t\t\trow.getAsOptionalIdentifier(\"Purchase.C_Invoice_ID\")\n\t\t\t\t\t.map(this::buildPayableDocument)\n\t\t\t\t\t.ifPresent(payableDocuments::add);\n\t\t});\n\n\t\tPaymentAllocationBuilder.newBuilder()\n\t\t\t\t.invoiceProcessingServiceCompanyService(invoiceProcessingServiceCompanyService)\n\t\t\t\t.defaultDateTrx(LocalDate.now())\n\t\t\t\t.payableDocuments(payableDocuments)\n\t\t\t\t.allowPartialAllocations(true)\n\t\t\t\t.allowPurchaseSalesInvoiceCompensation(true)\n\t\t\t\t.payableRemainingOpenAmtPolicy(PaymentAllocationBuilder.PayableRemainingOpenAmtPolicy.DO_NOTHING)\n\t\t\t\t.build();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 141,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation/AllocatePayments_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation",
      "filename": "AllocatePayments_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1365,
    "annotation": "\n\t@And(\"validate C_AllocationLines\")",
    "glue_code": "\t@And(\"validate C_AllocationLines\")\n\tpublic void validate_C_AllocationLines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::validate_C_AllocationLine);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation/C_AllocationLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation",
      "filename": "C_AllocationLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1366,
    "annotation": "\n\t@And(\"^validate C_AllocationLines for invoice (.*)$\")",
    "glue_code": "\t@And(\"^validate C_AllocationLines for invoice (.*)$\")\n\tpublic void validate_C_AllocationLines_for_invoice(\n\t\t\t@NonNull final String invoiceIdentifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Integer invoiceId = invoiceTable.get(invoiceIdentifier).getC_Invoice_ID();\n\n\t\tfinal ImmutableList<I_C_AllocationLine> allocationLines = queryBL.createQueryBuilder(I_C_AllocationLine.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_AllocationLine.COLUMNNAME_C_Invoice_ID, invoiceId)\n\t\t\t\t.orderBy(I_C_AllocationLine.COLUMN_C_AllocationLine_ID)\n\t\t\t\t.create()\n\t\t\t\t.listImmutable(I_C_AllocationLine.class);\n\n\t\tassertThat(allocationLines).hasSameSizeAs(dataTable.asMaps());\n\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.forEach((row, index) -> validateAllocationLine(allocationLines.get(index), row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation/C_AllocationLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation",
      "filename": "C_AllocationLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1367,
    "annotation": "\n\t@And(\"there are no allocation lines for invoice\")",
    "glue_code": "\t@And(\"there are no allocation lines for invoice\")\n\tpublic void invoices_are_not_allocated(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(row -> {\n\t\t\tfinal I_C_Invoice invoice = row.getAsIdentifier(COLUMNNAME_C_Invoice_ID).lookupNotNullIn(invoiceTable);\n\t\t\tfinal List<I_C_AllocationLine> allocationLines = allocationDAO.retrieveAllocationLines(invoice);\n\t\t\tassertThat(allocationLines).isEmpty();\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 98,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation/C_AllocationLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/allocation",
      "filename": "C_AllocationLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1397,
    "annotation": "\n\t@And(\"the following API_Audit_Config records are created:\")",
    "glue_code": "\t@And(\"the following API_Audit_Config records are created:\")\n\tpublic void API_Audit_Config_insert(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = table.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(tableRow, I_API_Audit_Config.COLUMNNAME_SeqNo);\n\t\t\tfinal String method = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_API_Audit_Config.COLUMNNAME_Method);\n\t\t\tfinal String pathPrefix = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_API_Audit_Config.COLUMNNAME_PathPrefix);\n\t\t\tfinal boolean isForceProcessedAsync = DataTableUtil.extractBooleanForColumnNameOr(tableRow, I_API_Audit_Config.COLUMNNAME_IsForceProcessedAsync, false);\n\t\t\tfinal boolean isSynchronousAuditLoggingEnabled = DataTableUtil.extractBooleanForColumnName(tableRow, I_API_Audit_Config.COLUMNNAME_IsSynchronousAuditLoggingEnabled);\n\t\t\tfinal boolean isWrapApiResponse = DataTableUtil.extractBooleanForColumnName(tableRow, I_API_Audit_Config.COLUMNNAME_IsWrapApiResponse);\n\n\t\t\tfinal I_API_Audit_Config auditConfig = InterfaceWrapperHelper.newInstance(I_API_Audit_Config.class);\n\n\t\t\tauditConfig.setSeqNo(seqNo);\n\t\t\tauditConfig.setMethod(method);\n\t\t\tauditConfig.setPathPrefix(pathPrefix);\n\t\t\tauditConfig.setIsForceProcessedAsync(isForceProcessedAsync);\n\t\t\tauditConfig.setIsSynchronousAuditLoggingEnabled(isSynchronousAuditLoggingEnabled);\n\t\t\tauditConfig.setIsWrapApiResponse(isWrapApiResponse);\n\n\t\t\tsaveRecord(auditConfig);\n\n\t\t\tfinal String recordIdentifier = DataTableUtil.extractRecordIdentifier(tableRow, I_API_Audit_Config.Table_Name);\n\t\t\tapiAuditConfigTable.put(recordIdentifier, auditConfig);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Audit_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Audit_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1371,
    "annotation": "\n\t@And(\"there are no records in API_Request_Audit_Log for the API_Request_Audit from context\")",
    "glue_code": "\t@And(\"there are no records in API_Request_Audit_Log for the API_Request_Audit from context\")\n\tpublic void API_Request_Audit_Log_noRecordsById_validation()\n\t{\n\t\tfinal ApiRequestAuditId requestId = testContext.getApiResponse().getRequestId();\n\n\t\tassertThat(requestId).isNotNull();\n\t\tassertThat(this.getApiLogRecordsByRequestAuditId(requestId)).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1372,
    "annotation": "\n\t@And(\"there are no records in API_Request_Audit_Log\")",
    "glue_code": "\t@And(\"there are no records in API_Request_Audit_Log\")\n\tpublic void API_Request_Audit_Log_noRecords()\n\t{\n\t\tassertThat(this.getAllApiLogRecords()).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1373,
    "annotation": "\n\t@And(\"^after not more than (.*)s, there are added records in API_Request_Audit_Log$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, there are added records in API_Request_Audit_Log$\")\n\tpublic void validate_API_Request_Audit_Log_with_timeout(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tvalidateApiRequestAuditLog(table, timeoutSec);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1374,
    "annotation": "\n\t@And(\"there are added records in API_Request_Audit_Log\")",
    "glue_code": "\t@And(\"there are added records in API_Request_Audit_Log\")\n\tpublic void directly_validate_API_Request_Audit_Log(@NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tvalidateApiRequestAuditLog(table, null);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1376,
    "annotation": "\n\t@And(\"^after not more than (.*)s, there are added records in API_Request_Audit$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, there are added records in API_Request_Audit$\")\n\tpublic void validate_API_Request_Audit_with_timeout(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tvalidateApiRequestAudit(table, timeoutSec);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1377,
    "annotation": "\n\t@And(\"there are added records in API_Request_Audit\")",
    "glue_code": "\t@And(\"there are added records in API_Request_Audit\")\n\tpublic void directly_validate_API_Request_Audit(@NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tvalidateApiRequestAudit(table, null);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1378,
    "annotation": "\n\t@And(\"on API_Request_Audit record we update the statusCode value from path\")",
    "glue_code": "\t@And(\"on API_Request_Audit record we update the statusCode value from path\")\n\tpublic void update_API_Request_Audit(@NonNull final DataTable table)\n\t{\n\t\tfinal ApiRequestAuditId requestId = testContext.getApiResponse().getRequestId();\n\t\tassertThat(requestId).isNotNull();\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String statusCode = DataTableUtil.extractStringForColumnName(row, \"statusCode\");\n\n\t\tfinal ApiRequestAudit existingApiRequestAudit = apiRequestAuditRepository.getById(requestId);\n\n\t\tfinal String existingPath = existingApiRequestAudit.getPath();\n\n\t\tassertThat(existingPath).isNotNull();\n\n\t\tfinal String updatedPath = existingPath.replace(\"404\", statusCode);\n\n\t\tfinal ApiRequestAudit updatedApiRequestAudit = existingApiRequestAudit.toBuilder()\n\t\t\t\t.path(updatedPath)\n\t\t\t\t.build();\n\n\t\tapiRequestAuditRepository.save(updatedApiRequestAudit);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1379,
    "annotation": "\n\t@And(\"^after not more than (.*)s, find and add last API_Request_Audit_ID to context$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, find and add last API_Request_Audit_ID to context$\")\n\tpublic void get_last_API_Request_Audit_Id(final int timeoutSec) throws InterruptedException\n\t{\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> this.getLastApiRequestAuditId().isPresent());\n\n\t\tfinal ApiRequestAuditId apiRequestAuditId = this.getLastApiRequestAuditId()\n\t\t\t\t.map(I_API_Request_Audit::getAPI_Request_Audit_ID)\n\t\t\t\t.map(ApiRequestAuditId::ofRepoId)\n\t\t\t\t.orElse(null);\n\n\t\tassertThat(apiRequestAuditId).isNotNull();\n\n\t\ttestContext.setApiResponse(testContext\n\t\t\t\t.getApiResponse()\n\t\t\t\t.toBuilder()\n\t\t\t\t.requestId(apiRequestAuditId)\n\t\t\t\t.build());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 96,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Request_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Request_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1403,
    "annotation": "\n\t@And(\"^after not more than (.*)s, there are added records in API_Response_Audit$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, there are added records in API_Response_Audit$\")\n\tpublic void validate_API_Response_Audit_with_timeout(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tvalidateApiResponse(table, timeoutSec);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Response_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Response_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1404,
    "annotation": "\n\t@And(\"there are added records in API_Response_Audit\")",
    "glue_code": "\t@And(\"there are added records in API_Response_Audit\")\n\tpublic void directly_validate_API_Response_Audit(@NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tvalidateApiResponse(table, null);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Response_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Response_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1405,
    "annotation": "\n\t@And(\"there are no records in API_Response_Audit for the API_Request_Audit from context\")",
    "glue_code": "\t@And(\"there are no records in API_Response_Audit for the API_Request_Audit from context\")\n\tpublic void validate_API_Response_Audit_no_records_for_request()\n\t{\n\t\tfinal ApiRequestAuditId requestId = testContext.getApiResponse().getRequestId();\n\t\tassertThat(requestId).isNotNull();\n\n\t\tfinal List<I_API_Response_Audit> responseAuditRecords = getApiResponseRecordsByRequestAuditId(requestId);\n\n\t\tassertThat(responseAuditRecords).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Response_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Response_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1406,
    "annotation": "\n\t@And(\"there are no records in API_Response_Audit\")",
    "glue_code": "\t@And(\"there are no records in API_Response_Audit\")\n\tpublic void validate_API_Response_Audit_no_records()\n\t{\n\t\tassertThat(this.getAllApiResponseAuditRecords()).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/API_Response_Audit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "API_Response_Audit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1393,
    "annotation": "\n\t@And(\"all the API audit data is reset\")",
    "glue_code": "\t@And(\"all the API audit data is reset\")\n\tpublic void reset_data()\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE API_Response_Audit cascade\", ITrx.TRXNAME_None);\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE API_Request_Audit_Log cascade\", ITrx.TRXNAME_None);\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE API_Request_Audit cascade\", ITrx.TRXNAME_None);\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE API_Audit_Config cascade\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/ApiAuditFilter_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "ApiAuditFilter_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1394,
    "annotation": "\n\t@When(\"invoke replay audit\")",
    "glue_code": "\t@When(\"invoke replay audit\")\n\tpublic void invoke_replay_audit()\n\t{\n\t\tfinal ApiRequestAuditId requestId = testContext.getApiResponse().getRequestId();\n\t\tassertThat(requestId).isNotNull();\n\n\t\tfinal ImmutableList<ApiRequestAudit> responseAuditRecords = ImmutableList.of(apiRequestAuditRepository.getById(requestId));\n\n\t\tapiRequestReplayService.replayApiRequests(responseAuditRecords);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 66,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/ApiAuditFilter_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "ApiAuditFilter_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1395,
    "annotation": "\n\t@Then(\"validate api response error message\")",
    "glue_code": "\t@Then(\"validate api response error message\")\n\tpublic void validate_api_response_error_message(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper objectMapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String message = DataTableUtil.extractStringForColumnName(row, \"JsonErrorItem.message\");\n\t\t\tfinal JsonErrorItem jsonErrorItem;\n\t\t\tfinal String responseContent = testContext.getApiResponse().getContent();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tjsonErrorItem = objectMapper.readValue(responseContent, JsonErrorItem.class);\n\t\t\t}\n\t\t\tcatch (final RuntimeException rte)\n\t\t\t{\n\t\t\t\tfail(\"Error parsing string into class \" + JsonErrorItem.class + \"; string=\" + responseContent);\n\t\t\t\tthrow rte;\n\t\t\t}\n\t\t\tassertThat(jsonErrorItem.getMessage()).isEqualTo(message);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 77,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter/ApiAuditFilter_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/apiauditfilter",
      "filename": "ApiAuditFilter_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1386,
    "annotation": "\n\t@Then(\"process attachment response\")",
    "glue_code": "\t@Then(\"process attachment response\")\n\tpublic void process_attachment_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonAttachmentResponse attachmentResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonAttachmentResponse.class);\n\t\tassertThat(attachmentResponse).isNotNull();\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\t\tfinal String attachmentEntryIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_AD_AttachmentEntry_ID + \".Identifier\");\n\n\t\tprocessAttachmentResponse(attachmentResponse, attachmentEntryIdentifier);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments/AD_AttachmentEntry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments",
      "filename": "AD_AttachmentEntry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1387,
    "annotation": "\n\t@And(\"validate the created attachment entry\")",
    "glue_code": "\t@And(\"validate the created attachment entry\")\n\tpublic void validate_created_attachment_entry(@NonNull final DataTable table)\n\t{\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String identifier = DataTableUtil.extractStringForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_AD_AttachmentEntry_ID + \".Identifier\");\n\t\tfinal String type = DataTableUtil.extractStringForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_Type);\n\t\tfinal String fileName = DataTableUtil.extractStringForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_FileName);\n\t\tfinal String dataString = DataTableUtil.extractStringOrNullForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_BinaryData);\n\t\tfinal String contentType = DataTableUtil.extractStringOrNullForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_ContentType);\n\t\tfinal String URL = DataTableUtil.extractStringOrNullForColumnName(row, I_AD_AttachmentEntry.COLUMNNAME_URL);\n\t\tfinal String fileIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.File.Identifier\");\n\n\t\tfinal I_AD_AttachmentEntry attachmentEntry = attachmentEntryTable.get(identifier);\n\n\t\tassertThat(attachmentEntry.getType()).isEqualTo(type);\n\t\tassertThat(attachmentEntry.getFileName()).isEqualTo(fileName);\n\n\t\tif (Check.isNotBlank(dataString))\n\t\t{\n\t\t\tfinal byte[] binaryData = dataString.getBytes();\n\t\t\tassertThat(attachmentEntry.getBinaryData()).isEqualTo(binaryData);\n\t\t}\n\n\t\tif (Check.isNotBlank(contentType))\n\t\t{\n\t\t\tassertThat(attachmentEntry.getContentType()).isEqualTo(contentType);\n\t\t}\n\n\t\tif (Check.isNotBlank(URL))\n\t\t{\n\t\t\tassertThat(attachmentEntry.getURL()).isEqualTo(URL);\n\t\t}\n\n\t\tif (Check.isNotBlank(fileIdentifier))\n\t\t{\n\t\t\tfinal File file = fileTable.get(fileIdentifier);\n\n\t\t\tassertThat(file.toPath().toUri().toString()).isEqualTo(attachmentEntry.getURL());\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 90,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments/AD_AttachmentEntry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments",
      "filename": "AD_AttachmentEntry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1388,
    "annotation": "\n\t@And(\"validate the created attachment multiref\")",
    "glue_code": "\t@And(\"validate the created attachment multiref\")\n\tpublic void validate_created_attachment_multiref(@NonNull final DataTable table) throws IOException\n\t{\n\t\tfor (final Map<String, String> row : table.asMaps())\n\t\t{\n\t\t\tvalidateAttachmentEntry_MultiRef(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 132,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments/AD_AttachmentEntry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments",
      "filename": "AD_AttachmentEntry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1389,
    "annotation": "\n\t@Given(\"an existing local file\")",
    "glue_code": "\t@Given(\"an existing local file\")\n\tpublic void anExistingLocalFile(@NonNull final DataTable table) throws IOException\n\t{\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\t\tfinal String fileName = DataTableUtil.extractStringForColumnName(row, \"FileName\");\n\t\tfinal String fileIdentifier = DataTableUtil.extractStringForColumnName(row, \"File.Identifier\");\n\n\t\tfinal File file = new File(fileName);\n\n\t\tfile.createNewFile();\n\n\t\tfileTable.put(fileIdentifier, file);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 157,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments/AD_AttachmentEntry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments",
      "filename": "AD_AttachmentEntry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1390,
    "annotation": "\n\t@And(\"store JsonAttachmentRequest in context\")",
    "glue_code": "\t@And(\"store JsonAttachmentRequest in context\")\n\tpublic void storeJsonAttachmentRequestInContext(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\t\tfinal String orgCode = DataTableUtil.extractStringForColumnName(row, \"orgCode\");\n\t\tfinal String type = DataTableUtil.extractStringForColumnName(row, I_AD_AttachmentEntry.Table_Name + \".\" + I_AD_AttachmentEntry.COLUMNNAME_Type);\n\t\tfinal String fileIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.File.Identifier\");\n\n\t\tfinal JsonAttachment.JsonAttachmentBuilder jsonAttachmentBuilder = JsonAttachment.builder();\n\n\t\tif (Check.isNotBlank(fileIdentifier))\n\t\t{\n\t\t\tfinal File file = fileTable.get(fileIdentifier);\n\t\t\tassertThat(file).isNotNull();\n\n\t\t\tjsonAttachmentBuilder.fileName(file.getName())\n\t\t\t\t\t.data(file.toPath().toUri().toString());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfinal String fileName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_AD_AttachmentEntry.COLUMNNAME_FileName);\n\t\t\tOptional.ofNullable(fileName)\n\t\t\t\t\t.ifPresent(jsonAttachmentBuilder::fileName);\n\n\t\t\tfinal String data = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_AD_AttachmentEntry.COLUMNNAME_BinaryData);\n\t\t\tif (Check.isNotBlank(data))\n\t\t\t{\n\t\t\t\tfinal byte[] fileData = data.getBytes();\n\t\t\t\tfinal String encodedData = Base64.getEncoder().encodeToString(fileData);\n\t\t\t\tjsonAttachmentBuilder.data(encodedData);\n\t\t\t}\n\t\t}\n\n\t\tfinal JsonAttachmentSourceType jsonAttachmentSourceType = JsonAttachmentSourceType.valueOf(type);\n\n\t\tfinal JsonAttachment jsonAttachment = jsonAttachmentBuilder\n\t\t\t\t.type(jsonAttachmentSourceType)\n\t\t\t\t.build();\n\n\t\tfinal JsonAttachmentRequest.JsonAttachmentRequestBuilder jsonAttachmentRequestBuilder = JsonAttachmentRequest.builder()\n\t\t\t\t.attachment(jsonAttachment)\n\t\t\t\t.orgCode(orgCode);\n\n\t\tfinal String targets = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.targets\");\n\t\tif (Check.isNotBlank(targets))\n\t\t{\n\t\t\tfinal List<JsonExternalReferenceTarget> targetList = JsonObjectMapperHolder.newJsonObjectMapper()\n\t\t\t\t\t.readValue(targets, new TypeReference<List<JsonExternalReferenceTarget>>() {});\n\n\t\t\tjsonAttachmentRequestBuilder.targets(targetList);\n\t\t}\n\n\t\tfinal String references = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.references\");\n\t\tif (Check.isNotBlank(references))\n\t\t{\n\t\t\tfinal List<JsonTableRecordReference> referenceList = JsonObjectMapperHolder.newJsonObjectMapper()\n\t\t\t\t\t.readValue(references, new TypeReference<List<JsonTableRecordReference>>() {});\n\n\t\t\tjsonAttachmentRequestBuilder.references(referenceList);\n\t\t}\n\n\t\tfinal String payload = mapper.writeValueAsString(jsonAttachmentRequestBuilder.build());\n\n\t\ttestContext.setRequestPayload(payload);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 171,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments/AD_AttachmentEntry_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attachments",
      "filename": "AD_AttachmentEntry_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1380,
    "annotation": "\n\t@And(\"metasfresh contains M_AttributeSetInstance with identifier {string}:\")",
    "glue_code": "\t@And(\"metasfresh contains M_AttributeSetInstance with identifier {string}:\")\n\tpublic void contains_M_AttributeSetInstance(\n\t\t\t@NonNull final String attributeSetInstanceIdentifier,\n\t\t\t@NonNull final String jsonAttributeSetInstanceIS) throws JsonProcessingException\n\t{\n\t\tfinal JsonAttributeSetInstance jsonAttributeSetInstance = JsonObjectMapperHolder.sharedJsonObjectMapper()\n\t\t\t\t.readValue(jsonAttributeSetInstanceIS, JsonAttributeSetInstance.class);\n\n\t\tfinal AttributeSetInstanceId attributeSetInstanceId = jsonAttributeService.computeAttributeSetInstanceFromJson(jsonAttributeSetInstance)\n\t\t\t\t.orElse(null);\n\n\t\tassertThat(attributeSetInstanceId).isNotNull();\n\n\t\tfinal I_M_AttributeSetInstance attributeSetInstance = queryBL.createQueryBuilder(I_M_AttributeSetInstance.class)\n\t\t\t\t.addEqualsFilter(I_M_AttributeSetInstance.COLUMNNAME_M_AttributeSetInstance_ID, attributeSetInstanceId)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.orderBy(I_M_AttributeSetInstance.COLUMN_M_AttributeSetInstance_ID) // ..to shut up the warning\n\t\t\t\t.create()\n\t\t\t\t.firstNotNull(I_M_AttributeSetInstance.class);\n\n\t\tassertThat(attributeSetInstance).isNotNull();\n\n\t\tattributeSetInstanceTable.put(attributeSetInstanceIdentifier, attributeSetInstance);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeSetInstance_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeSetInstance_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1381,
    "annotation": "\n\t@And(\"validate M_AttributeInstance:\")",
    "glue_code": "\t@And(\"validate M_AttributeInstance:\")\n\tpublic void validate_M_AttributeInstance(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal AttributeCode attributeCode = row.getAsOptionalString(\"AttributeCode\").map(AttributeCode::ofString).orElse(null);\n\t\t\tif (attributeCode == null)\n\t\t\t{\n\t\t\t\tvalidate_M_AttributeInstance_CommaSeparatedValues(row);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalidate_M_AttributeInstance_SingleValue(row, attributeCode);\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeSetInstance_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeSetInstance_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1398,
    "annotation": "\n\t@And(\"load M_AttributeSet:\")",
    "glue_code": "\t@And(\"load M_AttributeSet:\")\n\tpublic void load_M_AttributeSet(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_AttributeSet_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal String name = row.getAsString(I_M_AttributeSet.COLUMNNAME_Name);\n\n\t\t\t\t\tfinal I_M_AttributeSet attributeSetRecord = queryBL.createQueryBuilder(I_M_AttributeSet.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_AttributeSet.COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_M_AttributeSet.class);\n\n\t\t\t\t\tattributeSetTable.putOrReplace(row.getAsIdentifier(), attributeSetRecord);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeSet_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeSet_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1399,
    "annotation": "\n\t@And(\"add M_AttributeSet:\")",
    "glue_code": "\t@And(\"add M_AttributeSet:\")\n\tpublic void add_M_AttributeSet(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_M_AttributeSet.COLUMNNAME_Name);\n\n\t\t\tfinal I_M_AttributeSet attributeSet = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_M_AttributeSet.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_AttributeSet.COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_M_AttributeSet.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_M_AttributeSet.class));\n\n\t\t\tassertThat(attributeSet).isNotNull();\n\n\t\t\tattributeSet.setName(name);\n\n\t\t\t// dev-note: values for COLUMNNAME_MandatoryType should obey AD_Reference_ID=324\n\t\t\tfinal String mandatoryType = DataTableUtil.extractStringForColumnName(row, I_M_AttributeSet.COLUMNNAME_MandatoryType);\n\t\t\tattributeSet.setMandatoryType(mandatoryType);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(attributeSet);\n\n\t\t\tfinal String attributeSetIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_AttributeSet_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tattributeSetTable.putOrReplace(attributeSetIdentifier, attributeSet);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 66,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeSet_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeSet_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1382,
    "annotation": "\n\t@And(\"add M_AttributeUse:\")",
    "glue_code": "\t@And(\"add M_AttributeUse:\")\n\tpublic void add_M_AttributeUse(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String attributeSetIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_AttributeUse.COLUMNNAME_M_AttributeSet_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_AttributeSet attributeSet = attributeSetTable.get(attributeSetIdentifier);\n\n\t\t\tfinal String attributeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_AttributeUse.COLUMNNAME_M_Attribute_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Attribute attribute = attributeTable.get(attributeIdentifier);\n\n\t\t\tfinal I_M_AttributeUse attributeUse = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_M_AttributeUse.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_AttributeUse.COLUMNNAME_M_AttributeSet_ID, attributeSet.getM_AttributeSet_ID())\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_AttributeUse.COLUMNNAME_M_Attribute_ID, attribute.getM_Attribute_ID())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_M_AttributeUse.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_M_AttributeUse.class));\n\t\t\tassertThat(attributeUse).isNotNull();\n\n\t\t\tattributeUse.setM_AttributeSet_ID(attributeSet.getM_AttributeSet_ID());\n\t\t\tattributeUse.setM_Attribute_ID(attribute.getM_Attribute_ID());\n\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(row, I_M_AttributeUse.COLUMNNAME_SeqNo);\n\t\t\tattributeUse.setSeqNo(seqNo);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(attributeUse);\n\n\t\t\tfinal String attributeUseIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_AttributeUse.COLUMNNAME_M_AttributeUse_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tattributeUseTable.putOrReplace(attributeUseIdentifier, attributeUse);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeUse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeUse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1400,
    "annotation": "\n\t@And(\"update all M_AttributeValue records by M_Attribute_ID\")",
    "glue_code": "\t@And(\"update all M_AttributeValue records by M_Attribute_ID\")\n\tpublic void update_all_M_AttributeValue(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String attributeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_M_Attribute_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Attribute attribute = attributeTable.get(attributeIdentifier);\n\n\t\t\tfinal boolean isNullFieldValue = DataTableUtil.extractBooleanForColumnName(row, I_M_AttributeValue.COLUMNNAME_IsNullFieldValue);\n\n\t\t\tfinal IQueryUpdater<I_M_AttributeValue> updater = queryBL.createCompositeQueryUpdater(I_M_AttributeValue.class)\n\t\t\t\t\t.addSetColumnValue(I_M_AttributeValue.COLUMNNAME_IsNullFieldValue, isNullFieldValue);\n\n\t\t\tqueryBL.createQueryBuilder(I_M_AttributeValue.class)\n\t\t\t\t\t.addEqualsFilter(I_M_AttributeValue.COLUMNNAME_M_Attribute_ID, attribute.getM_Attribute_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.update(updater);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeValue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeValue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1401,
    "annotation": "\n\t@And(\"update M_AttributeValue:\")",
    "glue_code": "\t@And(\"update M_AttributeValue:\")\n\tpublic void update_single_M_AttributeValue(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String attributeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_M_Attribute_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Attribute attribute = attributeTable.get(attributeIdentifier);\n\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_M_AttributeValue.COLUMNNAME_Value);\n\n\t\t\tfinal I_M_AttributeValue attributeValue = queryBL.createQueryBuilder(I_M_AttributeValue.class)\n\t\t\t\t\t.addEqualsFilter(I_M_AttributeValue.COLUMNNAME_M_Attribute_ID, attribute.getM_Attribute_ID())\n\t\t\t\t\t.addStringLikeFilter(I_M_AttributeValue.COLUMNNAME_Value, value, true)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_AttributeValue.class);\n\t\t\tassertThat(attributeValue).isNotNull();\n\n\t\t\tfinal boolean isNullFieldValue = DataTableUtil.extractBooleanForColumnName(row, I_M_AttributeValue.COLUMNNAME_IsNullFieldValue);\n\t\t\tattributeValue.setIsNullFieldValue(isNullFieldValue);\n\n\t\t\tInterfaceWrapperHelper.save(attributeValue);\n\n\t\t\tfinal String attributeValueIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_AttributeValue.COLUMNNAME_M_AttributeValue_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tattributeValueTable.putOrReplace(attributeValueIdentifier, attributeValue);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeValue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeValue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1402,
    "annotation": "\n\t@And(\"metasfresh contains M_AttributeValues:\")",
    "glue_code": "\t@And(\"metasfresh contains M_AttributeValues:\")\n\tpublic void metasfresh_contains_M_AttributeValues(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String attributeValueIdentifier = DataTableUtil.extractStringForColumnName(row, StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String attributeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_AttributeValue.COLUMNNAME_M_Attribute_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Attribute attributeRecord = attributeTable.get(attributeIdentifier);\n\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_M_AttributeValue.COLUMNNAME_Value);\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_M_AttributeValue.COLUMNNAME_Name);\n\n\t\t\tfinal boolean isNullFieldValue = DataTableUtil.extractBooleanForColumnName(row, I_M_AttributeValue.COLUMNNAME_IsNullFieldValue);\n\n\t\t\tfinal I_M_AttributeValue attributeValueRecord = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_M_AttributeValue.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_AttributeValue.COLUMNNAME_M_Attribute_ID, attributeRecord.getM_Attribute_ID())\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_AttributeValue.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_M_AttributeValue.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_M_AttributeValue.class));\n\n\t\t\tattributeValueRecord.setM_Attribute_ID(attributeRecord.getM_Attribute_ID());\n\t\t\tattributeValueRecord.setValue(value);\n\t\t\tattributeValueRecord.setName(name);\n\t\t\tattributeValueRecord.setIsNullFieldValue(isNullFieldValue);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(attributeValueRecord);\n\n\t\t\tattributeValueTable.putOrReplace(attributeValueIdentifier, attributeValueRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 104,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_AttributeValue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_AttributeValue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1391,
    "annotation": "\n\t @And(\"load M_Attribute:\")",
    "glue_code": "\t @And(\"load M_Attribute:\")\n\t public void load_M_Attribute(@NonNull final DataTable dataTable)\n\t {\n\t\t final List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\t for (final Map<String, String> row : tableRows)\n\t\t {\n\t\t\t final String value = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_Value);\n\n\t\t\t final I_M_Attribute attributeRecord = queryBL.createQueryBuilder(I_M_Attribute.class)\n\t\t\t\t\t .addOnlyActiveRecordsFilter()\n\t\t\t\t\t .addEqualsFilter(I_M_Attribute.COLUMNNAME_Value, value)\n\t\t\t\t\t .create()\n\t\t\t\t\t .firstOnly(I_M_Attribute.class);\n\n\t\t\t assertThat(attributeRecord).isNotNull();\n\n\t\t\t final String attributeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_M_Attribute_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\t attributeTable.putOrReplace(attributeIdentifier, attributeRecord);\n\t\t }\n\t }",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 52,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1392,
    "annotation": "\n\t @And(\"metasfresh contains M_Attributes:\")",
    "glue_code": "\t @And(\"metasfresh contains M_Attributes:\")\n\t public void metasfresh_contains_M_Attributes(@NonNull final DataTable dataTable)\n\t {\n\t\t for (final Map<String, String> row : dataTable.asMaps())\n\t\t {\n\t\t\t final String attrIdentifier = DataTableUtil.extractStringForColumnName(row, TABLECOLUMN_IDENTIFIER);\n\n\t\t\t final String value = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_Value);\n\t\t\t final String name = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_Name);\n\t\t\t final String type = DataTableUtil.extractStringForColumnName(row, I_M_Attribute.COLUMNNAME_AttributeValueType);\n\n\t\t\t \n\t\t\t final I_M_Attribute attributeRecord = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t () -> queryBL.createQueryBuilder(I_M_Attribute.class)\n\t\t\t\t\t\t\t .addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t .addEqualsFilter(I_M_Attribute.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t .create()\n\t\t\t\t\t\t\t .firstOnly(I_M_Attribute.class),\n\t\t\t\t\t () -> InterfaceWrapperHelper.newInstance(I_M_Attribute.class));\n\n\t\t\t attributeRecord.setValue(value);\n\t\t\t attributeRecord.setName(name);\n\t\t\t attributeRecord.setAttributeValueType(type);\n\t\t\t InterfaceWrapperHelper.saveRecord(attributeRecord);\n\n\t\t\t attributeTable.putOrReplace(attrIdentifier, attributeRecord);\n\t\t }\n\t }",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute/M_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/attribute",
      "filename": "M_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1412,
    "annotation": "\n\t@And(\"metasfresh contains C_Auction:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Auction:\")\n\tpublic void add_C_Auction(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_Auction.COLUMNNAME_Name);\n\n\t\t\tfinal I_C_Auction auction = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_C_Auction.class)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.addEqualsFilter(I_C_Auction.COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyOrNull(I_C_Auction.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_C_Auction.class));\n\n\t\t\tAssertions.assertThat(auction).isNotNull();\n\n\t\t\tauction.setName(name);\n\t\t\tauction.setDate(DataTableUtil.extractDateTimestampForColumnName(row, I_C_Auction.COLUMNNAME_Date));\n\n\t\t\tInterfaceWrapperHelper.saveRecord(auction);\n\n\t\t\tfinal String auctionIdentifier = DataTableUtil.extractStringForColumnName(row, StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tauctionTable.putOrReplace(auctionIdentifier, auction);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/auction/C_Auction_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/auction",
      "filename": "C_Auction_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1407,
    "annotation": "\n\t@Given(\"metasfresh contains AD_User_AuthToken:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_User_AuthToken:\")\n\tpublic void add_user_authtoken(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String userAuthTokenIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AD_User_AuthToken_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AD_User_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer userId = userTable.getOptional(userIdentifier)\n\t\t\t\t\t.map(I_AD_User::getAD_User_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(userIdentifier));\n\n\t\t\tfinal int roleId = DataTableUtil.extractIntForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AD_Role_ID);\n\t\t\tfinal String authToken = DataTableUtil.extractStringForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AuthToken);\n\n\t\t\tfinal I_AD_User_AuthToken userAuthToken = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_AD_User_AuthToken.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_AD_User_AuthToken.COLUMNNAME_AuthToken, authToken)\n\t\t\t\t\t\t\t.addEqualsFilter(I_AD_User_AuthToken.COLUMNNAME_AD_User_ID, userId)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_AD_User_AuthToken.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_AD_User_AuthToken.class));\n\n\t\t\tassertThat(userAuthToken).isNotNull();\n\n\t\t\tuserAuthToken.setAuthToken(authToken);\n\t\t\tuserAuthToken.setAD_User_ID(userId);\n\t\t\tuserAuthToken.setAD_Role_ID(roleId);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(userAuthToken);\n\n\t\t\tuserAuthTokenTable.putOrReplace(userAuthTokenIdentifier, userAuthToken);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 67,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/authorization/AD_User_AuthToken_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/authorization",
      "filename": "AD_User_AuthToken_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1408,
    "annotation": "\n\t@And(\"^no AD_User_AuthToken records for userId:(.*)$\")",
    "glue_code": "\t@And(\"^no AD_User_AuthToken records for userId:(.*)$\")\n\tpublic void no_AD_User_AuthToken_records(final String userIdentifier)\n\t{\n\t\tfinal I_AD_User user = userTable.get(userIdentifier);\n\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"DELETE FROM AD_User_AuthToken where AD_User_ID=\" + user.getAD_User_ID(), ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 102,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/authorization/AD_User_AuthToken_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/authorization",
      "filename": "AD_User_AuthToken_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1409,
    "annotation": "\n\t@And(\"^after not more than (.*)s, validate AD_User_AuthToken record$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, validate AD_User_AuthToken record$\")\n\tpublic void validate_AD_User_AuthToken(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer userId = userTable.get(userIdentifier).getAD_User_ID();\n\n\t\t\tfinal String roleIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AD_Role_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer roleId = roleTable.get(roleIdentifier).getAD_Role_ID();\n\n\t\t\tfinal Supplier<Boolean> userAuthTokenFound = () -> {\n\t\t\t\tfinal ImmutableList<I_AD_User_AuthToken> userAuthTokenList = queryBL.createQueryBuilder(I_AD_User_AuthToken.class)\n\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t.addEqualsFilter(I_AD_User_AuthToken.COLUMN_AD_User_ID, userId)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_User_AuthToken.COLUMN_AD_Role_ID, roleId)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.stream()\n\t\t\t\t\t\t.collect(ImmutableList.toImmutableList());\n\n\t\t\t\tif (userAuthTokenList.isEmpty())\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tassertThat(userAuthTokenList.size()).isEqualTo(1);\n\n\t\t\t\tfinal String adUserAuthTokenIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_User_AuthToken.COLUMNNAME_AD_User_AuthToken_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tuserAuthTokenTable.putOrReplace(adUserAuthTokenIdentifier, userAuthTokenList.get(0));\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t//dev-note: tryAndWait will fail if AD_User_AuthToken record is not found\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, userAuthTokenFound);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 110,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/authorization/AD_User_AuthToken_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/authorization",
      "filename": "AD_User_AuthToken_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1396,
    "annotation": "\n\t@When(\"validate MD_AvailableForSales_Config\")",
    "glue_code": "\t@When(\"validate MD_AvailableForSales_Config\")\n\tpublic void validate_MD_AvailableForSales_Config(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateMDAvailableForSalesConfig(tableRow);\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 44,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales/MD_AvailableForSales_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales",
      "filename": "MD_AvailableForSales_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1413,
    "annotation": "\n\t@And(\"^after not more than (.*)s, MD_Available_For_Sales table contains only the following records:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, MD_Available_For_Sales table contains only the following records:$\")\n\tpublic void thereAreAvailableForSales(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\n\t\tfinal Supplier<Boolean> supplier = () -> rows.stream().allMatch(this::matchingMDAvailableForSalesFound);\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, supplier, () -> logCurrentContext(rows));\n\n\t\tfinal Set<ProductId> productIds = rows\n\t\t\t\t.stream()\n\t\t\t\t.map(this::getProductIdFromRow)\n\t\t\t\t.map(ProductId::ofRepoId)\n\t\t\t\t.collect(Collectors.toSet());\n\n\t\tfinal Supplier<Boolean> noOfRecordsSupplier = () -> rows.size() == getAvailableForSalesNoOfRecords(productIds);\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, noOfRecordsSupplier, () -> logCurrentNoOfRecords(rows.size()));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales/MD_Available_For_Sales_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales",
      "filename": "MD_Available_For_Sales_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1414,
    "annotation": "\n\t@And(\"^after not more than (.*)s, MD_Available_For_Sales table is empty for product: (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, MD_Available_For_Sales table is empty for product: (.*)$\")\n\tpublic void validateEmptyTable(final int timeoutSec, final String productIdentifier) throws InterruptedException\n\t{\n\t\tfinal ProductId productId = productTable.getOptional(productIdentifier)\n\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t.map(ProductId::ofRepoId)\n\t\t\t\t.orElseGet(() -> ProductId.ofRepoId(Integer.parseInt(productIdentifier)));\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> getAvailableForSalesNoOfRecords(ImmutableSet.of(productId)) == 0, () -> logCurrentNoOfRecords(0));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 99,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales/MD_Available_For_Sales_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales",
      "filename": "MD_Available_For_Sales_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1415,
    "annotation": "\n\t@Given(\"metasfresh initially has no MD_Available_For_Sales data\")",
    "glue_code": "\t@Given(\"metasfresh initially has no MD_Available_For_Sales data\")\n\tpublic void setupMD_Candidate_Data()\n\t{\n\t\ttruncateMDAvailableForSalesData();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 110,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales/MD_Available_For_Sales_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/availableforsales",
      "filename": "MD_Available_For_Sales_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1362,
    "annotation": "\n\t@And(\"metasfresh contains C_Bank:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Bank:\")\n\tpublic void add_C_BanK(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\taddBank(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bank/C_Bank_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bank",
      "filename": "C_Bank_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1410,
    "annotation": "\n\t@And(\"load C_BankStatementLine\")",
    "glue_code": "\t@And(\"load C_BankStatementLine\")\n\tpublic void load_C_BankStatementLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tloadBankStatementLine(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement/C_BankStatementLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement",
      "filename": "C_BankStatementLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1411,
    "annotation": "\n\t@And(\"validate C_BankStatementLine\")",
    "glue_code": "\t@And(\"validate C_BankStatementLine\")\n\tpublic void validate_C_BankStatementLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tvalidateBankStatementLine(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 93,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement/C_BankStatementLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement",
      "filename": "C_BankStatementLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1432,
    "annotation": "\n\t@And(\"^bank statement is imported with identifiers (.*), matching invoice amounts$\")",
    "glue_code": "\t@And(\"^bank statement is imported with identifiers (.*), matching invoice amounts$\")\n\tpublic void import_camt53_document(@NonNull final String identifier, @NonNull final String fileContent)\n\t{\n\t\tfinal I_C_BankStatement_Import_File importFileRecord = InterfaceWrapperHelper.newInstance(I_C_BankStatement_Import_File.class);\n\t\tInterfaceWrapperHelper.saveRecord(importFileRecord);\n\n\t\tfinal ImmutableList<String> bankStatementIdentifiers = StepDefUtil.extractIdentifiers(identifier);\n\n\t\tfinal ImportBankStatementRequest importBankStatementRequest = ImportBankStatementRequest\n\t\t\t\t.builder()\n\t\t\t\t.camt53File(AttachmentEntryDataResource.builder()\n\t\t\t\t\t\t\t\t\t.source(fileContent.getBytes())\n\t\t\t\t\t\t\t\t\t.filename(\"does_not_matter.xml\")\n\t\t\t\t\t\t\t\t\t.build())\n\t\t\t\t.isMatchAmounts(true)\n\t\t\t\t.bankStatementImportFileId(BankStatementImportFileId.ofRepoId(importFileRecord.getC_BankStatement_Import_File_ID()))\n\t\t\t\t.build();\n\t\t\n\t\tfinal ImmutableSet<BankStatementId> bankStatementIds = bankStatementCamt53Service.importBankToCustomerStatement(importBankStatementRequest);\n\t\tassertThat(bankStatementIds).isNotEmpty();\n\t\tassertThat(bankStatementIdentifiers.size()).isEqualTo(bankStatementIds.size());\n\n\t\tfinal Iterator<BankStatementId> bankStatementIdIterator = bankStatementIds.iterator();\n\t\tfor (int bankStatementIndex = 0; bankStatementIndex < bankStatementIds.size(); bankStatementIndex++)\n\t\t{\n\t\t\tbankStatementTable.putOrReplace(bankStatementIdentifiers.get(bankStatementIndex), bankStatementDAO.getById(bankStatementIdIterator.next()));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement/C_BankStatement_Camt53_ImportAttachment_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement",
      "filename": "C_BankStatement_Camt53_ImportAttachment_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1417,
    "annotation": "\n\t@And(\"validate C_BankStatement\")",
    "glue_code": "\t@And(\"validate C_BankStatement\")\n\tpublic void validate_C_BankStatement(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tvalidateBankStatement(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement/C_BankStatement_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement",
      "filename": "C_BankStatement_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1418,
    "annotation": "\n\t@Given(\"^the C_BankStatement identified by (.*) is completed$\")",
    "glue_code": "\t@Given(\"^the C_BankStatement identified by (.*) is completed$\")\n\tpublic void complete_C_BankStatement(@NonNull final String bankStatementIdentifier)\n\t{\n\t\tfinal I_C_BankStatement bankStatementRecord = bankStatementTable.get(bankStatementIdentifier);\n\t\tbankStatementRecord.setDocAction(IDocument.ACTION_Complete);\n\t\tdocumentBL.processEx(bankStatementRecord, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement/C_BankStatement_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bankStatement",
      "filename": "C_BankStatement_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1435,
    "annotation": "\n\t@Given(\"metasfresh contains PP_Product_BOM\")",
    "glue_code": "\t@Given(\"metasfresh contains PP_Product_BOM\")\n\tpublic void add_PP_Product_Bom(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createPP_Product_BOM);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 97,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/billofmaterial/PP_Product_Bom_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/billofmaterial",
      "filename": "PP_Product_Bom_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1436,
    "annotation": "\n\t@Given(\"metasfresh contains PP_Product_BOMLines\")",
    "glue_code": "\t@Given(\"metasfresh contains PP_Product_BOMLines\")\n\tpublic void add_PP_Product_BOMLine(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(\"PP_Product_BOMLine\")\n\t\t\t\t.forEach(this::createPP_Product_BOMLine);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 103,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/billofmaterial/PP_Product_Bom_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/billofmaterial",
      "filename": "PP_Product_Bom_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1437,
    "annotation": "\n\t@And(\"^the PP_Product_BOM identified by (.*) is completed$\")",
    "glue_code": "\t@And(\"^the PP_Product_BOM identified by (.*) is completed$\")\n\tpublic void product_BOM_is_completed(@NonNull final String productBOMIdentifier)\n\t{\n\t\tfinal I_PP_Product_BOM productBOM = productBOMTable.get(productBOMIdentifier);\n\t\tproductBOM.setDocAction(IDocument.ACTION_Complete);\n\t\tdocumentBL.processEx(productBOM, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 111,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/billofmaterial/PP_Product_Bom_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/billofmaterial",
      "filename": "PP_Product_Bom_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1452,
    "annotation": "\n\t@Then(\"process metasfresh response:\")",
    "glue_code": "\t@Then(\"process metasfresh response:\")\n\tpublic void processMetasfreshResponse(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonBOMCreateResponse response = mapper.readValue(testContext.getApiResponse().getContent(), JsonBOMCreateResponse.class);\n\t\tassertThat(response).isNotNull();\n\n\t\tfinal DataTableRow row = DataTableRow.singleRow(table);\n\t\tfinal StepDefDataIdentifier bomIdentifier = row.getAsIdentifier(\"PP_Product_BOM_ID\");\n\t\tfinal StepDefDataIdentifier bomVersionsIdentifier = row.getAsIdentifier(\"PP_Product_BOMVersions_ID\");\n\n\t\tprocessResponse(response, bomIdentifier, bomVersionsIdentifier);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 128,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1453,
    "annotation": "\n\t@And(\"verify that bomVersions was created for product\")",
    "glue_code": "\t@And(\"verify that bomVersions was created for product\")\n\tpublic void verifyThatBomVersionsWasCreatedForProduct(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal I_PP_Product_BOMVersions bomVersions = row.getAsIdentifier(\"PP_Product_BOMVersions_ID\").lookupIn(productBOMVersionsTable);\n\t\t\tfinal I_M_Product product = row.getAsIdentifier(\"M_Product_ID\").lookupIn(productTable);\n\t\t\tfinal String expectedName = row.getAsOptionalName(\"Name\").orElseGet(product::getName);\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\t\tassertThat(bomVersions.getM_Product_ID()).as(\"M_Product_ID\").isEqualTo(product.getM_Product_ID());\n\t\t\tassertThat(bomVersions.getName()).as(\"Name\").isEqualTo(expectedName);\n\t\t\tsoftly.assertAll();\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 141,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1454,
    "annotation": "\n\t@Then(\"verify that bom was created for product\")",
    "glue_code": "\t@Then(\"verify that bom was created for product\")\n\tpublic void verifyThatBomWasCreatedForProduct(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal I_PP_Product_BOM bom = row.getAsIdentifier(\"PP_Product_BOM_ID\").lookupIn(productBomTable);\n\t\t\tfinal I_M_Product product = row.getAsIdentifier(\"M_Product_ID\").lookupIn(productTable);\n\t\t\tfinal I_PP_Product_BOMVersions bomVersions = row.getAsIdentifier(\"PP_Product_BOMVersions_ID\").lookupIn(productBOMVersionsTable);\n\t\t\tfinal I_C_UOM bomProductExpectedUOM = uomDao.getByX12DE355(X12DE355.ofCode(row.getAsString(\"UomCode\")));\n\t\t\tfinal Instant validFrom = row.getAsInstant(\"ValidFrom\");\n\t\t\tfinal String expectedProductValue = row.getAsOptionalString(\"ProductValue\").orElseGet(product::getValue);\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\t\tsoftly.assertThat(bom.getM_Product_ID()).as(\"M_Product_ID\").isEqualTo(product.getM_Product_ID());\n\t\t\tsoftly.assertThat(bom.getPP_Product_BOMVersions_ID()).as(\"PP_Product_BOMVersions_ID\").isEqualTo(bomVersions.getPP_Product_BOMVersions_ID());\n\t\t\tsoftly.assertThat(bom.getC_UOM_ID()).as(\"C_UOM_ID\").isEqualTo(bomProductExpectedUOM.getC_UOM_ID());\n\t\t\tsoftly.assertThat(bom.getValidFrom()).as(\"ValidFrom\").isEqualTo(TimeUtil.asTimestamp(validFrom));\n\t\t\tsoftly.assertThat(bom.getValue()).as(\"BOMValue vs ProductValue\").isEqualTo(expectedProductValue);\n\t\t\tsoftly.assertAll();\n\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_AttributeSetInstance_ID)\n\t\t\t\t\t.ifPresent((asiIdentifier) -> {\n\t\t\t\t\t\tfinal AttributeSetInstanceId asiId = AttributeSetInstanceId.ofRepoId(bom.getM_AttributeSetInstance_ID());\n\t\t\t\t\t\tfinal I_M_AttributeSetInstance asi = attributeDAO.getAttributeSetInstanceById(asiId);\n\t\t\t\t\t\tattributeSetInstanceTable.put(asiIdentifier, asi);\n\t\t\t\t\t});\n\t\t});\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 156,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1455,
    "annotation": "\n\t@And(\"verify that bomLine was created for bom\")",
    "glue_code": "\t@And(\"verify that bomLine was created for bom\")\n\tpublic void verifyThatBomLineWasCreatedForBom(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> {\n\t\t\tfinal ProductBOMId bomId = row.getAsIdentifier(\"PP_Product_BOM_ID\").lookupIdIn(productBomTable);\n\t\t\tfinal ProductId productId = row.getAsIdentifier(\"M_Product_ID\").lookupIdIn(productTable);\n\n\t\t\tfinal I_PP_Product_BOMLine bomLine = queryBL.createQueryBuilder(I_PP_Product_BOMLine.class)\n\t\t\t\t\t.addEqualsFilter(I_PP_Product_BOMLine.COLUMNNAME_PP_Product_BOM_ID, bomId)\n\t\t\t\t\t.addEqualsFilter(I_PP_Product_BOMLine.COLUMNNAME_M_Product_ID, productId)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_PP_Product_BOMLine.class);\n\n\t\t\tfinal int line = row.getAsInt(I_PP_Product_BOMLine.COLUMNNAME_Line);\n\t\t\tassertThat(bomLine.getLine()).isEqualTo(line);\n\n\t\t\tfinal boolean isQtyPercentage = row.getAsOptionalBoolean(I_PP_Product_BOMLine.COLUMNNAME_IsQtyPercentage).orElseFalse();\n\t\t\tfinal Quantity qty = row.getAsQuantity(\"Qty\", \"UomCode\", uomDao::getByX12DE355);\n\t\t\tassertThat(bomLine.isQtyPercentage()).isEqualTo(isQtyPercentage);\n\t\t\tassertThat(bomLine.getC_UOM_ID()).isEqualTo(qty.getUomId().getRepoId());\n\t\t\tif (isQtyPercentage)\n\t\t\t{\n\t\t\t\tassertThat(bomLine.getQtyBatch()).isEqualTo(qty.toBigDecimal());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tassertThat(bomLine.getQtyBOM()).isEqualTo(qty.toBigDecimal());\n\t\t\t}\n\n\t\t\tfinal Quantity scrap = row.getAsOptionalQuantity(\"Scrap\", \"UomCode\", uomDao::getByX12DE355).orElse(null);\n\t\t\tif (scrap == null)\n\t\t\t{\n\t\t\t\tassertThat(bomLine.getScrap()).isEqualTo(BigDecimal.ZERO);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tassertThat(bomLine.getScrap()).isEqualTo(scrap.toBigDecimal());\n\t\t\t}\n\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_AttributeSetInstance_ID)\n\t\t\t\t\t.ifPresent(asiIdentifier -> {\n\t\t\t\t\t\tfinal AttributeSetInstanceId asiId = AttributeSetInstanceId.ofRepoIdOrNone(bomLine.getM_AttributeSetInstance_ID());\n\t\t\t\t\t\tfinal I_M_AttributeSetInstance asi = attributeDAO.getAttributeSetInstanceById(asiId);\n\t\t\t\t\t\tassertThat(asi).isNotNull();\n\t\t\t\t\t\tattributeSetInstanceTable.put(asiIdentifier, asi);\n\t\t\t\t\t});\n\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_PP_Product_BOMLine_ID)\n\t\t\t\t\t.ifPresent(bomLineIdentifier -> productBomLineTable.putOrReplace(bomLineIdentifier, bomLine));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 184,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1456,
    "annotation": "\n\t@And(\"verify BOM for M_Product:\")",
    "glue_code": "\t@And(\"verify BOM for M_Product:\")\n\tpublic void verify_BOM_for_M_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Product.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).isNotNull();\n\n\t\t\tcheckProductBOMCyclesAndMarkAsVerified(product);\n\n\t\t\tfinal I_PP_Product_BOM bom = productBOMDAO.getDefaultBOMByProductId(ProductId.ofRepoId(product.getM_Product_ID()))\n\t\t\t\t\t.orElse(null);\n\n\t\t\tassertThat(bom).isNotNull();\n\n\t\t\tfor (final I_PP_Product_BOMLine tbomline : productBOMDAO.retrieveLines(bom))\n\t\t\t{\n\t\t\t\tfinal ProductId productId = ProductId.ofRepoId(tbomline.getM_Product_ID());\n\t\t\t\tfinal I_M_Product bomLineProduct = productBL.getById(productId);\n\t\t\t\tcheckProductBOMCyclesAndMarkAsVerified(bomLineProduct);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 236,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1457,
    "annotation": "\n\t@And(\"metasfresh contains PP_Product_BOMVersions:\")",
    "glue_code": "\t@And(\"metasfresh contains PP_Product_BOMVersions:\")\n\tpublic void add_PP_Product_BOMVersions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> row = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : row)\n\t\t{\n\t\t\tcreatePPProductBOMVersions(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 283,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1458,
    "annotation": "\n\t@And(\"metasfresh contains PP_Product_BOM:\")",
    "glue_code": "\t@And(\"metasfresh contains PP_Product_BOM:\")\n\tpublic void add_PP_Product_BOM(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> row = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : row)\n\t\t{\n\t\t\tcreatePPProductBOM(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 310,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1459,
    "annotation": "\n\t@And(\"metasfresh contains PP_Product_BOMLines:\")",
    "glue_code": "\t@And(\"metasfresh contains PP_Product_BOMLines:\")\n\tpublic void add_PP_Product_BOMLines(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> row = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : row)\n\t\t{\n\t\t\tcreatePPProductBOMLines(dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 356,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom/CreateBOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bom",
      "filename": "CreateBOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1416,
    "annotation": "\n\t@And(\"^store bpartner endpointPath (.*) in context$\")",
    "glue_code": "\t@And(\"^store bpartner endpointPath (.*) in context$\")\n\tpublic void store_credit_limit_endpointPath_in_context(@NonNull String endpointPath)\n\t{\n\t\tfinal String identifierRegex = \".*(:[a-zA-Z]+)/?.*\";\n\n\t\tfinal Pattern pattern = Pattern.compile(identifierRegex, Pattern.CASE_INSENSITIVE);\n\t\tfinal Matcher matcher = pattern.matcher(endpointPath);\n\n\t\twhile (matcher.find())\n\t\t{\n\t\t\tfinal String bPartnerIdentifierGroup = matcher.group(1);\n\t\t\tfinal String bpartnerIdentifier = bPartnerIdentifierGroup.replace(\":\", \"\");\n\n\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bpartnerIdentifier);\n\t\t\tassertThat(bPartner).isNotNull();\n\n\t\t\tendpointPath = endpointPath.replace(bPartnerIdentifierGroup, String.valueOf(bPartner.getC_BPartner_ID()));\n\n\t\t\ttestContext.setEndpointPath(endpointPath);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bpartner/BPartnerRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bpartner",
      "filename": "BPartnerRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1447,
    "annotation": "\n\t@And(\"metasfresh contains C_BPartner_Departments:\")",
    "glue_code": "\t@And(\"metasfresh contains C_BPartner_Departments:\")\n\tpublic void metasfresh_contains_department(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Department.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Department.COLUMNNAME_Value);\n\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_BPartner_Department.COLUMNNAME_Description);\n\t\t\tfinal boolean active = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_BPartner_Department.COLUMNNAME_IsActive, true);\n\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_Department.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartnerRecord = bpartnerTable.get(bPartnerIdentifier);\n\t\t\tassertThat(bPartnerRecord).as(\"Missing C_BPartner fir Identifier=%s\", bPartnerIdentifier).isNotNull();\n\n\t\t\tfinal I_C_BPartner_Department department = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_C_BPartner_Department.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_C_BPartner_Department.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.addEqualsFilter(I_C_BPartner.COLUMNNAME_C_BPartner_ID, bPartnerRecord.getC_BPartner_ID())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyOrNull(I_C_BPartner_Department.class),\n\t\t\t\t\t() -> newInstanceOutOfTrx(I_C_BPartner_Department.class));\n\t\t\tassertThat(department).isNotNull();\n\t\t\t\n\t\t\tdepartment.setC_BPartner_ID(bPartnerRecord.getC_BPartner_ID());\n\t\t\tdepartment.setName(name);\n\t\t\tdepartment.setValue(value);\n\t\t\tdepartment.setIsActive(active);\n\n\t\t\tif (Check.isNotBlank(description))\n\t\t\t{\n\t\t\t\tdepartment.setDescription(description);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(department);\n\n\t\t\tfinal String identifier = DataTableUtil.extractStringForColumnName(row,  TABLECOLUMN_IDENTIFIER);\n\t\t\tdepartmentTable.put(identifier, department);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bpartner/department/C_BPartner_Department_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/bpartner/department",
      "filename": "C_BPartner_Department_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1471,
    "annotation": "\t@Then(\"the metasfresh cache is reset\")",
    "glue_code": "\tpublic void processMetasfreshResponse()\n\t{\n\t\tCacheMgt.get().reset();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 30,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/cache/CacheMgt_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/cache",
      "filename": "CacheMgt_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1429,
    "annotation": "\n\t@And(\"metasfresh contains C_Calendar\")",
    "glue_code": "\t@And(\"metasfresh contains C_Calendar\")\n\tpublic void createC_Calendar(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateCalendar(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar/C_Calendar_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar",
      "filename": "C_Calendar_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1430,
    "annotation": "\n\t@And(\"^load default C_Calendar from metasfresh as (.*)$\")",
    "glue_code": "\t@And(\"^load default C_Calendar from metasfresh as (.*)$\")\n\tpublic void loadDefaultCalendar(@NonNull final String calendarIdentifier)\n\t{\n\t\tfinal I_C_Calendar defaultCalendar = queryBL.createQueryBuilder(I_C_Calendar.class)\n\t\t\t\t.addEqualsFilter(I_C_Calendar.COLUMNNAME_IsDefault, true)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.create()\n\t\t\t\t.firstOnly();\n\t\tcalendarTable.putOrReplace(calendarIdentifier, defaultCalendar);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar/C_Calendar_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar",
      "filename": "C_Calendar_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1431,
    "annotation": "\n\t@And(\"load C_Calendar from metasfresh:\")",
    "glue_code": "\t@And(\"load C_Calendar from metasfresh:\")\n\tpublic void load_C_Calendar(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, I_C_Calendar.COLUMNNAME_Name);\n\n\t\t\tfinal I_C_Calendar calendar = queryBL.createQueryBuilder(I_C_Calendar.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Calendar.COLUMNNAME_Name, name)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Calendar.class);\n\n\t\t\tfinal String calendarIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Calendar.COLUMNNAME_C_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tcalendarTable.put(calendarIdentifier, calendar);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar/C_Calendar_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar",
      "filename": "C_Calendar_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1440,
    "annotation": "\n\t@And(\"load C_Year from metasfresh:\")",
    "glue_code": "\t@And(\"load C_Year from metasfresh:\")\n\tpublic void load_C_Year(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String fiscalYear = DataTableUtil.extractStringForColumnName(tableRow, I_C_Year.COLUMNNAME_FiscalYear);\n\t\t\tassertThat(fiscalYear).as(I_C_Year.COLUMNNAME_FiscalYear + \"is a mandatory column\").isNotBlank();\n\n\t\t\tfinal String calendarIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Year.COLUMNNAME_C_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(calendarIdentifier).as(I_C_Year.COLUMNNAME_C_Calendar_ID + \"is a mandatory column\").isNotBlank();\n\n\t\t\tfinal I_C_Calendar calendar = calendarTable.get(calendarIdentifier);\n\t\t\tassertThat(calendar).as(\"No calendar found for identifier: {}\", calendarIdentifier).isNotNull();\n\n\t\t\tfinal I_C_Year yearRecord = queryBL.createQueryBuilder(I_C_Year.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_C_Year.COLUMNNAME_C_Calendar_ID, calendar.getC_Calendar_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_Year.COLUMNNAME_FiscalYear, fiscalYear)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Year.class);\n\n\t\t\tassertThat(yearRecord).as(\"No Record found for Calendar: {} and FiscalYear: {}\", calendar.getName(), fiscalYear).isNotNull();\n\n\t\t\tfinal String yearIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Year.COLUMNNAME_C_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tyearTable.put(yearIdentifier, yearRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar/C_Year_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar",
      "filename": "C_Year_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1441,
    "annotation": "\n\t@And(\"metasfresh contains C_Year\")",
    "glue_code": "\t@And(\"metasfresh contains C_Year\")\n\tpublic void createC_Year(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateYear(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 84,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar/C_Year_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/calendar",
      "filename": "C_Year_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1448,
    "annotation": "\n\t@And(\"^validate commission fact for (.*)$\")",
    "glue_code": "\t@And(\"^validate commission fact for (.*)$\")\n\tpublic void validate_commission_fact(@NonNull final String commissionShareIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfinal I_C_Commission_Share commissionShare = commissionShareTable.get(commissionShareIdentifier);\n\t\tassertThat(commissionShare).isNotNull();\n\n\t\tfinal List<I_C_Commission_Fact> commissionFacts = queryBL.createQueryBuilder(I_C_Commission_Fact.class)\n\t\t\t\t.addEqualsFilter(COLUMNNAME_C_Commission_Share_ID, commissionShare.getC_Commission_Share_ID())\n\t\t\t\t.orderByDescending(I_C_Commission_Fact.COLUMNNAME_C_Commission_Fact_ID)\n\t\t\t\t.create()\n\t\t\t\t.list();\n\n\t\tassertThat(commissionFacts).isNotNull();\n\t\tassertThat(tableRows.size()).isEqualTo(commissionFacts.size());\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (int factIndex = 0; factIndex < commissionFacts.size(); factIndex++)\n\t\t{\n\t\t\tfinal I_C_Commission_Fact actualCommissionFact = commissionFacts.get(factIndex);\n\t\t\tfinal Map<String, String> expectedCommissionFact = tableRows.get(factIndex);\n\n\t\t\tfinal String commissionFactState = DataTableUtil.extractStringForColumnName(expectedCommissionFact, COLUMNNAME_Commission_Fact_State);\n\t\t\tsoftly.assertThat(actualCommissionFact.getCommission_Fact_State())\n\t\t\t\t\t.as(\"Fact[\" + factIndex + \"] has state = \" + commissionFactState )\n\t\t\t\t\t.isEqualTo(commissionFactState);\n\n\t\t\tfinal BigDecimal commissionPoints = DataTableUtil.extractBigDecimalForColumnName(expectedCommissionFact, COLUMNNAME_CommissionPoints);\n\t\t\tsoftly.assertThat(actualCommissionFact.getCommissionPoints()).isEqualTo(commissionPoints);\n\n\t\t\tfinal String settlementIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCommissionFact, \"OPT.\" + COLUMNNAME_C_Invoice_Candidate_Commission_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(settlementIdentifier))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(actualCommissionFact.getC_Invoice_Candidate_Commission_ID()).isNotNull();\n\n\t\t\t\tfinal InvoiceCandidateId invoiceCandidateId = InvoiceCandidateId.ofRepoId(actualCommissionFact.getC_Invoice_Candidate_Commission_ID());\n\t\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = invoiceCandDAO.getByIdOutOfTrx(invoiceCandidateId);\n\n\t\t\t\tinvoiceCandTable.putOrReplace(settlementIdentifier, invoiceCandidate);\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 67,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Commission_Fact_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Commission_Fact_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1428,
    "annotation": "\n\t@And(\"validate created commission instance\")",
    "glue_code": "\t@And(\"validate created commission instance\")\n\tpublic void created_commission_instance(@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : dataTableRows)\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(90, 500, () -> retrieveCommissionInstance(row), () -> logCurrentContext(row));\n\n\t\t\tvalidateCommissionInstance(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Commission_Instance_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Commission_Instance_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1421,
    "annotation": "\n\t@And(\"^validate commission deed for commission instance (.*)$\")",
    "glue_code": "\t@And(\"^validate commission deed for commission instance (.*)$\")\n\tpublic void validate_commission_deed(@NonNull final String commissionInstanceIdentifier, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfinal I_C_Commission_Instance commissionInstance = commissionInstanceTable.get(commissionInstanceIdentifier);\n\t\tassertThat(commissionInstance).isNotNull();\n\n\t\tfor (final Map<String, String> row : dataTableRows)\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(90, 500, () -> retrieveShare(row, commissionInstanceIdentifier));\n\n\t\t\tfinal String commissionShareIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Commission_Share_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Commission_Share commissionShare = commissionShareTable.get(commissionShareIdentifier);\n\n\t\t\tvalidateCommissionDeed(row, commissionShare);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 111,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Commission_Share_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Commission_Share_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1422,
    "annotation": "\n\t@Given(\"metasfresh contains C_Flatrate_Conditions:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Flatrate_Conditions:\")\n\tpublic void metasfresh_contains_c_flatrate_conditions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String name = tableRow.get(COLUMNNAME_Name);\n\t\t\tassertThat(name).as(COLUMNNAME_Name + \" is mandatory\").isNotBlank();\n\n\t\t\tfinal String conditionsType = tableRow.get(COLUMNNAME_Type_Conditions);\n\t\t\tassertThat(conditionsType).as(COLUMNNAME_Type_Conditions + \" is mandatory\").isNotBlank();\n\n\t\t\tfinal I_C_Flatrate_Conditions flatrateConditions = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_C_Flatrate_Conditions.class)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_C_Flatrate_Conditions.class),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_C_Flatrate_Conditions.class));\n\n\t\t\tfinal String flatRateType = tableRow.get(\"OPT.\" + COLUMNNAME_Type_Flatrate);\n\t\t\tif (EmptyUtil.isNotBlank(flatRateType))\n\t\t\t{\n\t\t\t\tflatrateConditions.setType_Flatrate(flatRateType);\n\t\t\t}\n\t\t\tfinal String flatrateProductIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_M_Product_Flatrate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(flatrateProductIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Product flatrateProduct = productTable.get(flatrateProductIdentifier);\n\t\t\t\tassertThat(flatrateProduct).as(\"Missing M_Product record for identifier \" + flatrateProductIdentifier).isNotNull();\n\n\t\t\t\tflatrateConditions.setM_Product_Flatrate_ID(flatrateProduct.getM_Product_ID());\n\t\t\t}\n\n\t\t\tfinal String commissionHierarchySettingsIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_C_HierarchyCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(commissionHierarchySettingsIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_HierarchyCommissionSettings hierarchyCommissionSettings = hierarchyCommissionSettingsTable.get(commissionHierarchySettingsIdentifier);\n\t\t\t\tassertThat(hierarchyCommissionSettings).as(\"Missing C_HierarchyCommissionSettings record for identifier \" + commissionHierarchySettingsIdentifier).isNotNull();\n\t\t\t\tInterfaceWrapperHelper\n\t\t\t\t\t\t.create(flatrateConditions, de.metas.contracts.commission.model.I_C_Flatrate_Conditions.class)\n\t\t\t\t\t\t.setC_HierarchyCommissionSettings_ID(hierarchyCommissionSettings.getC_HierarchyCommissionSettings_ID());\n\t\t\t}\n\n\t\t\tfinal String commissionLicenseFeeSettingsIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_C_LicenseFeeSettings_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(commissionLicenseFeeSettingsIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_LicenseFeeSettings licenseFeeSettings = licenseFeeSettingsTable.get(commissionLicenseFeeSettingsIdentifier);\n\t\t\t\tassertThat(licenseFeeSettings).as(\"Missing C_LicenseFeeSettings record for identifier \" + commissionLicenseFeeSettingsIdentifier).isNotNull();\n\t\t\t\tInterfaceWrapperHelper\n\t\t\t\t\t\t.create(flatrateConditions, de.metas.contracts.commission.model.I_C_Flatrate_Conditions.class)\n\t\t\t\t\t\t.setC_LicenseFeeSettings_ID(licenseFeeSettings.getC_LicenseFeeSettings_ID());\n\t\t\t}\n\n\t\t\tfinal String customerTradeMarginSettingsIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_C_Customer_Trade_Margin_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(customerTradeMarginSettingsIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Customer_Trade_Margin customerTradeMargin = customerTradeMarginTable.get(customerTradeMarginSettingsIdentifier);\n\t\t\t\tassertThat(customerTradeMargin).as(\"Missing I_C_Customer_Trade_Margin record for identifier \" + customerTradeMarginSettingsIdentifier).isNotNull();\n\t\t\t\tInterfaceWrapperHelper\n\t\t\t\t\t\t.create(flatrateConditions, de.metas.contracts.commission.model.I_C_Flatrate_Conditions.class)\n\t\t\t\t\t\t.setC_Customer_Trade_Margin_ID(customerTradeMargin.getC_Customer_Trade_Margin_ID());\n\t\t\t}\n\n\t\t\tfinal String mediatedCommissionSettingsIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_C_MediatedCommissionSettings_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(mediatedCommissionSettingsIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_MediatedCommissionSettings mediatedCommissionSettings = mediatedCommissionSettingsTable.get(mediatedCommissionSettingsIdentifier);\n\t\t\t\tassertThat(mediatedCommissionSettings).as(\"Missing I_C_MediatedCommissionSettings record for identifier \" + mediatedCommissionSettingsIdentifier).isNotNull();\n\t\t\t\tInterfaceWrapperHelper\n\t\t\t\t\t\t.create(flatrateConditions, de.metas.contracts.commission.model.I_C_Flatrate_Conditions.class)\n\t\t\t\t\t\t.setC_MediatedCommissionSettings_ID(mediatedCommissionSettings.getC_MediatedCommissionSettings_ID());\n\t\t\t}\n\n\t\t\tfinal String docStatus = tableRow.getOrDefault(\"OPT.\" + COLUMNNAME_DocStatus, X_C_Flatrate_Conditions.DOCSTATUS_Completed);\n\n\t\t\tfinal InvoiceRule invoiceRule = Optional.ofNullable(DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_InvoiceRule))\n\t\t\t\t\t.map(InvoiceRule::ofCode)\n\t\t\t\t\t.orElse(InvoiceRule.AfterDelivery);\n\n\t\t\tfinal String uomIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_C_UOM_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(uomIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_UOM uomRecord = uomTable.get(uomIdentifier);\n\t\t\t\tassertThat(uomRecord).as(\"Missing C_UOM for Identifier=%s\", uomIdentifier).isNotNull();\n\t\t\t\tflatrateConditions.setC_UOM_ID(uomRecord.getC_UOM_ID());\n\t\t\t}\n\n\t\t\tflatrateConditions.setName(name);\n\t\t\tflatrateConditions.setType_Conditions(conditionsType);\n\t\t\tflatrateConditions.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\t\t\tflatrateConditions.setC_Flatrate_Transition_ID(StepDefConstants.FLATRATE_TRANSITION_ID.getRepoId());\n\t\t\tflatrateConditions.setInvoiceRule(invoiceRule.getCode());\n\t\t\tflatrateConditions.setDocStatus(docStatus);\n\t\t\tflatrateConditions.setProcessed(true);\n\t\t\tflatrateConditions.setIsActive(true);\n\n\t\t\tfinal String pricingSystemIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Flatrate_Conditions.COLUMNNAME_M_PricingSystem_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(pricingSystemIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_PricingSystem pricingSystem = pricingSysTable.get(pricingSystemIdentifier);\n\t\t\t\tflatrateConditions.setM_PricingSystem_ID(pricingSystem.getM_PricingSystem_ID());\n\t\t\t}\n\n\t\t\tfinal String onFlatrateTermExtend = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Flatrate_Conditions.COLUMNNAME_OnFlatrateTermExtend);\n\t\t\tif (Check.isNotBlank(onFlatrateTermExtend))\n\t\t\t{\n\t\t\t\tflatrateConditions.setOnFlatrateTermExtend(onFlatrateTermExtend);\n\t\t\t}\n\n\t\t\tfinal String modCntrSetttingsIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Flatrate_Conditions.COLUMNNAME_ModCntr_Settings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(modCntrSetttingsIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_ModCntr_Settings modCntrSettingsRecord = modCntrSettingsTable.get(modCntrSetttingsIdentifier);\n\t\t\t\tflatrateConditions.setModCntr_Settings_ID(modCntrSettingsRecord.getModCntr_Settings_ID());\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(flatrateConditions);\n\n\t\t\tfinal String conditionsIdentifier = DataTableUtil.extractStringForColumnName(tableRow, TABLECOLUMN_IDENTIFIER);\n\n\t\t\tconditionsTable.put(conditionsIdentifier, flatrateConditions);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 148,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Conditions_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Conditions_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1423,
    "annotation": "\n\t@When(\"clone C_Flatrate_Conditions:\")",
    "glue_code": "\t@When(\"clone C_Flatrate_Conditions:\")\n\tpublic void clone_c_flatrate_conditions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfinal Map<String, String> tableRow = tableRows.get(0);\n\n\t\t// validate columns definition\n\t\tfinal String flatrateConditionsIdentifier = tableRow.get(COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(flatrateConditionsIdentifier).isNotBlank();\n\n\t\tfinal I_C_Flatrate_Conditions condition = conditionsTable.get(flatrateConditionsIdentifier);\n\t\tassertThat(condition).isNotNull();\n\n\t\tfinal String yearIdentifier = tableRow.get(I_C_Year.COLUMNNAME_C_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(yearIdentifier).isNotBlank();\n\n\t\tfinal I_C_Year year = yearTable.get(yearIdentifier);\n\t\tassertThat(year).isNotNull();\n\n\t\tfinal String clonedConditionsIdentifier = tableRow.get(\"CLONE.\" + COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(clonedConditionsIdentifier).isNotBlank();\n\n\t\ttry\n\t\t{\n\t\t\t//\n\t\t\t// calling the BL called in the process -- only method used\n\t\t\tfinal ConditionsId conditionsId = ConditionsId.ofRepoId(condition.getC_Flatrate_Conditions_ID());\n\t\t\tfinal YearId yearId = YearId.ofRepoId(year.getC_Year_ID());\n\n\t\t\tfinal ConditionsId clonedConditionId = flatrateBL.cloneConditionsToNewYear(conditionsId, yearId);\n\n\t\t\tfinal I_C_Flatrate_Conditions clonedCondition = InterfaceWrapperHelper.load(clonedConditionId, I_C_Flatrate_Conditions.class);\n\t\t\tconditionsTable.put(clonedConditionsIdentifier, clonedCondition);\n\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (errorMessageIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfail(e.getMessage(), e);\n\t\t\t}\n\t\t}\n\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 272,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Conditions_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Conditions_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1424,
    "annotation": "\n\t@Then(\"validate cloned C_Flatrate_Conditions:\")",
    "glue_code": "\t@Then(\"validate cloned C_Flatrate_Conditions:\")\n\tpublic void validate_cloned_C_Flatrate_Conditions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfinal Map<String, String> tableRow = tableRows.get(0);\n\n\t\tfinal String clonedConditionsIdentifier = tableRow.get(COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(clonedConditionsIdentifier).as(COLUMNNAME_C_Flatrate_Conditions_ID + \" is mandatory\").isNotBlank();\n\n\t\tfinal String name = tableRow.get(COLUMNNAME_Name);\n\t\tassertThat(name).as(COLUMNNAME_Name + \" is mandatory\").isNotBlank();\n\n\t\tfinal String type_Conditions = tableRow.get(COLUMNNAME_Type_Conditions);\n\t\tassertThat(type_Conditions).as(COLUMNNAME_Type_Conditions + \" is mandatory\").isNotBlank();\n\n\t\tfinal String onFlatrateTermExtend = tableRow.get(\"OPT.\" + COLUMNNAME_OnFlatrateTermExtend);\n\t\tassertThat(onFlatrateTermExtend).as(COLUMNNAME_OnFlatrateTermExtend + \" is mandatory in this context\").isNotBlank();\n\n\t\tfinal String docStatus = tableRow.get(\"OPT.\" + COLUMNNAME_DocStatus);\n\t\tassertThat(docStatus).as(COLUMNNAME_DocStatus + \" is mandatory in this context\").isNotBlank();\n\n\t\tfinal I_C_Flatrate_Conditions clonedConditions = conditionsTable.get(clonedConditionsIdentifier);\n\t\tassertThat(clonedConditions).isNotNull();\n\n\t\tfinal I_ModCntr_Settings clonedSettings = clonedConditions.getModCntr_Settings();\n\t\tassertThat(clonedSettings).isNotNull();\n\n\t\tfinal String clonedSettingsIDentifier = tableRow.get(\"CLONE.\" + COLUMNNAME_ModCntr_Settings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(clonedSettingsIDentifier).as(\"CLONE.\" + COLUMNNAME_ModCntr_Settings_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory in this context\").isNotBlank();\n\n\t\tmodCntrSettingsTable.put(clonedSettingsIDentifier, clonedSettings);\n\n\t\tfinal I_C_Year harvestYear = clonedSettings.getC_Year();\n\t\tassertThat(harvestYear).isNotNull();\n\n\t\tassertThat(clonedConditions.getName()).endsWith(\"-\" + harvestYear.getFiscalYear()); // UUID is added to the name to avoid unique name constraint\n\t\tassertThat(clonedConditions.getType_Conditions()).isEqualTo(type_Conditions);\n\t\tassertThat(clonedConditions.getOnFlatrateTermExtend()).isEqualTo(onFlatrateTermExtend);\n\t\tassertThat(clonedConditions.getDocStatus()).isEqualTo(docStatus);\n\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 323,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Conditions_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Conditions_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1425,
    "annotation": "\n\t@And(\"validate cloned ModCntr_Settings:\")",
    "glue_code": "\t@And(\"validate cloned ModCntr_Settings:\")\n\tpublic void validate_cloned_ModCntr_Settings(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfinal SoftAssertions assertions = new SoftAssertions();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String clonedSettingsIdentifier = tableRow.get(COLUMNNAME_ModCntr_Settings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertions.assertThat(clonedSettingsIdentifier).as(COLUMNNAME_ModCntr_Settings_ID + \" is mandatory\").isNotBlank();\n\n\t\t\tfinal I_ModCntr_Settings clonedSettings = modCntrSettingsTable.get(clonedSettingsIdentifier);\n\t\t\tassertions.assertThat(clonedSettings).isNotNull();\n\n\t\t\t//name\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Name);\n\t\t\tassertions.assertThat(clonedSettings.getName()).isEqualTo(name);\n\n\t\t\t// product\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_ModCntr_Settings.COLUMNNAME_M_Raw_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertions.assertThat(productIdentifier).as(I_ModCntr_Settings.COLUMNNAME_M_Raw_Product_ID + \" is a mandatory column\").isNotBlank();\n\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertions.assertThat(product).isNotNull();\n\t\t\tassertions.assertThat(clonedSettings.getM_Raw_Product_ID()).isEqualTo(product.getM_Product_ID());\n\n\t\t\t// year & calendar\n\t\t\tfinal String yearIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_ModCntr_Settings.COLUMNNAME_C_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertions.assertThat(yearIdentifier).as(I_ModCntr_Settings.COLUMNNAME_C_Year_ID + \" is a mandatory column\").isNotBlank();\n\n\t\t\tfinal I_C_Year year = yearTable.get(yearIdentifier);\n\t\t\tassertions.assertThat(year).isNotNull();\n\t\t\tassertions.assertThat(clonedSettings.getC_Year_ID()).isEqualTo(year.getC_Year_ID());\n\t\t\tassertions.assertThat(clonedSettings.getC_Calendar_ID()).isEqualTo(year.getC_Calendar_ID());\n\n\t\t\t// Pricing system\n\t\t\tfinal String pricingSystemIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Flatrate_Conditions.COLUMNNAME_M_PricingSystem_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(pricingSystemIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_PricingSystem pricingSystem = pricingSysTable.get(pricingSystemIdentifier);\n\t\t\t\tassertions.assertThat(clonedSettings.getM_PricingSystem_ID()).isEqualTo(pricingSystem.getM_PricingSystem_ID());\n\t\t\t}\n\n\t\t\t// ModCntr_Modules\n\t\t\tfinal int clonedModulesCounter = queryBL.createQueryBuilder(I_ModCntr_Module.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_ModCntr_Module.COLUMNNAME_ModCntr_Settings_ID, clonedSettings.getModCntr_Settings_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.count();\n\n\t\t\tassertions.assertThat(clonedModulesCounter).isEqualTo(1);\n\t\t\tassertions.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 365,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Conditions_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Conditions_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1426,
    "annotation": "\n\t@And(\"^the C_Flatrate_Conditions identified by (.*) is (completed)$\")",
    "glue_code": "\t@And(\"^the C_Flatrate_Conditions identified by (.*) is (completed)$\")\n\tpublic void conditions_action(@NonNull final String conditionsIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_C_Flatrate_Conditions conditions = conditionsTable.get(conditionsIdentifier);\n\n\t\tif (StepDefDocAction.valueOf(action) == StepDefDocAction.completed)\n\t\t{\n\t\t\tdocumentBL.processEx(conditions, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new AdempiereException(\"Unhandled C_Flatrate_Conditions action\")\n\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 419,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Conditions_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Conditions_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1427,
    "annotation": "\n\t@And(\"validate C_Flatrate_Conditions\")",
    "glue_code": "\t@And(\"validate C_Flatrate_Conditions\")\n\tpublic void validate_C_Flatrate_Conditions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateFlatrateConditions(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 436,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Conditions_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Conditions_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1420,
    "annotation": "\n\t@Given(\"metasfresh contains C_Flatrate_Matchings:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Flatrate_Matchings:\")\n\tpublic void metasfresh_contains_c_flatrate_matchings(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String conditionsIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Flatrate_Conditions conditionsRecord = conditionsTable.get(conditionsIdentifier);\n\t\t\tassertThat(conditionsRecord).as(\"Missing C_Flatrate_Conditions for identifier=%s\", conditionsIdentifier).isNotNull();\n\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_SeqNo);\n\n\t\t\tfinal I_C_Flatrate_Matching matchingRecord = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_C_Flatrate_Matching.class)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_C_Flatrate_Conditions_ID, conditionsRecord.getC_Flatrate_Conditions_ID())\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_SeqNo, seqNo).orderBy(COLUMNNAME_C_Flatrate_Matching_ID)\n\t\t\t\t\t\t\t.create().first(),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_C_Flatrate_Matching.class));\n\n\t\t\tmatchingRecord.setC_Flatrate_Conditions_ID(conditionsRecord.getC_Flatrate_Conditions_ID());\n\t\t\tmatchingRecord.setSeqNo(seqNo);\n\t\t\tmatchingRecord.setIsActive(true);\n\t\t\tmatchingRecord.setC_Flatrate_Transition_ID(StepDefConstants.FLATRATE_TRANSITION_ID.getRepoId());\n\n\t\t\tfinal String productCategoryIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, COLUMNNAME_M_Product_Category_Matching_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(productCategoryIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Product_Category productCategoryRecord = productCategoryStepDefData.get(productCategoryIdentifier);\n\t\t\t\tassertThat(productCategoryRecord).as(\"Missing M_Product_Category for identifier=%s\", productCategoryIdentifier).isNotNull();\n\t\t\t\tmatchingRecord.setM_Product_Category_Matching_ID(productCategoryRecord.getM_Product_Category_ID());\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(matchingRecord);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 62,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Matching_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Matching_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1463,
    "annotation": "\n\t@Given(\"metasfresh contains C_Flatrate_Terms:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Flatrate_Terms:\")\n\tpublic void metasfresh_contains_c_flatrate_terms(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String billPartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Bill_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner billPartner = bpartnerTable.get(billPartnerIdentifier);\n\n\t\t\tfinal I_C_BPartner_Location billPartnerLocation = bPartnerDAO.retrieveBPartnerLocation(IBPartnerDAO.BPartnerLocationQuery.builder().bpartnerId(BPartnerId.ofRepoId(billPartner.getC_BPartner_ID()))\n\t\t\t\t\t.type(IBPartnerDAO.BPartnerLocationQuery.Type.BILL_TO)\n\t\t\t\t\t.build());\n\t\t\tassertThat(billPartnerLocation).isNotNull(); // guard\n\n\t\t\tfinal String conditionsIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Flatrate_Conditions conditions = conditionsTable.get(conditionsIdentifier);\n\n\t\t\tfinal I_C_Flatrate_Data flatrateData = flatrateDAO.retrieveOrCreateFlatrateData(billPartner);\n\n\t\t\tfinal I_C_Flatrate_Term contractRecord = InterfaceWrapperHelper.newInstance(I_C_Flatrate_Term.class);\n\t\t\tcontractRecord.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\n\t\t\tcontractRecord.setC_Flatrate_Conditions_ID(conditions.getC_Flatrate_Conditions_ID());\n\t\t\tcontractRecord.setC_UOM_ID(conditions.getC_UOM_ID());\n\n\t\t\tcontractRecord.setC_Flatrate_Data_ID(flatrateData.getC_Flatrate_Data_ID());\n\t\t\tcontractRecord.setBill_BPartner_ID(billPartner.getC_BPartner_ID());\n\t\t\tcontractRecord.setBill_Location_ID(billPartnerLocation.getC_BPartner_Location_ID());\n\n\t\t\tfinal DocStatus docStatus = DocStatus.ofNullableCode(tableRow.get(\"OPT.\" + COLUMNNAME_DocStatus));\n\t\t\tcontractRecord.setDocStatus(CoalesceUtil.coalesceNotNull(docStatus, DocStatus.Completed).getCode());\n\t\t\t// TODO change to be *not* processed and completed by default\n\t\t\tfinal boolean processed = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + COLUMNNAME_Processed, true);\n\t\t\tcontractRecord.setProcessed(processed);\n\n\t\t\tfinal String dropshipPartnerIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_DropShip_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropshipPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner dropshipPartner = bpartnerTable.get(dropshipPartnerIdentifier);\n\t\t\t\tcontractRecord.setDropShip_BPartner_ID(dropshipPartner.getC_BPartner_ID());\n\n\t\t\t\tfinal I_C_BPartner_Location dropshipLocation = bPartnerDAO.retrieveBPartnerLocation(IBPartnerDAO.BPartnerLocationQuery.builder().bpartnerId(BPartnerId.ofRepoId(billPartner.getC_BPartner_ID()))\n\t\t\t\t\t\t.type(IBPartnerDAO.BPartnerLocationQuery.Type.SHIP_TO)\n\t\t\t\t\t\t.build());\n\t\t\t\tassertThat(dropshipLocation).isNotNull(); // guard\n\t\t\t\tcontractRecord.setDropShip_Location_ID(dropshipLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String productIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\tcontractRecord.setM_Product_ID(product.getM_Product_ID());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontractRecord.setM_Product_ID(conditions.getM_Product_Flatrate_ID());\n\t\t\t}\n\n\t\t\tfinal String pmmProductIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_PMM_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(pmmProductIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_PMM_Product pmmProductRecord = pmmProductTable.get(pmmProductIdentifier);\n\n\t\t\t\tfinal de.metas.procurement.base.model.I_C_Flatrate_Term prodcurementContractRecord = InterfaceWrapperHelper.create(contractRecord, de.metas.procurement.base.model.I_C_Flatrate_Term.class);\n\t\t\t\tprodcurementContractRecord.setPMM_Product_ID(pmmProductRecord.getPMM_Product_ID());\n\t\t\t}\n\n\t\t\tfinal Integer nrOfDaysFromNow = DataTableUtil.extractIntegerOrNullForColumnName(tableRow, \"OPT.NrOfDaysFromNow\");\n\n\t\t\tif (nrOfDaysFromNow != null)\n\t\t\t{\n\t\t\t\tfinal Instant today = SystemTime.asLocalDate(SystemTime.zoneId()).atStartOfDay(SystemTime.zoneId()).toInstant();\n\t\t\t\tcontractRecord.setStartDate(Timestamp.from(today.minus(1, ChronoUnit.DAYS)));\n\t\t\t\tcontractRecord.setEndDate(Timestamp.from(today.plus(nrOfDaysFromNow, ChronoUnit.DAYS)));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontractRecord.setStartDate(DataTableUtil.extractDateTimestampForColumnName(tableRow, \"StartDate\"));\n\t\t\t\tfinal Timestamp endDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(tableRow, \"EndDate\");\n\t\t\t\tif (endDate != null)\n\t\t\t\t{\n\t\t\t\t\tcontractRecord.setEndDate(endDate);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tflatrateBL.updateNoticeDateAndEndDate(contractRecord);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfinal String orderLineIdentifier = tableRow.get(\"OPT.\" + COLUMNNAME_C_OrderLine_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tcontractRecord.setC_OrderLine_Term_ID(orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(contractRecord);\n\n\t\t\tcontractTable.put(\n\t\t\t\t\tDataTableUtil.extractRecordIdentifier(tableRow, \"C_FlatrateTerm\"),\n\t\t\t\t\tcontractRecord);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 141,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1464,
    "annotation": "\n\t@And(\"validate created C_Flatrate_Term:\")",
    "glue_code": "\t@And(\"validate created C_Flatrate_Term:\")\n\tpublic void validate_created_C_Flatrate_Term(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal I_C_Flatrate_Term contract = retrieveContract(row);\n\n\t\t\tInterfaceWrapperHelper.refresh(contract);\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_C_OrderLine_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tsoftly.assertThat(orderLine).isNotNull();\n\t\t\t\tsoftly.assertThat(contract.getC_OrderLine_Term_ID()).isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_C_Order_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\tsoftly.assertThat(order).isNotNull();\n\t\t\t\tsoftly.assertThat(contract.getC_Order_Term_ID()).isEqualTo(order.getC_Order_ID());\n\t\t\t}\n\n\t\t\tfinal String x12de355Code = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_C_UOM_ID + \".\" + X12DE355.class.getSimpleName());\n\t\t\tif (Check.isNotBlank(x12de355Code))\n\t\t\t{\n\t\t\t\tfinal UomId uomId = uomDAO.getUomIdByX12DE355(X12DE355.ofCode(x12de355Code));\n\t\t\t\tsoftly.assertThat(contract.getC_UOM_ID()).isEqualTo(uomId.getRepoId());\n\t\t\t}\n\n\t\t\tfinal BigDecimal priceActual = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_PriceActual);\n\t\t\tif (priceActual != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getPriceActual()).isEqualTo(priceActual);\n\t\t\t}\n\n\t\t\tfinal BigDecimal plannedQtyPerUnit = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_PlannedQtyPerUnit);\n\t\t\tif (plannedQtyPerUnit != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getPlannedQtyPerUnit()).isEqualTo(plannedQtyPerUnit);\n\t\t\t}\n\n\t\t\tfinal String pricingSystemIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Conditions.COLUMNNAME_M_PricingSystem_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(pricingSystemIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_PricingSystem pricingSystem = pricingSysTable.get(pricingSystemIdentifier);\n\t\t\t\tsoftly.assertThat(contract.getM_PricingSystem_ID()).isEqualTo(pricingSystem.getM_PricingSystem_ID());\n\t\t\t}\n\n\t\t\tfinal String typeConditions = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_Type_Conditions);\n\t\t\tif (Check.isNotBlank(typeConditions))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getType_Conditions()).isEqualTo(typeConditions);\n\t\t\t}\n\n\t\t\tfinal String contractStatus = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_ContractStatus);\n\t\t\tif (Check.isNotBlank(contractStatus))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getContractStatus()).isEqualTo(contractStatus);\n\t\t\t}\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_DocStatus);\n\t\t\tif (Check.isNotBlank(docStatus))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getDocStatus()).isEqualTo(docStatus);\n\t\t\t}\n\n\t\t\tfinal Timestamp endDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_EndDate);\n\t\t\tif (endDate != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getEndDate()).isEqualTo(endDate);\n\t\t\t}\n\n\t\t\tfinal Boolean isSoTrx = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_IsSOTrx);\n\t\t\tif (isSoTrx != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.isSOTrx()).as(I_C_Flatrate_Term.COLUMNNAME_IsSOTrx).isEqualTo(isSoTrx);\n\t\t\t}\n\n\t\t\tfinal String poReference = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_POReference);\n\t\t\tif (Check.isNotBlank(poReference))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(contract.getPOReference()).isEqualTo(poReference);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t\t\n\t\t\tfinal String flatrateTermIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Flatrate_Term.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tcontractTable.putOrReplace(flatrateTermIdentifier, contract);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 246,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1465,
    "annotation": "\n\t@And(\"^retrieve C_Flatrate_Term within (.*)s:$\")",
    "glue_code": "\t@And(\"^retrieve C_Flatrate_Term within (.*)s:$\")\n\tpublic void retrieve_C_Flatrate_Term(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String flatrateConditionsIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Flatrate_Conditions_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Flatrate_Conditions flatrateConditions = conditionsTable.get(flatrateConditionsIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal IQueryBuilder<I_C_Flatrate_Term> queryBuilder = queryBL.createQueryBuilder(I_C_Flatrate_Term.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_C_Flatrate_Conditions_ID, flatrateConditions.getC_Flatrate_Conditions_ID())\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_Product_ID, product.getM_Product_ID());\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Flatrate_Term.COLUMNNAME_C_Order_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\tassertThat(order).isNotNull();\n\t\t\t\tqueryBuilder.addEqualsFilter(I_C_Flatrate_Term.COLUMNNAME_C_Order_Term_ID, order.getC_Order_ID());\n\t\t\t}\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_C_OrderLine_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tassertThat(orderLine).isNotNull();\n\t\t\t\tqueryBuilder.addEqualsFilter(COLUMNNAME_C_OrderLine_Term_ID, orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal Supplier<Boolean> isProcessorStarted = () ->\n\t\t\t{\n\t\t\t\tfinal I_C_Flatrate_Term flatrateTerm = queryBuilder.orderByDescending(COLUMNNAME_C_Flatrate_Term_ID)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.first(I_C_Flatrate_Term.class);\n\t\t\t\treturn flatrateTerm != null;\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, isProcessorStarted);\n\n\t\t\tfinal I_C_Flatrate_Term flatrateTerm = queryBuilder.orderByDescending(COLUMNNAME_C_Flatrate_Term_ID)\n\t\t\t\t\t.create()\n\t\t\t\t\t.first(I_C_Flatrate_Term.class);\n\n\t\t\tfinal String flatrateTermIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Flatrate_Term_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tcontractTable.putOrReplace(flatrateTermIdentifier, flatrateTerm);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 343,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1466,
    "annotation": "\n\t@Then(\"extend C_Flatrate_Term:\")",
    "glue_code": "\t@Then(\"extend C_Flatrate_Term:\")\n\tpublic void extend_C_Flatrate_Term(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfinal Map<String, String> row = tableRows.get(0);\n\n\t\tfinal String contractIdentifier = row.get(COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tassertThat(contractIdentifier).as(COLUMNNAME_C_Flatrate_Term_ID + \"is a mandatory column\").isNotBlank();\n\n\t\tfinal I_C_Flatrate_Term contract = contractTable.get(contractIdentifier);\n\t\tassertThat(contract).as(\"No Contract Period found for Identifier {}\", contractIdentifier).isNotNull();\n\n\t\tfinal Timestamp startDate = DataTableUtil.extractDateTimestampForColumnName(row, COLUMNNAME_StartDate);\n\t\tassertThat(startDate).as(COLUMNNAME_StartDate + \"is a mandatory column\").isNotNull();\n\n\t\tfinal Integer pInstanceID = DataTableUtil.extractIntForColumnName(row, I_AD_PInstance.COLUMNNAME_AD_PInstance_ID);\n\t\tassertThat(pInstanceID).as(I_AD_PInstance.COLUMNNAME_AD_PInstance_ID + \"is a mandatory column\").isNotNull();\n\n\t\tassertThat(contract.getC_FlatrateTerm_Next()).isNull();  // contract not extended yet\n\n        assertThat(pInstanceID).isNotNull();\n\n\t\tfinal IFlatrateBL.ContractExtendingRequest contractExtendingRequest = IFlatrateBL.ContractExtendingRequest.builder()\n\t\t\t\t.AD_PInstance_ID(PInstanceId.ofRepoId(pInstanceID))\n\t\t\t\t.contract(contract)\n\t\t\t\t.forceExtend(true)\n\t\t\t\t.forceComplete(false)\n\t\t\t\t.nextTermStartDate(startDate)\n\t\t\t\t.build();\n\n\t\ttry\n\t\t{\n\t\t\tflatrateBL.extendContractAndNotifyUser(contractExtendingRequest);\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (errorMessageIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfail(e.getMessage(), e);\n\t\t\t}\n\n\t\t}\n\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 421,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1467,
    "annotation": "\n\t@Then(\"^C_Flatrate_Term identified by (.*) is extended$\")",
    "glue_code": "\t@Then(\"^C_Flatrate_Term identified by (.*) is extended$\")\n\tpublic void c_flatrate_termIsExtended(@NonNull final String contractIdentifier)\n\t{\n\t\tassertThat(contractIdentifier).isNotBlank();\n\n\t\tfinal I_C_Flatrate_Term contract = contractTable.get(contractIdentifier);\n\t\tassertThat(contract).isNotNull();\n\n\t\tfinal I_C_Flatrate_Term nextContract = contract.getC_FlatrateTerm_Next();\n\t\tassertThat(nextContract).isNotNull(); // next term created & contract extended\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 472,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1468,
    "annotation": "\n\t@Then(\"^C_Flatrate_Term identified by (.*) is not extended$\")",
    "glue_code": "\t@Then(\"^C_Flatrate_Term identified by (.*) is not extended$\")\n\tpublic void c_flatrate_termIsNotExtended(@NonNull final String contractIdentifier)\n\t{\n\t\tassertThat(contractIdentifier).isNotBlank();\n\n\t\tfinal I_C_Flatrate_Term contract = contractTable.get(contractIdentifier);\n\t\tassertThat(contract).isNotNull();\n\n\t\tfinal I_C_Flatrate_Term nextContract = contract.getC_FlatrateTerm_Next();\n\t\tassertThat(nextContract).isNull(); // next term not created & contract not extended\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 484,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1469,
    "annotation": "\n\t@And(\"^the C_Flatrate_Term identified by (.*) is completed$\")",
    "glue_code": "\t@And(\"^the C_Flatrate_Term identified by (.*) is completed$\")\n\tpublic void the_C_Flatrate_Term_IsCompleted(@NonNull final String identifier)\n\t{\n\t\tfinal I_C_Flatrate_Term flatrateTermRecord = contractTable.get(identifier);\n\t\tassertThat(flatrateTermRecord).as(\"Missing C_Flatrate_Term with identifier %s\", identifier).isNotNull();\n\t\tdocumentBL.processEx(flatrateTermRecord, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 496,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1470,
    "annotation": "\n\t@And(\"^the C_Flatrate_Term identified by (.*) has (.*) C_Flatrate_DataEntries.$\")",
    "glue_code": "\t@And(\"^the C_Flatrate_Term identified by (.*) has (.*) C_Flatrate_DataEntries.$\")\n\tpublic void the_C_Flatrate_Term_has_DataEntries(@NonNull final String identifier, final String countStr)\n\t{\n\t\tfinal int count = NumberUtils.asInt(countStr);\n\n\t\tfinal I_C_Flatrate_Term flatrateTermRecord = contractTable.get(identifier);\n\t\tassertThat(flatrateTermRecord)\n\t\t\t\t.as(\"Missing C_Flatrate_Term record for identifier=%s\", identifier)\n\t\t\t\t.isNotNull();\n\n\t\tfinal List<I_C_Flatrate_DataEntry> list = queryBL.createQueryBuilder(I_C_Flatrate_DataEntry.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_Flatrate_DataEntry.COLUMNNAME_C_Flatrate_Term_ID, flatrateTermRecord.getC_Flatrate_Term_ID())\n\t\t\t\t.create()\n\t\t\t\t.list();\n\n\t\tassertThat(list)\n\t\t\t\t.as(\"Number of C_Flatrate_DataEntry record for C_Flatrate_Term_ID=%s - identifier=%s\", flatrateTermRecord.getC_Flatrate_Term_ID(), identifier)\n\t\t\t\t.hasSize(count);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 504,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/C_Flatrate_Term_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "C_Flatrate_Term_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1438,
    "annotation": "\n\t@And(\"^after no more than (.*)s, I_ModCntr_Log are found by product$\")",
    "glue_code": "\t@And(\"^after no more than (.*)s, I_ModCntr_Log are found by product$\")\n\tpublic void loadImportModCntrLog(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : table.asMaps())\n\t\t{\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Product.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal ItemProvider<I_I_ModCntr_Log> locateLog = () -> queryBL.createQueryBuilder(I_I_ModCntr_Log.class)\n\t\t\t\t\t.addEqualsFilter(I_I_ModCntr_Log.COLUMNNAME_M_Product_ID, product.getM_Product_ID())\n\t\t\t\t\t.orderBy(I_I_ModCntr_Log.COLUMNNAME_Created)\n\t\t\t\t\t.firstOnlyOptional()\n\t\t\t\t\t.map(ItemProvider.ProviderResult::resultWasFound)\n\t\t\t\t\t.orElseGet(() -> ItemProvider.ProviderResult.resultWasNotFound(buildMessageWitAllLogs(row)));\n\n\t\t\tfinal I_I_ModCntr_Log importLog = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, locateLog);\n\n\t\t\tassertThat(importLog).as(\"I_I_ModCntr_Log\").isNotNull();\n\n\t\t\tfinal String importModCntrLogIdentifier = DataTableUtil.extractStringForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_I_ModCntr_Log_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\timportModCntrTable.putOrReplace(importModCntrLogIdentifier, importLog);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/I_ModCntr_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "I_ModCntr_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1473,
    "annotation": "\n\t@And(\"^load latest ModCntr_Interest_Run for invoicing group (.*) as (.*)$\")",
    "glue_code": "\t@And(\"^load latest ModCntr_Interest_Run for invoicing group (.*) as (.*)$\")\n\tpublic void metasfresh_contains_ModCntr_InvoicingGroup(@NonNull final String invoicingGroupIdentifier, @NonNull final String interestRunIdentifier)\n\t{\n\t\tfinal I_ModCntr_InvoicingGroup invoicingGroup = invoicingGroupTable.get(invoicingGroupIdentifier);\n\n\t\tfinal I_ModCntr_Interest_Run lastInterestRun = queryBL.createQueryBuilder(I_ModCntr_Interest_Run.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_ModCntr_Interest_Run.COLUMNNAME_ModCntr_InvoicingGroup_ID, invoicingGroup.getModCntr_InvoicingGroup_ID())\n\t\t\t\t.orderByDescending(I_ModCntr_Interest_Run.COLUMNNAME_Created)\n\t\t\t\t.first();\n\t\tCheck.assumeNotNull(lastInterestRun, \"Found no interest run for invoicing group {}\", invoicingGroupIdentifier);\n\t\tinterestRunTable.putOrReplace(interestRunIdentifier, lastInterestRun);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Interest_Run_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Interest_Run_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1474,
    "annotation": "\n\t@And(\"distribute interest\")",
    "glue_code": "\t@And(\"distribute interest\")\n\tpublic void distributeInterest(@NonNull final DataTable dataTable)\n\t{\n\t\tinterestService.distributeInterestAndBonus(getRequest(DataTableRow.singleRow(dataTable)));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 87,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Interest_Run_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Interest_Run_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1475,
    "annotation": "\n\t@And(\"^validate created interestRun records for (.*)$\")",
    "glue_code": "\t@And(\"^validate created interestRun records for (.*)$\")\n\tpublic void verifyInterest(@NonNull final String interestRunIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal InterestRunId interestRunId = InterestRunId.ofRepoId(interestRunTable.get(interestRunIdentifier).getModCntr_Interest_Run_ID());\n\t\t// make sure it's modifiable, we want to be able to remove matched records from it\n\t\tfinal ArrayList<ModularLogInterest> modularLogInterestsForRun = new ArrayList<>(modularLogInterestRepository.getModularLogInterestsForRun(interestRunId));\n\t\tDataTableRows.of(dataTable).forEach(row -> validateInterestRow(row, modularLogInterestsForRun));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 93,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Interest_Run_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Interest_Run_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1449,
    "annotation": "\n\t@Given(\"metasfresh contains ModCntr_InvoicingGroup_Product:\")",
    "glue_code": "\t@Given(\"metasfresh contains ModCntr_InvoicingGroup_Product:\")\n\tpublic void metasfresh_contains_ModCntr_InvoicingGroup_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tcreateModCntrInvoicingGroupProduct(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_InvoicingGroup_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_InvoicingGroup_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1450,
    "annotation": "\n\t@Given(\"the ModCntr_InvoicingGroup_Product is added expecting error:\")",
    "glue_code": "\t@Given(\"the ModCntr_InvoicingGroup_Product is added expecting error:\")\n\tpublic void metasfresh_adds_ModCntr_InvoicingGroup_Product_expectingError(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tboolean errorThrown = false;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tcreateModCntrInvoicingGroupProduct(row);\n\t\t\t\tassertThat(1).as(\"An Exception should have been thrown !\").isEqualTo(2);\n\t\t\t}\n\t\t\tcatch (final AdempiereException e)\n\t\t\t{\n\t\t\t\terrorThrown = true;\n\n\t\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(errorMessageIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\t\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tassertThat(errorThrown).isTrue();\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_InvoicingGroup_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_InvoicingGroup_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1433,
    "annotation": "\n\t@Given(\"metasfresh contains ModCntr_InvoicingGroup:\")",
    "glue_code": "\t@Given(\"metasfresh contains ModCntr_InvoicingGroup:\")\n\tpublic void metasfresh_contains_ModCntr_InvoicingGroup(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tcreateModCntrInvoicingGroup(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_InvoicingGroup_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_InvoicingGroup_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1434,
    "annotation": "\n\t@And(\"the ModCntr_InvoicingGroup is updated expecting error:\")",
    "glue_code": "\t@And(\"the ModCntr_InvoicingGroup is updated expecting error:\")\n\tpublic void update_ModCntr_InvoicingGroup_expectingError(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tboolean errorThrown = false;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tupdateModCntrInvoicingGroup(row);\n\t\t\t\tassertThat(1).as(\"An Exception should have been thrown !\").isEqualTo(2);\n\t\t\t}\n\t\t\tcatch (final AdempiereException e)\n\t\t\t{\n\t\t\t\terrorThrown = true;\n\n\t\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(errorMessageIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\t\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tassertThat(errorThrown).isTrue();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_InvoicingGroup_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_InvoicingGroup_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1460,
    "annotation": "\n\t@And(\"^after not more than (.*)s, validate ModCntr_Log_Statuses:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, validate ModCntr_Log_Statuses:$\")\n\tpublic void validateModCntr_Log_Statuses(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\n\t\t\tfinal ItemProvider<List<I_ModCntr_Log_Status>> locateStatuses = () -> {\n\t\t\t\tfinal List<I_ModCntr_Log_Status> modCntrLogStatuses = fetchModCntrLogStatusList(row);\n\n\t\t\t\tfinal Integer noOfLogStatuses = Optional.ofNullable(DataTableUtil.extractIntegerOrNullForColumnName(row, \"OPT.noOfLogStatuses\"))\n\t\t\t\t\t\t.orElse(1);\n\n\t\t\t\tif (modCntrLogStatuses.size() == noOfLogStatuses)\n\t\t\t\t{\n\t\t\t\t\treturn ItemProvider.ProviderResult.resultWasFound(modCntrLogStatuses);\n\t\t\t\t}\n\n\t\t\t\treturn ItemProvider.ProviderResult.resultWasNotFound(\"Found \" + modCntrLogStatuses.size() + \" records for criteria!\");\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWaitForItem(timeoutSec,\n\t\t\t\t\t\t\t\t\t\t  500,\n\t\t\t\t\t\t\t\t\t\t  locateStatuses,\n\t\t\t\t\t\t\t\t\t\t  () -> buildMessageWitAllLogStatuses(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_Status_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_Status_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1461,
    "annotation": "\n\t@And(\"^after not more than (.*)s, no ModCntr_Log_Statuses are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, no ModCntr_Log_Statuses are found:$\")\n\tpublic void noModCntr_Log_Statuses_found(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tThread.sleep(timeoutSec);\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tvalidateNoModCntr_Log_Status_Found(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 106,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_Status_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_Status_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1442,
    "annotation": "\n\t@And(\"^after not more than (.*)s, ModCntr_Logs are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, ModCntr_Logs are found:$\")\n\tpublic void validateModCntr_Logs(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tvalidateModCntr_Log(timeoutSec, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 165,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1443,
    "annotation": "\n\t@And(\"recompute modular logs for record:\")",
    "glue_code": "\t@And(\"recompute modular logs for record:\")\n\tpublic void recomputeLogsForRecord(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\trecomputeLogsForRecord(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 175,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1444,
    "annotation": "\n\t@And(\"recompute modular log for record expecting error\")",
    "glue_code": "\t@And(\"recompute modular log for record expecting error\")\n\tpublic void recomputeLogsForRecordExpectingError(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tassertThat(tableRows.size())\n\t\t\t\t.as(\"Expecting only one row!\")\n\t\t\t\t.isEqualTo(1);\n\n\t\tfinal Map<String, String> row = tableRows.get(0);\n\n\t\ttry\n\t\t{\n\t\t\trecomputeLogsForRecord(row);\n\n\t\t\tAssertions.fail(\"Expecting error to be thrown\");\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\tfinal String messageKey = DataTableUtil.extractStringForColumnName(row, \"ErrorMessage\");\n\n\t\t\tAssertions.assertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(messageKey)));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 185,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1445,
    "annotation": "\n\t@And(\"^after not more than (.*)s, no ModCntr_Logs are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, no ModCntr_Logs are found:$\")\n\tpublic void noModCntr_Logs_found(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tThread.sleep(timeoutSec);\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tvalidateNoModCntr_LogFound(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 209,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1446,
    "annotation": "\n\t@And(\"update ModCntr_Logs:\")",
    "glue_code": "\t@And(\"update ModCntr_Logs:\")\n\tpublic void update_ModCntr_Logs(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String logIdentifier = DataTableUtil.extractStringForColumnName(row, I_ModCntr_Log.COLUMNNAME_ModCntr_Log_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_ModCntr_Log log = modCntrLogTable.get(logIdentifier);\n\n\t\t\tfinal Boolean processed = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + I_ModCntr_Log.COLUMNNAME_Processed);\n\n\t\t\tif (processed != null)\n\t\t\t{\n\t\t\t\tlog.setProcessed(processed);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(log);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 221,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1419,
    "annotation": "\n\t@Given(\"metasfresh contains ModCntr_Modules:\")",
    "glue_code": "\t@Given(\"metasfresh contains ModCntr_Modules:\")\n\tpublic void metasfresh_contains_modcntr_modules(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateModCntrModules(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Module_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Module_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1462,
    "annotation": "\n\t@Given(\"metasfresh contains ModCntr_Settings:\")",
    "glue_code": "\t@Given(\"metasfresh contains ModCntr_Settings:\")\n\tpublic void metasfresh_contains_modcntr_settings(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateModCntrSettings(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 62,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Settings_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Settings_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1476,
    "annotation": "\n\t@And(\"^after not more than (.*)s, ModCntr_Specific_Prices are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, ModCntr_Specific_Prices are found:$\")\n\tpublic void there_are_specificPrices(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String specificPriceIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_ModCntr_Specific_Price.COLUMNNAME_ModCntr_Specific_Price_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadSpecificPrice(tableRow), () -> logger.error(\"Can't find specific price for: {}\", specificPriceIdentifier));\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal I_ModCntr_Specific_Price specificPrice = specificPriceTable.get(specificPriceIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(specificPrice);\n\n\t\t\tfinal Integer seqNo = DataTableUtil.extractIntegerOrNullForColumnName(tableRow, \"OPT.\" + I_ModCntr_Specific_Price.COLUMNNAME_SeqNo);\n\t\t\tif (seqNo != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(specificPrice.getSeqNo()).as(I_ModCntr_Specific_Price.COLUMNNAME_SeqNo).isEqualTo(seqNo);\n\t\t\t}\n\n\t\t\tfinal BigDecimal price = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, \"OPT.\" + I_ModCntr_Specific_Price.COLUMNNAME_Price);\n\t\t\tif (price != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(specificPrice.getPrice()).as(I_ModCntr_Specific_Price.COLUMNNAME_Price).isEqualByComparingTo(price);\n\t\t\t}\n\n\t\t\tfinal String currencyIsoCode = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_ModCntr_Specific_Price.COLUMNNAME_C_Currency_ID + \".ISO_Code\");\n\t\t\tif (Check.isNotBlank(currencyIsoCode))\n\t\t\t{\n\t\t\t\tfinal Currency currency = currencyDAO.getByCurrencyCode(CurrencyCode.ofThreeLetterCode(currencyIsoCode));\n\t\t\t\tsoftly.assertThat(specificPrice.getC_Currency_ID()).as(I_ModCntr_Specific_Price.COLUMNNAME_C_Currency_ID + \".ISO_Code\").isEqualTo(currency.getId().getRepoId());\n\t\t\t}\n\n\t\t\tfinal String uomCode = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_ModCntr_Specific_Price.COLUMNNAME_C_UOM_ID + \".\" + X12DE355.class.getSimpleName());\n\t\t\tif (Check.isNotBlank(uomCode))\n\t\t\t{\n\t\t\t\tfinal UomId uomId = uomDAO.getUomIdByX12DE355(X12DE355.ofCode(uomCode));\n\t\t\t\tsoftly.assertThat(specificPrice.getC_UOM_ID()).as(I_ModCntr_Specific_Price.COLUMNNAME_C_UOM_ID + \".\" + X12DE355.class.getSimpleName()).isEqualTo(uomId.getRepoId());\n\t\t\t}\n\n\t\t\tfinal Boolean isScalePrice = DataTableUtil.extractBooleanForColumnNameOrNull(tableRow, \"OPT.\" + I_ModCntr_Specific_Price.COLUMNNAME_IsScalePrice);\n\t\t\tif (isScalePrice != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(specificPrice.isScalePrice()).as(I_ModCntr_Specific_Price.COLUMNNAME_IsScalePrice).isEqualTo(isScalePrice);\n\t\t\t}\n\n\t\t\tfinal BigDecimal minValue = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, \"OPT.\" + I_ModCntr_Specific_Price.COLUMNNAME_MinValue);\n\t\t\tif (minValue != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(specificPrice.getMinValue()).as(I_ModCntr_Specific_Price.COLUMNNAME_MinValue).isEqualByComparingTo(minValue);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Specific_Price_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Specific_Price_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1451,
    "annotation": "\n\t@Given(\"metasfresh contains ModCntr_Types:\")",
    "glue_code": "\t@Given(\"metasfresh contains ModCntr_Types:\")\n\tpublic void metasfresh_contains_modcntr_types(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupsertModCntrTypes(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/ModCntr_Type_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract",
      "filename": "ModCntr_Type_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1477,
    "annotation": "\n\t@And(\"^validate C_CallOrderDetail for (.*):$\")",
    "glue_code": "\t@And(\"^validate C_CallOrderDetail for (.*):$\")\n\tpublic void validate_C_CallOrderDetail(final @NonNull String summaryIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_C_CallOrderSummary callOrderSummary = callOrderSummaryTable.get(summaryIdentifier);\n\t\tassertThat(callOrderSummary).isNotNull();\n\n\t\tfinal List<I_C_CallOrderDetail> callOrderDetails = queryBL.createQueryBuilder(I_C_CallOrderDetail.class)\n\t\t\t\t.addInArrayFilter(I_C_CallOrderDetail.COLUMNNAME_C_CallOrderSummary_ID, callOrderSummary.getC_CallOrderSummary_ID())\n\t\t\t\t.orderBy(I_C_CallOrderDetail.COLUMNNAME_Created)\n\t\t\t\t.create()\n\t\t\t\t.list();\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tassertThat(callOrderDetails.size()).isEqualTo(tableRows.size());\n\n\t\tfor (int callOrderDetailsIndex = 0; callOrderDetailsIndex < callOrderDetails.size(); callOrderDetailsIndex++)\n\t\t{\n\t\t\tfinal I_C_CallOrderDetail actualCallOrderDetail = callOrderDetails.get(callOrderDetailsIndex);\n\t\t\tfinal Map<String, String> expectedCallOrderDetail = tableRows.get(callOrderDetailsIndex);\n\n\t\t\tfinal String x12de355UOMCode = DataTableUtil.extractStringForColumnName(expectedCallOrderDetail, I_C_CallOrderDetail.COLUMNNAME_C_UOM_ID + \".\" + X12DE355.class.getSimpleName());\n\t\t\tfinal UomId uomId = uomDAO.getUomIdByX12DE355(X12DE355.ofCode(x12de355UOMCode));\n\t\t\tassertThat(actualCallOrderDetail.getC_UOM_ID()).isEqualTo(uomId.getRepoId());\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\tassertThat(actualCallOrderDetail.getC_Order_ID()).isEqualTo(order.getC_Order_ID());\n\t\t\t}\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tassertThat(actualCallOrderDetail.getC_OrderLine_ID()).isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_QtyEntered);\n\t\t\tif (qtyEntered != null)\n\t\t\t{\n\t\t\t\tassertThat(actualCallOrderDetail.getQtyEntered()).isEqualTo(qtyEntered);\n\t\t\t}\n\n\t\t\tfinal String inOutIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(inOutIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_InOut inOut = inOutTable.get(inOutIdentifier);\n\t\t\t\tassertThat(actualCallOrderDetail.getM_InOut_ID()).isEqualTo(inOut.getM_InOut_ID());\n\t\t\t}\n\n\t\t\tfinal String inOutLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_M_InOutLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(inOutLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_InOutLine inOutLine = inOutLineTable.get(inOutLineIdentifier);\n\t\t\t\tassertThat(actualCallOrderDetail.getM_InOutLine_ID()).isEqualTo(inOutLine.getM_InOutLine_ID());\n\t\t\t}\n\n\t\t\tfinal BigDecimal qtyDeliveredInUOM = DataTableUtil.extractBigDecimalOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_QtyDeliveredInUOM);\n\t\t\tif (qtyDeliveredInUOM != null)\n\t\t\t{\n\t\t\t\tassertThat(actualCallOrderDetail.getQtyDeliveredInUOM()).isEqualTo(qtyDeliveredInUOM);\n\t\t\t}\n\n\t\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(invoiceIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Invoice invoice = invoiceTable.get(invoiceIdentifier);\n\t\t\t\tassertThat(actualCallOrderDetail.getC_Invoice_ID()).isEqualTo(invoice.getC_Invoice_ID());\n\t\t\t}\n\n\t\t\tfinal String invoiceLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_C_InvoiceLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(invoiceLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_InvoiceLine invoiceLine = invoiceLineTable.get(invoiceLineIdentifier);\n\t\t\t\tassertThat(actualCallOrderDetail.getC_InvoiceLine_ID()).isEqualTo(invoiceLine.getC_InvoiceLine_ID());\n\t\t\t}\n\n\t\t\tfinal BigDecimal qtyInvoicedInUOM = DataTableUtil.extractBigDecimalOrNullForColumnName(expectedCallOrderDetail, \"OPT.\" + I_C_CallOrderDetail.COLUMNNAME_QtyInvoicedInUOM);\n\t\t\tif (qtyInvoicedInUOM != null)\n\t\t\t{\n\t\t\t\tassertThat(actualCallOrderDetail.getQtyInvoicedInUOM()).isEqualTo(qtyInvoicedInUOM);\n\t\t\t}\n\n\t\t\tfinal String detailIdentifier = DataTableUtil.extractStringForColumnName(expectedCallOrderDetail, I_C_CallOrderDetail.COLUMNNAME_C_CallOrderDetail_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tcallOrderDetailTable.putOrReplace(detailIdentifier, actualCallOrderDetail);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 90,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/callorder/C_CallOrderDetail_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/callorder",
      "filename": "C_CallOrderDetail_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1439,
    "annotation": "\n\t@And(\"^validate (created|updated) C_CallOrderSummary:$\")",
    "glue_code": "\t@And(\"^validate (created|updated) C_CallOrderSummary:$\")\n\tpublic void validate_call_order_summary(@NonNull final String action_UNUSED, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String callOrderContractIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_CallOrderSummary.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_C_Flatrate_Term callOrderContract = contractTable.get(callOrderContractIdentifier);\n\t\tassertThat(callOrderContract).isNotNull();\n\n\t\tfinal I_C_CallOrderSummary callOrderSummary = queryBL.createQueryBuilder(I_C_CallOrderSummary.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_CallOrderSummary.COLUMNNAME_C_Flatrate_Term_ID, callOrderContract.getC_Flatrate_Term_ID())\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_C_CallOrderSummary.class);\n\n\t\tvalidateCallOrderSummary(callOrderSummary, row);\n\n\t\tfinal String summaryIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_CallOrderSummary.COLUMNNAME_C_CallOrderSummary_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tsummaryTable.putOrReplace(summaryIdentifier, callOrderSummary);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/callorder/C_CallOrderSummary_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/callorder",
      "filename": "C_CallOrderSummary_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1472,
    "annotation": "\n\t@Given(\"metasfresh contains C_CommissionSettingsLines:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_CommissionSettingsLines:\")\n\tpublic void metasfresh_contains_C_CommissionSettingsLines(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_CommissionSettingsLine commissionSettingsLine = newInstance(I_C_CommissionSettingsLine.class);\n\n\t\t\tfinal String commissionSettingsIdentifier = tableRow.get(COLUMNNAME_C_HierarchyCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(commissionSettingsIdentifier).as(COLUMNNAME_C_HierarchyCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_C_HierarchyCommissionSettings commissionSettings = commissionSettingsTable.get(commissionSettingsIdentifier);\n\t\t\tassertThat(commissionSettings).as(\"Missing C_HierarchyCommissionSettings record for identifier \" + commissionSettingsIdentifier).isNotNull();\n\n\t\t\tcommissionSettingsLine.setC_HierarchyCommissionSettings_ID(commissionSettings.getC_HierarchyCommissionSettings_ID());\n\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_SeqNo);\n\t\t\tcommissionSettingsLine.setSeqNo(seqNo);\n\n\t\t\tfinal BigDecimal percent = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_PercentOfBasePoints);\n\t\t\tcommissionSettingsLine.setPercentOfBasePoints(percent);\n\n\t\t\tcommissionSettingsLine.setIsActive(true);\n\n\t\t\tsaveRecord(commissionSettingsLine);\n\n\t\t\tfinal String hierarchySettingsLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_CommissionSettingsLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tcommissionSettingsLineTable.put(hierarchySettingsLineIdentifier, commissionSettingsLine);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/hierarchy/C_CommissionSettingsLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/hierarchy",
      "filename": "C_CommissionSettingsLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1535,
    "annotation": "\n\t@Given(\"metasfresh contains C_HierarchyCommissionSettings:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_HierarchyCommissionSettings:\")\n\tpublic void metasfresh_contains_C_HierarchyCommissionSettings(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_HierarchyCommissionSettings settings = InterfaceWrapperHelper.newInstance(I_C_HierarchyCommissionSettings.class);\n\n\t\t\tfinal String name = tableRow.get(COLUMNNAME_Name);\n\t\t\tassertThat(name).as(COLUMNNAME_Name + \" is mandatory\").isNotBlank();\n\t\t\tsettings.setName(name);\n\n\t\t\tfinal String productIdentifier = tableRow.get(COLUMNNAME_Commission_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(productIdentifier).as(COLUMNNAME_Commission_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).as(\"Missing M_Product record for identifier \" + productIdentifier).isNotNull();\n\t\t\tsettings.setCommission_Product_ID(product.getM_Product_ID());\n\n\t\t\tfinal boolean subtract = DataTableUtil.extractBooleanForColumnNameOr(tableRow, COLUMNNAME_IsSubtractLowerLevelCommissionFromBase, false);\n\t\t\tsettings.setIsSubtractLowerLevelCommissionFromBase(subtract);\n\n\t\t\tfinal boolean ownRevenue = DataTableUtil.extractBooleanForColumnNameOr(tableRow, COLUMNNAME_IsCreateShareForOwnRevenue, false);\n\t\t\tsettings.setIsCreateShareForOwnRevenue(ownRevenue);\n\n\t\t\tsettings.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(settings);\n\n\t\t\tfinal I_C_HierarchyCommissionSettings savedSettings = queryBL.createQueryBuilder(I_C_HierarchyCommissionSettings.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_C_HierarchyCommissionSettings_ID, settings.getC_HierarchyCommissionSettings_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_HierarchyCommissionSettings.class);\n\n\t\t\tfinal String hierarchyIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_HierarchyCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\thierarchyCommissionSettingsTable.put(hierarchyIdentifier, savedSettings);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/hierarchy/C_HierarchyCommissionSettings_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/hierarchy",
      "filename": "C_HierarchyCommissionSettings_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1499,
    "annotation": "\n\t@And(\"metasfresh contains I_C_LicenseFeeSettings:\")",
    "glue_code": "\t@And(\"metasfresh contains I_C_LicenseFeeSettings:\")\n\tpublic void metasfresh_contains_I_C_LicenseFeeSettings(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_LicenseFeeSettings licenseFeeSettings = InterfaceWrapperHelper.newInstance(I_C_LicenseFeeSettings.class);\n\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, I_C_LicenseFeeSettings.COLUMNNAME_Name);\n\t\t\tassertThat(name).as(I_C_LicenseFeeSettings.COLUMNNAME_Name + \" is mandatory\").isNotBlank();\n\t\t\tlicenseFeeSettings.setName(name);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_LicenseFeeSettings.COLUMNNAME_Commission_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(productIdentifier).as(I_C_LicenseFeeSettings.COLUMNNAME_Commission_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).as(\"Missing M_Product record for identifier \" + productIdentifier).isNotNull();\n\t\t\tlicenseFeeSettings.setCommission_Product_ID(product.getM_Product_ID());\n\n\t\t\tfinal int pointsPrecision = DataTableUtil.extractIntForColumnName(tableRow, I_C_LicenseFeeSettings.COLUMNNAME_PointsPrecision);\n\t\t\tlicenseFeeSettings.setPointsPrecision(pointsPrecision);\n\n\t\t\tlicenseFeeSettings.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(licenseFeeSettings);\n\n\t\t\tfinal String licenseFeeIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_LicenseFeeSettings.COLUMNNAME_C_LicenseFeeSettings_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tlicenseFeeSettingsTable.put(licenseFeeIdentifier, licenseFeeSettings);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/licensefee/C_LicenseFeeSettings_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/licensefee",
      "filename": "C_LicenseFeeSettings_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1500,
    "annotation": "\n\t@And(\"metasfresh contains I_C_LicenseFeeSettingsLine:\")",
    "glue_code": "\t@And(\"metasfresh contains I_C_LicenseFeeSettingsLine:\")\n\tpublic void metasfresh_contains_I_C_LicenseFeeSettingsLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_LicenseFeeSettingsLine licenseFeeSettingsLine = InterfaceWrapperHelper.newInstance(I_C_LicenseFeeSettingsLine.class);\n\n\t\t\tfinal String licenseFeeSettingsIdentifier = tableRow.get(I_C_LicenseFeeSettingsLine.COLUMNNAME_C_LicenseFeeSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(licenseFeeSettingsIdentifier).as(I_C_LicenseFeeSettingsLine.COLUMNNAME_C_LicenseFeeSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_C_LicenseFeeSettings licenseFeeSettings = licenseFeeSettingsTable.get(licenseFeeSettingsIdentifier);\n\t\t\tassertThat(licenseFeeSettings).as(\"Missing I_C_LicenseFeeSettings record for identifier \" + licenseFeeSettingsIdentifier).isNotNull();\n\n\t\t\tlicenseFeeSettingsLine.setC_LicenseFeeSettings_ID(licenseFeeSettings.getC_LicenseFeeSettings_ID());\n\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(tableRow, I_C_LicenseFeeSettingsLine.COLUMNNAME_SeqNo);\n\t\t\tlicenseFeeSettingsLine.setSeqNo(seqNo);\n\n\t\t\tfinal BigDecimal percentOfBasePoints = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_C_LicenseFeeSettingsLine.COLUMNNAME_PercentOfBasePoints);\n\t\t\tlicenseFeeSettingsLine.setPercentOfBasePoints(percentOfBasePoints);\n\n\t\t\tlicenseFeeSettingsLine.setC_BP_Group_Match_ID(BPGroupId.STANDARD.getRepoId());\n\t\t\tlicenseFeeSettingsLine.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(licenseFeeSettingsLine);\n\n\t\t\tfinal String licenseFeeSettingLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow,  COLUMNNAME_C_LicenseFeeSettingsLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tlicenseFeeSettingsLineTable.put(licenseFeeSettingLineIdentifier, licenseFeeSettingsLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/licensefee/C_LicenseFeeSettings_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/licensefee",
      "filename": "C_LicenseFeeSettings_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1528,
    "annotation": "\n\t@And(\"metasfresh contains C_Customer_Trade_Margin:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Customer_Trade_Margin:\")\n\tpublic void metasfresh_contains_I_C_Customer_Trade_Margin(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_Customer_Trade_Margin tradeMargin = InterfaceWrapperHelper.newInstance(I_C_Customer_Trade_Margin.class);\n\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Name);\n\t\t\tassertThat(name).as(COLUMNNAME_Name + \" is mandatory\").isNotBlank();\n\t\t\ttradeMargin.setName(name);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Commission_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(productIdentifier).as(COLUMNNAME_Commission_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).as(\"Missing M_Product record for identifier \" + productIdentifier).isNotNull();\n\t\t\ttradeMargin.setCommission_Product_ID(product.getM_Product_ID());\n\n\t\t\tfinal int pointsPrecision = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_PointsPrecision);\n\t\t\ttradeMargin.setPointsPrecision(pointsPrecision);\n\n\t\t\ttradeMargin.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(tradeMargin);\n\n\t\t\tfinal String tradeMarginIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Customer_Trade_Margin.COLUMNNAME_C_Customer_Trade_Margin_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\ttradeMarginTable.put(tradeMarginIdentifier, tradeMargin);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/margin/C_Customer_Trade_Margin_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/margin",
      "filename": "C_Customer_Trade_Margin_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1529,
    "annotation": "\n\t@And(\"metasfresh contains C_Customer_Trade_Margin_Line:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Customer_Trade_Margin_Line:\")\n\tpublic void metasfresh_contains_I_C_Customer_Trade_Margin_Line(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_Customer_Trade_Margin_Line customerTradeMarginLine = InterfaceWrapperHelper.newInstance(I_C_Customer_Trade_Margin_Line.class);\n\n\t\t\tfinal String tradeMarginIdentifier = tableRow.get(I_C_Customer_Trade_Margin_Line.COLUMNNAME_C_Customer_Trade_Margin_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(tradeMarginIdentifier).as(I_C_Customer_Trade_Margin_Line.COLUMNNAME_C_Customer_Trade_Margin_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_C_Customer_Trade_Margin tradeMargin = tradeMarginTable.get(tradeMarginIdentifier);\n\t\t\tassertThat(tradeMargin).as(\"Missing I_C_Customer_Trade_Margin record for identifier \" + tradeMarginIdentifier).isNotNull();\n\n\t\t\tcustomerTradeMarginLine.setC_Customer_Trade_Margin_ID(tradeMargin.getC_Customer_Trade_Margin_ID());\n\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_SeqNo);\n\t\t\tcustomerTradeMarginLine.setSeqNo(seqNo);\n\n\t\t\tfinal int margin = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_Margin);\n\t\t\tcustomerTradeMarginLine.setMargin(margin);\n\n\t\t\tcustomerTradeMarginLine.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(customerTradeMarginLine);\n\n\t\t\tfinal String tradeMarginLineIdentifier = tableRow.get(I_C_Customer_Trade_Margin_Line.COLUMNNAME_C_Customer_Trade_Margin_Line_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\ttradeMarginLineTable.put(tradeMarginLineIdentifier, customerTradeMarginLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/margin/C_Customer_Trade_Margin_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/margin",
      "filename": "C_Customer_Trade_Margin_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1506,
    "annotation": "\n\t@And(\"metasfresh contains C_MediatedCommissionSettings:\")",
    "glue_code": "\t@And(\"metasfresh contains C_MediatedCommissionSettings:\")\n\tpublic void metasfresh_contains_I_C_MediatedCommissionSettings(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_MediatedCommissionSettings mediatedCommissionSettings = InterfaceWrapperHelper.newInstance(I_C_MediatedCommissionSettings.class);\n\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Name);\n\t\t\tassertThat(name).as(COLUMNNAME_Name + \" is mandatory\").isNotBlank();\n\t\t\tmediatedCommissionSettings.setName(name);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Commission_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(productIdentifier).as(COLUMNNAME_Commission_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).as(\"Missing M_Product record for identifier \" + productIdentifier).isNotNull();\n\t\t\tmediatedCommissionSettings.setCommission_Product_ID(product.getM_Product_ID());\n\n\t\t\tfinal int pointsPrecision = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_PointsPrecision);\n\t\t\tmediatedCommissionSettings.setPointsPrecision(pointsPrecision);\n\n\t\t\tmediatedCommissionSettings.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(mediatedCommissionSettings);\n\n\t\t\tfinal String mediatedCommissionSettingsIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_MediatedCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tmediatedCommissionSettingsTable.put(mediatedCommissionSettingsIdentifier, mediatedCommissionSettings);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/mediated/C_MediatedCommissionSettings_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/mediated",
      "filename": "C_MediatedCommissionSettings_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1507,
    "annotation": "\n\t@And(\"metasfresh contains C_MediatedCommissionSettingsLine:\")",
    "glue_code": "\t@And(\"metasfresh contains C_MediatedCommissionSettingsLine:\")\n\tpublic void metasfresh_contains_I_C_MediatedCommissionSettingsLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal I_C_MediatedCommissionSettingsLine mediatedSettingsLine = InterfaceWrapperHelper.newInstance(I_C_MediatedCommissionSettingsLine.class);\n\n\t\t\tfinal String mediatedSettingsIdentifier = tableRow.get(I_C_MediatedCommissionSettingsLine.COLUMNNAME_C_MediatedCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tassertThat(mediatedSettingsIdentifier).as(I_C_MediatedCommissionSettingsLine.COLUMNNAME_C_MediatedCommissionSettings_ID + \".\" + TABLECOLUMN_IDENTIFIER + \" is mandatory\").isNotBlank();\n\t\t\tfinal I_C_MediatedCommissionSettings mediatedSettings = mediatedCommissionSettingsTable.get(mediatedSettingsIdentifier);\n\t\t\tassertThat(mediatedSettings).as(\"Missing I_C_MediatedCommissionSettings record for identifier \" + mediatedSettingsIdentifier).isNotNull();\n\n\t\t\tmediatedSettingsLine.setC_MediatedCommissionSettings_ID(mediatedSettings.getC_MediatedCommissionSettings_ID());\n\n\t\t\tfinal int productCategoryId = DataTableUtil.extractIntOrMinusOneForColumnName(tableRow, \"OPT.\" + COLUMNNAME_M_Product_Category_ID);\n\t\t\tif (productCategoryId > 0)\n\t\t\t{\n\t\t\t\tmediatedSettingsLine.setM_Product_Category_ID(productCategoryId);\n\t\t\t}\n\n\t\t\tfinal int seqNo = DataTableUtil.extractIntForColumnName(tableRow, COLUMNNAME_SeqNo);\n\t\t\tmediatedSettingsLine.setSeqNo(seqNo);\n\n\t\t\tfinal BigDecimal percentOfBasePoints = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_PercentOfBasePoints);\n\t\t\tmediatedSettingsLine.setPercentOfBasePoints(percentOfBasePoints);\n\n\t\t\tmediatedSettingsLine.setIsActive(true);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(mediatedSettingsLine);\n\n\t\t\tfinal String mediatedLineIdentifier = tableRow.get(I_C_MediatedCommissionSettingsLine.COLUMNNAME_C_MediatedCommissionSettingsLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tmediatedCommissionSettingsLineTable.put(mediatedLineIdentifier, mediatedSettingsLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 95,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/mediated/C_MediatedCommissionSettings_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/commission/mediated",
      "filename": "C_MediatedCommissionSettings_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1532,
    "annotation": "\n\t@And(\"invoke \\\"C_BPartner_InterimContract_Upsert\\\" process:\")",
    "glue_code": "\t@And(\"invoke \\\"C_BPartner_InterimContract_Upsert\\\" process:\")\n\tpublic void processC_BPartner_InterimContract_Upsert(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\n\t\t\tfinal String calendarIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_C_Harvesting_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Calendar calendar = calendarTable.get(calendarIdentifier);\n\n\t\t\tfinal String yearIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_Harvesting_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Year year = yearTable.get(yearIdentifier);\n\n\t\t\tfinal Boolean isInterimContract = DataTableUtil.extractBooleanForColumnNameOr(row, I_C_BPartner_InterimContract.COLUMNNAME_IsInterimContract, true);\n\n\t\t\tfinal BPartnerInterimContractUpsertRequest request = BPartnerInterimContractUpsertRequest.builder()\n\t\t\t\t\t.bPartnerId(BPartnerId.ofRepoId(bPartner.getC_BPartner_ID()))\n\t\t\t\t\t.yearAndCalendarId(YearAndCalendarId.ofRepoId(year.getC_Year_ID(), calendar.getC_Calendar_ID()))\n\t\t\t\t\t.isInterimContract(isInterimContract)\n\t\t\t\t\t.build();\n\t\t\tbPartnerInterimContractService.upsert(request);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/interim/C_BPartner_InterimContract_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/interim",
      "filename": "C_BPartner_InterimContract_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1533,
    "annotation": "\n\t@And(\"metasfresh contains C_BPartner_InterimContract:\")",
    "glue_code": "\t@And(\"metasfresh contains C_BPartner_InterimContract:\")\n\tpublic void metasfresh_contains_C_BPartner_InterimContract_Upsert(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\n\t\t\tfinal String calendarIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_C_Harvesting_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Calendar calendar = calendarTable.get(calendarIdentifier);\n\n\t\t\tfinal String yearIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_Harvesting_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Year year = yearTable.get(yearIdentifier);\n\n\t\t\tfinal Boolean isInterimContract = DataTableUtil.extractBooleanForColumnNameOr(row, I_C_BPartner_InterimContract.COLUMNNAME_IsInterimContract, true);\n\n\t\t\tfinal I_C_BPartner_InterimContract record = queryBL.createQueryBuilder(I_C_BPartner_InterimContract.class)\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_InterimContract.COLUMNNAME_C_BPartner_ID, bPartner.getC_BPartner_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_InterimContract.COLUMNNAME_Harvesting_Year_ID, year.getC_Year_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_InterimContract.COLUMNNAME_C_Harvesting_Calendar_ID, calendar.getC_Calendar_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_InterimContract.COLUMNNAME_IsInterimContract, isInterimContract)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_BPartner_InterimContract.class);\n\n\t\t\tfinal String bpartnerInterimContractIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner_InterimContract.COLUMNNAME_C_BPartner_InterimContract_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tpartnerInterimTable.putOrReplace(bpartnerInterimContractIdentifier, record);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 95,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/interim/C_BPartner_InterimContract_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/contract/interim",
      "filename": "C_BPartner_InterimContract_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1534,
    "annotation": "\n\t@And(\"load C_ConversionType:\")",
    "glue_code": "\t@And(\"load C_ConversionType:\")\n\tpublic void load_C_ConversionType(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_C_ConversionType.COLUMNNAME_Value);\n\n\t\t\tfinal I_C_ConversionType conversionType = queryBL.createQueryBuilder(I_C_ConversionType.class)\n\t\t\t\t\t.addEqualsFilter(I_C_ConversionType.COLUMNNAME_Value, value)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_ConversionType.class);\n\n\t\t\tfinal String conversionTypeIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_ConversionType.COLUMNNAME_C_ConversionType_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tconversionTypeTable.putOrReplace(conversionTypeIdentifier, conversionType);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 44,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/conversion/C_ConversionType_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/conversion",
      "filename": "C_ConversionType_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1526,
    "annotation": "\n\t@And(\"load created C_Conversion_Rate items:\")",
    "glue_code": "\t@And(\"load created C_Conversion_Rate items:\")\n\tpublic void load_created_conversion_rate_items(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.sharedJsonObjectMapper();\n\n\t\tfinal JsonConversionRateResponse response = mapper.readValue(testContext.getApiResponse().getContent(), JsonConversionRateResponse.class);\n\t\tfinal List<JsonConversionRateResponseItem> responseItems = response.getResponseItems();\n\n\t\tassertThat(responseItems.size()).isNotZero();\n\t\tassertThat(responseItems.size()).isEqualTo(dataTable.asMaps().size());\n\n\t\tfor (int idx = 0; idx < responseItems.size(); idx++)\n\t\t{\n\t\t\tfinal JsonMetasfreshId currentItemId = responseItems.get(idx).getConversionRateId();\n\n\t\t\tfinal I_C_Conversion_Rate conversionRate = InterfaceWrapperHelper.load(currentItemId.getValue(), I_C_Conversion_Rate.class);\n\n\t\t\tfinal String conversionRateIdentifier = DataTableUtil.extractStringForColumnName(dataTable.asMaps().get(idx), I_C_Conversion_Rate.COLUMNNAME_C_Conversion_Rate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tconversionRateTable.putOrReplace(conversionRateIdentifier, conversionRate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/conversion/C_Conversion_Rate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/conversion",
      "filename": "C_Conversion_Rate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1527,
    "annotation": "\n\t@And(\"validate created C_Conversion_Rate:\")",
    "glue_code": "\t@And(\"validate created C_Conversion_Rate:\")\n\tpublic void validate_created_conversion_rate(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String conversionRateIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Conversion_Rate.COLUMNNAME_C_Conversion_Rate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Conversion_Rate conversionRate = conversionRateTable.get(conversionRateIdentifier);\n\t\t\tassertThat(conversionRate).isNotNull();\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String currencyFromIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Conversion_Rate.COLUMNNAME_C_Currency_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Currency currencyFrom = currencyTable.get(currencyFromIdentifier);\n\t\t\tsoftly.assertThat(conversionRate.getC_Currency_ID()).as(I_C_Conversion_Rate.COLUMNNAME_C_Currency_ID).isEqualTo(currencyFrom.getC_Currency_ID());\n\n\t\t\tfinal String currencyToIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Conversion_Rate.COLUMNNAME_C_Currency_ID_To + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Currency currencyTo = currencyTable.get(currencyToIdentifier);\n\t\t\tsoftly.assertThat(conversionRate.getC_Currency_ID_To()).as(I_C_Conversion_Rate.COLUMNNAME_C_Currency_ID_To).isEqualTo(currencyTo.getC_Currency_ID());\n\n\t\t\tfinal String conversionTypeIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Conversion_Rate.COLUMNNAME_C_ConversionType_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_ConversionType conversionType = conversionTypeTable.get(conversionTypeIdentifier);\n\t\t\tsoftly.assertThat(conversionRate.getC_ConversionType_ID()).as(I_C_Conversion_Rate.COLUMNNAME_C_ConversionType_ID).isEqualTo(conversionType.getC_ConversionType_ID());\n\n\t\t\tfinal BigDecimal divideRate = DataTableUtil.extractBigDecimalForColumnName(row, I_C_Conversion_Rate.COLUMNNAME_DivideRate);\n\t\t\tsoftly.assertThat(conversionRate.getDivideRate()).as(I_C_Conversion_Rate.COLUMNNAME_DivideRate).isEqualTo(divideRate);\n\n\t\t\tfinal Timestamp validFrom = DataTableUtil.extractDateTimestampForColumnName(row, I_C_Conversion_Rate.COLUMNNAME_ValidFrom);\n\t\t\tsoftly.assertThat(conversionRate.getValidFrom()).as(I_C_Conversion_Rate.COLUMNNAME_ValidFrom).isEqualTo(validFrom);\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/conversion/C_Conversion_Rate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/conversion",
      "filename": "C_Conversion_Rate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1537,
    "annotation": "\n\t@And(\"^after not more than (.*)s, M_CostDetails are found for product (.*) and cost element (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, M_CostDetails are found for product (.*) and cost element (.*)$\")\n\tpublic void validateCostDetails(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String productIdentifierStr,\n\t\t\t@NonNull final String costElementStr,\n\t\t\t@NonNull final DataTable table) throws Throwable\n\t{\n\t\tfinal ProductId productId = productTable.getId(productIdentifierStr);\n\t\tfinal Set<CostElementId> costElementIds = costElementTable.getIdsOfCommaSeparatedString(costElementStr);\n\t\tfinal CostDetailMatchers matchers = toCostDetailMatchers(table);\n\n\t\tassertThat(costElementIds).isNotEmpty();\n\n\t\tSharedTestContext.forEach(costElementIds, \"costElement\", costElementId -> {\n\t\t\tfinal CostDetailQuery costDetailQuery = CostDetailQuery.builder()\n\t\t\t\t\t.productId(productId)\n\t\t\t\t\t.costElementId(costElementId)\n\t\t\t\t\t.orderBy(CostDetailQuery.OrderBy.ID_ASC)\n\t\t\t\t\t.build();\n\t\t\tSharedTestContext.put(\"costDetailQuery\", costDetailQuery);\n\n\t\t\tStepDefUtil.tryAndWaitForData(() -> costDetailRepository.stream(costDetailQuery).collect(ImmutableList.toImmutableList()))\n\t\t\t\t\t.validateUsingFunction(matchers::checkValid)\n\t\t\t\t\t.maxWaitSeconds(timeoutSec)\n\t\t\t\t\t.execute();\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/costing/M_CostDetail_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/costing",
      "filename": "M_CostDetail_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1485,
    "annotation": "\n\t@Given(\"^cost elements for material costing methods (.*) are active\")",
    "glue_code": "\t@Given(\"^cost elements for material costing methods (.*) are active\")\n\tpublic void createOrUpdateCostElementsForCostingMethods(@NonNull final String costingMethodsStr) throws Throwable\n\t{\n\t\tcostElementTable.getIdsOfCommaSeparatedString(costingMethodsStr);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 14,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/costing/M_CostElement_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/costing",
      "filename": "M_CostElement_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1478,
    "annotation": "\n\t@And(\"^validate current costs\")",
    "glue_code": "\t@And(\"^validate current costs\")\n\tpublic void validateCurrentCosts(DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::validateCurrentCost);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/costing/M_Cost_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/costing",
      "filename": "M_Cost_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1501,
    "annotation": "\n\t@And(\"load C_Country by country code:\")",
    "glue_code": "\t@And(\"load C_Country by country code:\")\n\tpublic void load_Country_by_country_code(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String countryCode = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_CountryCode);\n\n\t\t\tfinal I_C_Country country = queryBL.createQueryBuilder(I_C_Country.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_CountryCode, countryCode)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Country.class);\n\n\t\t\tfinal String countryIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Country_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tcountryTable.put(countryIdentifier, country);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/country/C_Country_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/country",
      "filename": "C_Country_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1490,
    "annotation": "\n\t@Given(\"the user adds bpartner\")",
    "glue_code": "\t@Given(\"the user adds bpartner\")\n\tpublic void add_bpartner(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> dataTableEntries = dataTable.asMaps().get(0);\n\n\t\tfinal JsonRequestBPartner bPartner = mapBPartnerRequestItem(dataTableEntries);\n\t\tjsonRequestCompositeBuilder.bpartner(bPartner);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 77,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV1_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV1_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1491,
    "annotation": "\n\t@And(\"the user adds locations\")",
    "glue_code": "\t@And(\"the user adds locations\")\n\tpublic void add_locations(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal ImmutableList.Builder<JsonRequestLocationUpsertItem> requestItems = ImmutableList.builder();\n\n\t\tfinal List<Map<String, String>> locationsTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : locationsTableList)\n\t\t{\n\t\t\trequestItems.add(mapLocationRequestItem(dataTableRow));\n\t\t}\n\n\t\tfinal JsonRequestLocationUpsert locationUpsert = JsonRequestLocationUpsert.builder()\n\t\t\t\t.requestItems(requestItems.build())\n\t\t\t\t.build();\n\t\tjsonRequestCompositeBuilder.locations(locationUpsert);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV1_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV1_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1492,
    "annotation": "\n\t@And(\"the user adds contacts\")",
    "glue_code": "\t@And(\"the user adds contacts\")\n\tpublic void add_contacts(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal ImmutableList.Builder<JsonRequestContactUpsertItem> requestItems = ImmutableList.builder();\n\n\t\tfinal List<Map<String, String>> contactsTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : contactsTableList)\n\t\t{\n\t\t\trequestItems.add(mapContactRequestItem(dataTableRow));\n\t\t}\n\t\tfinal JsonRequestContactUpsert contactUpsert = JsonRequestContactUpsert.builder()\n\t\t\t\t.requestItems(requestItems.build())\n\t\t\t\t.build();\n\t\tjsonRequestCompositeBuilder.contacts(contactUpsert);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 103,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV1_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV1_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1493,
    "annotation": "\n\t@And(\"the request is set in context for bpartnerId {string} and syncAdvise {string}\")",
    "glue_code": "\t@And(\"the request is set in context for bpartnerId {string} and syncAdvise {string}\")\n\tpublic void set_req_in_context(@NonNull final String bpartnerId, @NonNull final String syncAdvise) throws JsonProcessingException\n\t{\n\t\tfinal JsonRequestBPartnerUpsertItem jsonRequestBPartnerUpsertItem = JsonRequestBPartnerUpsertItem.builder()\n\t\t\t\t.bpartnerIdentifier(bpartnerId)\n\t\t\t\t.bpartnerComposite(jsonRequestCompositeBuilder.build())\n\t\t\t\t.build();\n\n\t\tfinal ImmutableList.Builder<JsonRequestBPartnerUpsertItem> jsonRequestBPartnerUpsertItems = ImmutableList.builder();\n\t\tjsonRequestBPartnerUpsertItems.add(jsonRequestBPartnerUpsertItem);\n\n\t\tfinal JsonRequestBPartnerUpsert jsonRequestBPartnerUpsert = JsonRequestBPartnerUpsert.builder()\n\t\t\t\t.requestItems(jsonRequestBPartnerUpsertItems.build())\n\t\t\t\t.syncAdvise(RESTUtil.mapSyncAdviseV1(syncAdvise))\n\t\t\t\t.build();\n\t\ttestContext.setRequestPayload(new ObjectMapper().writeValueAsString(jsonRequestBPartnerUpsert));\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 119,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV1_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV1_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1494,
    "annotation": "\n\t@Then(\"verify if data is persisted correctly for bpartnerId {string}\")",
    "glue_code": "\t@Then(\"verify if data is persisted correctly for bpartnerId {string}\")\n\tpublic void verify_data_is_persisted_correctly(@NonNull final String bpartnerId) throws IOException\n\t{\n\t\t//request\n\t\tfinal String responseJson = testContext.getApiResponse().getContent();\n\t\tfinal com.fasterxml.jackson.databind.ObjectMapper mapper = new com.fasterxml.jackson.databind.ObjectMapper();\n\n\t\tfinal JsonRequestBPartnerUpsert requestItemsList = mapper.readValue(testContext.getRequestPayload(), JsonRequestBPartnerUpsert.class);\n\t\tassertThat(requestItemsList).isNotNull();\n\n\t\tfinal String reqBPartnerIdentifier = requestItemsList.getRequestItems().get(0).getBpartnerIdentifier();\n\t\tassertThat(reqBPartnerIdentifier).isEqualTo(bpartnerId);\n\n\t\t//response\n\t\tfinal JsonResponseBPartnerCompositeUpsert response = mapper.readValue(responseJson, JsonResponseBPartnerCompositeUpsert.class);\n\t\tassertThat(response.getResponseItems()).hasSize(1);\n\n\t\tfinal JsonResponseBPartnerCompositeUpsertItem jsonResponseBPartnerCompositeUpsertItem = response.getResponseItems().get(0);\n\t\tfinal JsonMetasfreshId metasfreshId = jsonResponseBPartnerCompositeUpsertItem.getResponseBPartnerItem().getMetasfreshId();\n\n\t\tfinal BPartnerComposite persistedResult = bPartnerCompositeRepository.getById(BPartnerId.ofRepoId(metasfreshId.getValue()));\n\t\tassertThat(persistedResult.getBpartner().getExternalId().getValue()).isEqualTo(reqBPartnerIdentifier);\n\n\t\t//bpartner\n\t\tfinal BPartner bPartner = persistedResult.getBpartner();\n\t\tfinal JsonRequestBPartner jsonRequestBPartner = jsonRequestCompositeBuilder.build().getBpartner();\n\t\tvalidateBPartner(bPartner, jsonRequestBPartner);\n\n\t\t//location\n\t\tfinal List<BPartnerLocation> locations = persistedResult.getLocations();\n\t\tfinal JsonRequestLocationUpsert locationsUpsert = jsonRequestCompositeBuilder.build().getLocationsNotNull();\n\t\tfinal List<JsonRequestLocationUpsertItem> jsonRequestLocations = locationsUpsert.getRequestItems();\n\n\t\tfor (final JsonRequestLocationUpsertItem jsonRequestLocation : jsonRequestLocations)\n\t\t{\n\t\t\tfinal JsonRequestLocation location = jsonRequestLocation.getLocation();\n\t\t\tlocations.stream()\n\t\t\t\t\t.filter(item -> item.getExternalId().getValue().equals(location.getExternalId().getValue()))\n\t\t\t\t\t.findFirst().ifPresent(bPartnerLocation -> validateBPartnerLocation(bPartnerLocation, location));\n\t\t}\n\n\t\t//contact\n\t\tfinal List<BPartnerContact> contacts = persistedResult.getContacts();\n\t\tfinal JsonRequestContactUpsert contactsUpsert = jsonRequestCompositeBuilder.build().getContactsNotNull();\n\t\tfinal List<JsonRequestContactUpsertItem> jsonRequestContacts = contactsUpsert.getRequestItems();\n\n\t\tfor (final JsonRequestContactUpsertItem jsonRequestContact : jsonRequestContacts)\n\t\t{\n\t\t\tfinal JsonRequestContact contact = jsonRequestContact.getContact();\n\t\t\tcontacts.stream()\n\t\t\t\t\t.filter(item -> item.getExternalId().getValue().equals(contact.getExternalId().getValue()))\n\t\t\t\t\t.findFirst().ifPresent(bPartnerContact -> validateBPartnerContact(bPartnerContact, contact));\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 137,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV1_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV1_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1520,
    "annotation": "\n\t@Then(\"^verify that bPartner was (updated|created) for externalIdentifier$\")",
    "glue_code": "\t@Then(\"^verify that bPartner was (updated|created) for externalIdentifier$\")\n\tpublic void verify_bPartner_was_created_for_externalIdentifier_v2(@NonNull final String action, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> bpartnerTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : bpartnerTableList)\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String externalIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"externalIdentifier\");\n\t\t\tfinal String code = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Code\");\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(dataTableRow, \"Name\");\n\t\t\tfinal String companyName = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.CompanyName\");\n\t\t\tfinal String parentId = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.ParentId\");\n\t\t\tfinal String phone = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Phone\");\n\t\t\tfinal String language = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Language\");\n\t\t\tfinal String url = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Url\");\n\t\t\tfinal String group = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Group\");\n\t\t\tfinal String vatId = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.VatId\");\n\t\t\tfinal String pricingSystemId = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_M_PricingSystem_ID);\n\t\t\tfinal Boolean storageWarehouse = DataTableUtil.extractBooleanForColumnNameOrNull(dataTableRow, \"OPT.\" + COLUMNNAME_IsStorageWarehouse);\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_AD_Org.COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_AD_Org org = Optional.ofNullable(orgIdentifier)\n\t\t\t\t\t.map(orgTable::get)\n\t\t\t\t\t.orElse(null);\n\n\t\t\tfinal String orgCode = Optional.ofNullable(org)\n\t\t\t\t\t.map(I_AD_Org::getValue)\n\t\t\t\t\t.orElse(null);\n\n\t\t\t// persisted value\n\t\t\tfinal Optional<JsonResponseComposite> persistedResult = bpartnerEndpointService.retrieveBPartner(orgCode, ExternalIdentifier.of(externalIdentifier));\n\n\t\t\tfinal JsonResponseBPartner persistedBPartner = persistedResult.get().getBpartner();\n\n\t\t\tsoftly.assertThat(persistedBPartner.getName()).as(\"externalIdentifier=%s: Name\", externalIdentifier).isEqualTo(name);\n\n\t\t\tif (storageWarehouse != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getStorageWarehouse()).as(\"externalIdentifier=%s: StorageWarehouse\", externalIdentifier).isEqualTo(storageWarehouse);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(code))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getCode()).as(\"externalIdentifier=%s: Code\", externalIdentifier).isEqualTo(code);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(companyName))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getCompanyName()).as(\"externalIdentifier=%s: CompanyName\", externalIdentifier).isEqualTo(companyName);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(url))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getUrl()).as(\"externalIdentifier=%s: Url\", externalIdentifier).isEqualTo(url);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(vatId))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getVatId()).as(\"externalIdentifier=%s: VatId\", externalIdentifier).isEqualTo(vatId);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(phone))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getPhone()).as(\"externalIdentifier=%s: Phone\", externalIdentifier).isEqualTo(phone);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(language))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getLanguage()).as(\"externalIdentifier=%s: Language\", externalIdentifier).contains(language);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(group))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getGroup()).as(\"externalIdentifier=%s: Group\", externalIdentifier).isEqualTo(group);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(parentId))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedBPartner.getParentId().getValue()).as(\"externalIdentifier=%s: ParentId\", externalIdentifier).isEqualTo(Integer.parseInt(parentId));\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(pricingSystemId))\n\t\t\t{\n\t\t\t\tassertThat(persistedBPartner.getPricingSystemId()).as(\"externalIdentifier=%s: M_PricingSystem_ID\", externalIdentifier).isNotNull();\n\t\t\t\tassertThat(persistedBPartner.getPricingSystemId().getValue()).as(\"externalIdentifier=%s: M_PricingSystem_ID\", externalIdentifier).isEqualTo(Integer.parseInt(pricingSystemId));\n\t\t\t}\n\n\t\t\tfinal I_C_BPartner bPartnerRecord = bpartnerDAO.getById(persistedBPartner.getMetasfreshId().getValue());\n\n\t\t\tfinal String createdByIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_CreatedBy);\n\t\t\tif (Check.isNotBlank(createdByIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_User userRecord = userTable.get(createdByIdentifier);\n\n\t\t\t\tsoftly.assertThat(userRecord).as(\"externalIdentifier=%s: CreatedBy\", externalIdentifier).isNotNull();\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getCreatedBy()).as(\"externalIdentifier=%s: CreatedBy\", externalIdentifier).isEqualTo(userRecord.getAD_User_ID());\n\t\t\t}\n\n\t\t\tfinal String sectionCodeIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_M_SectionCode_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(sectionCodeIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_SectionCode sectionCode = sectionCodeTable.get(sectionCodeIdentifier);\n\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getM_SectionCode_ID()).as(\"externalIdentifier=%s: M_SectionCode_ID\", externalIdentifier).isEqualTo(sectionCode.getM_SectionCode_ID());\n\t\t\t}\n\n\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_Description);\n\t\t\tif (Check.isNotBlank(description))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getDescription()).as(\"externalIdentifier=%s: Description\", externalIdentifier).isEqualTo(description);\n\t\t\t}\n\n\t\t\tfinal String deliveryRule = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_DeliveryRule);\n\t\t\tif (Check.isNotBlank(deliveryRule))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getDeliveryRule()).as(\"externalIdentifier=%s: DeliveryRule\", externalIdentifier).isEqualTo(deliveryRule);\n\t\t\t}\n\n\t\t\tfinal String deliveryViaRule = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_DeliveryViaRule);\n\t\t\tif (Check.isNotBlank(deliveryViaRule))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getDeliveryViaRule()).as(\"externalIdentifier=%s: DeliveryViaRule\", externalIdentifier).isEqualTo(deliveryViaRule);\n\t\t\t}\n\n\t\t\tfinal String incotermsCustomerIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_C_Incoterms_Customer_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(incotermsCustomerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Incoterms customerIncoterms = incotermsTable.get(incotermsCustomerIdentifier);\n\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getC_Incoterms_Customer_ID()).as(\"externalIdentifier=%s: C_Incoterms_Customer_ID\", externalIdentifier).isEqualTo(customerIncoterms.getC_Incoterms_ID());\n\t\t\t}\n\n\t\t\tfinal String incotermsVendorIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_C_Incoterms_Vendor_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(incotermsVendorIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Incoterms vendorIncoterms = incotermsTable.get(incotermsVendorIdentifier);\n\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getC_Incoterms_Vendor_ID()).as(\"externalIdentifier=%s: C_Incoterms_Vendor_ID\", externalIdentifier).isEqualTo(vendorIncoterms.getC_Incoterms_ID());\n\t\t\t}\n\n\t\t\tfinal String paymentRule = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_PaymentRule);\n\t\t\tif (Check.isNotBlank(paymentRule))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getPaymentRule()).as(\"externalIdentifier=%s: PaymentRule\", externalIdentifier).isEqualTo(paymentRule);\n\t\t\t}\n\n\t\t\tfinal String paymentRulePO = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_PaymentRulePO);\n\t\t\tif (Check.isNotBlank(paymentRulePO))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getPaymentRulePO()).as(\"externalIdentifier=%s: PaymentRulePO\", externalIdentifier).isEqualTo(paymentRulePO);\n\t\t\t}\n\n\t\t\tfinal String customerPaymentTermIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_C_PaymentTerm_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(customerPaymentTermIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_PaymentTerm customerPaymentTerm = paymentTermTable.get(customerPaymentTermIdentifier);\n\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getC_PaymentTerm_ID()).as(\"externalIdentifier=%s: C_PaymentTerm_ID\", externalIdentifier).isEqualTo(customerPaymentTerm.getC_PaymentTerm_ID());\n\t\t\t}\n\n\t\t\tfinal String vendorPaymentTermIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_PO_PaymentTerm_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(vendorPaymentTermIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_PaymentTerm vendorPaymentTerm = paymentTermTable.get(vendorPaymentTermIdentifier);\n\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getPO_PaymentTerm_ID()).as(\"externalIdentifier=%s: PO_PaymentTerm_ID\", externalIdentifier).isEqualTo(vendorPaymentTerm.getC_PaymentTerm_ID());\n\t\t\t}\n\n\t\t\tfinal String sectionGroupPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_Section_Group_Partner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(sectionGroupPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner sectionGroupPartner = bPartnerTable.get(sectionGroupPartnerIdentifier);\n\t\t\t\tsoftly.assertThat(bPartnerRecord.getSection_Group_Partner_ID()).as(\"externalIdentifier=%s: Section_Group_Partner_ID\", externalIdentifier).isEqualTo(sectionGroupPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal Boolean isProspect = DataTableUtil.extractBooleanForColumnNameOrNull(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_IsProspect);\n\t\t\tif (isProspect != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.isProspect()).as(\"externalIdentifier=%s: IsProspect\", externalIdentifier).isEqualTo(isProspect);\n\t\t\t}\n\n\t\t\tfinal Boolean isFreshUrproduzent = DataTableUtil.extractBooleanForColumnNameOrNull(dataTableRow, \"OPT.\" + I_C_BPartner.COLUMNNAME_Fresh_Urproduzent);\n\t\t\tif (isFreshUrproduzent != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(bPartnerRecord.isFresh_Urproduzent()).as(\"externalIdentifier=%s: Fresh_Urproduzent\", externalIdentifier).isEqualTo(isFreshUrproduzent);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\n\t\t\tif (org != null)\n\t\t\t{\n\t\t\t\tassertThat(bPartnerRecord.getAD_Org_ID()).isEqualTo(org.getAD_Org_ID());\n\t\t\t}\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tbPartnerTable.putOrReplace(bpartnerIdentifier, bPartnerRecord);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 128,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV2_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV2_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1521,
    "annotation": "\n\t@And(\"^verify that location was (updated|created) for bpartner$\")",
    "glue_code": "\t@And(\"^verify that location was (updated|created) for bpartner$\")\n\tpublic void verify_location_is_created_for_bpartner_v2(@NonNull final String action, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> locationsTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : locationsTableList)\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"bpartnerIdentifier\");\n\t\t\tfinal String locationExternalIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"locationIdentifier\");\n\t\t\tfinal String address1 = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Address1\");\n\t\t\tfinal String address2 = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Address2\");\n\t\t\tfinal String postal = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Postal\");\n\t\t\tfinal String poBox = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.PoBox\");\n\t\t\tfinal String district = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.District\");\n\t\t\tfinal String region = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Region\");\n\t\t\tfinal String city = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.City\");\n\t\t\tfinal String countryCode = DataTableUtil.extractStringForColumnName(dataTableRow, \"CountryCode\");\n\t\t\tfinal String gln = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Gln\");\n\t\t\tfinal boolean handoverLocation = DataTableUtil.extractBooleanForColumnNameOr(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_IsHandOverLocation, false);\n\t\t\tfinal boolean remitTo = DataTableUtil.extractBooleanForColumnNameOr(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_IsRemitTo, false);\n\t\t\tfinal boolean replicationLookupDefault = DataTableUtil.extractBooleanForColumnNameOr(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_IsReplicationLookupDefault, false);\n\t\t\tfinal String vatId = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.VATaxId\");\n\t\t\tfinal String sapPaymentMethod = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.SAP_PaymentMethod\");\n\t\t\tfinal Boolean isShipToDefault = DataTableUtil.extractBooleanForColumnNameOr(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_IsShipToDefault, null);\n\t\t\tfinal String bPartnerName = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_BPartnerName);\n\t\t\tfinal String name = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_Name);\n\n\t\t\t// persisted value\n\t\t\tfinal Optional<JsonResponseLocation> persistedResult = bpartnerEndpointService.retrieveBPartnerLocation(\n\t\t\t\t\tnull, ExternalIdentifier.of(bpartnerIdentifier), ExternalIdentifier.of(locationExternalIdentifier));\n\t\t\tfinal JsonResponseLocation persistedLocation = persistedResult.get();\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tif (address1 != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.getAddress1()).as(I_C_Location.COLUMNNAME_Address1).isEqualTo(address1);\n\t\t\t}\n\t\t\tif (address2 != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.getAddress2()).as(I_C_Location.COLUMNNAME_Address2).isEqualTo(address2);\n\t\t\t}\n\t\t\tif (postal != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.getPostal()).as(I_C_Location.COLUMNNAME_Postal).isEqualTo(postal);\n\t\t\t}\n\t\t\tsoftly.assertThat(persistedLocation.getPoBox()).as(I_C_Location.COLUMNNAME_POBox).isEqualTo(poBox);\n\t\t\tsoftly.assertThat(persistedLocation.getRegion()).as(I_C_Location.COLUMNNAME_RegionName).isEqualTo(region);\n\t\t\tsoftly.assertThat(persistedLocation.getCountryCode()).as(I_C_Country.COLUMNNAME_CountryCode).isEqualTo(countryCode);\n\t\t\tif (city != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.getCity()).as(I_C_Location.COLUMNNAME_City).isEqualTo(city);\n\t\t\t}\n\t\t\tsoftly.assertThat(persistedLocation.getDistrict()).as(I_C_Postal.COLUMNNAME_District).isEqualTo(DataTableUtil.extractValueOrNull(district));\n\t\t\tsoftly.assertThat(persistedLocation.getGln()).as(I_C_BPartner_Location.COLUMNNAME_GLN).isEqualTo(gln);\n\t\t\tsoftly.assertThat(persistedLocation.isHandoverLocation()).as(I_C_BPartner_Location.COLUMNNAME_IsHandOverLocation).isEqualTo(handoverLocation);\n\t\t\tsoftly.assertThat(persistedLocation.isRemitTo()).as(I_C_BPartner_Location.COLUMNNAME_IsRemitTo).isEqualTo(remitTo);\n\t\t\tsoftly.assertThat(persistedLocation.isReplicationLookupDefault()).as(I_C_BPartner_Location.COLUMNNAME_IsReplicationLookupDefault).isEqualTo(replicationLookupDefault);\n\t\t\tsoftly.assertThat(persistedLocation.getVatId()).as(I_C_BPartner_Location.COLUMNNAME_VATaxID).isEqualTo(vatId);\n\t\t\tsoftly.assertThat(persistedLocation.getSapPaymentMethod()).as(I_C_BPartner_Location.COLUMNNAME_SAP_PaymentMethod).isEqualTo(sapPaymentMethod);\n\n\t\t\tif (isShipToDefault != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.isShipToDefault()).as(I_C_BPartner_Location.COLUMNNAME_IsShipToDefault).isEqualTo(isShipToDefault);\n\t\t\t}\n\n\t\t\tif (bPartnerName != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.getBpartnerName()).as(I_C_BPartner_Location.COLUMNNAME_BPartnerName).isEqualTo(bPartnerName);\n\t\t\t}\n\n\t\t\tif (name != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(persistedLocation.getName()).as(I_C_BPartner_Location.COLUMNNAME_Name).isEqualTo(name);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\n\t\t\tfinal String locationIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner_Location.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (locationIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location locationRecord = InterfaceWrapperHelper.load(persistedLocation.getMetasfreshId().getValue(), I_C_BPartner_Location.class);\n\t\t\t\tlocationTable.putOrReplace(locationIdentifier, locationRecord);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 328,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV2_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV2_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1522,
    "annotation": "\n\t@And(\"^verify that contact was (updated|created|not modified) for bpartner$\")",
    "glue_code": "\t@And(\"^verify that contact was (updated|created|not modified) for bpartner$\")\n\tpublic void verify_contact_is_created_for_bpartner_v2(@NonNull final String action, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> contactsTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : contactsTableList)\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"bpartnerIdentifier\");\n\t\t\tfinal String contactIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"contactIdentifier\");\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(dataTableRow, \"Name\");\n\t\t\tfinal String email = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Email\");\n\t\t\tfinal String fax = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.Fax\");\n\t\t\tfinal Boolean isInvoiceEmailEnabled = DataTableUtil.extractBooleanForColumnNameOr(dataTableRow, \"OPT.InvoiceEmailEnabled\", null);\n\n\t\t\t// persisted value\n\t\t\tfinal Optional<JsonResponseContact> persistedResult = bpartnerEndpointService.retrieveBPartnerContact(\n\t\t\t\t\tnull, ExternalIdentifier.of(bpartnerIdentifier), ExternalIdentifier.of(contactIdentifier));\n\t\t\tfinal JsonResponseContact persistedContact = persistedResult.get();\n\n\t\t\tassertThat(persistedContact.getEmail()).isEqualTo(email);\n\t\t\tassertThat(persistedContact.getName()).isEqualTo(name);\n\t\t\tassertThat(persistedContact.getFax()).isEqualTo(fax);\n\t\t\tassertThat(persistedContact.getInvoiceEmailEnabled()).isEqualTo(isInvoiceEmailEnabled);\n\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_AD_User.COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (userIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_User locationRecord = InterfaceWrapperHelper.load(persistedContact.getMetasfreshId().getValue(), I_AD_User.class);\n\t\t\t\tuserTable.putOrReplace(userIdentifier, locationRecord);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 414,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV2_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV2_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1523,
    "annotation": "\n\t@And(\"build BPartner Endpoint Path and store it in context\")",
    "glue_code": "\t@And(\"build BPartner Endpoint Path and store it in context\")\n\tpublic void storeEndpointPathInContext(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> locationsTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : locationsTableList)\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bpartnerIdentifier);\n\n\t\t\ttestContext.setEndpointPath(BPARTNER_ENDPOINT_PATH + \"/\" + bPartner.getC_BPartner_ID());\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 446,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV2_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV2_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1524,
    "annotation": "\n\t@And(\"^verify that credit limit was created for bpartner: (.*)$\")",
    "glue_code": "\t@And(\"^verify that credit limit was created for bpartner: (.*)$\")\n\tpublic void verify_credit_limit_is_created_for_bpartner_v2(@NonNull final String bPartnerIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bPartnerIdentifier);\n\t\tassertThat(bPartner).isNotNull();\n\n\t\tfinal List<Map<String, String>> contactsTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : contactsTableList)\n\t\t{\n\t\t\tfinal BigDecimal amount = DataTableUtil.extractBigDecimalForColumnName(dataTableRow, I_C_BPartner_CreditLimit.COLUMNNAME_Amount);\n\t\t\tfinal String creditLimitTypeName = DataTableUtil.extractStringForColumnName(dataTableRow, I_C_CreditLimit_Type.Table_Name + \".\" + I_C_CreditLimit_Type.COLUMNNAME_Name);\n\t\t\tfinal Boolean isActive = DataTableUtil.extractBooleanForColumnName(dataTableRow, I_C_BPartner_CreditLimit.COLUMNNAME_IsActive);\n\t\t\tfinal Timestamp dateFrom = DataTableUtil.extractDateTimestampForColumnNameOrNull(dataTableRow, \"OPT.\" + I_C_BPartner_CreditLimit.COLUMNNAME_DateFrom);\n\t\t\tfinal Boolean processed = DataTableUtil.extractBooleanForColumnName(dataTableRow, I_C_BPartner_CreditLimit.COLUMNNAME_Processed);\n\t\t\tfinal String approvedById = DataTableUtil.extractNullableStringForColumnName(dataTableRow, \"OPT.\" + I_C_BPartner_CreditLimit.COLUMNNAME_ApprovedBy_ID);\n\n\t\t\tfinal IQueryBuilder<I_C_BPartner_CreditLimit> queryBuilder = queryBL.createQueryBuilder(I_C_BPartner_CreditLimit.class)\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_CreditLimit.COLUMNNAME_C_BPartner_ID, bPartner.getC_BPartner_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_CreditLimit.COLUMNNAME_Amount, amount);\n\n\t\t\tif (dateFrom != null)\n\t\t\t{\n\t\t\t\tqueryBuilder.addEqualsFilter(I_C_BPartner_CreditLimit.COLUMNNAME_DateFrom, dateFrom);\n\t\t\t}\n\n\t\t\tfinal Optional<I_C_BPartner_CreditLimit> creditLimit = queryBuilder.create()\n\t\t\t\t\t.firstOnlyOptional(I_C_BPartner_CreditLimit.class);\n\n\t\t\tassertThat(creditLimit).isPresent();\n\n\t\t\tfinal I_C_CreditLimit_Type creditLimit_type = bPartnerCreditLimitRepository.getCreditLimitTypeByName(creditLimitTypeName);\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\t\tsoftly.assertThat(creditLimit.get().getC_CreditLimit_Type_ID()).isEqualTo(creditLimit_type.getC_CreditLimit_Type_ID());\n\t\t\tsoftly.assertThat(creditLimit.get().isActive()).isEqualTo(isActive);\n\t\t\tsoftly.assertThat(creditLimit.get().isProcessed()).isEqualTo(processed);\n\n\t\t\tif (Check.isNotBlank(approvedById))\n\t\t\t{\n\t\t\t\tfinal String approvedByAsString = DataTableUtil.nullToken2Null(approvedById);\n\t\t\t\tif (approvedByAsString != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(creditLimit.get().getApprovedBy_ID()).isEqualTo(Integer.parseInt(approvedByAsString));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tassertThat(creditLimit.get().getApprovedBy_ID()).isEqualTo(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 459,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV2_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV2_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1525,
    "annotation": "\n\t@And(\"locate C_BP_BankAccount by ExternalIdentifier:\")",
    "glue_code": "\t@And(\"locate C_BP_BankAccount by ExternalIdentifier:\")\n\tpublic void locateBPBankAccountByExternalIdentifier(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> dataTableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bankAccountExternalIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"BankAccountExternalIdentifier\");\n\t\t\tfinal String bpartnerExternalIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, \"BPartnerExternalIdentifier\");\n\t\t\tfinal String bankAccountTableIdentifier = DataTableUtil.extractStringForColumnName(dataTableRow, I_C_BP_BankAccount.COLUMNNAME_C_BP_BankAccount_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal MetasfreshId metasfreshId = jsonRetriever.resolveBankAccountIdentifier(OrgId.MAIN,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ExternalIdentifier.of(bpartnerExternalIdentifier),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ExternalIdentifier.of(bankAccountExternalIdentifier))\n\t\t\t\t\t.orElseThrow(() -> new RuntimeException(\"No record found for Id = \" + bankAccountExternalIdentifier));\n\n\t\t\tbankAccountTable.put(bankAccountTableIdentifier, InterfaceWrapperHelper.load(metasfreshId.getValue(), I_C_BP_BankAccount.class));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 513,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner/CreateBPartnerV2_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/createbpartner",
      "filename": "CreateBPartnerV2_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1479,
    "annotation": "\n\t@And(\"process bpartner endpoint response\")",
    "glue_code": "\t@And(\"process bpartner endpoint response\")\n\tpublic void retrieve_bpartner_endpoint_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\n\t\tfinal JsonResponseComposite compositeResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseComposite.class);\n\t\tassertThat(compositeResponse).isNotNull();\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_BPartner.COLUMNNAME_C_BPartner_ID + \".Identifier\");\n\t\tfinal String bpartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, I_C_BPartner_Location.COLUMNNAME_C_BPartner_Location_ID + \".Identifier\");\n\t\tfinal String locationIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Location.COLUMNNAME_C_Location_ID + \".Identifier\");\n\n\t\tprocessBPartnerResponse(compositeResponse.getBpartner(), bpartnerIdentifier);\n\n\t\tif (bpartnerLocationIdentifier == null)\n\t\t{\n\t\t\tassertThat(compositeResponse.getLocations()).isEqualTo(null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tassertThat(compositeResponse.getLocations()).hasSize(1);\n\t\t\tprocessLocations(compositeResponse.getLocations().get(0), bpartnerLocationIdentifier, locationIdentifier);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 133,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data/DataExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data",
      "filename": "DataExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1480,
    "annotation": "\n\t@And(\"^after not more than (.*)s, there are added records in Data_Export_Audit$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, there are added records in Data_Export_Audit$\")\n\tpublic void data_export_audit_validation(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadDataExportAudit(tableRow));\n\n\t\t\tfinal String dataExportAuditIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_Data_Export_Audit.COLUMNNAME_Data_Export_Audit_ID + \".Identifier\");\n\t\t\tfinal String parentIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, I_Data_Export_Audit.COLUMNNAME_Data_Export_Audit_Parent_ID + \".Identifier\");\n\n\t\t\tfinal I_Data_Export_Audit dataExportAudit = dataExportAuditTable.get(dataExportAuditIdentifier);\n\n\t\t\tassertThat(dataExportAudit).isNotNull();\n\n\t\t\tif (parentIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_Data_Export_Audit parentDataExportAudit = dataExportAuditTable.get(parentIdentifier);\n\n\t\t\t\tassertThat(parentDataExportAudit).isNotNull();\n\t\t\t\tassertThat(dataExportAudit.getData_Export_Audit_Parent_ID()).isEqualTo(parentDataExportAudit.getData_Export_Audit_ID());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tassertThat(dataExportAudit.getData_Export_Audit_Parent_ID()).isEqualTo(0);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 189,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data/DataExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data",
      "filename": "DataExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1481,
    "annotation": "\n\t@And(\"there are added records in Data_Export_Audit_Log\")",
    "glue_code": "\t@And(\"there are added records in Data_Export_Audit_Log\")\n\tpublic void data_export_audit_log_validation(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tvalidateDataExportAuditLog(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 287,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data/DataExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data",
      "filename": "DataExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1482,
    "annotation": "\n\t@And(\"all the export audit data is reset\")",
    "glue_code": "\t@And(\"all the export audit data is reset\")\n\tpublic void reset_data_export_audit()\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE Data_Export_Audit cascade\", ITrx.TRXNAME_None);\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE Data_Export_Audit_Log cascade\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 337,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data/DataExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data",
      "filename": "DataExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1483,
    "annotation": "\n\t@And(\"add external system config and pinstance headers\")",
    "glue_code": "\t@And(\"add external system config and pinstance headers\")\n\tpublic void add_sysConfig_and_pinstance_headers(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal String configIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_Data_Export_Audit_Log.COLUMNNAME_ExternalSystem_Config_ID + \".Identifier\");\n\t\tfinal String pinstanceIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_Data_Export_Audit_Log.COLUMNNAME_AD_PInstance_ID + \".Identifier\");\n\n\t\tfinal I_AD_PInstance adPInstance = InterfaceWrapperHelper.newInstance(I_AD_PInstance.class);\n\t\tadPInstance.setAD_Org_ID(1);\n\t\tadPInstance.setAD_Process_ID(1);\n\t\tadPInstance.setIsActive(true);\n\t\tadPInstance.setIsProcessing(true);\n\t\tadPInstance.setRecord_ID(1);\n\t\tInterfaceWrapperHelper.saveRecord(adPInstance);\n\t\tpinstanceTable.put(pinstanceIdentifier, adPInstance);\n\n\t\tfinal I_ExternalSystem_Config externalSystemConfig = externalSystemConfigTable.get(configIdentifier);\n\t\tfinal Map<String, String> additionalHeaders = new HashMap<>();\n\t\tadditionalHeaders.put(ExternalSystemConstants.HEADER_EXTERNALSYSTEM_CONFIG_ID, Integer.toString(externalSystemConfig.getExternalSystem_Config_ID()));\n\t\tadditionalHeaders.put(ExternalSystemConstants.HEADER_PINSTANCE_ID, Integer.toString(adPInstance.getAD_PInstance_ID()));\n\n\t\ttestContext.setHttpHeaders(additionalHeaders);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 344,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data/DataExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data",
      "filename": "DataExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1484,
    "annotation": "\n\t@And(\"the following c_bpartner_location is changed\")",
    "glue_code": "\t@And(\"the following c_bpartner_location is changed\")\n\tpublic void change_bpartner_location(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal String bpartnerLocationIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_BPartner_Location.COLUMNNAME_C_BPartner_Location_ID + \".Identifier\");\n\n\t\tfinal I_C_BPartner_Location bPartnerLocation = bpartnerLocationTable.get(bpartnerLocationIdentifier);\n\n\t\tbPartnerLocation.setAddress(\"not-relevant\" + Instant.now().toEpochMilli());\n\n\t\tInterfaceWrapperHelper.save(bPartnerLocation);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 369,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data/DataExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/data",
      "filename": "DataExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1502,
    "annotation": "\n\t@And(\"store DataImport string requestBody in context\")",
    "glue_code": "\t@And(\"store DataImport string requestBody in context\")\n\tpublic void store_string_requestBody_in_context(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String billBPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_Bill_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal String bpartnerValue;\n\t\tif (Check.isNotBlank(billBPartnerIdentifier))\n\t\t{\n\t\t\tfinal I_C_BPartner billBPartner = bpartnerTable.get(billBPartnerIdentifier);\n\t\t\tassertThat(billBPartner).isNotNull();\n\t\t\tbpartnerValue = billBPartner.getValue();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbpartnerValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_Bill_BPartner_Value);\n\t\t}\n\n\t\tfinal String billBPartnerLocationIdentifier = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_Bill_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(billBPartnerLocationIdentifier);\n\t\tassertThat(bPartnerLocation).isNotNull();\n\n\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal String productValue;\n\t\tif (Check.isNotBlank(productIdentifier))\n\t\t{\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).isNotNull();\n\t\t\tproductValue = product.getValue();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tproductValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_M_Product_Value);\n\t\t}\n\n\t\tfinal String qtyOrdered = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_QtyOrdered);\n\t\tfinal String isSOTrx = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_IsSOTrx);\n\n\t\tfinal String billBPartnerContactIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_Bill_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal int contact = billBPartnerContactIdentifier == null ? 0 : contactTable.get(billBPartnerContactIdentifier).getAD_User_ID();\n\n\t\tfinal String qtyDelivered = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_QtyDelivered);\n\t\tfinal String dateOrdered = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_DateOrdered);\n\t\tfinal String presetDateInvoiced = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_PresetDateInvoiced);\n\t\tfinal String uomCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_X12DE355);\n\t\tfinal String docBaseType = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_DocBaseType);\n\t\tfinal String docSubType = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_DocSubType);\n\t\tfinal String poReference = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_POReference);\n\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_Description);\n\t\tfinal String invoiceRule = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_InvoiceRule);\n\t\tfinal String orgCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_OrgCode);\n\t\tfinal String defaultOrgCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_Default_OrgCode);\n\t\tfinal String endNote = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_DescriptionBottom);\n\t\tfinal String adUserInChargeIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_AD_User_InCharge_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal BigDecimal discount = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_Discount);\n\t\tfinal BigDecimal price = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_Price);\n\t\tfinal String activityValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_Invoice_Candidate.COLUMNNAME_C_Activity_Value);\n\n\t\tint userInChargeId = 0;\n\t\tif (Check.isNotBlank(adUserInChargeIdentifier))\n\t\t{\n\t\t\tfinal I_AD_User userInCharge = contactTable.get(adUserInChargeIdentifier);\n\t\t\tassertThat(userInCharge).isNotNull();\n\t\t\tuserInChargeId = userInCharge.getAD_User_ID();\n\t\t}\n\n\t\tfinal String payload = bpartnerValue + \";\"\n\t\t\t\t+ bPartnerLocation.getC_BPartner_Location_ID() + \";\"\n\t\t\t\t+ (contact == 0 ? \"\" : contact) + \";\"\n\t\t\t\t+ productValue + \";\"\n\t\t\t\t+ dateOrdered + \";\"\n\t\t\t\t+ qtyOrdered + \";\"\n\t\t\t\t+ qtyDelivered + \";\"\n\t\t\t\t+ uomCode + \";\"\n\t\t\t\t+ isSOTrx + \";\"\n\t\t\t\t+ docBaseType + \";\"\n\t\t\t\t+ docSubType + \";\"\n\t\t\t\t+ presetDateInvoiced + \";\"\n\t\t\t\t+ description + \";\"\n\t\t\t\t+ poReference + \";\"\n\t\t\t\t+ invoiceRule + \";\"\n\t\t\t\t+ orgCode + \";\"\n\t\t\t\t+ defaultOrgCode + \";\"\n\t\t\t\t+ endNote + \";\"\n\t\t\t\t+ (userInChargeId >= 0 ? userInChargeId : \"\") + \";\"\n\t\t\t\t+ discount + \";\"\n\t\t\t\t+ price + \";\"\n\t\t\t\t+ activityValue + \";\";\n\n\t\ttestContext.setRequestPayload(payload.replaceAll(\"null\", \"\"));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 105,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1503,
    "annotation": "\n\t@And(\"store String as requestBody in context\")",
    "glue_code": "\t@And(\"store String as requestBody in context\")\n\tpublic void store_string_as_requestBody_in_context(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = CollectionUtils.singleElement(dataTable.asMaps());\n\n\t\tfinal String content = DataTableUtil.extractStringOrNullForColumnName(row, \"String\");\n\n\t\ttestContext.setRequestPayload(content);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 197,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1504,
    "annotation": "\n\t@And(\"store file content as requestBody in context\")",
    "glue_code": "\t@And(\"store file content as requestBody in context\")\n\tpublic void store_file_content_requestBody_in_context(@NonNull final DataTable dataTable) throws IOException\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String fileName = DataTableUtil.extractStringForColumnName(row, \"FileName\");\n\n\t\tfinal InputStream inputStream = C_DataImport_StepDef.class.getClassLoader().getResourceAsStream(fileName);\n\n\t\tfinal String content = new BufferedReader(\n\t\t\t\tnew InputStreamReader(inputStream, StandardCharsets.UTF_8))\n\t\t\t\t.lines()\n\t\t\t\t.collect(Collectors.joining(\"\\n\"));\n\n\t\ttestContext.setRequestPayload(content);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 207,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1505,
    "annotation": "\n\t@And(\"metasfresh contains C_DataImport:\")",
    "glue_code": "\t@And(\"metasfresh contains C_DataImport:\")\n\tpublic void metasfreshContainsDataImport(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String internalName = DataTableUtil.extractStringForColumnName(row, I_C_DataImport.COLUMNNAME_InternalName);\n\n\t\t\tfinal I_C_DataImport record = CoalesceUtil\n\t\t\t\t\t.coalesceSuppliersNotNull(() -> queryBL.createQueryBuilder(I_C_DataImport.class)\n\t\t\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t\t\t.addStringLikeFilter(I_C_DataImport.COLUMNNAME_InternalName, internalName, false)\n\t\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t\t.firstOnlyOrNull(I_C_DataImport.class),\n\t\t\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_C_DataImport.class));\n\n\t\t\tfinal String impFormatIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_ImpFormat.COLUMNNAME_AD_ImpFormat_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_ImpFormat importFormat = impFormatTable.getOptional(impFormatIdentifier)\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"Missing I_AD_ImpFormat for identifier!\")\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"impFormatIdentifier\", impFormatIdentifier));\n\n\t\t\trecord.setAD_ImpFormat_ID(importFormat.getAD_ImpFormat_ID());\n\t\t\trecord.setInternalName(internalName);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(record);\n\n\t\t\tfinal String dataRecordIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_DataImport.COLUMNNAME_C_DataImport_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdataImportTable.putOrReplace(dataRecordIdentifier, record);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 224,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1508,
    "annotation": "\n\t@And(\"store business partner DataImport string requestBody in context\")",
    "glue_code": "\t@And(\"store business partner DataImport string requestBody in context\")\n\tpublic void store_business_partner_string_requestBody_in_context(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String bpValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_BPValue);\n\t\t\tfinal String companyName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Companyname);\n\t\t\tfinal String taxId = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_TaxID);\n\t\t\tfinal String firstName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Firstname);\n\t\t\tfinal String lastName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Lastname);\n\t\t\tfinal Boolean isShipToContactDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsShipToContact_Default, false);\n\t\t\tfinal Boolean isBillToContactDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsBillToContact_Default, false);\n\t\t\tfinal String address1 = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Address1);\n\t\t\tfinal String address2 = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Address2);\n\t\t\tfinal String address3 = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Address3);\n\t\t\tfinal String address4 = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Address4);\n\t\t\tfinal String city = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_City);\n\t\t\tfinal String region = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_RegionName);\n\t\t\tfinal String countryCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_CountryCode);\n\t\t\tfinal String groupValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_GroupValue);\n\t\t\tfinal Boolean isBillToDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsBillToDefault, false);\n\t\t\tfinal Boolean isShipToDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsShipToDefault, false);\n\t\t\tfinal String adLanguage = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_GroupValue);\n\t\t\tfinal String orgValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_OrgValue);\n\t\t\tfinal String postal = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Postal);\n\t\t\tfinal String bankDetails = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_BankDetails);\n\t\t\tfinal String iban = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IBAN);\n\t\t\tfinal String qrIban = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_QR_IBAN);\n\t\t\tfinal String isoCurrencyCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_ISO_Code);\n\t\t\tfinal String isManual = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsManuallyCreated);\n\n\t\t\tfinal String payload = bpValue + \"\t\"\n\t\t\t\t\t+ companyName + \"\t\"\n\t\t\t\t\t+ taxId + \"\t\"\n\t\t\t\t\t+ firstName + \"\t\"\n\t\t\t\t\t+ lastName + \"\t\"\n\t\t\t\t\t+ isShipToContactDefault + \"\t\"\n\t\t\t\t\t+ isBillToContactDefault + \"\t\"\n\t\t\t\t\t+ address1 + \"\t\"\n\t\t\t\t\t+ address2 + \"\t\"\n\t\t\t\t\t+ address3 + \"\t\"\n\t\t\t\t\t+ address4 + \"\t\"\n\t\t\t\t\t+ city + \"\t\"\n\t\t\t\t\t+ region + \"\t\"\n\t\t\t\t\t+ countryCode + \"\t\"\n\t\t\t\t\t+ groupValue + \"\t\"\n\t\t\t\t\t+ isBillToDefault + \"\t\"\n\t\t\t\t\t+ isShipToDefault + \"\t\"\n\t\t\t\t\t+ adLanguage + \"\t\"\n\t\t\t\t\t+ orgValue + \"\t\"\n\t\t\t\t\t+ postal + \"\t\"\n\t\t\t\t\t+ bankDetails + \"\t\"\n\t\t\t\t\t+ iban + \"\t\"\n\t\t\t\t\t+ qrIban + \"\t\"\n\t\t\t\t\t+ isoCurrencyCode + \"\t\"\n\t\t\t\t\t+ isManual + \"\t\";\n\n\t\t\ttestContext.setRequestPayload(payload.replaceAll(\"null\", \"\"));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 255,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1509,
    "annotation": "\n\t@And(\"store modular contract DataImport String requestBody in context\")",
    "glue_code": "\t@And(\"store modular contract DataImport String requestBody in context\")\n\tpublic void store_modular_contract_string_requestBody_in_context(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal StringBuilder payloadBuilder = new StringBuilder();\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String documentType = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_ModCntr_Log_DocumentType);\n\t\t\tfinal String soTrx = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_IsSOTrx);\n\t\t\tfinal String contractDocumentIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Flatrate_Term.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String productValue = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_ProductValue);\n\t\t\tfinal String modCntr_InvoicingGroupName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_ModCntr_Log.COLUMNNAME_ModCntr_InvoicingGroupName);\n\t\t\tfinal String quantity = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_ModCntr_Log.COLUMNNAME_Qty);\n\t\t\tfinal String uomSymbol = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_ModCntr_Log.COLUMNNAME_UOMSymbol);\n\t\t\tfinal String priceActual = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_ModCntr_Log.COLUMNNAME_PriceActual);\n\t\t\tfinal String priceUom = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_ModCntr_Log.COLUMNNAME_PriceUOM);\n\t\t\tfinal String amount = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_ModCntr_Log.COLUMNNAME_Amount);\n\t\t\tfinal String isoCurrencyCode = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_ISO_Code);\n\t\t\tfinal String year = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_FiscalYear);\n\t\t\tfinal String calendar = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_CalendarName);\n\t\t\tfinal String bpartnerValue = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_BPartnerValue);\n\t\t\tfinal String billBpartnerValue = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_Bill_BPartner_Value);\n\t\t\tfinal String collectionPointValue = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_CollectionPointValue);\n\t\t\tfinal LocalDate dateTrx = DataTableUtil.extractLocalDateForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_DateTrx);\n\t\t\tfinal String warehouseName = DataTableUtil.extractStringOrNullForColumnName(row, I_I_ModCntr_Log.COLUMNNAME_WarehouseName);\n\n\t\t\tfinal I_C_Flatrate_Term contract = contractsTable.get(contractDocumentIdentifier);\n\n\t\t\tpayloadBuilder.append(\"\\n\"); // do this for the first row because the import format ignores the first row/file header\n\t\t\t//keep in sync with Import Format defined by /window/189/540092\n\t\t\tpayloadBuilder.append(Joiner.on(\";\")\n\t\t\t\t\t.useForNull(\"\")\n\t\t\t\t\t.join(null,//ModCntr_Log_ID\n\t\t\t\t\t\t\tnull,//TableID\n\t\t\t\t\t\t\tnull,//RecordId\n\t\t\t\t\t\t\tdocumentType,\n\t\t\t\t\t\t\tsoTrx,\n\t\t\t\t\t\t\tcontract.getDocumentNo(),\n\t\t\t\t\t\t\tproductValue,\n\t\t\t\t\t\t\tmodCntr_InvoicingGroupName,\n\t\t\t\t\t\t\tquantity,\n\t\t\t\t\t\t\tuomSymbol,\n\t\t\t\t\t\t\tpriceActual,\n\t\t\t\t\t\t\tpriceUom,\n\t\t\t\t\t\t\tamount,\n\t\t\t\t\t\t\tisoCurrencyCode,\n\t\t\t\t\t\t\tyear,\n\t\t\t\t\t\t\tcalendar,\n\t\t\t\t\t\t\tnull,//ContractModuleName\n\t\t\t\t\t\t\tbpartnerValue,\n\t\t\t\t\t\t\tbillBpartnerValue,\n\t\t\t\t\t\t\tcollectionPointValue,\n\t\t\t\t\t\t\tdateTrx,\n\t\t\t\t\t\t\twarehouseName));\n\t\t}\n\t\ttestContext.setRequestPayload(new String(payloadBuilder.toString().getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 316,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1510,
    "annotation": "\n\t@And(\"load C_DataImport:\")",
    "glue_code": "\t@And(\"load C_DataImport:\")\n\tpublic void load_C_DataImport(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tloadDataImport(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 373,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1511,
    "annotation": "\n\t@And(\"^metasfresh initially has no (I_.*) import data$\")",
    "glue_code": "\t@And(\"^metasfresh initially has no (I_.*) import data$\")\n\tpublic void delete_I_Invoice_Candidate_data(@NonNull final String tableName)\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"DELETE FROM \" + tableName + \" cascade\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 397,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport/C_DataImport_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dataImport",
      "filename": "C_DataImport_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1495,
    "annotation": "\n\t@And(\"^after not more than (.*)s, following DD_Order_Candidates are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, following DD_Order_Candidates are found$\")\n\tpublic void validateDDOrderLineCandidates(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> {\n\t\t\tfinal DDOrderCandidate candidate = StepDefUtil.<DDOrderCandidate>tryAndWaitForItem()\n\t\t\t\t\t.worker(() -> validateDDOrderLineCandidate(row))\n\t\t\t\t\t.maxWaitSeconds(timeoutSec)\n\t\t\t\t\t.execute();\n\t\t\trow.getAsOptionalIdentifier().ifPresent(identifier -> ddOrderCandidateTable.putOrReplace(identifier, candidate));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ddordercandidate/DD_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ddordercandidate",
      "filename": "DD_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1496,
    "annotation": "\n\t@And(\"^no DD_Order_Candidates found for product (.*)$\")",
    "glue_code": "\t@And(\"^no DD_Order_Candidates found for product (.*)$\")\n\tpublic void assertNoCandidatesFoundByProduct(@NonNull final String productIdentifierStr)\n\t{\n\t\tfinal ProductId productId = StepDefDataIdentifier.ofString(productIdentifierStr).lookupIdIn(productTable);\n\n\t\tfinal List<DDOrderCandidate> candidates = ddOrderCandidateService.list(DDOrderCandidateQuery.builder()\n\t\t\t\t.productId(productId)\n\t\t\t\t.build());\n\n\t\tassertThat(candidates).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 269,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ddordercandidate/DD_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ddordercandidate",
      "filename": "DD_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1497,
    "annotation": "\n\t@And(\"the following DD_Order_Candidates are enqueued for generating DD_Orders\")",
    "glue_code": "\t@And(\"the following DD_Order_Candidates are enqueued for generating DD_Orders\")\n\tpublic void enqueueDD_Order_Candidates(@NonNull final DataTable dataTable)\n\t{\n\t\tddOrderCandidateService.enqueueToProcess(getDDOrderCandidateIds(dataTable));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 281,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ddordercandidate/DD_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ddordercandidate",
      "filename": "DD_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1512,
    "annotation": "\n\t@And(\"^after not more than (.*)s, load created M_Delivery_Planning:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, load created M_Delivery_Planning:$\")\n\tpublic void load_created_M_Delivery_Planning(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\tassertThat(orderLine).isNotNull();\n\n\t\t\tfinal String deliveryPlanningIdentifiers = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER + \"s\");\n\t\t\tfinal List<String> identifiers = StepDefUtil.splitIdentifiers(deliveryPlanningIdentifiers);\n\t\t\tfinal int numberOfRecordsToLoad = identifiers.size();\n\n\t\t\tfinal IQueryBuilder<I_M_Delivery_Planning> queryBuilder = queryBL.createQueryBuilder(I_M_Delivery_Planning.class)\n\t\t\t\t\t.addEqualsFilter(I_M_Delivery_Planning.COLUMNNAME_C_OrderLine_ID, orderLine.getC_OrderLine_ID());\n\n\t\t\tfinal Supplier<Boolean> isDeliveryPlanningFound = () ->\n\t\t\t{\n\t\t\t\tfinal int deliveryPlanningRecords = queryBuilder.create().count();\n\n\t\t\t\tif (deliveryPlanningRecords > numberOfRecordsToLoad)\n\t\t\t\t{\n\t\t\t\t\tthrow new AdempiereException(\"Found more M_Delivery_Planning records than expected for C_OrderLine_ID=\" + orderLine.getC_OrderLine_ID())\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"ExpectedCount\", numberOfRecordsToLoad)\n\t\t\t\t\t\t\t.setParameter(\"ActualCount\", deliveryPlanningRecords);\n\t\t\t\t}\n\n\t\t\t\treturn deliveryPlanningRecords == numberOfRecordsToLoad;\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, isDeliveryPlanningFound);\n\n\t\t\tfinal List<I_M_Delivery_Planning> deliveryPlannings = queryBL.createQueryBuilder(I_M_Delivery_Planning.class)\n\t\t\t\t\t.addEqualsFilter(I_M_Delivery_Planning.COLUMNNAME_C_OrderLine_ID, orderLine.getC_OrderLine_ID())\n\t\t\t\t\t.orderBy(I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID)\n\t\t\t\t\t.create()\n\t\t\t\t\t.list();\n\n\t\t\tfor (int rowIndex = 0; rowIndex < numberOfRecordsToLoad; rowIndex++)\n\t\t\t{\n\t\t\t\tfinal String deliveryPlanningIdentifier = identifiers.get(rowIndex);\n\t\t\t\tdeliveryPlanningTable.putOrReplace(deliveryPlanningIdentifier, deliveryPlannings.get(rowIndex));\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 107,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_Delivery_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_Delivery_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1513,
    "annotation": "\n\t@And(\"^generate (.*) additional M_Delivery_Planning records for: (.*)$\")",
    "glue_code": "\t@And(\"^generate (.*) additional M_Delivery_Planning records for: (.*)$\")\n\tpublic void generate_additional_M_Delivery_Planning(final int noAdditionalRecords, @NonNull final String deliveryPlanningIdentifier)\n\t{\n\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\tassertThat(deliveryPlanning).isNotNull();\n\n\t\tfinal DeliveryPlanningId deliveryPlanningId = DeliveryPlanningId.ofRepoId(deliveryPlanning.getM_Delivery_Planning_ID());\n\t\tdeliveryPlanningService.createAdditionalDeliveryPlannings(deliveryPlanningId, noAdditionalRecords);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 154,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_Delivery_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_Delivery_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1514,
    "annotation": "\n\t@When(\"delete M_Delivery_Planning:\")",
    "glue_code": "\t@When(\"delete M_Delivery_Planning:\")\n\tpublic void delete_M_Delivery_Planning(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryPlanningIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\t\tassertThat(deliveryPlanning).isNotNull();\n\n\t\t\tfinal String errorCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.ErrorCode\");\n\t\t\ttry\n\t\t\t{\n\t\t\t\tdeliveryPlanningService.validateDeletion(deliveryPlanning);\n\t\t\t\tif (Check.isNotBlank(errorCode))\n\t\t\t\t{\n\t\t\t\t\tthrow new RuntimeException(\"Was expecting operation to fail!\");\n\t\t\t\t}\n\t\t\t\tInterfaceWrapperHelper.delete(deliveryPlanning);\n\n\t\t\t}\n\t\t\tcatch (final AdempiereException e)\n\t\t\t{\n\t\t\t\tassertThat(e.getErrorCode()).as(\"ErrorCode of %s\", e).isEqualTo(errorCode);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 164,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_Delivery_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_Delivery_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1515,
    "annotation": "\n\t@And(\"validate M_Delivery_Planning:\")",
    "glue_code": "\t@And(\"validate M_Delivery_Planning:\")\n\tpublic void validate_M_Delivery_Planning(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryPlanningIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\t\tassertThat(deliveryPlanning).isNotNull();\n\t\t\tInterfaceWrapperHelper.refresh(deliveryPlanning);\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal BigDecimal qtyOrdered = DataTableUtil.extractBigDecimalForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_QtyOrdered);\n\t\t\tsoftly.assertThat(deliveryPlanning.getQtyOrdered()).as(I_M_Delivery_Planning.COLUMNNAME_QtyOrdered).isEqualTo(qtyOrdered);\n\n\t\t\tfinal BigDecimal qtyTotalOpen = DataTableUtil.extractBigDecimalForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_QtyTotalOpen);\n\t\t\tsoftly.assertThat(deliveryPlanning.getQtyTotalOpen()).as(I_M_Delivery_Planning.COLUMNNAME_QtyTotalOpen).isEqualTo(qtyTotalOpen);\n\n\t\t\tfinal String type = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_Type);\n\t\t\tsoftly.assertThat(deliveryPlanning.getM_Delivery_Planning_Type()).as(I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_Type).isEqualTo(type);\n\n\t\t\tfinal Boolean isB2B = DataTableUtil.extractBooleanForColumnNameOr(row, I_M_Delivery_Planning.COLUMNNAME_IsB2B, null);\n\t\t\tif (isB2B != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.isB2B()).as(I_M_Delivery_Planning.COLUMNNAME_IsB2B).isEqualTo(isB2B);\n\t\t\t}\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\tsoftly.assertThat(product).isNotNull();\n\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getM_Product_ID()).as(I_M_Delivery_Planning.COLUMNNAME_M_Product_ID).isEqualTo(product.getM_Product_ID());\n\t\t\t}\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\t\t\t\tsoftly.assertThat(bPartner).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getC_BPartner_ID()).as(I_M_Delivery_Planning.COLUMNNAME_C_BPartner_ID).isEqualTo(bPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\tsoftly.assertThat(order).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getC_Order_ID()).as(I_M_Delivery_Planning.COLUMNNAME_C_Order_ID).isEqualTo(order.getC_Order_ID());\n\t\t\t}\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tsoftly.assertThat(orderLine).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getC_OrderLine_ID()).as(I_M_Delivery_Planning.COLUMNNAME_C_OrderLine_ID).isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal String shipperIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_M_Shipper_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(shipperIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\t\tsoftly.assertThat(shipper).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getM_Shipper_ID()).as(I_M_Delivery_Planning.COLUMNNAME_M_Shipper_ID).isEqualTo(shipper.getM_Shipper_ID());\n\t\t\t}\n\n\t\t\tfinal String bpartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpartnerLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(bpartnerLocationIdentifier);\n\t\t\t\tsoftly.assertThat(bPartnerLocation).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getC_BPartner_Location_ID()).as(I_M_Delivery_Planning.COLUMNNAME_C_BPartner_Location_ID).isEqualTo(bPartnerLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(warehouseIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Warehouse warehouse = warehouseTable.get(warehouseIdentifier);\n\t\t\t\tsoftly.assertThat(warehouse).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getM_Warehouse_ID()).as(I_M_Delivery_Planning.COLUMNNAME_M_Warehouse_ID).isEqualTo(warehouse.getM_Warehouse_ID());\n\t\t\t}\n\n\t\t\tfinal Timestamp plannedDeliveryDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_PlannedDeliveryDate);\n\t\t\tif (plannedDeliveryDate != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getPlannedDeliveryDate()).as(I_M_Delivery_Planning.COLUMNNAME_PlannedDeliveryDate).isEqualTo(plannedDeliveryDate);\n\t\t\t}\n\n\t\t\tfinal Timestamp plannedLoadingDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_PlannedLoadingDate);\n\t\t\tif (plannedLoadingDate != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getPlannedLoadingDate()).as(I_M_Delivery_Planning.COLUMNNAME_PlannedLoadingDate).isEqualTo(plannedLoadingDate);\n\t\t\t}\n\n\t\t\tfinal BigDecimal plannedLoadedQty = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_PlannedLoadedQuantity);\n\t\t\tif (plannedLoadedQty != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getPlannedLoadedQuantity()).as(I_M_Delivery_Planning.COLUMNNAME_PlannedLoadedQuantity).isEqualTo(plannedLoadedQty);\n\t\t\t}\n\n\t\t\tfinal Boolean isClosed = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_IsClosed);\n\t\t\tif (isClosed != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.isClosed()).as(I_M_Delivery_Planning.COLUMNNAME_IsClosed).isEqualTo(isClosed);\n\t\t\t}\n\n\t\t\tfinal Boolean isProcessed = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_Processed);\n\t\t\tif (isProcessed != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.isProcessed()).as(I_M_Delivery_Planning.COLUMNNAME_Processed).isEqualTo(isProcessed);\n\t\t\t}\n\n\t\t\tfinal String orderStatus = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_OrderStatus);\n\t\t\tif (Check.isNotBlank(orderStatus))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryPlanning.getOrderStatus()).as(I_M_Delivery_Planning.COLUMNNAME_OrderStatus).isEqualTo(orderStatus);\n\t\t\t}\n\n\t\t\tfinal String deliveryInstructionIdentifier = DataTableUtil.extractNullableStringForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(deliveryInstructionIdentifier))\n\t\t\t{\n\t\t\t\tfinal String deliveryInstructionIdentifierValue = DataTableUtil.nullToken2Null(deliveryInstructionIdentifier);\n\t\t\t\tif (deliveryInstructionIdentifierValue != null)\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_ShipperTransportation deliveryInstruction = deliveryInstructionTable.get(deliveryInstructionIdentifier);\n\t\t\t\t\tsoftly.assertThat(deliveryInstruction).isNotNull();\n\t\t\t\t\tsoftly.assertThat(deliveryPlanning.getM_ShipperTransportation_ID()).as(I_M_Delivery_Planning.COLUMNNAME_M_ShipperTransportation_ID).isEqualTo(deliveryInstruction.getM_ShipperTransportation_ID());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(deliveryPlanning.getM_ShipperTransportation_ID()).as(I_M_Delivery_Planning.COLUMNNAME_M_ShipperTransportation_ID).isEqualTo(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 191,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_Delivery_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_Delivery_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1516,
    "annotation": "\n\t@And(\"^M_Delivery_Planning identified by (.*) is (closed|opened|canceled)$\")",
    "glue_code": "\t@And(\"^M_Delivery_Planning identified by (.*) is (closed|opened|canceled)$\")\n\tpublic void delivery_Planning_action(@NonNull final String deliveryPlanningIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\tassertThat(deliveryPlanning).isNotNull();\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase closed:\n\t\t\t\tdeliveryPlanningService.closeSelectedDeliveryPlannings(getQueryFilterFor(deliveryPlanningIdentifier));\n\t\t\t\tbreak;\n\t\t\tcase opened:\n\t\t\t\tdeliveryPlanningService.reOpenSelectedDeliveryPlannings(getQueryFilterFor(deliveryPlanningIdentifier));\n\t\t\t\tbreak;\n\t\t\tcase canceled:\n\t\t\t\tdeliveryPlanningService.cancelDelivery(getQueryFilterFor(deliveryPlanningIdentifier));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unsupported action for M_Delivery_Planning!\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID, deliveryPlanning.getM_Delivery_Planning_ID());\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 331,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_Delivery_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_Delivery_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1517,
    "annotation": "\n\t@And(\"update M_Delivery_Planning:\")",
    "glue_code": "\t@And(\"update M_Delivery_Planning:\")\n\tpublic void update_M_Delivery_Planning(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryPlanningIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\t\tassertThat(deliveryPlanning).isNotNull();\n\n\t\t\tfinal String shipperIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Delivery_Planning.COLUMNNAME_M_Shipper_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(shipperIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\t\tassertThat(shipper).isNotNull();\n\n\t\t\t\tdeliveryPlanning.setM_Shipper_ID(shipper.getM_Shipper_ID());\n\t\t\t}\n\n\t\t\tsaveRecord(deliveryPlanning);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 355,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_Delivery_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_Delivery_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1486,
    "annotation": "\n\t@And(\"generate M_ShipperTransportation for M_Delivery_Planning:\")",
    "glue_code": "\t@And(\"generate M_ShipperTransportation for M_Delivery_Planning:\")\n\tpublic void generate_Delivery_Instructions(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryPlanningIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\t\tassertThat(deliveryPlanning).isNotNull();\n\n\t\t\tdeliveryPlanningService.generateDeliveryInstructions(getQueryFilterFor(deliveryPlanning));\n\n\t\t\tInterfaceWrapperHelper.refresh(deliveryPlanning);\n\n\t\t\tassertThat(deliveryPlanning.getM_ShipperTransportation_ID()).isNotZero();\n\t\t\tfinal I_M_ShipperTransportation deliveryInstruction = load(deliveryPlanning.getM_ShipperTransportation_ID(), I_M_ShipperTransportation.class);\n\n\t\t\tfinal String deliveryInstructionIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdeliveryInstructionTable.putOrReplace(deliveryInstructionIdentifier, deliveryInstruction);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_ShipperTransportation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_ShipperTransportation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1487,
    "annotation": "\n\t@And(\"regenerate M_ShipperTransportation for M_Delivery_Planning:\")",
    "glue_code": "\t@And(\"regenerate M_ShipperTransportation for M_Delivery_Planning:\")\n\tpublic void regenerate_Delivery_Instructions(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryPlanningIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_Delivery_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Delivery_Planning deliveryPlanning = deliveryPlanningTable.get(deliveryPlanningIdentifier);\n\t\t\tassertThat(deliveryPlanning).isNotNull();\n\n\t\t\tdeliveryPlanningService.regenerateDeliveryInstructions(getQueryFilterFor(deliveryPlanning));\n\n\t\t\tInterfaceWrapperHelper.refresh(deliveryPlanning);\n\n\t\t\tassertThat(deliveryPlanning.getM_ShipperTransportation_ID()).isNotZero();\n\t\t\tfinal I_M_ShipperTransportation deliveryInstruction = load(deliveryPlanning.getM_ShipperTransportation_ID(), I_M_ShipperTransportation.class);\n\n\t\t\tfinal String deliveryInstructionIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdeliveryInstructionTable.putOrReplace(deliveryInstructionIdentifier, deliveryInstruction);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_ShipperTransportation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_ShipperTransportation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1488,
    "annotation": "\n\t@And(\"validate M_ShipperTransportation:\")",
    "glue_code": "\t@And(\"validate M_ShipperTransportation:\")\n\tpublic void validateM_ShipperTransportation(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryInstructionIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Delivery_Planning.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipperTransportation deliveryInstruction = deliveryInstructionTable.get(deliveryInstructionIdentifier);\n\t\t\tassertThat(deliveryInstruction).isNotNull();\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String shipperIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipperTransportation.COLUMNNAME_M_Shipper_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\tsoftly.assertThat(shipper).isNotNull();\n\t\t\tsoftly.assertThat(deliveryInstruction.getM_Shipper_ID()).as(I_M_ShipperTransportation.COLUMNNAME_M_Shipper_ID).isEqualTo(shipper.getM_Shipper_ID());\n\n\t\t\tfinal String shipperBPIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipperTransportation.COLUMNNAME_Shipper_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner shipperBP = bPartnerTable.get(shipperBPIdentifier);\n\t\t\tsoftly.assertThat(shipperBP).isNotNull();\n\t\t\tsoftly.assertThat(deliveryInstruction.getShipper_BPartner_ID()).as(I_M_ShipperTransportation.COLUMNNAME_Shipper_BPartner_ID).isEqualTo(shipperBP.getC_BPartner_ID());\n\n\t\t\tfinal String shipperLocationIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipperTransportation.COLUMNNAME_Shipper_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner_Location shipperLocation = bPartnerLocationTable.get(shipperLocationIdentifier);\n\t\t\tsoftly.assertThat(shipperLocation).isNotNull();\n\t\t\tsoftly.assertThat(deliveryInstruction.getShipper_Location_ID()).as(I_M_ShipperTransportation.COLUMNNAME_Shipper_Location_ID).isEqualTo(shipperLocation.getC_BPartner_Location_ID());\n\n\t\t\tfinal String deliveryLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShipperTransportation.COLUMNNAME_C_BPartner_Location_Delivery_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(deliveryLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location deliveryLocation = bPartnerLocationTable.get(deliveryLocationIdentifier);\n\t\t\t\tsoftly.assertThat(deliveryLocation).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryInstruction.getC_BPartner_Location_Delivery_ID()).as(I_M_ShipperTransportation.COLUMNNAME_C_BPartner_Location_Delivery_ID).isEqualTo(deliveryLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String loadingLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShipperTransportation.COLUMNNAME_C_BPartner_Location_Loading_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(loadingLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location loadingLocation = bPartnerLocationTable.get(loadingLocationIdentifier);\n\t\t\t\tsoftly.assertThat(loadingLocation).isNotNull();\n\t\t\t\tsoftly.assertThat(deliveryInstruction.getC_BPartner_Location_Loading_ID()).as(I_M_ShipperTransportation.COLUMNNAME_C_BPartner_Location_Loading_ID).isEqualTo(loadingLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal Timestamp deliveryDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(row, \"OPT.\" + I_M_ShipperTransportation.COLUMNNAME_DeliveryDate);\n\t\t\tif (deliveryDate != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryInstruction.getDeliveryDate()).as(I_M_ShipperTransportation.COLUMNNAME_DeliveryDate).isEqualTo(deliveryDate);\n\t\t\t}\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShipperTransportation.COLUMNNAME_DocStatus);\n\t\t\tif (Check.isNotBlank(docStatus))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(deliveryInstruction.getDocStatus()).as(I_M_ShipperTransportation.COLUMNNAME_DocStatus).isEqualTo(docStatus);\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 113,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_ShipperTransportation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_ShipperTransportation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1489,
    "annotation": "\n\t@And(\"load Transportation Order from Shipment\")",
    "glue_code": "\t@And(\"load Transportation Order from Shipment\")\n\tpublic void load_M_ShipperTransportation(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_InOut shipment = shipmentTable.get(shipmentIdentifier);\n\n\t\t\tfinal I_M_ShipperTransportation shipperTransportation = queryBL.createQueryBuilder(I_M_ShippingPackage.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_M_ShippingPackage.COLUMNNAME_M_InOut_ID, shipment.getM_InOut_ID())\n\t\t\t\t\t.andCollect(I_M_ShippingPackage.COLUMN_M_ShipperTransportation_ID)\n\t\t\t\t\t.orderBy(I_M_ShipperTransportation.COLUMNNAME_M_ShipperTransportation_ID)\n\t\t\t\t\t.first();\n\t\t\tassertThat(shipperTransportation).isNotNull();\n\t\t\tfinal String shipperTransportationIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipperTransportation.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdeliveryInstructionTable.putOrReplace(shipperTransportationIdentifier, shipperTransportation);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 179,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning/M_ShipperTransportation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/deliveryplanning",
      "filename": "M_ShipperTransportation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1536,
    "annotation": "\n\t@And(\"metasfresh contains M_DiscountSchema\")",
    "glue_code": "\t@And(\"metasfresh contains M_DiscountSchema\")\n\tpublic void create_M_DiscountSchema(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String breakupValType = DataTableUtil.extractStringForColumnName(row, I_M_DiscountSchema.COLUMNNAME_BreakValueType);\n\t\t\tfinal String discountType = DataTableUtil.extractStringForColumnName(row, I_M_DiscountSchema.COLUMNNAME_DiscountType);\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_M_DiscountSchema.COLUMNNAME_Name);\n\t\t\tfinal Timestamp validFrom = DataTableUtil.extractDateTimestampForColumnName(row, I_M_DiscountSchema.COLUMNNAME_ValidFrom);\n\n\t\t\tfinal I_M_DiscountSchema discountSchema = InterfaceWrapperHelper.newInstance(I_M_DiscountSchema.class);\n\t\t\tdiscountSchema.setName(name);\n\t\t\tdiscountSchema.setDiscountType(discountType);\n\t\t\tdiscountSchema.setBreakValueType(breakupValType);\n\t\t\tdiscountSchema.setValidFrom(validFrom);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(discountSchema);\n\t\t\tfinal String discountSchemaIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_DiscountSchema.COLUMNNAME_M_DiscountSchema_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdiscountSchemaTable.put(discountSchemaIdentifier, discountSchema);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 47,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/discount/M_DiscountSchema_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/discount",
      "filename": "M_DiscountSchema_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1518,
    "annotation": "\n\t@Given(\"metasfresh contains M_DiscountSchemas:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_DiscountSchemas:\")\n\tpublic void create_discount_schema(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateDiscountSchema(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/discountschema/M_DiscountSchema_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/discountschema",
      "filename": "M_DiscountSchema_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1519,
    "annotation": "\n\t@Given(\"metasfresh contains M_DiscountSchemaBreaks:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_DiscountSchemaBreaks:\")\n\tpublic void created_discount_schema_break(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateDiscountSchemaBreak(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/discountschema/M_DiscountSchema_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/discountschema",
      "filename": "M_DiscountSchema_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1498,
    "annotation": "\n\t@And(\"metasfresh contains DD_NetworkDistributionLine\")",
    "glue_code": "\t@And(\"metasfresh contains DD_NetworkDistributionLine\")\n\tpublic void metasfresh_contains_DD_NetworkDistributionLine(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::metasfresh_contains_DD_NetworkDistributionLine);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distribution/DD_NetworkDistributionLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distribution",
      "filename": "DD_NetworkDistributionLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1530,
    "annotation": "\n\t@And(\"metasfresh contains DD_NetworkDistribution\")",
    "glue_code": "\t@And(\"metasfresh contains DD_NetworkDistribution\")\n\tpublic void metasfresh_contains_DD_NetworkDistribution(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_DD_NetworkDistribution.COLUMNNAME_DD_NetworkDistribution_ID)\n\t\t\t\t.forEach(this::metasfresh_contains_DD_NetworkDistribution);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 42,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distribution/DD_NetworkDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distribution",
      "filename": "DD_NetworkDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1531,
    "annotation": "\n\t@And(\"load DD_NetworkDistribution:\")",
    "glue_code": "\t@And(\"load DD_NetworkDistribution:\")\n\tpublic void load_DD_NetworkDistribution(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_DD_NetworkDistribution.COLUMNNAME_DD_NetworkDistribution_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal String value = row.getAsString(I_DD_NetworkDistribution.COLUMNNAME_Value);\n\t\t\t\t\tfinal I_DD_NetworkDistribution record = queryBL.createQueryBuilder(I_DD_NetworkDistribution.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_DD_NetworkDistribution.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_DD_NetworkDistribution.class);\n\n\t\t\t\t\tddNetworkTable.putOrReplace(row.getAsIdentifier(), record);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distribution/DD_NetworkDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distribution",
      "filename": "DD_NetworkDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1548,
    "annotation": "\n\t@Given(\"metasfresh contains DD_OrderLines:\")",
    "glue_code": "\t@Given(\"metasfresh contains DD_OrderLines:\")\n\tpublic void metasfresh_contains_dd_order_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_DD_OrderLine.COLUMNNAME_DD_OrderLine_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal I_DD_Order ddOrder = row.getAsIdentifier(I_DD_OrderLine.COLUMNNAME_DD_Order_ID).lookupIn(ddOrderTable);\n\t\t\t\t\tfinal ProductId productId = row.getAsIdentifier(I_DD_OrderLine.COLUMNNAME_M_Product_ID).lookupIdIn(productTable);\n\n\t\t\t\t\tfinal LocatorId fromLocatorId = row.getAsIdentifier(I_DD_OrderLine.COLUMNNAME_M_Locator_ID).lookupIdIn(locatorTable);\n\t\t\t\t\tassertThat(fromLocatorId.getWarehouseId().getRepoId()).as(\"line locator from is matching header warehouse\").isEqualTo(ddOrder.getM_Warehouse_From_ID());\n\n\t\t\t\t\tfinal LocatorId toLocatorId = row.getAsIdentifier(I_DD_OrderLine.COLUMNNAME_M_LocatorTo_ID).lookupIdIn(locatorTable);\n\t\t\t\t\tassertThat(toLocatorId.getWarehouseId().getRepoId()).as(\"line locator to is matching header warehouse\").isEqualTo(ddOrder.getM_Warehouse_To_ID());\n\n\t\t\t\t\tfinal BigDecimal qtyEntered = row.getAsBigDecimal(I_DD_OrderLine.COLUMNNAME_QtyEntered);\n\n\t\t\t\t\tfinal I_DD_OrderLine ddOrderLine = newInstance(I_DD_OrderLine.class);\n\t\t\t\t\tddOrderLine.setAD_Org_ID(ddOrder.getAD_Org_ID());\n\t\t\t\t\tddOrderLine.setM_Product_ID(productId.getRepoId());\n\t\t\t\t\tddOrderLine.setQtyEntered(qtyEntered);\n\t\t\t\t\tddOrderLine.setQtyOrdered(qtyEntered);\n\t\t\t\t\tddOrderLine.setDD_Order_ID(ddOrder.getDD_Order_ID());\n\t\t\t\t\tddOrderLine.setM_Locator_ID(fromLocatorId.getRepoId());\n\t\t\t\t\tddOrderLine.setM_LocatorTo_ID(toLocatorId.getRepoId());\n\t\t\t\t\tddOrderLine.setIsInvoiced(false);\n\n\t\t\t\t\tsaveRecord(ddOrderLine);\n\n\t\t\t\t\tfinal IHUDocumentHandler handler = huDocumentHandlerFactory.createHandler(I_DD_OrderLine.Table_Name);\n\t\t\t\t\thandler.applyChangesFor(ddOrderLine);\n\n\t\t\t\t\tfinal IHUPackingAware packingAware = new DDOrderLineHUPackingAware(InterfaceWrapperHelper.loadOrNew(OrderLineId.ofRepoId(ddOrderLine.getDD_OrderLine_ID()), de.metas.distribution.ddorder.lowlevel.model.I_DD_OrderLine.class));\n\t\t\t\t\thuPackingAwareBL.setQtyTU(packingAware);\n\n\t\t\t\t\tfinal QtyTU qtyPacks = QtyTU.ofBigDecimal(packingAware.getQtyTU());\n\t\t\t\t\thuPackingAwareBL.setQtyCUFromQtyTU(packingAware, qtyPacks.toInt());\n\n\t\t\t\t\tsaveRecord(ddOrderLine);\n\n\t\t\t\t\trow.getAsOptionalIdentifier().ifPresent(identifier -> ddOrderLineTable.putOrReplace(identifier, ddOrderLine));\n\t\t\t\t});\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 96,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1549,
    "annotation": "\n\t@And(\"validate DD_Order_MoveSchedule\")",
    "glue_code": "\t@And(\"validate DD_Order_MoveSchedule\")\n\tpublic void validate_move_schedule(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_DD_OrderLine.COLUMNNAME_DD_OrderLine_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_DD_OrderLine orderLine = ddOrderLineTable.get(orderLineIdentifier);\n\n\t\t\tfinal BigDecimal qtyPicked = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_DD_Order_MoveSchedule.COLUMNNAME_QtyPicked);\n\n\t\t\tfinal I_DD_Order_MoveSchedule moveSchedule = queryBL.createQueryBuilder(I_DD_Order_MoveSchedule.class)\n\t\t\t\t\t.addEqualsFilter(I_DD_Order_MoveSchedule.COLUMNNAME_DD_OrderLine_ID, orderLine.getDD_OrderLine_ID())\n\t\t\t\t\t.orderBy(I_DD_Order_MoveSchedule.COLUMNNAME_Created)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_DD_Order_MoveSchedule.class);\n\n\t\t\tassertThat(moveSchedule).isNotNull();\n\t\t\tassertThat(moveSchedule.getQtyToPick()).isEqualTo(qtyPicked);\n\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 140,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1550,
    "annotation": "\n\t@And(\"^no DD_OrderLine found for orderLine (.*)$\")",
    "glue_code": "\t@And(\"^no DD_OrderLine found for orderLine (.*)$\")\n\tpublic void validate_no_DD_OrderLine_found(@NonNull final String orderLineIdentifier)\n\t{\n\t\tfinal OrderLineId orderLineId = getOrderLineIdByIdentifier(orderLineIdentifier);\n\n\t\ttry\n\t\t{\n\t\t\tassertThat(queryByOrderLineId(orderLineId).count()).isZero();\n\t\t}\n\t\tcatch (final Throwable throwable)\n\t\t{\n\t\t\tlogCurrentContextExpectedNoRecords(orderLineId);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 163,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1551,
    "annotation": "\n\t@And(\"^after not more than (.*)s, DD_OrderLine found for orderLine (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, DD_OrderLine found for orderLine (.*)$\")\n\tpublic void validate_DD_OrderLines_found_for_OrderLine(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String orderLineIdentifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal OrderLineId orderLineId = getOrderLineIdByIdentifier(orderLineIdentifier);\n\n\t\tfinal HashSet<DDOrderLineId> alreadyMatchedLineIds = new HashSet<>();\n\t\tDataTableRows.of(dataTable).forEach(row -> {\n\t\t\tfinal I_DD_OrderLine ddOrderLineRecord = StepDefUtil.tryAndWaitForItem(toDDOrderLineQuery(orderLineId, alreadyMatchedLineIds))\n\t\t\t\t\t.validateUsingFunction(ddOrderLine -> checkDDOrderLineMatching(ddOrderLine, row))\n\t\t\t\t\t.maxWaitSeconds(timeoutSec)\n\t\t\t\t\t.execute();\n\n\t\t\talreadyMatchedLineIds.add(DDOrderLineId.ofRepoId(ddOrderLineRecord.getDD_OrderLine_ID()));\n\t\t\trow.getAsOptionalIdentifier().ifPresent(identifier -> ddOrderLineTable.putOrReplace(identifier, ddOrderLineRecord));\n\n\t\t\trow.getAsOptionalIdentifier(I_DD_OrderLine.COLUMNNAME_DD_Order_ID)\n\t\t\t\t\t.ifPresent(ddOrderIdentifier -> {\n\t\t\t\t\t\tfinal DDOrderId actualDDOrderId = DDOrderId.ofRepoId(ddOrderLineRecord.getDD_Order_ID());\n\t\t\t\t\t\tvalidateDDOrderId(ddOrderIdentifier, actualDDOrderId);\n\t\t\t\t\t});\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 178,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_OrderLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_OrderLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1538,
    "annotation": "\n\t@And(\"DD_Orders are found:\")",
    "glue_code": "\t@And(\"DD_Orders are found:\")\n\tpublic void find_DDOrders(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfindDDOrder(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 104,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1539,
    "annotation": "\n\t@And(\"metasfresh contains DD_Orders:\")",
    "glue_code": "\t@And(\"metasfresh contains DD_Orders:\")\n\tpublic void metasfresh_contains_dd_orders(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_DD_Order.COLUMNNAME_DD_Order_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal OrgId orgId = Env.getOrgId();\n\t\t\t\t\tfinal BPartnerId bpartnerId = Optionals.firstPresentOfSuppliers(\n\t\t\t\t\t\t\t\t\t() -> row.getAsOptionalIdentifier(I_DD_Order.COLUMNNAME_C_BPartner_ID).map(bPartnerTable::getId),\n\t\t\t\t\t\t\t\t\t() -> bpartnerOrgBL.retrieveLinkedBPartnerId(orgId)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.orElse(null);\n\n\t\t\t\t\tfinal BPartnerLocationId bpartnerLocationId = bpartnerId != null\n\t\t\t\t\t\t\t? bpartnerDAO.retrieveBPartnerLocationId(BPartnerLocationQuery.builder().bpartnerId(bpartnerId).type(BPartnerLocationQuery.Type.SHIP_TO).build())\n\t\t\t\t\t\t\t: null;\n\n\t\t\t\t\tfinal WarehouseId fromWarehouseId = row.getAsIdentifier(\"M_Warehouse_ID.From\").lookupIdIn(warehouseTable);\n\t\t\t\t\tfinal WarehouseId toWarehouseId = row.getAsIdentifier(\"M_Warehouse_ID.To\").lookupIdIn(warehouseTable);\n\t\t\t\t\tfinal WarehouseId transitWarehouseId = row.getAsIdentifier(\"M_Warehouse_ID.Transit\").lookupIdIn(warehouseTable);\n\n\t\t\t\t\tfinal I_DD_Order ddOrder = InterfaceWrapperHelper.newInstanceOutOfTrx(I_DD_Order.class);\n\t\t\t\t\tddOrder.setAD_Org_ID(orgId.getRepoId());\n\t\t\t\t\tddOrder.setC_BPartner_ID(BPartnerId.toRepoId(bpartnerId));\n\t\t\t\t\tddOrder.setC_BPartner_Location_ID(BPartnerLocationId.toRepoId(bpartnerLocationId));\n\t\t\t\t\tddOrder.setM_Warehouse_From_ID(fromWarehouseId.getRepoId());\n\t\t\t\t\tddOrder.setM_Warehouse_To_ID(toWarehouseId.getRepoId());\n\t\t\t\t\tddOrder.setM_Warehouse_ID(transitWarehouseId.getRepoId());\n\t\t\t\t\tddOrder.setIsInDispute(false);\n\t\t\t\t\tddOrder.setIsSOTrx(false);\n\t\t\t\t\tddOrder.setIsInTransit(false);\n\t\t\t\t\tddOrder.setDeliveryRule(X_DD_Order.DELIVERYRULE_Availability);\n\n\t\t\t\t\trow.getAsOptionalIdentifier(\"S_Resource_ID\")\n\t\t\t\t\t\t\t.map(plantIdentifier -> resourceTable.getIdOptional(plantIdentifier).orElseGet(() -> plantIdentifier.getAsId(ResourceId.class)))\n\t\t\t\t\t\t\t.ifPresent(plantId -> ddOrder.setPP_Plant_ID(plantId.getRepoId()));\n\n\t\t\t\t\tfinal String docTypeName = row.getAsOptionalString(I_DD_Order.COLUMNNAME_C_DocType_ID + \".\" + I_C_DocType.COLUMNNAME_Name).orElse(null);\n\t\t\t\t\tfinal DocTypeId docTypeId = findDocTypeId(orgId, docTypeName);\n\t\t\t\t\tddOrder.setC_DocType_ID(docTypeId.getRepoId());\n\n\t\t\t\t\tddOrderService.save(ddOrder);\n\n\t\t\t\t\trow.getAsOptionalIdentifier().ifPresent(identifier -> ddOrderTable.putOrReplace(identifier, ddOrder));\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1540,
    "annotation": "\n\n\t@And(\"^the dd_order identified by (.*) is (completed|reactivated|reversed|voided|closed)$\")",
    "glue_code": "\n\t@And(\"^the dd_order identified by (.*) is (completed|reactivated|reversed|voided|closed)$\")\n\tpublic void order_action(@NonNull final String orderIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_DD_Order order = ddOrderTable.get(orderIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase completed:\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tbreak;\n\t\t\tcase reactivated:\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_ReActivate, IDocument.STATUS_InProgress);\n\t\t\t\tbreak;\n\t\t\tcase reversed:\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t\tbreak;\n\t\t\tcase voided:\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Void, IDocument.STATUS_Voided);\n\t\t\t\tbreak;\n\t\t\tcase closed:\n\t\t\t\torder.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(order, IDocument.ACTION_Close, IDocument.STATUS_Closed);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled DD_Order action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 170,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1541,
    "annotation": "\n\t@And(\"^after not more than (.*)s, following DD_Orders are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, following DD_Orders are found$\")\n\tpublic void validateDDOrders(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_DD_Order.COLUMNNAME_DD_Order_ID)\n\t\t\t\t.forEach(row -> validateDDOrder(timeoutSec, row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 205,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1542,
    "annotation": "\n\t@And(\"DD_Orders are validated:\")",
    "glue_code": "\t@And(\"DD_Orders are validated:\")\n\tpublic void validate_DD_Orders(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateDDOrder(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 268,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/DD_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "DD_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1601,
    "annotation": "\n\t@And(\"set mobile UI distribution profile\")",
    "glue_code": "\t@And(\"set mobile UI distribution profile\")\n\tpublic void updateProfile(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal MobileUIDistributionConfigBuilder newConfigBuilder = configRepository.getConfig().toBuilder();\n\t\trow.getAsOptionalBoolean(\"IsAllowPickingAnyHU\").ifPresent(newConfigBuilder::allowPickingAnyHU);\n\t\tfinal MobileUIDistributionConfig newConfig = newConfigBuilder.build();\n\t\tconfigRepository.save(newConfig);\n\t\tlogger.info(\"Config updated: {}\", newConfig);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 118,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/MobileDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "MobileDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1602,
    "annotation": "\n\t@And(\"^Start distribution job for dd_order identified by (.*)$\")",
    "glue_code": "\t@And(\"^Start distribution job for dd_order identified by (.*)$\")\n\tpublic void startDistributionJob(\n\t\t\t@NonNull final String ddOrderIdentifierStr,\n\t\t\t@SuppressWarnings(\"unused\") @NonNull DataTable dataTable // required by cucumber :(\n\t)\n\t{\n\t\tfinal JsonWFProcessStartRequest request = distributionWorkflowRestControllerStepDef.createJsonWFProcessStartRequest(StepDefDataIdentifier.ofString(ddOrderIdentifierStr));\n\t\tfinal APIResponse response = httpPOST(ENDPOINT_StartWorkflow, request);\n\t\tupdateContextFromWFProcessResponse(response);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 130,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/MobileDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "MobileDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1603,
    "annotation": "\n\t@And(\"Pick HU for distribution job line\")",
    "glue_code": "\t@And(\"Pick HU for distribution job line\")\n\tpublic void linePickFrom(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\t\tfinal HuId huId = row.getAsIdentifier(\"M_HU_ID\").lookupIdIn(huTable);\n\t\tfinal HUQRCode huQRCode = huQRCodesService.getQRCodeByHuId(huId);\n\n\t\tfinal JsonDistributionEvent request = JsonDistributionEvent.builder()\n\t\t\t\t.wfProcessId(wfProcessId.getAsString())\n\t\t\t\t.wfActivityId(wfActivityId.getAsString())\n\t\t\t\t.lineId(lineId)\n\t\t\t\t.pickFrom(JsonDistributionEvent.PickFrom.builder().qrCode(huQRCode.toGlobalQRCodeString()).build())\n\t\t\t\t.build();\n\n\t\tfinal String expectErrorContaining = row.getAsOptionalString(\"ExpectErrorContaining\").map(StringUtils::trimBlankToNull).orElse(null);\n\t\tfinal Boolean expectErrorUserFriendly = row.getAsOptionalBoolean(\"ExpectErrorUserFriendly\").toBooleanOrNull();\n\t\tfinal boolean isExpectError = expectErrorContaining != null || expectErrorUserFriendly != null;\n\t\tfinal int expectedStatusCode = isExpectError ? 422 : 200;\n\t\tfinal APIResponse response = httpPOST(requestBuilder -> requestBuilder.endpointPath(ENDPOINT_Event)\n\t\t\t\t.payload(request)\n\t\t\t\t.expectedStatusCode(expectedStatusCode)\n\t\t\t\t.expectedErrorMessageContaining(expectErrorContaining)\n\t\t\t\t.expectErrorUserFriendly(expectErrorUserFriendly)\n\t\t\t\t.build()\n\t\t);\n\n\t\tif (expectedStatusCode == 200)\n\t\t{\n\t\t\tupdateContextFromWFProcessResponse(response);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 141,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/MobileDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "MobileDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1604,
    "annotation": "\n\t@And(\"Drop HU for distribution job line\")",
    "glue_code": "\t@And(\"Drop HU for distribution job line\")\n\tpublic void lineDropTo()\n\t{\n\t\tfinal JsonDistributionEvent request = JsonDistributionEvent.builder()\n\t\t\t\t.wfProcessId(wfProcessId.getAsString())\n\t\t\t\t.wfActivityId(wfActivityId.getAsString())\n\t\t\t\t.lineId(lineId)\n\t\t\t\t.distributionStepId(stepId)\n\t\t\t\t.dropTo(JsonDistributionEvent.DropTo.builder().build())\n\t\t\t\t.build();\n\n\t\tfinal APIResponse response = httpPOST(ENDPOINT_Event, request);\n\t\tupdateContextFromWFProcessResponse(response);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 173,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/MobileDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "MobileDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1605,
    "annotation": "\n\t@And(\"Complete current distribution job\")",
    "glue_code": "\t@And(\"Complete current distribution job\")\n\tpublic void complete()\n\t{\n\t\t// private static final String ENDPOINT_StartWorkflow = \"api/v2/userWorkflows/wfProcess/start\";\n\t\t///wfProcess/{wfProcessId}/{wfActivityId}/userConfirmation\n\n\t\tfinal APIResponse response = httpPOST(ENDPOINT_BASE_UserWorkflows + \"/wfProcess/\" + wfProcessId.getAsString() + \"/\" + lastConfirmActivityId.getAsString() + \"/userConfirmation\");\n\t\tupdateContextFromWFProcessResponse(response);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder/MobileDistribution_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/distributionorder",
      "filename": "MobileDistribution_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1575,
    "annotation": "\n\t@And(\"metasfresh contains C_DocType_Invoicing_Pool:\")",
    "glue_code": "\t@And(\"metasfresh contains C_DocType_Invoicing_Pool:\")\n\tpublic void metasfresh_contains_C_DocType_Invoicing_Pool(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateDocTypeInvoicingPool(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType/C_DocType_Invoicing_Pool_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType",
      "filename": "C_DocType_Invoicing_Pool_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1546,
    "annotation": "\n\n\t@Given(\"metasfresh contains C_DocType_Sequence:\")",
    "glue_code": "\n\t@Given(\"metasfresh contains C_DocType_Sequence:\")\n\tpublic void metasfresh_contains_C_DocType_Sequence(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateC_DocType_Sequence(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType/C_DocType_Sequence_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType",
      "filename": "C_DocType_Sequence_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1558,
    "annotation": "\n\t@And(\"load C_DocType:\")",
    "glue_code": "\t@And(\"load C_DocType:\")\n\tpublic void load_C_DocType(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadDocType(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType/C_DocType_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType",
      "filename": "C_DocType_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1559,
    "annotation": "\n\t@And(\"update C_DocType:\")",
    "glue_code": "\t@And(\"update C_DocType:\")\n\tpublic void update_C_DocType(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateDocType(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType/C_DocType_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType",
      "filename": "C_DocType_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1560,
    "annotation": "\n\t@Given(\"metasfresh contains C_DocType:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_DocType:\")\n\tpublic void metasfresh_contains_c_doctype(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateC_DocType(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 179,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType/C_DocType_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docType",
      "filename": "C_DocType_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1545,
    "annotation": "\n\t@Given(\"metasfresh contains C_Doc_Outbound_Config:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Doc_Outbound_Config:\")\n\tpublic void metasfresh_contains_C_Doc_Outbound_Config(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::loadOrCreateC_Doc_Outbound_Config);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docoutbound/C_Doc_Outbound_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docoutbound",
      "filename": "C_Doc_Outbound_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1543,
    "annotation": "\n\t@And(\"^after not more than (.*)s validate C_Doc_Outbound_Log:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s validate C_Doc_Outbound_Log:$\")\n\tpublic void validate_C_Doc_Outbound_Log(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> retrieveDocOutboundLog(row));\n\n\t\t\tvalidateDocOutboundLog(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docoutbound/C_Doc_Outbound_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docoutbound",
      "filename": "C_Doc_Outbound_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1544,
    "annotation": "\n\t@And(\"validate C_Doc_Outbound_Log_Line:\")",
    "glue_code": "\t@And(\"validate C_Doc_Outbound_Log_Line:\")\n\tpublic void validate_C_Doc_Outbound_Log_Line(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String docOutboundIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Doc_Outbound_Log_Line.COLUMNNAME_C_Doc_Outbound_Log_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Doc_Outbound_Log docOutboundLog = docOutboundLogTable.get(docOutboundIdentifier);\n\t\t\tassertThat(docOutboundLog).isNotNull();\n\n\t\t\tfinal I_C_Doc_Outbound_Log_Line docOutboundLogLine = queryBL.createQueryBuilder(I_C_Doc_Outbound_Log_Line.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Doc_Outbound_Log_Line.COLUMN_C_Doc_Outbound_Log_ID, docOutboundLog.getC_Doc_Outbound_Log_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_Doc_Outbound_Log_Line.class);\n\t\t\tassertThat(docOutboundLogLine).isNotNull();\n\n\t\t\tfinal TableRecordReference recordReference = getTableRecordReference(row);\n\n\t\t\tassertThat(docOutboundLogLine.getRecord_ID()).isEqualTo(recordReference.getRecord_ID());\n\t\t\tassertThat(docOutboundLogLine.getAD_Table_ID()).isEqualTo(recordReference.getAD_Table_ID());\n\n\t\t\tfinal String docBaseType = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_DocType.COLUMNNAME_DocBaseType);\n\t\t\tif (Check.isNotBlank(docBaseType))\n\t\t\t{\n\t\t\t\tfinal I_C_DocType docType = load(docOutboundLogLine.getC_DocType_ID(), I_C_DocType.class);\n\t\t\t\tassertThat(docType.getDocBaseType()).isEqualTo(docBaseType);\n\t\t\t}\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Doc_Outbound_Log_Line.COLUMNNAME_DocStatus);\n\t\t\tif (Check.isNotBlank(docStatus))\n\t\t\t{\n\t\t\t\tassertThat(docOutboundLogLine.getDocStatus()).isEqualTo(docStatus);\n\t\t\t}\n\n\t\t\tfinal String docOutboundLineIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Doc_Outbound_Log_Line_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdocOutboundLogLineTable.put(docOutboundLineIdentifier, docOutboundLogLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docoutbound/C_Doc_Outbound_Log_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/docoutbound",
      "filename": "C_Doc_Outbound_Log_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1600,
    "annotation": "\n\t@And(\"validate C_DunningDoc:\")",
    "glue_code": "\t@And(\"validate C_DunningDoc:\")\n\tpublic void validate_C_DunningDoc(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal List<I_C_DunningDoc> dunningDocs = retrieveDunningDoc(row);\n\t\t\tassertThat(dunningDocs).isNotEmpty();\n\n\t\t\tdunningDocs.forEach(doc -> validateDunningDoc(doc, row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning/C_DunningDoc_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning",
      "filename": "C_DunningDoc_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1578,
    "annotation": "\n\t@Given(\"metasfresh contains C_DunningLevel:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_DunningLevel:\")\n\tpublic void metasfresh_contains_C_DunningLevel(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::createC_DunningLevel);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning/C_DunningLevel_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning",
      "filename": "C_DunningLevel_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1579,
    "annotation": "\n\t@And(\"invoke \\\"C_Dunning_Candidate_Create\\\" process:\")",
    "glue_code": "\t@And(\"invoke \\\"C_Dunning_Candidate_Create\\\" process:\")\n\tpublic void createC_Dunning_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String dunningLevelIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Dunning_Candidate.COLUMNNAME_C_DunningLevel_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal org.compiere.model.I_C_DunningLevel dunningLevel = dunningLevelTable.get(dunningLevelIdentifier);\n\n\t\t\tfinal de.metas.dunning.interfaces.I_C_DunningLevel dunningLevelRecord = InterfaceWrapperHelper.load(dunningLevel.getC_DunningLevel_ID(), de.metas.dunning.interfaces.I_C_DunningLevel.class);\n\n\t\t\tfinal Boolean isFullUpdate = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.IsFullUpdate\", false);\n\n\t\t\tfinal OrgId orgId = OrgId.ofRepoId(dunningLevelRecord.getAD_Org_ID());\n\t\t\tfinal LocalDateAndOrgId dunningDate = LocalDateAndOrgId.ofTimestamp(DataTableUtil.extractDateTimestampForColumnName(row, \"DunningDate\"), orgId, orgDAO::getTimeZone);\n\n\t\t\ttrxManager.runInNewTrx(() ->\n\t\t\t\t\t\t\t\t   {\n\t\t\t\t\t\t\t\t\t   final IDunningContext context = dunningBL.createDunningContext(Env.getCtx(), dunningLevelRecord, dunningDate, ITrx.TRXNAME_None, null);\n\n\t\t\t\t\t\t\t\t\t   dunningDAO.deleteNotProcessedCandidates(context, dunningLevelRecord);\n\n\t\t\t\t\t\t\t\t\t   dunningBL.createDunningCandidates(context);\n\t\t\t\t\t\t\t\t   });\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning/C_Dunning_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning",
      "filename": "C_Dunning_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1580,
    "annotation": "\n\t@And(\"locate C_Dunning_Candidate:\")",
    "glue_code": "\t@And(\"locate C_Dunning_Candidate:\")\n\tpublic void locateC_Dunning_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_C_Dunning_Candidate dunningCandidate = buildQuery(row)\n\t\t\t\t\t.firstOnlyNotNull(I_C_Dunning_Candidate.class);\n\n\t\t\tfinal String dunningCandidateIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Dunning_Candidate.COLUMNNAME_C_Dunning_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tdunningCandidateTable.putOrReplace(dunningCandidateIdentifier, dunningCandidate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 112,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning/C_Dunning_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning",
      "filename": "C_Dunning_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1581,
    "annotation": "\n\t@And(\"invoke \\\"C_Dunning_Candidate_Process\\\" process:\")",
    "glue_code": "\t@And(\"invoke \\\"C_Dunning_Candidate_Process\\\" process:\")\n\tpublic void processC_Dunning_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String dunningCandidateIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Dunning_Candidate.COLUMNNAME_C_Dunning_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Dunning_Candidate dunningCandidate = dunningCandidateTable.get(dunningCandidateIdentifier);\n\n\t\t\tfinal IDunningContext context = dunningBL.createDunningContext(Env.getCtx(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   null, // DunningDate, not needed\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   null, // C_DunningLevel, not needed\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   ITrx.TRXNAME_None,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   null);\n\n\t\t\tfinal Boolean isAutoProcess = DataTableUtil.extractBooleanForColumnNameOr(row, \"AutoProcess\", false);\n\t\t\tcontext.setProperty(IDunningProducer.CONTEXT_ProcessDunningDoc, isAutoProcess);\n\n\t\t\tfinal IDunningProducer dunningProducer = context.getDunningConfig().createDunningProducer();\n\t\t\tdunningProducer.setDunningContext(context);\n\t\t\tdunningProducer.addCandidate(dunningCandidate);\n\t\t\tdunningProducer.finish();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 125,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning/C_Dunning_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning",
      "filename": "C_Dunning_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1553,
    "annotation": "\n\t@Given(\"metasfresh contains C_Dunning:\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Dunning:\")\n\tpublic void metasfresh_contains_C_Dunning(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::createC_Dunning);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning/C_Dunning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/dunning",
      "filename": "C_Dunning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1552,
    "annotation": "\n\t@And(\"^send message to RabbitMQ queue defined by:(.*)$\")",
    "glue_code": "\t@And(\"^send message to RabbitMQ queue defined by:(.*)$\")\n\tpublic void sendMessage(@NonNull final String impProcessorIdentifier, @NonNull final String message) throws IOException, TimeoutException\n\t{\n\t\tfinal I_IMP_Processor impProcessor = impProcessorStepDefData.get(impProcessorIdentifier);\n\t\tassertThat(impProcessor).isNotNull();\n\n\t\tfinal ImmutableMap<String, String> impProcessorParameters = retrieveParams(impProcessor);\n\t\tfinal String exchangeName = impProcessorParameters.get(EXCHANGE_NAME);\n\t\tfinal String queueName = impProcessorParameters.get(QUEUE_NAME);\n\n\t\ttry (final Connection connection = rabbitMQToMetasfreshConnectionFactory.getRabbitConnectionFactory().newConnection())\n\t\t{\n\t\t\tfinal AMQP.BasicProperties properties = new AMQP.BasicProperties.Builder()\n\t\t\t\t\t.contentEncoding(StandardCharsets.UTF_8.displayName())\n\t\t\t\t\t.build();\n\n\t\t\tfinal Channel channel = connection.createChannel();\n\n\t\t\tchannel.basicPublish(exchangeName, queueName, properties, message.getBytes(StandardCharsets.UTF_8));\n\t\t\tlogger.info(\"Sent on queue '\" + queueName + \"': message= '\" + message + \"'\");\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDIToMetasfreshRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDIToMetasfreshRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1557,
    "annotation": "\n\t@Then(\"validate created edi desadv line\")",
    "glue_code": "\t@Then(\"validate created edi desadv line\")\n\tpublic void validate_edi_desadv_line(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateEdiDesadvLine(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_DesadvLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_DesadvLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1547,
    "annotation": "\n\t@And(\"generate csv file for sscc labels for {string}\")",
    "glue_code": "\t@And(\"generate csv file for sscc labels for {string}\")\n\tpublic void generateCSV_FileForSSCC_Labels(\n\t\t\t@NonNull final String packIdentifiersParam,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<String> reportDataContentActual = generateCSVFileForSSCCLabels(ediDesadvPackTable.getIds(packIdentifiersParam));\n\t\tfinal List<String> reportDataContentExpected = getReportDataLines(dataTable);\n\n\t\tassertThat(normalizeReportLinesForComparing(reportDataContentActual))\n\t\t\t\t.containsExactlyInAnyOrderElementsOf(normalizeReportLinesForComparing(reportDataContentExpected));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_DesadvPackGenerateCSV_FileForSSCC_Labels_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_DesadvPackGenerateCSV_FileForSSCC_Labels_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1554,
    "annotation": "\n\t@Given(\"metasfresh initially has no EDI_Desadv_Pack_Item data\")",
    "glue_code": "\t@Given(\"metasfresh initially has no EDI_Desadv_Pack_Item data\")\n\tpublic void setupMD_Stock_Data()\n\t{\n\t\ttruncateEDIDesadvPackItem();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 84,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_Item_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_Item_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1555,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, the EDI_Desadv_Pack_Item has only the following records:$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, the EDI_Desadv_Pack_Item has only the following records:$\")\n\tpublic void packItemsAreFound(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tpackItemIsFound(row, timeoutSec);\n\t\t}\n\n\t\tfinal int storedItemsSize = queryBL.createQueryBuilder(I_EDI_Desadv_Pack_Item.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.create()\n\t\t\t\t.count();\n\n\t\tfinal int expectedItemsNo = dataTable.size();\n\n\t\tif (storedItemsSize != expectedItemsNo)\n\t\t{\n\t\t\tfinal StringBuilder message = new StringBuilder();\n\n\t\t\tmessage.append(\"Expected to find: \").append(expectedItemsNo)\n\t\t\t\t\t.append(\"EDI_Desadv_Pack_Item records, but got: \").append(storedItemsSize)\n\t\t\t\t\t.append(\" See:\\n\");\n\n\t\t\tlogItemRecords(message);\n\t\t}\n\n\t\tassertThat(storedItemsSize).isEqualTo(dataTable.size());\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 90,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_Item_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_Item_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1556,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, there are no records in EDI_Desadv_Pack_Item$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, there are no records in EDI_Desadv_Pack_Item$\")\n\tpublic void tableIsEmpty(final int timeoutSec) throws InterruptedException\n\t{\n\t\tfinal Supplier<Boolean> emptyTable = () -> queryBL.createQueryBuilder(I_EDI_Desadv_Pack_Item.class)\n\t\t\t\t.create()\n\t\t\t\t.count() == 0;\n\n\t\tfinal StringBuilder message = new StringBuilder();\n\n\t\tmessage.append(\"Expected no EDI_Desadv_Pack_Item records, but found the following\").append(\"\\n\");\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, emptyTable, () -> logItemRecords(message));\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 120,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_Item_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_Item_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1591,
    "annotation": "\n\t@Given(\"metasfresh initially has no EDI_Desadv_Pack data\")",
    "glue_code": "\t@Given(\"metasfresh initially has no EDI_Desadv_Pack data\")\n\tpublic void setupMD_Stock_Data()\n\t{\n\t\tdeleteAllFromEDIDesadvPack();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 85,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1592,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, EDI_Desadv_Pack records are found:$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, EDI_Desadv_Pack records are found:$\")\n\tpublic void packsAreFound(final int timeoutSec, @NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_EDI_Desadv_Pack.COLUMNNAME_EDI_Desadv_Pack_ID)\n\t\t\t\t.forEach(row -> packIsFound(row, timeoutSec));\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1593,
    "annotation": "\n\t@Then(\"EDI_Desadv_Pack records are updated\")",
    "glue_code": "\t@Then(\"EDI_Desadv_Pack records are updated\")\n\tpublic void update_EDI_Desadv_Pack(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tupdatePack(row);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 99,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1594,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, there are no records in EDI_Desadv_Pack$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, there are no records in EDI_Desadv_Pack$\")\n\tpublic void tableIsEmpty(final int timeoutSec) throws InterruptedException\n\t{\n\t\tStepDefUtil.tryAndWait(\n\t\t\t\ttimeoutSec,\n\t\t\t\t1000,\n\t\t\t\t() -> queryBL.createQueryBuilder(I_EDI_Desadv_Pack.class).create().count() == 0,\n\t\t\t\t() -> logger.error(getCurrentContext())\n\t\t);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 109,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_Pack_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_Pack_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1568,
    "annotation": "\n\t@Given(\"metasfresh is configured for One-DESADV-Per-ORDERS\")",
    "glue_code": "\t@Given(\"metasfresh is configured for One-DESADV-Per-ORDERS\")\n\tpublic void OneDesadvPerOrders()\n\t{\n\t\tsysConfigBL.setValue(SYS_CONFIG_OneDesadvPerShipment, true, ClientId.SYSTEM, OrgId.ANY);\n\n\t\tfinal I_EXP_Format oneDesadvPerShipment = InterfaceWrapperHelper.load(540405, I_EXP_Format.class); // current name=EDI_Exp_Desadv\n\t\toneDesadvPerShipment.setIsActive(false);\n\t\tInterfaceWrapperHelper.saveRecord(oneDesadvPerShipment);\n\n\t\tfinal I_EXP_Format oneDesadvPerOrder = InterfaceWrapperHelper.load(540428, I_EXP_Format.class); // current name=EXP_M_InOut_Desadv_V\n\t\toneDesadvPerOrder.setIsActive(true);\n\t\tInterfaceWrapperHelper.saveRecord(oneDesadvPerOrder);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 100,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1569,
    "annotation": "\n\t@Given(\"metasfresh is configured for One-DESADV-Per-Shipment\")",
    "glue_code": "\t@Given(\"metasfresh is configured for One-DESADV-Per-Shipment\")\n\tpublic void OneDesadvPerShipment()\n\t{\n\t\tsysConfigBL.setValue(SYS_CONFIG_OneDesadvPerShipment, false, ClientId.SYSTEM, OrgId.ANY);\n\n\t\tfinal I_EXP_Format oneDesadvPerOrder = InterfaceWrapperHelper.load(540428, I_EXP_Format.class); // current name=EXP_M_InOut_Desadv_V\n\t\toneDesadvPerOrder.setIsActive(false);\n\t\tInterfaceWrapperHelper.saveRecord(oneDesadvPerOrder);\n\n\t\tfinal I_EXP_Format oneDesadvPerShipment = InterfaceWrapperHelper.load(540405, I_EXP_Format.class); // current name=EDI_Exp_Desadv\n\t\toneDesadvPerShipment.setIsActive(true);\n\t\tInterfaceWrapperHelper.saveRecord(oneDesadvPerShipment);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1570,
    "annotation": "\n\t@Then(\"validate created edi desadv\")",
    "glue_code": "\t@Then(\"validate created edi desadv\")\n\tpublic void validate_edi_desadv(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateEdiDesadv(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 128,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1571,
    "annotation": "\n\t@Then(\"EDI_Desadv is found:\")",
    "glue_code": "\t@Then(\"EDI_Desadv is found:\")\n\tpublic void find_desadv(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfindDesadv(row);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 138,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1572,
    "annotation": "\n\t@Then(\"EDI_Desadv is enqueued for export\")",
    "glue_code": "\t@Then(\"EDI_Desadv is enqueued for export\")\n\tpublic void enqueue_desadv_for_export(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tenqueueDesadvForExport(row);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 148,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1573,
    "annotation": "\n\t@Then(\"EDI_Exp_Desadv_Pack of the following EDI_Exp_Desadv is validated\")",
    "glue_code": "\t@Then(\"EDI_Exp_Desadv_Pack of the following EDI_Exp_Desadv is validated\")\n\tpublic void validate_EDI_Exp_Desadv_Pack(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateEDIExpDesadvPack(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 158,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1574,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, EDI_Desadv records have the following export status$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, EDI_Desadv records have the following export status$\")\n\tpublic void validate_export_status(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tvalidateExportStatus(timeoutSec, row);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 168,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_Desadv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_Desadv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1561,
    "annotation": "\n\t@Then(\"invoice is EDI exported\")",
    "glue_code": "\t@Then(\"invoice is EDI exported\")\n\tpublic void edi_export_invoice(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tediExportInvoice(row);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_cctop_invoic_v_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_cctop_invoic_v_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1562,
    "annotation": "\n\t@Then(\"EDI_cctop_invoic_500_v of the following EDI_cctop_invoic_v is validated\")",
    "glue_code": "\t@Then(\"EDI_cctop_invoic_500_v of the following EDI_cctop_invoic_v is validated\")\n\tpublic void validate_EDI_cctop_invoic_500_v(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateEdiInvoic500(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 89,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_cctop_invoic_v_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_cctop_invoic_v_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1563,
    "annotation": "\n\t@Then(\"^validate EDI_cctop_119_v within EDI_cctop_invoic_v (.*) by location type$\")",
    "glue_code": "\t@Then(\"^validate EDI_cctop_119_v within EDI_cctop_invoic_v (.*) by location type$\")\n\tpublic void validate_EDI_cctop_119_v(\n\t\t\t@NonNull final String invoicIdentifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Document doc = cctopInvoiceTable.get(invoicIdentifier);\n\n\t\tfinal NodeList invoic500List = doc.getElementsByTagName(TAGNAME_EDI_CCTOP_119_V);\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tassertThat(invoic500List.getLength()).isEqualTo(tableRows.size());\n\n\t\tfinal Map<String, Element> locationType2Cctop119Element = getLocationType2Cctop119Element(invoic500List);\n\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateEdiCctop119(tableRow, locationType2Cctop119Element);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 99,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_cctop_invoic_v_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_cctop_invoic_v_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1564,
    "annotation": "\n\t@And(\"validate EDI_cctop_invoic_v:\")",
    "glue_code": "\t@And(\"validate EDI_cctop_invoic_v:\")\n\tpublic void validateEDI_cctop_invoic_v(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String invoicIdentifier = DataTableUtil.extractStringForColumnName(row, I_EDI_cctop_invoic_v.COLUMNNAME_EDI_cctop_invoic_v_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Document invoic = cctopInvoiceTable.get(invoicIdentifier);\n\n\t\t\tfinal String desadvIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_EDI_cctop_invoic_v.COLUMNNAME_EDIDesadvDocumentNo + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(desadvIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_EDI_Desadv desadvRecord = desadvTable.get(desadvIdentifier);\n\n\t\t\t\tfinal Element ediDocNoElement = getElement(invoic, I_EDI_cctop_invoic_v.COLUMNNAME_EDIDesadvDocumentNo);\n\t\t\t\tassertThat(ediDocNoElement).isNotNull();\n\t\t\t\tassertThat(ediDocNoElement.getTextContent()).isEqualTo(desadvRecord.getDocumentNo());\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 269,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/EDI_cctop_invoic_v_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "EDI_cctop_invoic_v_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1566,
    "annotation": "\n\t@Then(\"RabbitMQ receives a EDI_cctop_invoic_v\")",
    "glue_code": "\t@Then(\"RabbitMQ receives a EDI_cctop_invoic_v\")\n\tpublic void rabbitMQ_receives_edi_cctop_invoic(@NonNull final DataTable dataTable) throws IOException, InterruptedException, TimeoutException, ParserConfigurationException, SAXException\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal String processorIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_EXP_ProcessorParameter.COLUMNNAME_EXP_Processor_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tfinal Integer expProcessorId = expProcessorTable.getOptional(processorIdentifier)\n\t\t\t\t.map(I_EXP_Processor::getEXP_Processor_ID)\n\t\t\t\t.orElseGet(() -> Integer.parseInt(processorIdentifier));\n\n\t\tfinal String routingKeyParameterValue = DataTableUtil.extractStringForColumnName(tableRow, I_EXP_ProcessorParameter.Table_Name + \".\" + I_EXP_ProcessorParameter.COLUMNNAME_Value);\n\n\t\tfinal I_EXP_ProcessorParameter expProcessorParameter = queryBL.createQueryBuilder(I_EXP_ProcessorParameter.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_EXP_ProcessorParameter.COLUMNNAME_EXP_Processor_ID, expProcessorId)\n\t\t\t\t.addEqualsFilter(I_EXP_ProcessorParameter.COLUMNNAME_Value, routingKeyParameterValue)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_EXP_ProcessorParameter.class);\n\n\t\tfinal Document export = pollDocumentFromQueue(expProcessorParameter.getParameterValue());\n\n\t\tfinal String invoicIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_EDI_cctop_invoic_v.COLUMNNAME_EDI_cctop_invoic_v_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\tinvoicTable.put(invoicIdentifier, export);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 95,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/MetasfreshToEDIRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "MetasfreshToEDIRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1567,
    "annotation": "\n\t@Then(\"RabbitMQ receives a EDI_Exp_Desadv\")",
    "glue_code": "\t@Then(\"RabbitMQ receives a EDI_Exp_Desadv\")\n\tpublic void rabbitMQ_receives_edi_exp_desadv(@NonNull final DataTable dataTable) throws IOException, ParserConfigurationException, InterruptedException, TimeoutException, SAXException\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal String processorIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_EXP_ProcessorParameter.COLUMNNAME_EXP_Processor_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tfinal Integer expProcessorId = expProcessorTable.getOptional(processorIdentifier)\n\t\t\t\t.map(I_EXP_Processor::getEXP_Processor_ID)\n\t\t\t\t.orElseGet(() -> Integer.parseInt(processorIdentifier));\n\n\t\tfinal String routingKeyParameterValue = DataTableUtil.extractStringForColumnName(tableRow, I_EXP_ProcessorParameter.Table_Name + \".\" + I_EXP_ProcessorParameter.COLUMNNAME_Value);\n\n\t\tfinal I_EXP_ProcessorParameter expProcessorParameter = queryBL.createQueryBuilder(I_EXP_ProcessorParameter.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_EXP_ProcessorParameter.COLUMNNAME_EXP_Processor_ID, expProcessorId)\n\t\t\t\t.addEqualsFilter(I_EXP_ProcessorParameter.COLUMNNAME_Value, routingKeyParameterValue)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_EXP_ProcessorParameter.class);\n\n\t\tfinal Document export = pollDocumentFromQueue(expProcessorParameter.getParameterValue());\n\n\t\tfinal String ediExpDesadvIdentifier = DataTableUtil.extractStringForColumnName(tableRow, \"EDI_Exp_Desadv_ID\" + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\tediExpDesadvTable.put(ediExpDesadvIdentifier, export);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 121,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/MetasfreshToEDIRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi",
      "filename": "MetasfreshToEDIRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1565,
    "annotation": "\n\t@Given(\"^update IMP_ProcessorParameter for the following IMP_Processor:(.*)$\")",
    "glue_code": "\t@Given(\"^update IMP_ProcessorParameter for the following IMP_Processor:(.*)$\")\n\tpublic void update_IMP_ProcessorParameters(@NonNull final String impProcessorIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_IMP_Processor impProcessor = impProcessorStepDefData.get(impProcessorIdentifier);\n\t\tassertThat(impProcessor).isNotNull();\n\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tupdateIMPProcessorParameters(row, impProcessor);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor/IMP_ProcessorParameter_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor",
      "filename": "IMP_ProcessorParameter_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1576,
    "annotation": "\n\t@Given(\"metasfresh contains IMP_Processor\")",
    "glue_code": "\t@Given(\"metasfresh contains IMP_Processor\")\n\tpublic void create_IMP_Processor(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcreateIMPProcessor(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor/IMP_Processor_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor",
      "filename": "IMP_Processor_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1577,
    "annotation": "\n\t@And(\"^after not more than (.*)s, import processor has started: (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, import processor has started: (.*)$\")\n\tpublic void startImpProcessor(final int timeoutSec, @NonNull final String importProcessorIdentifier) throws InterruptedException\n\t{\n\t\tfinal I_IMP_Processor impProcessor = impProcessorTable.get(importProcessorIdentifier);\n\t\tassertThat(impProcessor).isNotNull();\n\n\t\tfinal AdempiereProcessor adempiereProcessor = Services.get(IIMPProcessorBL.class).asAdempiereProcessor(impProcessor);\n\n\t\tfinal AdempiereServerMgr adempiereServerMgr = AdempiereServerMgr.get();\n\n\t\tif (adempiereServerMgr.getServer(adempiereProcessor.getServerID()) == null)\n\t\t{\n\t\t\tadempiereServerMgr.add(adempiereProcessor);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tadempiereServerMgr.start(adempiereProcessor.getServerID());\n\t\t}\n\n\t\tfinal Supplier<Boolean> isProcessorStarted = () ->\n\t\t{\n\t\t\tInterfaceWrapperHelper.refresh(impProcessor);\n\t\t\treturn impProcessor.getDateLastRun() != null;\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, isProcessorStarted);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor/IMP_Processor_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor",
      "filename": "IMP_Processor_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1583,
    "annotation": "\n\t@Given(\"load IMP_Processor_Type\")",
    "glue_code": "\t@Given(\"load IMP_Processor_Type\")\n\tpublic void load_IMP_Processor_Type(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tIMPProcessorType(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor/IMP_Processor_Type_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/edi/impprocessor",
      "filename": "IMP_Processor_Type_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1595,
    "annotation": "\n\t@Then(\"verify that S_ExternalReference was created\")",
    "glue_code": "\t@Then(\"verify that S_ExternalReference was created\")\n\tpublic void verifyExists(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> externalReferencesTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : externalReferencesTableList)\n\t\t{\n\t\t\tfinal String externalSystem = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, I_S_ExternalReference.COLUMNNAME_ExternalSystem);\n\t\t\tfinal String type = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, I_S_ExternalReference.COLUMNNAME_Type);\n\t\t\tfinal String externalReference = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, I_S_ExternalReference.COLUMNNAME_ExternalReference);\n\n\t\t\tfinal IQueryBuilder<I_S_ExternalReference> externalReferenceQueryBuilder = queryBL.createQueryBuilder(I_S_ExternalReference.class)\n\t\t\t\t\t.addEqualsFilter(I_S_ExternalReference.COLUMNNAME_ExternalSystem, externalSystem)\n\t\t\t\t\t.addEqualsFilter(I_S_ExternalReference.COLUMNNAME_Type, type)\n\t\t\t\t\t.addEqualsFilter(I_S_ExternalReference.COLUMNNAME_ExternalReference, externalReference);\n\n\t\t\tfinal I_S_ExternalReference externalReferenceRecord = externalReferenceQueryBuilder\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_S_ExternalReference.class);\n\n\t\t\tassertThat(externalReferenceRecord).as(\"S_ExternalReference with [ExternalSystem=%s, Type=%s, ExternalReference=%s]\", externalSystem, type, externalReference).isNotNull();\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String orgCodeIdentifier = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_S_ExternalReference.COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orgCodeIdentifier))\n\t\t\t{\n\t\t\t\tfinal int orgId = orgTable.get(orgCodeIdentifier).getAD_Org_ID();\n\n\t\t\t\tsoftly.assertThat(externalReferenceRecord.getAD_Org_ID()).as(\"AD_Org_ID for Identifier=%s\", orgCodeIdentifier).isEqualTo(orgId);\n\t\t\t}\n\n\t\t\tfinal Integer recordId = DataTableUtil.extractIntegerOrNullForColumnName(dataTableRow, \"OPT.\" + I_S_ExternalReference.COLUMNNAME_Referenced_Record_ID);\n\t\t\tif (recordId != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(externalReferenceRecord.getRecord_ID()).as(\"Record_ID\").isEqualTo(recordId);\n\t\t\t\tsoftly.assertThat(externalReferenceRecord.getReferenced_Record_ID()).as(\"Referenced_Record_ID\").isEqualTo(recordId);\n\t\t\t}\n\n\t\t\tfinal Boolean isReadOnlyInMetasfresh = DataTableUtil.extractBooleanForColumnNameOrNull(dataTableRow, \"OPT.\" + I_S_ExternalReference.COLUMNNAME_IsReadOnlyInMetasfresh);\n\t\t\tif (isReadOnlyInMetasfresh != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(externalReferenceRecord.isReadOnlyInMetasfresh()).as(\"IsReadOnlyInMetasfresh\").isEqualTo(isReadOnlyInMetasfresh);\n\t\t\t}\n\n\t\t\tfinal String externalReferenceURL = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_S_ExternalReference.COLUMNNAME_ExternalReferenceURL);\n\t\t\tif (externalReferenceURL != null)\n\t\t\t{\n\t\t\t\tif (NULL_STRING.equals(externalReferenceURL))\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(externalReferenceRecord.getExternalReferenceURL()).as(\"ExternalReferenceURL\").isNull();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(externalReferenceRecord.getExternalReferenceURL()).as(\"ExternalReferenceURL\").isEqualTo(externalReferenceURL);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfinal String externalSystemParentConfigId = DataTableUtil.extractStringOrNullForColumnName(dataTableRow, \"OPT.\" + I_S_ExternalReference.COLUMNNAME_ExternalSystem_Config_ID);\n\t\t\tif (externalSystemParentConfigId != null)\n\t\t\t{\n\t\t\t\tif (NULL_STRING.equals(externalSystemParentConfigId))\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(externalReferenceRecord.getExternalSystem_Config_ID()).as(\"ExternalSystem_Config_ID\").isLessThanOrEqualTo(0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(externalReferenceRecord.getExternalSystem_Config_ID()).as(\"ExternalSystem_Config_ID\").isEqualTo(Integer.parseInt(externalSystemParentConfigId));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 140,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference/S_ExternalReference_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference",
      "filename": "S_ExternalReference_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1596,
    "annotation": "\n\t@And(\"metasfresh contains S_ExternalReference:\")",
    "glue_code": "\t@And(\"metasfresh contains S_ExternalReference:\")\n\tpublic void add_S_ExternalReference(\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String externalSystemCode = DataTableUtil.extractStringForColumnName(row, I_S_ExternalReference.COLUMNNAME_ExternalSystem);\n\t\t\tfinal IExternalSystem externalSystemType = externalSystems.ofCode(externalSystemCode)\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"Unknown externalSystemCode\" + externalSystemCode));\n\n\t\t\tfinal String typeCode = DataTableUtil.extractStringForColumnName(row, I_S_ExternalReference.COLUMNNAME_Type);\n\t\t\tfinal IExternalReferenceType type = externalReferenceTypes.ofCode(typeCode)\n\t\t\t\t\t.orElseThrow(() -> new InvalidIdentifierException(\"type\", typeCode));\n\n\t\t\tfinal String externalReference = DataTableUtil.extractStringForColumnName(row, I_S_ExternalReference.COLUMNNAME_ExternalReference);\n\n\t\t\tfinal I_S_ExternalReference externalReferenceRecord = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_S_ExternalReference.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_S_ExternalReference.COLUMNNAME_ExternalReference, externalReference)\n\t\t\t\t\t\t\t.addEqualsFilter(I_S_ExternalReference.COLUMN_Type, type.getCode())\n\t\t\t\t\t\t\t.addEqualsFilter(I_S_ExternalReference.COLUMNNAME_ExternalSystem, externalSystemType.getCode())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyOrNull(I_S_ExternalReference.class),\n\t\t\t\t\t() -> newInstanceOutOfTrx(I_S_ExternalReference.class));\n\n\t\t\tassertThat(externalReferenceRecord).isNotNull();\n\n\t\t\texternalReferenceRecord.setExternalSystem(externalSystemType.getCode());\n\t\t\texternalReferenceRecord.setType(type.getCode());\n\t\t\texternalReferenceRecord.setExternalReference(externalReference);\n\n\t\t\tif (type.getCode().equals(ExternalUserReferenceType.USER_ID.getCode()))\n\t\t\t{\n\t\t\t\tfinal String userIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tassertThat(userIdentifier).isNotNull();\n\n\t\t\t\tfinal I_AD_User user = userTable.get(userIdentifier);\n\t\t\t\tassertThat(user).isNotNull();\n\n\t\t\t\texternalReferenceRecord.setRecord_ID(user.getAD_User_ID());\n\t\t\t}\n\t\t\telse if (type.getCode().equals(ShipperExternalReferenceType.SHIPPER.getCode()))\n\t\t\t{\n\t\t\t\tfinal String shipperIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_M_Shipper_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tassertThat(shipperIdentifier).isNotNull();\n\n\t\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\t\tassertThat(shipper).isNotNull();\n\n\t\t\t\texternalReferenceRecord.setRecord_ID(shipper.getM_Shipper_ID());\n\t\t\t}\n\t\t\telse if (type.getCode().equals(BPartnerExternalReferenceType.BPARTNER.getCode()))\n\t\t\t{\n\t\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tassertThat(bPartnerIdentifier).isNotNull();\n\n\t\t\t\tfinal I_C_BPartner bPartnerRecord = bpartnerTable.get(bPartnerIdentifier);\n\t\t\t\tassertThat(bPartnerIdentifier).isNotNull();\n\n\t\t\t\texternalReferenceRecord.setRecord_ID(bPartnerRecord.getC_BPartner_ID());\n\t\t\t\texternalReferenceRecord.setReferenced_Record_ID(bPartnerRecord.getC_BPartner_ID());\n\t\t\t}\n\t\t\telse if (type.getCode().equals(BPLocationExternalReferenceType.BPARTNER_LOCATION.getCode()))\n\t\t\t{\n\t\t\t\tfinal String bPartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tassertThat(bPartnerLocationIdentifier).isNotNull();\n\n\t\t\t\tfinal I_C_BPartner_Location bpartnerLocationRecord = bpLocationTable.get(bPartnerLocationIdentifier);\n\t\t\t\tassertThat(bpartnerLocationRecord).isNotNull();\n\n\t\t\t\texternalReferenceRecord.setRecord_ID(bpartnerLocationRecord.getC_BPartner_Location_ID());\n\t\t\t\texternalReferenceRecord.setReferenced_Record_ID(bpartnerLocationRecord.getC_BPartner_Location_ID());\n\t\t\t}\n\t\t\telse if (ProductExternalReferenceType.PRODUCT.getCode().equals(type.getCode()))\n\t\t\t{\n\t\t\t\tfinal String externalSystemConfigIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_ExternalSystem_Config_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(externalSystemConfigIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal int externalSystemConfigId = externalSystemConfigTable.getOptional(externalSystemConfigIdentifier)\n\t\t\t\t\t\t\t.map(I_ExternalSystem_Config::getExternalSystem_Config_ID)\n\t\t\t\t\t\t\t.orElseGet((() -> Integer.parseInt(externalSystemConfigIdentifier)));\n\n\t\t\t\t\texternalReferenceRecord.setExternalSystem_Config_ID(externalSystemConfigId);\n\t\t\t\t}\n\n\t\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tassertThat(productIdentifier).isNotNull();\n\n\t\t\t\tfinal int productId = productTable.getOptional(productIdentifier)\n\t\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\n\t\t\t\texternalReferenceRecord.setRecord_ID(productId);\n\t\t\t}\n\t\t\telse if (BPBankAccountType.BPBankAccount.getCode().equals(type.getCode()))\n\t\t\t{\n\t\t\t\tfinal String bpBankAccountIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_BP_BankAccount_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tassertThat(bpBankAccountIdentifier).isNotNull();\n\n\t\t\t\tfinal int bankAccountId = bankAccountTable.getOptional(bpBankAccountIdentifier)\n\t\t\t\t\t\t.map(I_C_BP_BankAccount::getC_BP_BankAccount_ID)\n\t\t\t\t\t\t.orElseGet(() -> Integer.parseInt(bpBankAccountIdentifier));\n\n\t\t\t\texternalReferenceRecord.setRecord_ID(bankAccountId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new AdempiereException(\"Unknown X_S_ExternalReference.Type! type:\" + typeCode);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(externalReferenceRecord);\n\n\t\t\tfinal String externalReferenceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_S_ExternalReference_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\texternalRefTable.put(externalReferenceIdentifier, externalReferenceRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 213,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference/S_ExternalReference_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference",
      "filename": "S_ExternalReference_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1597,
    "annotation": "\n\t@And(\"process external reference lookup endpoint response\")",
    "glue_code": "\t@And(\"process external reference lookup endpoint response\")\n\tpublic void process_external_reference_lookup_endpoint_response(\n\t\t\t@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\n\t\tfinal JsonExternalReferenceLookupResponse jsonExternalReferenceLookupResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonExternalReferenceLookupResponse.class);\n\t\tassertThat(jsonExternalReferenceLookupResponse).isNotNull();\n\t\tassertThat(jsonExternalReferenceLookupResponse.getItems()).isNotEmpty();\n\n\t\tfinal List<JsonExternalReferenceResponseItem> referenceItems = jsonExternalReferenceLookupResponse.getItems();\n\t\tfinal List<Map<String, String>> rows = table.asMaps();\n\n\t\tassertThat(referenceItems.size()).isEqualTo(rows.size());\n\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String expectedExternalReference = DataTableUtil.extractStringForColumnName(row, I_S_ExternalReference.COLUMNNAME_ExternalReference);\n\n\t\t\tfinal JsonExternalReferenceResponseItem item = Check.singleElement(referenceItems\n\t\t\t\t\t.stream()\n\t\t\t\t\t.filter(referenceItem -> referenceItem.getLookupItem().getExternalReference().equals(expectedExternalReference))\n\t\t\t\t\t.collect(ImmutableList.toImmutableList()));\n\n\t\t\tfinal String externalReferenceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_S_ExternalReference_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_S_ExternalReference externalReference = InterfaceWrapperHelper.load(item.getExternalReferenceId().getValue(), I_S_ExternalReference.class);\n\n\t\t\tassertThat(externalReference).isNotNull();\n\n\t\t\texternalRefTable.put(externalReferenceIdentifier, externalReference);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 330,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference/S_ExternalReference_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference",
      "filename": "S_ExternalReference_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1598,
    "annotation": "\n\t@And(\"the following S_ExternalReference is changed:\")",
    "glue_code": "\t@And(\"the following S_ExternalReference is changed:\")\n\tpublic void change_S_ExternalReference(\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String externalReferenceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_S_ExternalReference_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_S_ExternalReference externalReferenceRecord = externalRefTable.get(externalReferenceIdentifier);\n\n\t\t\tfinal String version = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_S_ExternalReference.COLUMNNAME_Version);\n\t\t\tif (Check.isNotBlank(version))\n\t\t\t{\n\t\t\t\texternalReferenceRecord.setVersion(version);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(externalReferenceRecord);\n\t\t\texternalRefTable.putOrReplace(externalReferenceIdentifier, externalReferenceRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 364,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference/S_ExternalReference_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference",
      "filename": "S_ExternalReference_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1599,
    "annotation": "\n\t@And(\"remove external reference if exists:\")",
    "glue_code": "\t@And(\"remove external reference if exists:\")\n\tpublic void remove_external_reference_if_exists(\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tremoveExternalReferenceIfExists(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 384,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference/S_ExternalReference_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalreference",
      "filename": "S_ExternalReference_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1582,
    "annotation": "\t@And(\"metasfresh contains ExternalSystem_Config_LeichMehl_ProductMapping:\")",
    "glue_code": "\tpublic void add_ExternalSystem_Config_LeichMehl_ProductMapping(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String externalSystemConfigLeichMehlProductMappingIdentifier = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_ExternalSystem_Config_LeichMehl_ProductMapping_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_M_Product_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal ProductId productId = ProductId.ofRepoId(productTable.get(productIdentifier).getM_Product_ID());\n\n\t\t\tfinal  String bPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_C_BPartner_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal BPartnerId bPartnerId = bPartnerIdentifier == null ? null : BPartnerId.ofRepoId(bPartnerTable.get(bPartnerIdentifier).getC_BPartner_ID());\n\n\t\t\tfinal PLUType pluType = PLUType.ofCodeOptional(DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_ExternalSystem_Config_LeichMehl.COLUMNNAME_CU_TU_PLU))\n\t\t\t\t\t.orElse(PLUType.CU);\n\t\t\t\n\t\t\tfinal I_ExternalSystem_Config_LeichMehl_ProductMapping productMapping = CoalesceUtil\n\t\t\t\t\t.coalesceSuppliers(() -> queryBL.createQueryBuilder(I_ExternalSystem_Config_LeichMehl_ProductMapping.class)\n\t\t\t\t\t\t\t\t\t\t\t   .addEqualsFilter(I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_M_Product_ID, productId)\n\t\t\t\t\t\t\t\t\t\t\t   .addEqualsFilter(I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_C_BPartner_ID, bPartnerId)\n\t\t\t\t\t\t\t\t\t\t\t   .addEqualsFilter(I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMN_CU_TU_PLU, pluType.getCode())\n\t\t\t\t\t\t\t\t\t\t\t   .create()\n\t\t\t\t\t\t\t\t\t\t\t   .firstOnly(I_ExternalSystem_Config_LeichMehl_ProductMapping.class),\n\t\t\t\t\t\t\t\t\t   () -> InterfaceWrapperHelper.newInstance(I_ExternalSystem_Config_LeichMehl_ProductMapping.class));\n\n\t\t\tassertThat(productMapping).isNotNull();\n\n\t\t\tproductMapping.setM_Product_ID(productId.getRepoId());\n\t\t\tproductMapping.setCU_TU_PLU(pluType.getCode());\n\t\t\tif(bPartnerId != null)\n\t\t\t{\n\t\t\t\tproductMapping.setC_BPartner_ID(bPartnerId.getRepoId());\n\t\t\t}\n\n\t\t\tfinal String leichMehlPluFileConfigGroupIdentifier = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_LeichMehl_PluFile_ConfigGroup_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal LeichMehlPluFileConfigGroupId leichMehlPluFileConfigGroupId = LeichMehlPluFileConfigGroupId.ofRepoId(leichMehlPluFileConfigGroupTable.get(leichMehlPluFileConfigGroupIdentifier).getLeichMehl_PluFile_ConfigGroup_ID());\n\t\t\tproductMapping.setLeichMehl_PluFile_ConfigGroup_ID(leichMehlPluFileConfigGroupId.getRepoId());\n\n\t\t\tfinal String pluFile = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Config_LeichMehl_ProductMapping.COLUMNNAME_PLU_File);\n\t\t\tproductMapping.setPLU_File(pluFile);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(productMapping);\n\t\t\texternalSystemConfigLeichMehlProductMappingTable.putOrReplace(externalSystemConfigLeichMehlProductMappingIdentifier, productMapping);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 68,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_LeichMehl_ProductMapping_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_LeichMehl_ProductMapping_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1584,
    "annotation": "\n\t@And(\"add external system parent-child pair\")",
    "glue_code": "\t@And(\"add external system parent-child pair\")\n\tpublic void new_externalSystemChild_is_created_if_missing(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tsaveExternalSystemConfig(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 106,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1585,
    "annotation": "\n\t@Then(\"a new metasfresh AD_PInstance_Log is stored for the external system {string} invocation\")",
    "glue_code": "\t@Then(\"a new metasfresh AD_PInstance_Log is stored for the external system {string} invocation\")\n\tpublic void new_metasfresh_ad_pinstance_log_is_stored_for_external_system_process(final String externalSystemCode) throws JSONException\n\t{\n\t\tfinal ExternalSystemType externalSystemType = ExternalSystemType.ofCode(externalSystemCode);\n\t\tfinal AdProcessId adProcessId =\n\t\t\t\tadProcessDAO.retrieveProcessIdByClassIfUnique(externalSystemType.getExternalSystemProcessClassName());\n\n\t\tfinal JSONObject result = new JSONObject(testContext.getApiResponse().getContent());\n\t\tfinal int pInstanceId = result.getInt(\"pinstanceID\");\n\n\t\tfinal I_AD_PInstance pInstance = instanceDAO.getById(PInstanceId.ofRepoId(pInstanceId));\n\n\t\tassertThat(pInstance).isNotNull();\n\t\tassertThat(pInstance.getAD_Process_ID()).isEqualTo(adProcessId.getRepoId());\n\n\t\tfinal List<ProcessInfoLog> processInfoLogs = instanceDAO.retrieveProcessInfoLogs(PInstanceId.ofRepoId(pInstance.getAD_PInstance_ID()));\n\n\t\tassertThat(processInfoLogs).isNotNull();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 116,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1586,
    "annotation": "\n\t@And(\"a new metasfresh AD_PInstance_Para is stored for the external system invocation\")",
    "glue_code": "\t@And(\"a new metasfresh AD_PInstance_Para is stored for the external system invocation\")\n\tpublic void new_metasfresh_ad_pinstance_para_is_stored_for_external_system_process(@NonNull final DataTable dataTable) throws JSONException\n\t{\n\t\tfinal JSONObject result = new JSONObject(testContext.getApiResponse().getContent());\n\t\tfinal int pInstanceId = result.getInt(\"pinstanceID\");\n\n\t\tfinal Map<String, I_AD_PInstance_Para> paramNameToParameter = queryBL.createQueryBuilder(I_AD_PInstance_Para.class)\n\t\t\t\t.addInArrayFilter(I_AD_PInstance_Para.COLUMNNAME_AD_PInstance_ID, pInstanceId)\n\t\t\t\t.create()\n\t\t\t\t.list()\n\t\t\t\t.stream()\n\t\t\t\t.collect(Collectors.toMap(I_AD_PInstance_Para::getParameterName, Function.identity()));\n\n\t\tassertThat(paramNameToParameter).isNotNull();\n\t\tassertThat(paramNameToParameter.size()).isGreaterThan(0);\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String key = DataTableUtil.extractStringForColumnName(row, \"param.key\");\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, \"param.value\");\n\n\t\t\tfinal I_AD_PInstance_Para parameter = paramNameToParameter.get(key);\n\t\t\tassertThat(parameter.getP_String()).isEqualTo(value);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 136,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1587,
    "annotation": "\n\t@And(\"deactivate ExternalSystem_Config\")",
    "glue_code": "\t@And(\"deactivate ExternalSystem_Config\")\n\tpublic void deactivate_ExternalSystem_Config(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String configIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_ExternalSystem_Config_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_ExternalSystem_Config parentConfig = configTable.get(configIdentifier);\n\t\t\tassertThat(parentConfig).isNotNull();\n\n\t\t\tparentConfig.setIsActive(false);\n\t\t\tsaveRecord(parentConfig);\n\n\t\t\tfinal ExternalSystemType externalSystemType = ExternalSystemType.ofCode(parentConfig.getType());\n\n\t\t\tswitch (externalSystemType)\n\t\t\t{\n\t\t\t\tcase RabbitMQ:\n\t\t\t\t\tfinal I_ExternalSystem_Config_RabbitMQ_HTTP configRabbitMQHttp = queryBL.createQueryBuilder(I_ExternalSystem_Config_RabbitMQ_HTTP.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_ExternalSystem_Config_RabbitMQ_HTTP.COLUMNNAME_ExternalSystem_Config_ID, parentConfig.getExternalSystem_Config_ID())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_ExternalSystem_Config_RabbitMQ_HTTP.class);\n\n\t\t\t\t\tconfigRabbitMQHttp.setIsActive(false);\n\t\t\t\t\tsaveRecord(configRabbitMQHttp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase GRSSignum:\n\t\t\t\t\tfinal I_ExternalSystem_Config_GRSSignum configGrsSignum = queryBL.createQueryBuilder(I_ExternalSystem_Config_GRSSignum.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_ExternalSystem_Config_GRSSignum.COLUMNNAME_ExternalSystem_Config_ID, parentConfig.getExternalSystem_Config_ID())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_ExternalSystem_Config_GRSSignum.class);\n\n\t\t\t\t\tconfigGrsSignum.setIsActive(false);\n\t\t\t\t\tsaveRecord(configGrsSignum);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Shopware6:\n\t\t\t\t\tfinal I_ExternalSystem_Config_Shopware6 configShopware = queryBL.createQueryBuilder(I_ExternalSystem_Config_Shopware6.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_ExternalSystem_Config_Shopware6.COLUMNNAME_ExternalSystem_Config_ID, parentConfig.getExternalSystem_Config_ID())\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_ExternalSystem_Config_Shopware6.class);\n\n\t\t\t\t\tconfigShopware.setIsActive(false);\n\t\t\t\t\tsaveRecord(configShopware);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow Check.fail(\"Unsupported IExternalSystemChildConfigId.type={}\", externalSystemType);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 163,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1588,
    "annotation": "\n\t@And(\"update ExternalSystem_Config\")",
    "glue_code": "\t@And(\"update ExternalSystem_Config\")\n\tpublic void update_ExternalSystem_Config(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String configIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_ExternalSystem_Config_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_ExternalSystem_Config externalSystemConfig = configTable.get(configIdentifier);\n\t\t\tassertThat(externalSystemConfig).isNotNull();\n\n\t\t\tfinal ExternalSystemType externalSystemType = ExternalSystemType.ofCode(externalSystemConfig.getType());\n\n\t\t\tif (externalSystemType == ExternalSystemType.Shopware6)\n\t\t\t{\n\t\t\t\tfinal I_ExternalSystem_Config_Shopware6 configShopware = queryBL.createQueryBuilder(I_ExternalSystem_Config_Shopware6.class)\n\t\t\t\t\t\t.addEqualsFilter(I_ExternalSystem_Config_Shopware6.COLUMNNAME_ExternalSystem_Config_ID, externalSystemConfig.getExternalSystem_Config_ID())\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.firstOnlyNotNull(I_ExternalSystem_Config_Shopware6.class);\n\n\t\t\t\tfinal BigDecimal percentageOfAvailableForSalesToSync = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_ExternalSystem_Config_Shopware6.COLUMNNAME_PercentageOfAvailableForSalesToSync);\n\n\t\t\t\tif (percentageOfAvailableForSalesToSync != null)\n\t\t\t\t{\n\t\t\t\t\tconfigShopware.setPercentageOfAvailableForSalesToSync(percentageOfAvailableForSalesToSync);\n\t\t\t\t}\n\n\t\t\t\tsaveRecord(configShopware);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow Check.fail(\"Unsupported IExternalSystemChildConfigId.type={}\", externalSystemType);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 213,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1589,
    "annotation": "\n\t@And(\"^add Other external system config with identifier: (.*)$\")",
    "glue_code": "\t@And(\"^add Other external system config with identifier: (.*)$\")\n\tpublic void add_other_sys_config(@NonNull final String configIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_ExternalSystem_Config externalSystemParentConfigRecord = createExternalSystemConfig(configIdentifier, ExternalSystemType.Other);\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Other_ConfigParameter.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Other_ConfigParameter.COLUMNNAME_Value);\n\n\t\t\tfinal I_ExternalSystem_Other_ConfigParameter otherConfigParam = InterfaceWrapperHelper.newInstance(I_ExternalSystem_Other_ConfigParameter.class);\n\t\t\totherConfigParam.setExternalSystem_Config_ID(externalSystemParentConfigRecord.getExternalSystem_Config_ID());\n\t\t\totherConfigParam.setName(name);\n\t\t\totherConfigParam.setValue(value);\n\t\t\totherConfigParam.setIsActive(true);\n\n\t\t\tsaveRecord(otherConfigParam);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 248,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1590,
    "annotation": "\n\t@And(\"^store endpointPath (.*) in context, resolving placeholder as ExternalSystem.value$\")",
    "glue_code": "\t@And(\"^store endpointPath (.*) in context, resolving placeholder as ExternalSystem.value$\")\n\tpublic void store_endpointPath_in_context(@NonNull String endpointPath)\n\t{\n\t\tfinal String regex = \".*(:[a-zA-Z]+)/?.*\";\n\n\t\tfinal Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);\n\t\tfinal Matcher matcher = pattern.matcher(endpointPath);\n\n\t\twhile (matcher.find())\n\t\t{\n\t\t\tfinal String externalSysConfigIdentifierGroup = matcher.group(1);\n\t\t\tfinal String externalSysConfigIdentifier = externalSysConfigIdentifierGroup.replace(\":\", \"\");\n\n\t\t\tfinal I_ExternalSystem_Config parentConfig = configTable.get(externalSysConfigIdentifier);\n\t\t\tassertThat(parentConfig).isNotNull();\n\n\t\t\tfinal ExternalSystemParentConfigId parentConfigId = ExternalSystemParentConfigId.ofRepoId(parentConfig.getExternalSystem_Config_ID());\n\t\t\tfinal ExternalSystemType systemType = ExternalSystemType.ofCode(parentConfig.getType());\n\n\t\t\tfinal IExternalSystemChildConfig childConfig = externalSystemConfigRepo.getChildByParentIdAndType(parentConfigId, systemType)\n\t\t\t\t\t.orElse(null);\n\n\t\t\tassertThat(childConfig).isNotNull();\n\n\t\t\tendpointPath = endpointPath.replace(externalSysConfigIdentifierGroup, childConfig.getValue());\n\n\t\t\ttestContext.setEndpointPath(endpointPath);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 268,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/ExternalSystem_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "ExternalSystem_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1606,
    "annotation": "\n\t@And(\"metasfresh contains LeichMehl_PluFile_ConfigGroup:\")",
    "glue_code": "\t@And(\"metasfresh contains LeichMehl_PluFile_ConfigGroup:\")\n\tpublic void add_LeichMehl_PluFile_ConfigGroup(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String leichMehlPluFileConfigGroupIdentifier = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_ConfigGroup.COLUMNNAME_LeichMehl_PluFile_ConfigGroup_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_ConfigGroup.COLUMNNAME_Name);\n\n\t\t\tfinal I_LeichMehl_PluFile_ConfigGroup pluFileConfigGroup = CoalesceUtil\n\t\t\t\t\t.coalesceSuppliers(() -> queryBL.createQueryBuilder(I_LeichMehl_PluFile_ConfigGroup.class)\n\t\t\t\t\t\t\t\t\t\t\t   .addEqualsFilter(I_LeichMehl_PluFile_ConfigGroup.COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t\t\t\t\t   .create()\n\t\t\t\t\t\t\t\t\t\t\t   .firstOnly(I_LeichMehl_PluFile_ConfigGroup.class),\n\t\t\t\t\t\t\t\t\t   () -> InterfaceWrapperHelper.newInstance(I_LeichMehl_PluFile_ConfigGroup.class));\n\n\t\t\tassertThat(pluFileConfigGroup).isNotNull();\n\n\t\t\tpluFileConfigGroup.setName(name);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(pluFileConfigGroup);\n\t\t\tleichMehlPluFileConfigGroupTable.putOrReplace(leichMehlPluFileConfigGroupIdentifier, pluFileConfigGroup);\n\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 52,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/LeichMehl_PluFile_ConfigGroup_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "LeichMehl_PluFile_ConfigGroup_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1610,
    "annotation": "\n\t@And(\"metasfresh contains LeichMehl_PluFile_Config:\")",
    "glue_code": "\t@And(\"metasfresh contains LeichMehl_PluFile_Config:\")\n\tpublic void add_LeichMehl_PluFile_Config(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String leichMehlPluFileConfigIdentifier = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_Config.COLUMNNAME_LeichMehl_PluFile_Config_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String leichMehlPluFileConfigGroupIdentifier = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_ConfigGroup.COLUMNNAME_LeichMehl_PluFile_ConfigGroup_ID\n\t\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal LeichMehlPluFileConfigGroupId leichMehlPluFileConfigGroupId = LeichMehlPluFileConfigGroupId.ofRepoId(leichMehlPluFileConfigGroupTable.get(leichMehlPluFileConfigGroupIdentifier).getLeichMehl_PluFile_ConfigGroup_ID());\n\n\t\t\tfinal String targetFieldName = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_Config.COLUMNNAME_TargetFieldName);\n\n\t\t\tfinal I_LeichMehl_PluFile_Config pluFileConfig = CoalesceUtil\n\t\t\t\t\t.coalesceSuppliers(() -> queryBL.createQueryBuilder(I_LeichMehl_PluFile_Config.class)\n\t\t\t\t\t\t\t\t\t\t\t   .addEqualsFilter(I_LeichMehl_PluFile_Config.COLUMNNAME_LeichMehl_PluFile_ConfigGroup_ID, leichMehlPluFileConfigGroupId)\n\t\t\t\t\t\t\t\t\t\t\t   .addEqualsFilter(I_LeichMehl_PluFile_Config.COLUMNNAME_TargetFieldName, targetFieldName)\n\t\t\t\t\t\t\t\t\t\t\t   .create()\n\t\t\t\t\t\t\t\t\t\t\t   .firstOnly(I_LeichMehl_PluFile_Config.class),\n\t\t\t\t\t\t\t\t\t   () -> InterfaceWrapperHelper.newInstance(I_LeichMehl_PluFile_Config.class));\n\n\t\t\tassertThat(pluFileConfig).isNotNull();\n\n\t\t\tpluFileConfig.setLeichMehl_PluFile_ConfigGroup_ID(leichMehlPluFileConfigGroupId.getRepoId());\n\t\t\tpluFileConfig.setTargetFieldName(targetFieldName);\n\n\t\t\tfinal String targetFieldType = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_Config.COLUMNNAME_TargetFieldType);\n\t\t\tpluFileConfig.setTargetFieldType(targetFieldType);\n\n\t\t\tfinal String replacement = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_Config.COLUMNNAME_Replacement);\n\t\t\tpluFileConfig.setReplacement(replacement);\n\n\t\t\tfinal String replacementRegexp = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_Config.COLUMNNAME_ReplaceRegExp);\n\t\t\tpluFileConfig.setReplaceRegExp(replacementRegexp);\n\n\t\t\tfinal String replacementSourceValue = DataTableUtil.extractStringForColumnName(row, I_LeichMehl_PluFile_Config.COLUMNNAME_ReplacementSource);\n\t\t\tfinal ReplacementSource replacementSource = ReplacementSource.valueOf(replacementSourceValue);\n\t\t\tpluFileConfig.setReplacementSource(replacementSource.getCode());\n\n\t\t\tInterfaceWrapperHelper.saveRecord(pluFileConfig);\n\t\t\tleichMehlPluFileConfigTable.putOrReplace(leichMehlPluFileConfigIdentifier, pluFileConfig);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/LeichMehl_PluFile_Config_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "LeichMehl_PluFile_Config_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1670,
    "annotation": "\n\t@And(\"RabbitMQ MF_TO_ExternalSystem queue is purged\")",
    "glue_code": "\t@And(\"RabbitMQ MF_TO_ExternalSystem queue is purged\")\n\tpublic void rabbitMQs_MF_TO_ExternalSystem_queue_is_purged() throws IOException, TimeoutException\n\t{\n\t\tfinal Connection connection = metasfreshToRabbitMQFactory.newConnection();\n\t\tfinal Channel channel = connection.createChannel();\n\t\tfinal AMQP.Queue.PurgeOk purgeOk = channel.queuePurge(QUEUE_NAME_MF_TO_ES);\n\t\tlogger.info(\"Purged {} messages from queue {}\", purgeOk.getMessageCount(), QUEUE_NAME_MF_TO_ES);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 133,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1671,
    "annotation": "\n\t@And(\"^after not more than (.*)s, RabbitMQ MF_TO_ExternalSystem queue has no messages for criteria:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, RabbitMQ MF_TO_ExternalSystem queue has no messages for criteria:$\")\n\tpublic void rabbitMQs_MF_TO_ExternalSystem_queue_is_empty(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable) throws IOException, TimeoutException, InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tpollRequestFromQueueExpectingNoResult(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 142,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1672,
    "annotation": "\n\t@Then(\"RabbitMQ receives a JsonExternalSystemRequest with the following external system config and bpartnerId as parameters:\")",
    "glue_code": "\t@Then(\"RabbitMQ receives a JsonExternalSystemRequest with the following external system config and bpartnerId as parameters:\")\n\tpublic void rabbitMQ_receives_an_external_system_request(@NonNull final DataTable dataTable) throws IOException, TimeoutException, InterruptedException\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_BPartner.COLUMNNAME_C_BPartner_ID + \".Identifier\");\n\t\tfinal String externalSystemConfigIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_ExternalSystem_Config_ID + \".Identifier\");\n\n\t\tfinal I_C_BPartner bpartner = bpartnerTable.get(bpartnerIdentifier);\n\t\tassertThat(bpartner).isNotNull();\n\n\t\tfinal I_ExternalSystem_Config externalSystemConfig = externalSystemConfigTable.get(externalSystemConfigIdentifier);\n\t\tassertThat(externalSystemConfig).isNotNull();\n\n\t\tfinal int numberOfMessages = 1;\n\n\t\tfinal List<JsonExternalSystemRequest> requests = pollRequestFromQueue(numberOfMessages,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  (jsonESRequest) -> isJsonExternalSystemRequestMatchingRows(dataTable, jsonESRequest));\n\t\tfinal JsonExternalSystemRequest requestToRabbitMQ = requests.get(0);\n\n\t\tassertThat(Integer.parseInt(requestToRabbitMQ.getParameters().get(PARAM_BPARTNER_ID)))\n\t\t\t\t.as(\"Wrong C_BPartner_ID in RabbitMQ request; identifier=%s; requests=%s\", bpartnerIdentifier, requestToRabbitMQ)\n\t\t\t\t.isEqualTo(bpartner.getC_BPartner_ID());\n\t\tassertThat(requestToRabbitMQ.getExternalSystemConfigId().getValue())\n\t\t\t\t.as(\"Wrong ExternalSystem_Config_ID in RabbitMQ request; identifier=%s; requests=%s\", externalSystemConfigIdentifier, requestToRabbitMQ)\n\t\t\t\t.isEqualTo(externalSystemConfig.getExternalSystem_Config_ID());\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 154,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1673,
    "annotation": "\n\t@Then(\"RabbitMQ receives a JsonExternalSystemRequest with the following external system config and parameter:\")",
    "glue_code": "\t@Then(\"RabbitMQ receives a JsonExternalSystemRequest with the following external system config and parameter:\")\n\tpublic void rabbitMQ_receives_an_external_system_request_param(@NonNull final DataTable dataTable) throws IOException, TimeoutException, InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\n\t\tfinal int numberOfMessages = tableRows.size();\n\n\t\tfinal List<JsonExternalSystemRequest> requests = pollRequestFromQueue(numberOfMessages,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  (jsonESRequest) -> isJsonExternalSystemRequestMatchingRows(dataTable, jsonESRequest));\n\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String externalSystemConfigIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_ExternalSystem_Config_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_ExternalSystem_Config externalSystemConfig = externalSystemConfigTable.get(externalSystemConfigIdentifier);\n\t\t\tassertThat(externalSystemConfig).isNotNull();\n\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(huIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\t\t\t\tassertThat(hu).isNotNull();\n\n\t\t\t\tcheckExistingJsonExternalSystemRequestForHu(requests, externalSystemConfig, hu);\n\t\t\t}\n\n\t\t\tfinal String expectedJsonExternalReferenceLookupRequest = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.parameters.JsonExternalReferenceLookupRequest\");\n\t\t\tif (EmptyUtil.isNotBlank(expectedJsonExternalReferenceLookupRequest))\n\t\t\t{\n\t\t\t\tfinal JsonExternalReferenceLookupRequest expectedRequest = objectMapper.readValue(expectedJsonExternalReferenceLookupRequest, JsonExternalReferenceLookupRequest.class);\n\n\t\t\t\tcheckExistingJsonExternalSystemRequestForExternalLookupRequest(requests, externalSystemConfig, expectedRequest);\n\t\t\t}\n\n\t\t\tfinal String bpIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.parameters\" + I_C_BPartner.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpIdentifier);\n\t\t\t\tassertThat(bPartner).isNotNull();\n\n\t\t\t\tcheckExistingJsonExternalSystemRequestForBPartner(requests, externalSystemConfig, bPartner);\n\t\t\t}\n\n\t\t\tfinal String expectedJsonAvailableStockParam = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + PARAM_JSON_AVAILABLE_FOR_SALES);\n\n\t\t\tif (Check.isNotBlank(expectedJsonAvailableStockParam))\n\t\t\t{\n\t\t\t\tcheckExistingJsonExternalSystemRequestForJsonAvailableForSales(requests, externalSystemConfig, expectedJsonAvailableStockParam);\n\t\t\t}\n\n\t\t\tfinal String ppOrderIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(ppOrderIdentifier))\n\t\t\t{\n\t\t\t\tvalidateExportPPOrderWithPLUFile(ppOrderIdentifier, requests, externalSystemConfig, tableRow);\n\t\t\t}\n\n\t\t\tfinal String projectIdentifier =  DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.parameters.\" + I_C_Project.COLUMNNAME_C_Project_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(projectIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Project project = projectTable.get(projectIdentifier);\n\t\t\t\tassertThat(project).isNotNull();\n\n\t\t\t\tcheckExistingJsonExternalSystemRequestForProject(requests, externalSystemConfig, project);\n\t\t\t}\n\n\t\t\tfinal String expectedRawParams = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"JsonExternalSystemRequest.parameters.RAW\");\n\t\t\tif (Check.isNotBlank(expectedRawParams))\n\t\t\t{\n\t\t\t\tcheckExistingJsonExternalSystemRequestForRawParams(expectedRawParams, externalSystemConfig, requests);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 181,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem",
      "filename": "MetasfreshToExternalSystemRabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1644,
    "annotation": "\n\t@And(\"Custom_ExternalSystem_To_Metasfresh queue receives an JsonExternalSystemMessage request\")",
    "glue_code": "\t@And(\"Custom_ExternalSystem_To_Metasfresh queue receives an JsonExternalSystemMessage request\")\n\tpublic void send_JsonExternalSystemMessage(@NonNull final DataTable dataTable) throws IOException, TimeoutException\n\t{\n\t\tfinal ImmutableList.Builder<String> messageCollector = ImmutableList.builder();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal JsonExternalSystemMessageType externalSystemMessageType = JsonExternalSystemMessageType.valueOf(DataTableUtil.extractStringForColumnName(row, \"JsonExternalSystemMessage.type\"));\n\n\t\t\tfinal JsonExternalSystemMessage message = JsonExternalSystemMessage.builder()\n\t\t\t\t\t.type(externalSystemMessageType)\n\t\t\t\t\t.build();\n\n\t\t\tmessageCollector.add(objectMapper.writeValueAsString(message));\n\t\t}\n\n\t\ttry (final Connection connection = externalSystemsAuthorizationFactory.newConnection())\n\t\t{\n\t\t\tfinal Channel channel = connection.createChannel();\n\t\t\tfinal AMQP.BasicProperties properties = new AMQP.BasicProperties.Builder()\n\t\t\t\t\t.contentEncoding(StandardCharsets.UTF_8.displayName())\n\t\t\t\t\t.contentType(MessageProperties.CONTENT_TYPE_JSON)\n\t\t\t\t\t.build();\n\n\t\t\tfor (final String message : messageCollector.build())\n\t\t\t{\n\t\t\t\tchannel.basicPublish(\"\", QUEUE_NAME_ES_TO_MF_CUSTOM, properties, message.getBytes());\n\t\t\t\tlogger.info(\"Sent on queue '\" + QUEUE_NAME_ES_TO_MF_CUSTOM + \"': message= '\" + message + \"'\");\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 85,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/authorization/ExternalSystem_Authorization_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/authorization",
      "filename": "ExternalSystem_Authorization_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1645,
    "annotation": "\n\t@Then(\"^metasfresh replies on Custom_Metasfresh_To_ExternalSystem queue with JsonExternalSystemMessagePayload (.*)$\")",
    "glue_code": "\t@Then(\"^metasfresh replies on Custom_Metasfresh_To_ExternalSystem queue with JsonExternalSystemMessagePayload (.*)$\")\n\tpublic void validate_authorization_token_obtained(@NonNull final String authToken) throws InterruptedException, IOException, TimeoutException\n\t{\n\t\tfinal JsonExternalSystemMessage message = receiveRequest();\n\n\t\tassertThat(message).isNotNull();\n\t\tassertThat(message.getPayload()).isNotBlank();\n\n\t\tfinal JsonExternalSystemMessagePayload messagePayload = objectMapper.readValue(message.getPayload(), JsonExternalSystemMessagePayload.class);\n\n\t\tassertThat(messagePayload).isNotNull();\n\t\tassertThat(messagePayload.getAuthToken()).isNotBlank();\n\t\tassertThat(messagePayload.getAuthToken()).isEqualTo(authToken);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 117,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/authorization/ExternalSystem_Authorization_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/authorization",
      "filename": "ExternalSystem_Authorization_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1646,
    "annotation": "\n\t@Then(\"^metasfresh replies on Custom_Metasfresh_To_ExternalSystem queue with authToken from (.*)$\")",
    "glue_code": "\t@Then(\"^metasfresh replies on Custom_Metasfresh_To_ExternalSystem queue with authToken from (.*)$\")\n\tpublic void validate_authorization_token(@NonNull final String adUserAuthTokenIdentifier) throws InterruptedException, IOException, TimeoutException\n\t{\n\t\tfinal I_AD_User_AuthToken userAuthToken = userAuthTokenTable.get(adUserAuthTokenIdentifier);\n\t\tassertThat(userAuthToken).isNotNull();\n\n\t\tfinal JsonExternalSystemMessage message = receiveRequest();\n\n\t\tassertThat(message).isNotNull();\n\t\tassertThat(message.getPayload()).isNotBlank();\n\n\t\tfinal JsonExternalSystemMessagePayload messagePayload = objectMapper.readValue(message.getPayload(), JsonExternalSystemMessagePayload.class);\n\n\t\tassertThat(messagePayload).isNotNull();\n\t\tassertThat(messagePayload.getAuthToken()).isNotBlank();\n\t\tassertThat(messagePayload.getAuthToken()).isEqualTo(userAuthToken.getAuthToken());\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 132,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/authorization/ExternalSystem_Authorization_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/externalsystem/authorization",
      "filename": "ExternalSystem_Authorization_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1667,
    "annotation": "\n\t@And(\"^after not more than (.*)s, Fact_Acct are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, Fact_Acct are found$\")\n\tpublic void find_Fact_Accts(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal List<I_Fact_Acct> factAcctRecords = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> load_Fact_Acct(row));\n\n\t\t\trow.getAsOptionalIdentifier(I_M_SectionCode.COLUMNNAME_M_SectionCode_ID)\n\t\t\t\t\t.ifPresent(sectionCodeIdentifier -> {\n\t\t\t\t\t\tfinal I_M_SectionCode sectionCode = sectionCodeTable.get(sectionCodeIdentifier);\n\t\t\t\t\t\tfinal boolean allFactAcctRecordsMatch = factAcctRecords.stream()\n\t\t\t\t\t\t\t\t.allMatch(factAcct -> sectionCode.getM_SectionCode_ID() == factAcct.getM_SectionCode_ID());\n\n\t\t\t\t\t\tsoftly.assertThat(allFactAcctRecordsMatch).isTrue();\n\t\t\t\t\t});\n\n\t\t\trow.getAsOptionalString(I_Fact_Acct.COLUMNNAME_PostingType)\n\t\t\t\t\t.ifPresent(postingType -> {\n\t\t\t\t\t\tfinal PostingType type = PostingType.valueOf(postingType);\n\n\t\t\t\t\t\tfinal boolean allFactAcctRecordsMatchPostingType = factAcctRecords.stream()\n\t\t\t\t\t\t\t\t.allMatch(factAcct -> factAcct.getPostingType().equals(type.getCode()));\n\t\t\t\t\t\tsoftly.assertThat(allFactAcctRecordsMatchPostingType).isTrue();\n\t\t\t\t\t});\n\n\t\t\trow.getAsOptionalIdentifier(I_Fact_Acct.COLUMNNAME_C_Project_ID)\n\t\t\t\t\t.ifPresent(projectIdentifier ->\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Project project = projectTable.get(projectIdentifier);\n\n\t\t\t\t\t\tfinal boolean allFactAcctRecordsMatchProjectId = factAcctRecords.stream()\n\t\t\t\t\t\t\t\t.allMatch(factAcct -> project.getC_Project_ID() == factAcct.getC_Project_ID());\n\t\t\t\t\t\tsoftly.assertThat(allFactAcctRecordsMatchProjectId).isTrue();\n\t\t\t\t\t});\n\n\t\t\trow.getAsOptionalIdentifier(I_Fact_Acct.COLUMNNAME_C_Activity_ID)\n\t\t\t\t\t.ifPresent(activityIdentifier ->\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_Activity activity = activityTable.get(activityIdentifier);\n\n\t\t\t\t\t\tfinal boolean allFactAcctRecordsMatchProjectId = factAcctRecords.stream()\n\t\t\t\t\t\t\t\t.allMatch(factAcct -> activity.getC_Activity_ID() == factAcct.getC_Activity_ID());\n\t\t\t\t\t\tsoftly.assertThat(allFactAcctRecordsMatchProjectId).isTrue();\n\t\t\t\t\t});\n\n\t\t\tsoftly.assertAll();\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 126,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/factacct/Fact_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/factacct",
      "filename": "Fact_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1668,
    "annotation": "\n\t@And(\"^after not more than (.*)s, the (invoice|matchInvoice|inout|shippingNotification) document with identifier (.*) has the following accounting records:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, the (invoice|matchInvoice|inout|shippingNotification) document with identifier (.*) has the following accounting records:$\")\n\tpublic void find_Fact_Acct(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String tableType,\n\t\t\t@NonNull final String identifier,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal TableRecordReference recordRef = getTableRecordReference(tableType, identifier);\n\n\t\tDataTableRows.of(dataTable).forEach((row) -> findFactAcct(recordRef, row, timeoutSec));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 176,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/factacct/Fact_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/factacct",
      "filename": "Fact_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1669,
    "annotation": "\n\t@And(\"^fact account repost (invoice|matchInvoice) document with identifier (.*):$\")",
    "glue_code": "\t@And(\"^fact account repost (invoice|matchInvoice) document with identifier (.*):$\")\n\tpublic void repost_document(\n\t\t\t@NonNull final String documentType,\n\t\t\t@NonNull final String identifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> repostDocument(row, documentType, identifier));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/factacct/Fact_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/factacct",
      "filename": "Fact_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1625,
    "annotation": "\n\t@And(\"create final invoice\")",
    "glue_code": "\t@And(\"create final invoice\")\n\tpublic void create_finalInvoice(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tcreateFinalInvoice(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/finalinvoice/C_ModularFinalInvoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/finalinvoice",
      "filename": "C_ModularFinalInvoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1626,
    "annotation": "\n\t@And(\"create definitive invoice\")",
    "glue_code": "\t@And(\"create definitive invoice\")\n\tpublic void create_definitiveInvoice(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tcreateDefinitiveInvoice(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/finalinvoice/C_ModularFinalInvoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/finalinvoice",
      "filename": "C_ModularFinalInvoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1607,
    "annotation": "\n\t@Given(\"metasfresh contains M_ForecastLines:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_ForecastLines:\")\n\tpublic void metasfresh_contains_m_forecast_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_ForecastLine.COLUMNNAME_M_Forecast_ID)\n\t\t\t\t.forEach(tableRow -> {\n\t\t\t\t\tfinal I_M_ForecastLine forecastLine = newInstance(I_M_ForecastLine.class);\n\n\t\t\t\t\tfinal ForecastId forecastId = tableRow.getAsIdentifier(I_M_ForecastLine.COLUMNNAME_M_Forecast_ID).lookupIdIn(forecastTable);\n\t\t\t\t\t\n\t\t\t\t\tfinal StepDefDataIdentifier productIdentifier = tableRow.getAsIdentifier(COLUMNNAME_M_Product_ID);\n\t\t\t\t\tfinal ProductId productId = productTable.getIdOptional(productIdentifier)\n\t\t\t\t\t\t\t.orElseGet(() -> productIdentifier.getAsId(ProductId.class));\n\n\t\t\t\t\tfinal StepDefDataIdentifier warehouseIdentifier = tableRow.getAsIdentifier(COLUMNNAME_M_Warehouse_ID);\n\t\t\t\t\tfinal int warehouseId = warehouseTable.getOptional(warehouseIdentifier)\n\t\t\t\t\t\t\t.map(I_M_Warehouse::getM_Warehouse_ID)\n\t\t\t\t\t\t\t.orElseGet(warehouseIdentifier::getAsInt);\n\t\t\t\t\t\n\t\t\t\t\tfinal String uomX12DE355 = tableRow.getAsString(I_M_ForecastLine.COLUMNNAME_C_UOM_ID + \".\" + I_C_UOM.COLUMNNAME_X12DE355);\n\t\t\t\t\tfinal UomId uomId = queryBL.createQueryBuilder(I_C_UOM.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_C_UOM.COLUMNNAME_X12DE355, uomX12DE355)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstIdOnly(UomId::ofRepoIdOrNull);\n\t\t\t\t\tassertThat(uomId).as(\"Found no C_UOM with X12DE355=%s\", uomX12DE355).isNotNull();\n\n\t\t\t\t\tforecastLine.setM_Forecast_ID(forecastId.getRepoId());\n\t\t\t\t\tforecastLine.setM_Product_ID(productId.getRepoId());\n\t\t\t\t\tforecastLine.setQty(tableRow.getAsBigDecimal(I_M_ForecastLine.COLUMNNAME_Qty));\n\t\t\t\t\tforecastLine.setM_Warehouse_ID(warehouseId);\n\t\t\t\t\tforecastLine.setC_UOM_ID(UomId.toRepoId(uomId));\n\t\t\t\t\t\n\t\t\t\t\tsaveRecord(forecastLine);\n\t\t\t\t});\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/forecast/M_ForecastLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/forecast",
      "filename": "M_ForecastLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1640,
    "annotation": "\n\t@Given(\"metasfresh contains M_Forecasts:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Forecasts:\")\n\tpublic void metasfresh_contains_m_forecasts(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Forecast_ID)\n\t\t\t\t.forEach(tableRow -> {\n\t\t\t\t\tfinal ValueAndName valueAndName = tableRow.suggestValueAndName();\n\t\t\t\t\tfinal Timestamp datePromised = tableRow.getAsInstantTimestamp(I_M_Forecast.COLUMNNAME_DatePromised);\n\t\t\t\t\tfinal I_M_Forecast forecastRecord = newInstance(I_M_Forecast.class);\n\n\t\t\t\t\tforecastRecord.setName(valueAndName.getName());\n\t\t\t\t\tforecastRecord.setDatePromised(datePromised);\n\n\t\t\t\t\tfinal StepDefDataIdentifier warehouseIdentifier = tableRow.getAsIdentifier(COLUMNNAME_M_Warehouse_ID);\n\t\t\t\t\tfinal int warehouseId = warehouseTable.getOptional(warehouseIdentifier)\n\t\t\t\t\t\t\t.map(I_M_Warehouse::getM_Warehouse_ID)\n\t\t\t\t\t\t\t.orElseGet(warehouseIdentifier::getAsInt);\n\n\t\t\t\t\tforecastRecord.setM_Warehouse_ID(warehouseId);\n\n\t\t\t\t\tsaveRecord(forecastRecord);\n\n\t\t\t\t\tforecastTable.putOrReplace(tableRow.getAsIdentifier(), forecastRecord);\n\t\t\t\t});\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/forecast/M_Forecast_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/forecast",
      "filename": "M_Forecast_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1641,
    "annotation": "\n\t@And(\"^the forecast identified by (.*) is (reactivated|completed|closed|voided|reversed)$\")",
    "glue_code": "\t@And(\"^the forecast identified by (.*) is (reactivated|completed|closed|voided|reversed)$\")\n\tpublic void forecast_action(@NonNull final String forecastIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_M_Forecast forecast = forecastTable.get(forecastIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase reactivated:\n\t\t\t\tforecast.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(forecast, IDocument.ACTION_ReActivate, IDocument.STATUS_InProgress);\n\t\t\t\tlogger.info(\"Forecast {} was reactivated\", forecast);\n\t\t\t\tbreak;\n\t\t\tcase completed:\n\t\t\t\tforecast.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(forecast, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tlogger.info(\"Forecast {} was completed\", forecast);\n\t\t\t\tbreak;\n\t\t\tcase closed:\n\t\t\t\tforecast.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(forecast, IDocument.ACTION_Close, IDocument.STATUS_Closed);\n\t\t\t\tbreak;\n\t\t\tcase voided:\n\t\t\t\tforecast.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(forecast, IDocument.ACTION_Void, IDocument.STATUS_Voided);\n\t\t\t\tbreak;\n\t\t\tcase reversed:\n\t\t\t\tforecast.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(forecast, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled M_Forecast action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/forecast/M_Forecast_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/forecast",
      "filename": "M_Forecast_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1620,
    "annotation": "\n\t@And(\"M_HU_Attribute is changed\")",
    "glue_code": "\t@And(\"M_HU_Attribute is changed\")\n\tpublic void m_hu_attribute_is_changed(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tchangeHUAttribute(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 85,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1621,
    "annotation": "\n\t@And(\"M_HU_Attribute is validated\")",
    "glue_code": "\t@And(\"M_HU_Attribute is validated\")\n\tpublic void validate_m_hu_attribute(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::validateHUAttribute);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 94,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1622,
    "annotation": "\n\t@And(\"update M_HU_Attribute recursive:\")",
    "glue_code": "\t@And(\"update M_HU_Attribute recursive:\")\n\tpublic void update_M_HU_Attribute_recursive(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_Attribute.COLUMNNAME_M_HU_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\n\t\t\tfinal String attributeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_Attribute.COLUMNNAME_M_Attribute_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Attribute attribute = attributeTable.get(attributeIdentifier);\n\n\t\t\tfinal BigDecimal valueNumber = DataTableUtil.extractBigDecimalForColumnName(row, \"OPT.\" + I_M_HU_Attribute.COLUMNNAME_ValueNumber);\n\n\t\t\thuAttributesBL.updateHUAttributeRecursive(HuId.ofRepoId(hu.getM_HU_ID()), AttributeCode.ofString(attribute.getValue()), valueNumber, null);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 100,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1623,
    "annotation": "\n\t@And(\"update M_HU_Attribute:\")",
    "glue_code": "\t@And(\"update M_HU_Attribute:\")\n\tpublic void update_M_HU_Attribute(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tupdateHuAttribute(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 118,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1633,
    "annotation": "\n\t@And(\"create material receipt and the following exception is thrown\")",
    "glue_code": "\t@And(\"create material receipt and the following exception is thrown\")\n\tpublic void create_materialReceipt_expect_exception(@NonNull final DataTable dataTable)\n\t{\n\t\ttry\n\t\t{\n\t\t\tcreate_materialReceipt(dataTable);\n\t\t\tassertThat(1).as(\"An Exception should have been thrown !\").isEqualTo(2);\n\t\t}\n\t\tcatch (final AdempiereException exception)\n\t\t{\n\t\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\t\t\tfinal String errorCode = DataTableUtil.extractStringForColumnName(tableRow, \"ErrorCode\");\n\n\t\t\tassertThat(exception.getErrorCode()).as(\"ErrorCode of %s\", exception).isEqualTo(errorCode);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 106,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_CreateReceipt_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_CreateReceipt_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1634,
    "annotation": "\n\t@And(\"create material receipt\")",
    "glue_code": "\t@And(\"create material receipt\")\n\tpublic void create_materialReceipt(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, I_M_HU.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String huListIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.HUList.\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tassertThat(huIdentifier != null /*XOR*/ ^ huListIdentifier != null).isEqualTo(true);\n\n\t\t\tfinal Set<HuId> huIdSet;\n\t\t\tif (huIdentifier != null)\n\t\t\t{\n\t\t\t\thuIdSet = ImmutableSet.of(HuId.ofRepoId(huTable.get(huIdentifier).getM_HU_ID()));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tassertThat(huListIdentifier).isNotBlank();\n\n\t\t\t\thuIdSet = huListTable.get(huListIdentifier)\n\t\t\t\t\t\t.stream()\n\t\t\t\t\t\t.map(I_M_HU::getM_HU_ID)\n\t\t\t\t\t\t.map(HuId::ofRepoId)\n\t\t\t\t\t\t.collect(ImmutableSet.toImmutableSet());\n\t\t\t}\n\n\t\t\tfinal String receiptScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ReceiptSchedule.COLUMNNAME_M_ReceiptSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ReceiptSchedule receiptSchedule = receiptScheduleTable.get(receiptScheduleIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(receiptSchedule);\n\n\t\t\tfinal Timestamp movementDate = DataTableUtil.extractDateTimestampForColumnNameOrNull(row, \"OPT.\" + I_M_InOut.COLUMNNAME_MovementDate);\n\t\t\tfinal ReceiptMovementDateRule currentDate = movementDate == null ? ReceiptMovementDateRule.CURRENT_DATE : ReceiptMovementDateRule.fixedDate(movementDate.toInstant());\n\t\t\tfinal IHUReceiptScheduleBL.CreateReceiptsParameters parameters = IHUReceiptScheduleBL.CreateReceiptsParameters.builder()\n\t\t\t\t\t.movementDateRule(currentDate)\n\t\t\t\t\t.ctx(Env.getCtx())\n\t\t\t\t\t.receiptSchedules(ImmutableList.of(receiptSchedule))\n\t\t\t\t\t.selectedHuIds(huIdSet)\n\t\t\t\t\t.build();\n\n\t\t\tfinal InOutGenerateResult inOutGenerateResult = huReceiptScheduleBL.processReceiptSchedules(parameters);\n\t\t\tassertThat(inOutGenerateResult).isNotNull();\n\t\t\tassertThat(inOutGenerateResult.getInOuts()).isNotEmpty();\n\t\t\tassertThat(inOutGenerateResult.getInOuts().size()).isEqualTo(1);\n\n\t\t\tfinal de.metas.inout.model.I_M_InOut inOut = inOutGenerateResult.getInOuts().get(0);\n\n\t\t\tfinal I_M_InOut huInOut = load(inOut.getM_InOut_ID(), I_M_InOut.class);\n\t\t\tassertThat(huInOut).isNotNull();\n\n\t\t\tfinal String inoutIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinOutTable.putOrReplace(inoutIdentifier, huInOut);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 123,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_CreateReceipt_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_CreateReceipt_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1635,
    "annotation": "\n\t@And(\"^validate the created receipt lines\")",
    "glue_code": "\t@And(\"^validate the created receipt lines\")\n\tpublic void validate_created_M_InOutLine(@NonNull final DataTable table)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringForColumnName(row, \"M_InOut_ID.Identifier\");\n\n\t\t\tfinal org.compiere.model.I_M_InOut shipmentRecord = inOutTable.get(shipmentIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedProductId = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\n\t\t\t//dev-note: we assume the tests are not using the same product on different lines\n\t\t\tfinal IQueryBuilder<I_M_InOutLine> lineQueryBuilder = queryBL.createQueryBuilder(I_M_InOutLine.class)\n\t\t\t\t\t.addEqualsFilter(I_M_InOutLine.COLUMNNAME_M_InOut_ID, shipmentRecord.getM_InOut_ID())\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_Product_ID, expectedProductId);\n\n\t\t\tfinal I_M_InOutLine receiptLineRecord = lineQueryBuilder\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_InOutLine.class);\n\n\t\t\tfinal String flatrateTermIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_ModCntr_Log.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(flatrateTermIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Flatrate_Term flatrateTermRecord = flatrateTermTable.get(flatrateTermIdentifier);\n\t\t\t\tsoftly.assertThat(receiptLineRecord.getC_Flatrate_Term_ID()).as(I_M_InOutLine.COLUMNNAME_C_Flatrate_Term_ID).isEqualTo(flatrateTermRecord.getC_Flatrate_Term_ID());\n\t\t\t}\n\n\t\t\tfinal String harvestingCalendarIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_InOutLine.COLUMNNAME_C_Harvesting_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (de.metas.common.util.Check.isNotBlank(harvestingCalendarIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Calendar harvestingCalendarRecord = calendarTable.get(harvestingCalendarIdentifier);\n\t\t\t\tsoftly.assertThat(receiptLineRecord.getC_Harvesting_Calendar_ID()).as(\"C_Harvesting_Calendar_ID\").isEqualTo(harvestingCalendarRecord.getC_Calendar_ID());\n\t\t\t}\n\n\t\t\tfinal String harvestingYearIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_InOutLine.COLUMNNAME_Harvesting_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (de.metas.common.util.Check.isNotBlank(harvestingYearIdentifier))\n\t\t\t{\n\t\t\t\tfinal String harvestingYearIdentifierValue = DataTableUtil.nullToken2Null(harvestingYearIdentifier);\n\t\t\t\tif (harvestingYearIdentifierValue == null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(receiptLineRecord.getHarvesting_Year_ID()).as(\"Harvesting_Year_ID\").isNull();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Year harvestingYearRecord = yearTable.get(harvestingYearIdentifier);\n\t\t\t\t\tsoftly.assertThat(receiptLineRecord.getHarvesting_Year_ID()).as(\"Harvesting_Year_ID\").isEqualTo(harvestingYearRecord.getC_Year_ID());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t\tfinal String shipmentLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOutLine.COLUMNNAME_M_InOutLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\treceiptLineTable.putOrReplace(shipmentLineIdentifier, receiptLineRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 178,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_CreateReceipt_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_CreateReceipt_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1613,
    "annotation": "\n\t@And(\"receive HUs for PP_Order with M_HU_LUTU_Configuration:\")",
    "glue_code": "\t@And(\"receive HUs for PP_Order with M_HU_LUTU_Configuration:\")\n\tpublic void create_M_HU_LUTU_Configuration_for_pp_order(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(tableRow -> {\n\t\t\tfinal String ppOrderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order ppOrder = ppOrderTable.get(ppOrderIdentifier);\n\n\t\t\tfinal de.metas.handlingunits.model.I_PP_Order huPPOrder = InterfaceWrapperHelper.load(ppOrder.getPP_Order_ID(), de.metas.handlingunits.model.I_PP_Order.class);\n\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfiguration = PPOrderDocumentLUTUConfigurationHandlerTestHelper.createNewLUTUConfiguration(huPPOrder);\n\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfig = computeLUTUConfiguration(lutuConfiguration, tableRow);\n\n\t\t\tfinal ZonedDateTime movementDate = tableRow.getAsOptionalInstant(\"MovementDate\")\n\t\t\t\t\t.orElseGet(SystemTime::asInstant)\n\t\t\t\t\t.atZone(SystemTime.zoneId());\n\n\t\t\tfinal List<I_M_HU> hus = huPPOrderBL.receivingMainProduct(PPOrderId.ofRepoId(ppOrder.getPP_Order_ID()))\n\t\t\t\t\t.packUsingLUTUConfiguration(lutuConfig)\n\t\t\t\t\t.movementDate(movementDate)\n\t\t\t\t\t.createDraftReceiptCandidatesAndPlanningHUs();\n\n\t\t\tassertThat(hus).isNotNull();\n\t\t\tassertThat(hus.size()).isEqualTo(1);\n\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_HU.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\thuTable.putOrReplace(huIdentifier, hus.get(0));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 102,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_LUTU_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_LUTU_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1614,
    "annotation": "\n\t@And(\"create M_HU_LUTU_Configuration for M_ReceiptSchedule:\")",
    "glue_code": "\t@And(\"create M_HU_LUTU_Configuration for M_ReceiptSchedule:\")\n\tpublic void createLUTUConfigurationForReceiptSchedule(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String receiptScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ReceiptSchedule.COLUMNNAME_M_ReceiptSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ReceiptSchedule receiptSchedule = receiptScheduleTable.get(receiptScheduleIdentifier);\n\t\t\tassertThat(receiptSchedule).isNotNull();\n\n\t\t\tInterfaceWrapperHelper.refresh(receiptSchedule);\n\n\t\t\tfinal de.metas.handlingunits.model.I_M_ReceiptSchedule huReceiptSchedule = InterfaceWrapperHelper.create(receiptSchedule, de.metas.handlingunits.model.I_M_ReceiptSchedule.class);\n\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfigDefault = huReceiptScheduleBL\n\t\t\t\t\t.createLUTUConfigurationManager(huReceiptSchedule)\n\t\t\t\t\t.getCreateLUTUConfiguration();\n\n\t\t\thuReceiptScheduleBL.adjustLUTUConfiguration(lutuConfigDefault, huReceiptSchedule);\n\n\t\t\tfinal String tuHUPIProductIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_PI_Item_Product.COLUMNNAME_M_HU_PI_Item_Product_ID + \".TU.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU_PI_Item_Product tuHuPiProduct = huPiItemProductTable.get(tuHUPIProductIdentifier);\n\n\t\t\tfinal String luHUPIIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_PI.COLUMNNAME_M_HU_PI_ID + \".LU.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU_PI luHuPi = huPiTable.get(luHUPIIdentifier);\n\n\t\t\tfinal ILUTUConfigurationFactory.CreateLUTUConfigRequest lutuConfigRequest = ILUTUConfigurationFactory.CreateLUTUConfigRequest.builder()\n\t\t\t\t\t.baseLUTUConfiguration(lutuConfigDefault)\n\t\t\t\t\t.qtyLU(lutuConfigDefault.getQtyLU())\n\t\t\t\t\t.qtyTU(lutuConfigDefault.getQtyTU())\n\t\t\t\t\t.qtyCUsPerTU(lutuConfigDefault.getQtyCUsPerTU())\n\t\t\t\t\t.tuHUPIItemProductID(tuHuPiProduct.getM_HU_PI_Item_Product_ID())\n\t\t\t\t\t.luHUPIID(luHuPi.getM_HU_PI_ID())\n\t\t\t\t\t.build();\n\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfigurationWithParams = lutuConfigurationFactory.createNewLUTUConfigWithParams(lutuConfigRequest);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(lutuConfigurationWithParams);\n\n\t\t\tfinal String lutuConfigIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_LUTU_Configuration.COLUMNNAME_M_HU_LUTU_Configuration_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\thuLutuConfigurationTable.putOrReplace(lutuConfigIdentifier, lutuConfigurationWithParams);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 132,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_LUTU_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_LUTU_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1615,
    "annotation": "\n\t@Then(\"validate M_HU_LUTU_Configuration:\")",
    "glue_code": "\t@Then(\"validate M_HU_LUTU_Configuration:\")\n\tpublic void validateLutuConfig(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String lutuConfigIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_LUTU_Configuration.COLUMNNAME_M_HU_LUTU_Configuration_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfig = huLutuConfigurationTable.get(lutuConfigIdentifier);\n\n\t\t\tfinal BigDecimal qtyLU = DataTableUtil.extractBigDecimalForColumnName(row, I_M_HU_LUTU_Configuration.COLUMNNAME_QtyLU);\n\t\t\tfinal BigDecimal qtyTU = DataTableUtil.extractBigDecimalForColumnName(row, I_M_HU_LUTU_Configuration.COLUMNNAME_QtyTU);\n\t\t\tfinal BigDecimal qtyCUsPerTU = DataTableUtil.extractBigDecimalForColumnName(row, I_M_HU_LUTU_Configuration.COLUMNNAME_QtyCUsPerTU);\n\n\t\t\tassertThat(lutuConfig.getQtyLU()).isEqualTo(qtyLU);\n\t\t\tassertThat(lutuConfig.getQtyTU()).isEqualTo(qtyTU);\n\t\t\tassertThat(lutuConfig.getQtyCUsPerTU()).isEqualTo(qtyCUsPerTU);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 175,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_LUTU_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_LUTU_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1616,
    "annotation": "\n\t@And(\"receive HUs with M_HU_LUTU_Configuration:\")",
    "glue_code": "\t@And(\"receive HUs with M_HU_LUTU_Configuration:\")\n\tpublic void receiveHUsWithGivenLUTU(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(tableRow -> {\n\t\t\tfinal String receiptScheduleIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_ReceiptSchedule.COLUMNNAME_M_ReceiptSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ReceiptSchedule receiptSchedule = receiptScheduleTable.get(receiptScheduleIdentifier);\n\t\t\tassertThat(receiptSchedule).isNotNull();\n\t\t\tInterfaceWrapperHelper.refresh(receiptSchedule);\n\n\t\t\tfinal de.metas.handlingunits.model.I_M_ReceiptSchedule huReceiptSchedule = InterfaceWrapperHelper.create(receiptSchedule, de.metas.handlingunits.model.I_M_ReceiptSchedule.class);\n\n\t\t\tfinal String lutuConfigIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_HU_LUTU_Configuration.COLUMNNAME_M_HU_LUTU_Configuration_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfig = huLutuConfigurationTable.get(lutuConfigIdentifier);\n\n\t\t\tgenerateHUsWithLUTUConfiguration(tableRow, huReceiptSchedule, lutuConfig);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 193,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_LUTU_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_LUTU_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1617,
    "annotation": "\n\t@And(\"create M_HU_LUTU_Configuration for M_ReceiptSchedule and generate M_HUs\")",
    "glue_code": "\t@And(\"create M_HU_LUTU_Configuration for M_ReceiptSchedule and generate M_HUs\")\n\tpublic void create_I_M_HU_LUTU_Configuration_for_M_ReceiptSchedule(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(tableRow -> {\n\t\t\tfinal String receiptScheduleIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_ReceiptSchedule.COLUMNNAME_M_ReceiptSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ReceiptSchedule receiptSchedule = receiptScheduleTable.get(receiptScheduleIdentifier);\n\t\t\tassertThat(receiptSchedule).isNotNull();\n\t\t\tInterfaceWrapperHelper.refresh(receiptSchedule);\n\n\t\t\tfinal de.metas.handlingunits.model.I_M_ReceiptSchedule huReceiptSchedule = InterfaceWrapperHelper.load(receiptSchedule.getM_ReceiptSchedule_ID(), de.metas.handlingunits.model.I_M_ReceiptSchedule.class);\n\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfigDefault = huReceiptScheduleBL\n\t\t\t\t\t.createLUTUConfigurationManager(huReceiptSchedule)\n\t\t\t\t\t.getCreateLUTUConfiguration();\n\n\t\t\tfinal I_M_HU_LUTU_Configuration lutuConfig = computeLUTUConfiguration(lutuConfigDefault, tableRow);\n\n\t\t\tgenerateHUsWithLUTUConfiguration(tableRow, huReceiptSchedule, lutuConfig);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 211,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_LUTU_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_LUTU_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1624,
    "annotation": "\n\t@Given(\"metasfresh contains M_HU_PI_Attribute:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_HU_PI_Attribute:\")\n\tpublic void metasfresh_contains_m_hu_pi_item_product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : rows)\n\t\t{\n\t\t\tcreateHUPIAttribute(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1618,
    "annotation": "\n\t@Given(\"metasfresh contains M_HU_PI_Item_Product:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_HU_PI_Item_Product:\")\n\tpublic void metasfresh_contains_m_hu_pi_item_product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : rows)\n\t\t{\n\t\t\tcreateHUPIItemProduct(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_Item_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_Item_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1619,
    "annotation": "\n\t@And(\"update M_HU_PI_Item_Product:\")",
    "glue_code": "\t@And(\"update M_HU_PI_Item_Product:\")\n\tpublic void update_M_HU_PI_Item_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tupdateItemProduct(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 212,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_Item_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_Item_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1609,
    "annotation": "\n\t@And(\"metasfresh contains M_HU_PI_Item:\")",
    "glue_code": "\t@And(\"metasfresh contains M_HU_PI_Item:\")\n\tpublic void add_M_HU_PI_Item(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String huPiVersionIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_PI_Version_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU_PI_Version huPiVersion = huPiVersionTable.get(huPiVersionIdentifier);\n\n\t\t\tfinal BigDecimal qty = DataTableUtil.extractBigDecimalForColumnName(row, COLUMNNAME_Qty);\n\t\t\tfinal String itemType = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_ItemType); //dev-note: ITEMTYPE_AD_Reference_ID=540395;\n\t\t\tfinal boolean active = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT\" + COLUMNNAME_IsActive, true);\n\n\t\t\tfinal IQueryBuilder<I_M_HU_PI_Item> piItemQueryBuilder = queryBL.createQueryBuilder(I_M_HU_PI_Item.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_HU_PI_Version_ID, huPiVersion.getM_HU_PI_Version_ID())\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_ItemType, itemType)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_IsActive, active);\n\n\t\t\tfinal String includedHuPiIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Included_HU_PI_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(includedHuPiIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_HU_PI huPi = huPiTable.get(includedHuPiIdentifier);\n\t\t\t\tpiItemQueryBuilder.addEqualsFilter(COLUMNNAME_Included_HU_PI_ID, huPi.getM_HU_PI_ID());\n\t\t\t}\n\n\t\t\tfinal I_M_HU_PI_Item existingHuPiItem = piItemQueryBuilder.create()\n\t\t\t\t\t.firstOnlyOrNull(I_M_HU_PI_Item.class);\n\n\t\t\tfinal I_M_HU_PI_Item huPiItemRecord = CoalesceUtil.coalesceSuppliers(() -> existingHuPiItem,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t () -> InterfaceWrapperHelper.newInstance(I_M_HU_PI_Item.class));\n\n\t\t\tassertThat(huPiItemRecord).isNotNull();\n\n\t\t\thuPiItemRecord.setM_HU_PI_Version_ID(huPiVersion.getM_HU_PI_Version_ID());\n\t\t\thuPiItemRecord.setQty(qty);\n\t\t\thuPiItemRecord.setItemType(itemType);\n\t\t\thuPiItemRecord.setIsActive(active);\n\n\t\t\tif (Check.isNotBlank(includedHuPiIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_HU_PI huPi = huPiTable.get(includedHuPiIdentifier);\n\t\t\t\thuPiItemRecord.setIncluded_HU_PI_ID(huPi.getM_HU_PI_ID());\n\t\t\t}\n\n\t\t\tfinal String huPackingMaterialIdentifier = DataTableUtil.extractNullableStringForColumnName(row, \"OPT.\" + I_M_HU_PI_Item.COLUMNNAME_M_HU_PackingMaterial_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(huPackingMaterialIdentifier))\n\t\t\t{\n\t\t\t\tfinal int huPackingMaterialId = DataTableUtil.nullToken2Null(huPackingMaterialIdentifier) == null\n\t\t\t\t\t\t? -1\n\t\t\t\t\t\t: huPackingMaterialTable.get(huPackingMaterialIdentifier).getM_HU_PackingMaterial_ID();\n\n\t\t\t\thuPiItemRecord.setM_HU_PackingMaterial_ID(huPackingMaterialId);\n\t\t\t}\n\n\t\t\tsaveRecord(huPiItemRecord);\n\n\t\t\tfinal String huPiItemIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_PI_Item_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\thuPiItemTable.put(huPiItemIdentifier, huPiItemRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_Item_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_Item_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1611,
    "annotation": "\n\t@And(\"metasfresh contains M_HU_PI:\")",
    "glue_code": "\t@And(\"metasfresh contains M_HU_PI:\")\n\tpublic void add_M_HU_PI(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(\"M_HU_PI_ID\")\n\t\t\t\t.forEach((row) -> {\n\t\t\t\t\tfinal String name = row.suggestValueAndName().getName();\n\t\t\t\t\tfinal boolean active = row.getAsOptionalBoolean(\"IsActive\").orElseTrue();\n\n\t\t\t\t\tfinal I_M_HU_PI huPiRecord = CoalesceUtil.coalesceSuppliers(() -> queryBL.createQueryBuilder(I_M_HU_PI.class)\n\t\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_IsActive, active)\n\t\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t\t.firstOnlyOrNull(I_M_HU_PI.class),\n\t\t\t\t\t\t\t() -> InterfaceWrapperHelper.newInstanceOutOfTrx(I_M_HU_PI.class));\n\n\t\t\t\t\tassertThat(huPiRecord).isNotNull();\n\n\t\t\t\t\thuPiRecord.setName(name);\n\t\t\t\t\thuPiRecord.setIsActive(active);\n\n\t\t\t\t\tsaveRecord(huPiRecord);\n\n\t\t\t\t\trow.getAsIdentifier().putOrReplace(huPiTable, huPiRecord);\n\n\t\t\t\t\trestTestContext.setIntVariableFromRow(row, huPiRecord::getM_HU_PI_ID);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1612,
    "annotation": "\n\t@And(\"load M_HU_PI:\")",
    "glue_code": "\t@And(\"load M_HU_PI:\")\n\tpublic void load_M_HU_PI(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal int huPiId = row.getAsInt(COLUMNNAME_M_HU_PI_ID);\n\t\t\tfinal I_M_HU_PI huPiRecord = InterfaceWrapperHelper.load(huPiId, I_M_HU_PI.class);\n\t\t\trow.getAsIdentifier(COLUMNNAME_M_HU_PI_ID).putOrReplace(huPiTable, huPiRecord);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1638,
    "annotation": "\n\t@And(\"metasfresh contains M_HU_PI_Version:\")",
    "glue_code": "\t@And(\"metasfresh contains M_HU_PI_Version:\")\n\tpublic void add_M_HU_PI_Version(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_HU_PI_Version_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal I_M_HU_PI huPi = row.getAsIdentifier(COLUMNNAME_M_HU_PI_ID).lookupIn(huPiTable);\n\n\t\t\t\t\tfinal String name = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t\t\t() -> row.getAsOptionalString(COLUMNNAME_Name).orElse(null),\n\t\t\t\t\t\t\thuPi::getName\n\t\t\t\t\t);\n\t\t\t\t\tfinal String huUnitType = row.getAsString(COLUMNNAME_HU_UnitType); //dev-note: HU_UNITTYPE_AD_Reference_ID=540472;\n\t\t\t\t\tfinal boolean isCurrent = row.getAsBoolean(COLUMNNAME_IsCurrent);\n\t\t\t\t\tfinal boolean active = row.getAsOptionalBoolean(COLUMNNAME_IsActive).orElseTrue();\n\n\t\t\t\t\tfinal I_M_HU_PI_Version existingPiVersion = queryBL.createQueryBuilder(I_M_HU_PI_Version.class)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_HU_PI_ID, huPi.getM_HU_PI_ID())\n\t\t\t\t\t\t\t.addStringLikeFilter(COLUMNNAME_Name, name, true)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_HU_UnitType, huUnitType)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_IsActive, active)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_M_HU_PI_Version.class);\n\n\t\t\t\t\tfinal I_M_HU_PI_Version piVersion = CoalesceUtil.coalesceSuppliers(\n\t\t\t\t\t\t\t() -> existingPiVersion,\n\t\t\t\t\t\t\t() -> InterfaceWrapperHelper.newInstanceOutOfTrx(I_M_HU_PI_Version.class)\n\t\t\t\t\t);\n\t\t\t\t\tassertThat(piVersion).isNotNull();\n\n\t\t\t\t\tpiVersion.setM_HU_PI_ID(huPi.getM_HU_PI_ID());\n\t\t\t\t\tpiVersion.setName(name);\n\t\t\t\t\tpiVersion.setHU_UnitType(huUnitType);\n\t\t\t\t\tpiVersion.setIsCurrent(isCurrent);\n\t\t\t\t\tpiVersion.setIsActive(active);\n\n\t\t\t\t\trow.getAsOptionalIdentifier(I_M_HU_PI_Version.COLUMNNAME_M_HU_PackagingCode_ID)\n\t\t\t\t\t\t\t.ifPresent(huPackagingCodeIdentifier -> {\n\t\t\t\t\t\t\t\tfinal int huPackagingCodeId = huPackagingCodeIdentifier.isNullPlaceholder()\n\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t: huPackagingCodeTable.get(huPackagingCodeIdentifier).getM_HU_PackagingCode_ID();\n\n\t\t\t\t\t\t\t\tpiVersion.setM_HU_PackagingCode_ID(huPackagingCodeId);\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\tsaveRecord(piVersion);\n\n\t\t\t\t\thuPiVersionTable.put(row.getAsIdentifier(), piVersion);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 68,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_Version_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_Version_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1639,
    "annotation": "\n\t@And(\"load M_HU_PI_Version:\")",
    "glue_code": "\t@And(\"load M_HU_PI_Version:\")\n\tpublic void load_M_HU_PI_Version(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String huPIVersionIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_PI_Version_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal int huPIVersionId = DataTableUtil.extractIntForColumnName(row, COLUMNNAME_M_HU_PI_Version_ID);\n\n\t\t\tfinal I_M_HU_PI_Version huPiVersionRecord = InterfaceWrapperHelper.load(huPIVersionId, I_M_HU_PI_Version.class);\n\n\t\t\tassertThat(huPiVersionRecord).isNotNull();\n\n\t\t\thuPiVersionTable.put(huPIVersionIdentifier, huPiVersionRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 120,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PI_Version_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PI_Version_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1630,
    "annotation": "\n\t@And(\"metasfresh contains M_HU_PackingMaterial:\")",
    "glue_code": "\t@And(\"metasfresh contains M_HU_PackingMaterial:\")\n\tpublic void add_M_HU_PackingMaterial(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(\"M_HU_PackingMaterial_ID\")\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal ProductId productId = row.getAsOptionalIdentifier(COLUMNNAME_M_Product_ID)\n\t\t\t\t\t\t\t.map(productTable::getId)\n\t\t\t\t\t\t\t.orElse(null);\n\n\t\t\t\t\tfinal ValueAndName valueAndName = row.suggestValueAndName();\n\t\t\t\t\tfinal String name = valueAndName.getName();\n\n\t\t\t\t\tfinal I_M_HU_PackingMaterial huPackingMaterial = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\tfinal IQueryBuilder<I_M_HU_PackingMaterial> queryBuilder = queryBL.createQueryBuilder(I_M_HU_PackingMaterial.class)\n\t\t\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Name, name);\n\n\t\t\t\t\t\t\t\tif (productId != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tqueryBuilder.addEqualsFilter(COLUMNNAME_M_Product_ID, productId);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn queryBuilder.create()\n\t\t\t\t\t\t\t\t\t\t.firstOnlyOrNull(I_M_HU_PackingMaterial.class);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\tfinal I_M_HU_PackingMaterial packingMaterial = newInstance(I_M_HU_PackingMaterial.class);\n\t\t\t\t\t\t\t\tpackingMaterial.setName(name);\n\t\t\t\t\t\t\t\tif (productId != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpackingMaterial.setM_Product_ID(productId.getRepoId());\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsaveRecord(packingMaterial);\n\n\t\t\t\t\t\t\t\treturn packingMaterial;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\trow.getAsOptionalBigDecimal(COLUMNNAME_Length).ifPresent(huPackingMaterial::setLength);\n\t\t\t\t\trow.getAsOptionalBigDecimal(COLUMNNAME_Width).ifPresent(huPackingMaterial::setWidth);\n\t\t\t\t\trow.getAsOptionalBigDecimal(COLUMNNAME_Height).ifPresent(huPackingMaterial::setHeight);\n\t\t\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_C_UOM_Dimension_ID)\n\t\t\t\t\t\t\t.map(uomTable::getId)\n\t\t\t\t\t\t\t.ifPresent(uomId -> huPackingMaterial.setC_UOM_Dimension_ID(uomId.getRepoId()));\n\t\t\t\t\tsaveRecord(huPackingMaterial);\n\t\t\t\t\thuPackingMaterialTable.put(row.getAsIdentifier(), huPackingMaterial);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_PackingMaterial_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_PackingMaterial_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1674,
    "annotation": "\n\t@And(\"metasfresh contains M_HU_QRCode\")",
    "glue_code": "\t@And(\"metasfresh contains M_HU_QRCode\")\n\tpublic void metasfresh_contains_qr_codes(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcreateHUQRCode(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 87,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_QRCode_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_QRCode_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1675,
    "annotation": "\n\t@And(\"generate QR Codes for HUs\")",
    "glue_code": "\t@And(\"generate QR Codes for HUs\")\n\tpublic void generate_qr_codes_for_HUs(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::generateQRCodes);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 135,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_QRCode_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_QRCode_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1676,
    "annotation": "\n\t@And(\"generate new QR Codes\")",
    "glue_code": "\t@And(\"generate new QR Codes\")\n\tpublic void generateNewQRCodes(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::generateNewQRCode);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 160,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_QRCode_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_QRCode_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1629,
    "annotation": "\n\t@And(\"reserve HU to order\")",
    "glue_code": "\t@And(\"reserve HU to order\")\n\tpublic void reserveHUToOrder(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal I_C_OrderLine orderLine = row.getAsIdentifier(\"C_OrderLine_ID\").lookupIn(orderLineTable);\n\t\t\tfinal OrderLineId orderLineId = OrderLineId.ofRepoId(orderLine.getC_OrderLine_ID());\n\n\t\t\tfinal I_M_HU hu = row.getAsIdentifier(\"M_HU_ID\").lookupIn(huTable);\n\t\t\tfinal HuId huId = HuId.ofRepoId(hu.getM_HU_ID());\n\n\t\t\tfinal I_M_HU_Storage huStorageRecord = getHUStorageRecord(huId);\n\n\t\t\tfinal HUReservation huReservation = huReservationService.makeReservation(\n\t\t\t\t\t\t\tReserveHUsRequest.builder()\n\t\t\t\t\t\t\t\t\t.qtyToReserve(Quantitys.of(huStorageRecord.getQty(), UomId.ofRepoId(huStorageRecord.getC_UOM_ID())))\n\t\t\t\t\t\t\t\t\t.documentRef(HUReservationDocRef.ofSalesOrderLineId(orderLineId))\n\t\t\t\t\t\t\t\t\t.productId(ProductId.ofRepoId(huStorageRecord.getM_Product_ID()))\n\t\t\t\t\t\t\t\t\t.huId(huId)\n\t\t\t\t\t\t\t\t\t.build()\n\t\t\t\t\t)\n\t\t\t\t\t.orElse(null);\n\n\t\t\tassertThat(huReservation).as(\"Reservation for \" + huId).isNotNull();\n\t\t\tlogger.info(\"Reservation created: {}\", huReservation);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Reservation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Reservation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1647,
    "annotation": "\n\t@And(\"validate M_HUs:\")",
    "glue_code": "\t@And(\"validate M_HUs:\")\n\tpublic void validate_M_HUs(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_HU_ID)\n\t\t\t\t.forEach((row) -> {\n\t\t\t\t\tfinal StepDefDataIdentifier huIdentifier = row.getAsIdentifier();\n\n\t\t\t\t\trow.getAsOptionalIdentifier(\"M_HU_Parent\")\n\t\t\t\t\t\t\t.ifPresent(parentHuIdentifier -> {\n\t\t\t\t\t\t\t\tfinal I_M_HU parentHU = huTable.get(parentHuIdentifier);\n\n\t\t\t\t\t\t\t\tfinal I_M_HU_Item huItem = queryBL.createQueryBuilder(I_M_HU_Item.class)\n\t\t\t\t\t\t\t\t\t\t.addEqualsFilter(I_M_HU_Item.COLUMNNAME_M_HU_ID, parentHU.getM_HU_ID())\n\t\t\t\t\t\t\t\t\t\t.orderByDescending(I_M_HU_Item.COLUMN_M_HU_Item_ID)\n\t\t\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t\t\t.firstNotNull(I_M_HU_Item.class);\n\n\t\t\t\t\t\t\t\tfinal I_M_HU currentHU = queryBL.createQueryBuilder(I_M_HU.class)\n\t\t\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMN_M_HU_Item_Parent_ID, huItem.getM_HU_Item_ID())\n\t\t\t\t\t\t\t\t\t\t.orderByDescending(COLUMNNAME_M_HU_ID)\n\t\t\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t\t\t.firstNotNull(I_M_HU.class);\n\n\t\t\t\t\t\t\t\thuTable.putOrReplace(huIdentifier, currentHU);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\t\t\t\t\tassertThat(hu).isNotNull();\n\n\t\t\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_HU_PI_Version_ID)\n\t\t\t\t\t\t\t.map(huPiVersionTable::get)\n\t\t\t\t\t\t\t.ifPresent(piVersion -> assertThat(hu.getM_HU_PI_Version_ID()).isEqualTo(piVersion.getM_HU_PI_Version_ID()));\n\n\t\t\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_Locator_ID)\n\t\t\t\t\t\t\t.ifPresent(locatorIdentifier -> {\n\t\t\t\t\t\t\t\tfinal I_M_Locator locator = locatorTable.get(locatorIdentifier);\n\t\t\t\t\t\t\t\tassertThat(locator).isNotNull();\n\t\t\t\t\t\t\t\tassertThat(hu.getM_Locator_ID()).isEqualTo(locator.getM_Locator_ID());\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_HU_PI_Item_Product_ID)\n\t\t\t\t\t\t\t.ifPresent(huPiItemProductIdentifier -> {\n\t\t\t\t\t\t\t\tfinal I_M_HU_PI_Item_Product huPiItemProduct = huPiItemProductTable.get(huPiItemProductIdentifier);\n\t\t\t\t\t\t\t\tassertThat(huPiItemProduct).isNotNull();\n\t\t\t\t\t\t\t\tassertThat(hu.getM_HU_PI_Item_Product_ID()).isEqualTo(huPiItemProduct.getM_HU_PI_Item_Product_ID());\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\tfinal String huStatus = row.getAsString(COLUMNNAME_HUStatus);\n\n\t\t\t\t\tassertThat(hu.getHUStatus()).isEqualTo(huStatus);\n\n\t\t\t\t\tfinal String clearanceStatus = row.getAsOptionalString(COLUMNNAME_ClearanceStatus).orElse(null);\n\t\t\t\t\tif (Check.isNotBlank(clearanceStatus))\n\t\t\t\t\t{\n\t\t\t\t\t\tassertThat(hu.getClearanceStatus()).isEqualTo(clearanceStatus);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String clearanceNote = row.getAsOptionalString(COLUMNNAME_ClearanceNote).orElse(null);\n\t\t\t\t\tif (Check.isNotBlank(clearanceNote))\n\t\t\t\t\t{\n\t\t\t\t\t\tassertThat(hu.getClearanceNote()).isEqualTo(clearanceNote);\n\t\t\t\t\t}\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 164,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1648,
    "annotation": "\n\t@And(\"^after not more than (.*)s, there are added M_HUs for inventory$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, there are added M_HUs for inventory$\")\n\tpublic void find_HUs(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal InventoryLineId inventoryLineId = inventoryLineTable.getId(row.getAsIdentifier(I_M_InventoryLine.COLUMNNAME_M_InventoryLine_ID));\n\t\t\tfinal StepDefDataIdentifier huIdentifier = row.getAsIdentifier(COLUMNNAME_M_HU_ID);\n\n\t\t\tfinal I_M_InventoryLine inventoryLine = inventoryDAO.getLineById(inventoryLineId, I_M_InventoryLine.class);\n\t\t\tassertThat(inventoryLine).isNotNull();\n\t\t\tfinal HuId huId = HuId.ofRepoIdOrNull(inventoryLine.getM_HU_ID());\n\t\t\tassertThat(huId).as(\"inventory line has HU set\").isNotNull();\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadHU(LoadHURequest.builder()\n\t\t\t\t\t.huId(huId)\n\t\t\t\t\t.huIdentifier(huIdentifier)\n\t\t\t\t\t.build()));\n\n\t\t\trestTestContext.setIdVariableFromRow(row, huId);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 230,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1649,
    "annotation": "\n\t@And(\"return hu from customer\")",
    "glue_code": "\t@And(\"return hu from customer\")\n\tpublic void return_HU_from_customer(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\treturnHUFromCustomer(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 251,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1650,
    "annotation": "\n\t@And(\"^after not more than (.*)s, M_HUs should have$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, M_HUs should have$\")\n\tpublic void wait_M_HUs_status(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal StepDefDataIdentifier huIdentifier = row.getAsIdentifier(COLUMNNAME_M_HU_ID);\n\t\t\tfinal HuId huId = huTable.getId(huIdentifier);\n\n\t\t\tfinal LoadHURequest.LoadHURequestBuilder requestBuilder = LoadHURequest.builder()\n\t\t\t\t\t.huId(huId)\n\t\t\t\t\t.huIdentifier(huIdentifier);\n\n\t\t\trow.getAsOptionalString(COLUMNNAME_HUStatus).ifPresent(requestBuilder::huStatus);\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_HU_PI_Item_Product_ID)\n\t\t\t\t\t.map(huPiItemProductTable::getId)\n\t\t\t\t\t.ifPresent(requestBuilder::piItemProductId);\n\n\t\t\tfinal LoadHURequest request = requestBuilder.build();\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadHU(request));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 260,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1651,
    "annotation": "\t@And(\"transform CU to new TUs\")",
    "glue_code": "\tpublic void transformCUtoNewTUs(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\n\t\t\tfinal StepDefDataIdentifier sourceCuIdentifier = row.getAsIdentifier(\"sourceCU\");\n\t\t\tfinal BigDecimal cuQty = row.getAsBigDecimal(\"cuQty\");\n\t\t\tfinal StepDefDataIdentifier huPIItemProductIdentifier = row.getAsIdentifier(COLUMNNAME_M_HU_PI_Item_Product_ID);\n\n\t\t\tfinal I_M_HU cuHU = huTable.get(sourceCuIdentifier);\n\t\t\tassertThat(cuHU).as(\"sourceCU\").isNotNull();\n\n\t\t\tfinal I_C_UOM uom = uomDAO.getById(StepDefConstants.PCE_UOM_ID);\n\t\t\tfinal Quantity cuQuantity = Quantity.of(cuQty, uom);\n\n\t\t\tfinal I_M_HU_PI_Item_Product huPiItemProduct = huPiItemProductTable.get(huPIItemProductIdentifier);\n\t\t\tassertThat(huPiItemProduct).isNotNull();\n\n\t\t\tfinal List<I_M_HU> resultedNewTUs = HUTransformService.newInstance().cuToNewTUs(cuHU, cuQuantity, huPiItemProduct, false);\n\n\t\t\tfinal List<StepDefDataIdentifier> tuIdentifiers = row.getAsOptionalIdentifier(\"resultedNewTUs\")\n\t\t\t\t\t.map(StepDefDataIdentifier::toCommaSeparatedList)\n\t\t\t\t\t.orElse(null);\n\t\t\tif (tuIdentifiers != null)\n\t\t\t{\n\t\t\t\tassertThat(tuIdentifiers).as(\"resultedNewTUs\").hasSameSizeAs(resultedNewTUs);\n\t\t\t}\n\n\t\t\tfinal List<StepDefDataIdentifier> cuIdentifiers = row.getAsOptionalIdentifier(\"resultedNewCUs\")\n\t\t\t\t\t.map(StepDefDataIdentifier::toCommaSeparatedList)\n\t\t\t\t\t.orElse(null);\n\t\t\tif (cuIdentifiers != null)\n\t\t\t{\n\t\t\t\tassertThat(cuIdentifiers).as(\"resultedNewCUs\").hasSameSizeAs(resultedNewTUs);\n\t\t\t}\n\n\t\t\tfor (int index = 0; index < resultedNewTUs.size(); index++)\n\t\t\t{\n\t\t\t\tfinal I_M_HU currentTU = resultedNewTUs.get(index);\n\n\t\t\t\tif (tuIdentifiers != null)\n\t\t\t\t{\n\t\t\t\t\thuTable.putOrReplace(tuIdentifiers.get(index), currentTU);\n\t\t\t\t}\n\n\t\t\t\tif (cuIdentifiers != null)\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_HU_Item tuItem = queryBL.createQueryBuilder(I_M_HU_Item.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_HU_Item.COLUMNNAME_M_HU_ID, currentTU.getM_HU_ID())\n\t\t\t\t\t\t\t.orderByDescending(COLUMNNAME_M_HU_ID)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstNotNull(I_M_HU_Item.class);\n\n\t\t\t\t\tfinal I_M_HU includedCU = queryBL.createQueryBuilder(I_M_HU.class)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMN_M_HU_Item_Parent_ID, tuItem.getM_HU_Item_ID())\n\t\t\t\t\t\t\t.orderByDescending(COLUMNNAME_M_HU_ID)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstNotNull(I_M_HU.class);\n\n\t\t\t\t\thuTable.putOrReplace(cuIdentifiers.get(index), includedCU);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 291,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1652,
    "annotation": "\n\t@And(\"transform TU to new LUs\")",
    "glue_code": "\t@And(\"transform TU to new LUs\")\n\tpublic void transformTUtoNewLUs(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String sourceTUIdentifier = DataTableUtil.extractStringForColumnName(row, \"sourceTU.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal QtyTU tuQty = QtyTU.ofBigDecimal(DataTableUtil.extractBigDecimalForColumnName(row, \"tuQty\"));\n\t\t\tfinal String huPIItemIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_PI_Item_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_M_HU tuHU = huTable.get(sourceTUIdentifier);\n\t\t\tassertThat(tuHU).isNotNull();\n\n\t\t\tfinal I_M_HU_PI_Item huPiItem = huPiItemTable.get(huPIItemIdentifier);\n\t\t\tassertThat(huPiItem).isNotNull();\n\n\t\t\tfinal List<I_M_HU> resultedNewLUs = HUTransformService.newInstance().tuToNewLUs(tuHU, tuQty, huPiItem, false).getLURecords();\n\n\t\t\tfinal String resultedNewLUsIdentifiers = DataTableUtil.extractStringForColumnName(row, \"resultedNewLUs.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal List<String> identifiers = StepDefUtil.splitIdentifiers(resultedNewLUsIdentifiers);\n\n\t\t\tfor (int index = 0; index < resultedNewLUs.size(); index++)\n\t\t\t{\n\t\t\t\thuTable.putOrReplace(identifiers.get(index), resultedNewLUs.get(index));\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 355,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1653,
    "annotation": "\n\t@And(\"aggregate TUs to new LU\")",
    "glue_code": "\t@And(\"aggregate TUs to new LU\")\n\tpublic void aggregateTUsToNewLU(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> {\n\t\t\thuTrxBL.process(huContext -> {\n\t\t\t\tfinal LULoader luLoader = new LULoader(huContext);\n\n\t\t\t\t@NonNull final List<StepDefDataIdentifier> sourceTUIdentifiers = row.getAsIdentifier(\"sourceTUs\").toCommaSeparatedList();\n\t\t\t\tfor (final StepDefDataIdentifier sourceTUIdentifier : sourceTUIdentifiers)\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_HU sourceTU = huTable.get(sourceTUIdentifier);\n\t\t\t\t\tluLoader.addTU(sourceTU);\n\t\t\t\t}\n\n\t\t\t\tluLoader.close();\n\n\t\t\t\trow.getAsOptionalIdentifier(\"newLUs\")\n\t\t\t\t\t\t.map(StepDefDataIdentifier::toCommaSeparatedList)\n\t\t\t\t\t\t.ifPresent(newLUIdentifiers -> {\n\t\t\t\t\t\t\tfinal List<I_M_HU> newLUs = luLoader.getLU_HUs();\n\t\t\t\t\t\t\tassertThat(newLUs).hasSameSizeAs(newLUIdentifiers);\n\t\t\t\t\t\t\tfor (int index = 0; index < newLUs.size(); index++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thuTable.put(newLUIdentifiers.get(index), newLUs.get(index));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 383,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1654,
    "annotation": "\n\t@And(\"transform CU to new LU\")",
    "glue_code": "\t@And(\"transform CU to new LU\")\n\tpublic void transformCUtoNewLUs(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> {\n\t\t\thuTrxBL.process(huContext -> {\n\t\t\t\ttransformCUtoNewLU(row, huContext);\n\t\t\t});\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 413,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1655,
    "annotation": "\n\t@And(\"store JsonHUAttributesRequest in context\")",
    "glue_code": "\t@And(\"store JsonHUAttributesRequest in context\")\n\tpublic void store_JsonHUAttributesRequest_in_context(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal String attrLotNo = DataTableUtil.extractStringOrNullForColumnName(row, \"attributes.\" + HU_ATTR_LOT_NUMBER);\n\n\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\t\tassertThat(hu).isNotNull();\n\n\t\tfinal JsonHUAttributeCodeAndValues attributes = new JsonHUAttributeCodeAndValues();\n\t\tattributes.putAttribute(HU_ATTR_LOT_NUMBER, attrLotNo);\n\n\t\tfinal JsonHUAttributesRequest jsonHUAttributesRequest = JsonHUAttributesRequest.builder()\n\t\t\t\t.huId(String.valueOf(hu.getM_HU_ID()))\n\t\t\t\t.attributes(attributes)\n\t\t\t\t.build();\n\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\t\trestTestContext.setRequestPayload(mapper.writeValueAsString(jsonHUAttributesRequest));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 470,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1656,
    "annotation": "\n\t@And(\"^store HU endpointPath (.*) in context$\")",
    "glue_code": "\t@And(\"^store HU endpointPath (.*) in context$\")\n\tpublic void store_hu_endpointPath_in_context(@NonNull String endpointPath)\n\t{\n\t\tfinal String regex = \".*(:[a-zA-Z]+)/?.*\";\n\n\t\tfinal Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);\n\t\tfinal Matcher matcher = pattern.matcher(endpointPath);\n\n\t\twhile (matcher.find())\n\t\t{\n\t\t\tfinal String huIdentifierGroup = matcher.group(1);\n\t\t\tfinal String huIdentifier = huIdentifierGroup.replace(\":\", \"\");\n\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\t\t\tassertThat(hu).isNotNull();\n\n\t\t\tendpointPath = endpointPath.replace(huIdentifierGroup, String.valueOf(hu.getM_HU_ID()));\n\n\t\t\trestTestContext.setEndpointPath(endpointPath);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 493,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1657,
    "annotation": "\n\t@Then(\"validate \\\"retrieve hu\\\" response:\")",
    "glue_code": "\t@Then(\"validate \\\"retrieve hu\\\" response:\")\n\tpublic void validate_retrieve_HU_response(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonGetSingleHUResponse getHUResponse = restTestContext.getApiResponseBodyAs(JsonGetSingleHUResponse.class);\n\t\tfinal JsonHU topLevelHU = getHUResponse.getResult();\n\t\tassertThat(topLevelHU).isNotNull();\n\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\n\t\tfinal Map<String, Map<String, String>> identifierToRow = rows.stream()\n\t\t\t\t.collect(Collectors.toMap(row -> DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER),\n\t\t\t\t\t\tFunction.identity()));\n\n\t\tfinal Map<String, String> topRow = rows.get(0);\n\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(topRow, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\tvalidateHU(ImmutableList.of(topLevelHU), ImmutableList.of(huIdentifier), identifierToRow);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 515,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1658,
    "annotation": "\n\t@And(\"M_HU_Storage are validated\")",
    "glue_code": "\t@And(\"M_HU_Storage are validated\")\n\tpublic void validate_HU_Storage(@NonNull final DataTable table)\n\t{\n\t\tfor (final Map<String, String> row : table.asMaps())\n\t\t{\n\t\t\tvalidateHUStorage(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 534,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1659,
    "annotation": "\n\t@And(\"M_HU are validated:\")",
    "glue_code": "\t@And(\"M_HU are validated:\")\n\tpublic void validateHUs(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::validateHU);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 543,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1660,
    "annotation": "\n\t@Given(\"M_HU are disposed:\")",
    "glue_code": "\t@Given(\"M_HU are disposed:\")\n\tpublic void disposeHUs(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::disposeHU);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 549,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1661,
    "annotation": "\n\t@And(\"store JsonSetClearanceStatusRequest in context\")",
    "glue_code": "\t@And(\"store JsonSetClearanceStatusRequest in context\")\n\tpublic void store_JsonSetClearanceStatusRequest_in_context(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String clearanceStatus = DataTableUtil.extractStringForColumnName(row, I_M_HU.COLUMNNAME_ClearanceStatus);\n\t\tfinal String clearanceNote = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_HU.COLUMNNAME_ClearanceNote);\n\n\t\tfinal JsonClearanceStatus jsonClearanceStatus = JsonClearanceStatus.valueOf(clearanceStatus);\n\n\t\tfinal JsonSetClearanceStatusRequest jsonSetClearanceStatusRequest = JsonSetClearanceStatusRequest.builder()\n\t\t\t\t.huIdentifier(getHUIdentifier(row))\n\t\t\t\t.clearanceStatus(jsonClearanceStatus)\n\t\t\t\t.clearanceNote(clearanceNote)\n\t\t\t\t.build();\n\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\t\trestTestContext.setRequestPayload(mapper.writeValueAsString(jsonSetClearanceStatusRequest));\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 555,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1662,
    "annotation": "\n\t@And(\"load M_HU by QR code:\")",
    "glue_code": "\t@And(\"load M_HU by QR code:\")\n\tpublic void load_hu_by_qr_code(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String qrCodeIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_QRCode.COLUMNNAME_M_HU_QRCode_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_M_HU_QRCode qrCode = qrCodesTable.get(qrCodeIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(qrCode);\n\n\t\t\tfinal I_M_HU_QRCode_Assignment singleAssignment = queryBL.createQueryBuilder(I_M_HU_QRCode_Assignment.class)\n\t\t\t\t\t.addEqualsFilter(I_M_HU_QRCode_Assignment.COLUMNNAME_M_HU_QRCode_ID, qrCode.getM_HU_QRCode_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_HU_QRCode_Assignment.class);\n\n\t\t\tfinal I_M_HU hu = load(singleAssignment.getM_HU_ID(), I_M_HU.class);\n\n\t\t\tassertThat(hu).isNotNull();\n\n\t\t\thuTable.putOrReplace(huIdentifier, hu);\n\t\t\tqrCodesTable.putOrReplace(qrCodeIdentifier, qrCode);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 575,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1663,
    "annotation": "\n\t@And(\"update HU clearance status\")",
    "glue_code": "\t@And(\"update HU clearance status\")\n\tpublic void update_clearance_status(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\n\t\t\tfinal String clearanceStatus = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_ClearanceStatus);\n\t\t\tfinal String clearanceNote = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_ClearanceNote);\n\n\t\t\tfinal JsonSetClearanceStatusRequest.JsonHUIdentifier identifier = JsonSetClearanceStatusRequest.JsonHUIdentifier\n\t\t\t\t\t.ofJsonMetasfreshId(JsonMetasfreshId.of(hu.getM_HU_ID()));\n\n\t\t\tfinal JsonSetClearanceStatusRequest request = JsonSetClearanceStatusRequest.builder()\n\t\t\t\t\t.huIdentifier(identifier)\n\t\t\t\t\t.clearanceNote(clearanceNote)\n\t\t\t\t\t.clearanceStatus(JsonClearanceStatus.valueOf(clearanceStatus))\n\t\t\t\t\t.build();\n\n\t\t\thandlingUnitsService.setClearanceStatus(request);\n\n\t\t\thuTable.putOrReplace(huIdentifier, hu);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 601,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1664,
    "annotation": "\n\t@And(\"destroy existing M_HUs\")",
    "glue_code": "\t@And(\"destroy existing M_HUs\")\n\tpublic void destroy_existing_hus()\n\t{\n\t\tfinal IHUContextFactory huContextFactory = Services.get(IHUContextFactory.class);\n\t\tfinal IHUContext huContext = huContextFactory.createMutableHUContextForProcessing(PlainContextAware.newOutOfTrx());\n\n\t\tfinal List<I_M_HU> availableHUs = queryBL.createQueryBuilder(I_M_HU.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.create()\n\t\t\t\t.list(I_M_HU.class);\n\n\t\thandlingUnitsBL.markDestroyed(huContext, availableHUs);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 628,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1665,
    "annotation": "\n\t@And(\"^after not more than (.*)s, load newly created M_HU record based on SourceHU$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, load newly created M_HU record based on SourceHU$\")\n\tpublic void load_newly_created_M_HU(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String vhuSourceIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU_Trace.COLUMNNAME_VHU_Source_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU vhuSourceHU = huTable.get(vhuSourceIdentifier);\n\t\t\tassertThat(vhuSourceHU).isNotNull();\n\n\t\t\tfinal BigDecimal qty = DataTableUtil.extractBigDecimalForColumnName(row, I_M_HU_Trace.COLUMNNAME_Qty);\n\t\t\tfinal String huTraceType = DataTableUtil.extractStringForColumnName(row, I_M_HU_Trace.COLUMNNAME_HUTraceType);\n\n\t\t\tfinal Supplier<Optional<I_M_HU>> huSupplier = () -> queryBL.createQueryBuilder(I_M_HU_Trace.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_M_HU_Trace.COLUMNNAME_VHU_Source_ID, vhuSourceHU.getM_HU_ID())\n\t\t\t\t\t.addEqualsFilter(I_M_HU_Trace.COLUMNNAME_Qty, qty)\n\t\t\t\t\t.addEqualsFilter(I_M_HU_Trace.COLUMN_HUTraceType, huTraceType)\n\t\t\t\t\t.orderByDescending(I_M_HU_Trace.COLUMNNAME_Created)\n\t\t\t\t\t.create()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.map(I_M_HU_Trace::getM_HU_ID)\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.map(id -> InterfaceWrapperHelper.load(id, I_M_HU.class));\n\n\t\t\tfinal I_M_HU newHU = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, huSupplier);\n\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\thuTable.putOrReplace(huIdentifier, newHU);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 642,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1666,
    "annotation": "\n\t@And(\"load M_HU from REST response JSON path\")",
    "glue_code": "\t@And(\"load M_HU from REST response JSON path\")\n\tpublic void loadHUByRestResponseJSONPath(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> {\n\t\t\tfinal String jsonPath = row.getAsString(\"JsonPath\");\n\t\t\tfinal StepDefDataIdentifier huIdentifier = row.getAsIdentifier(\"M_HU_ID\");\n\n\t\t\tfinal int huRepoId = restTestContext.getApiResponse().getByJsonPathAsInt(jsonPath);\n\t\t\tfinal I_M_HU hu = handlingUnitsBL.getById(HuId.ofRepoId(huRepoId));\n\t\t\thuTable.put(huIdentifier, hu);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 883,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1642,
    "annotation": "\n\t@And(\"validate M_HU_Storage:\")",
    "glue_code": "\t@And(\"validate M_HU_Storage:\")\n\tpublic void validate_M_HU_Storage(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal HuId huId = huTable.getId(row.getAsIdentifier(COLUMNNAME_M_HU_ID));\n\n\t\t\tfinal I_M_HU_Storage huStorageRecord = queryBL.createQueryBuilder(I_M_HU_Storage.class)\n\t\t\t\t\t.addEqualsFilter(COLUMN_M_HU_ID, huId)\n\t\t\t\t\t.orderByDescending(COLUMN_M_HU_ID)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_M_HU_Storage.class);\n\n\t\t\tassertThat(huStorageRecord).isNotNull();\n\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_Product_ID)\n\t\t\t\t\t.map(productTable::getId)\n\t\t\t\t\t.ifPresent(expectedProductId -> assertThat(ProductId.ofRepoId(huStorageRecord.getM_Product_ID())).isEqualTo(expectedProductId));\n\t\t\trow.getAsOptionalBigDecimal(COLUMNNAME_Qty)\n\t\t\t\t\t.ifPresent((expectedQty) -> assertThat(huStorageRecord.getQty()).isEqualTo(expectedQty));\n\n\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_HU_Storage_ID)\n\t\t\t\t\t.ifPresent((huStorageIdentifier) -> huStorageTable.putOrReplace(huStorageIdentifier, huStorageRecord));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Storage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Storage_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1643,
    "annotation": "\n\t@And(\"update M_HU_Storage:\")",
    "glue_code": "\t@And(\"update M_HU_Storage:\")\n\tpublic void update_M_HU_Storages(@NonNull final DataTable dataTable) throws Throwable\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::update_M_HU_Storage);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 88,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/M_HU_Storage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "M_HU_Storage_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1608,
    "annotation": "\t\n\t@And(\"setup the SSCC18 code generator with GS1ManufacturerCode {int}, GS1ExtensionDigit {int} and next sequence number always={int}.\")",
    "glue_code": "\t@And(\"setup the SSCC18 code generator with GS1ManufacturerCode {int}, GS1ExtensionDigit {int} and next sequence number always={int}.\")\n\tpublic void setupTheSSCCCodeGeneratorWithGSManufacturerCodeGSExtensionDigitAndNextSequenceNumber(\n\t\t\tfinal int manufacturerCode,\n\t\t\tfinal int extensionDigit,\n\t\t\tfinal int nextSequenceNumber)\n\t{\n\t\tfinal ISysConfigBL sysConfigBL = Services.get(ISysConfigBL.class);\n\t\tsysConfigBL.setValue(SSCC18CodeBL.SYSCONFIG_ManufacturerCode, String.valueOf(manufacturerCode), ClientId.SYSTEM, OrgId.ANY);\n\t\tsysConfigBL.setValue(SSCC18CodeBL.SYSCONFIG_ExtensionDigit, String.valueOf(extensionDigit), ClientId.SYSTEM, OrgId.ANY);\n\n\t\tgetSSCC18CodeBL().setOverrideNextSerialNumberProvider(orgId -> nextSequenceNumber);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 37,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu/SSCC18Code_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/hu",
      "filename": "SSCC18Code_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1631,
    "annotation": "\n\t@And(\"I_I_BPartner is found:\")",
    "glue_code": "\t@And(\"I_I_BPartner is found:\")\n\tpublic void find_I_I_BPartner_record(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal IQueryBuilder<I_I_BPartner> queryBuilder = queryBL.createQueryBuilder(I_I_BPartner.class);\n\n\t\t\tfinal String dataRecordIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_DataImport.COLUMNNAME_C_DataImport_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_DataImport dataImportRecord = dataImportTable.get(dataRecordIdentifier);\n\t\t\tqueryBuilder.addEqualsFilter(I_I_BPartner.COLUMNNAME_C_DataImport_ID, dataImportRecord.getC_DataImport_ID());\n\n\t\t\tfinal String bpValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_BPValue);\n\t\t\tif (Check.isNotBlank(bpValue))\n\t\t\t{\n\t\t\t\tqueryBuilder.addStringLikeFilter(I_I_BPartner.COLUMNNAME_BPValue, bpValue, false);\n\t\t\t}\n\n\t\t\tfinal String companyName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Companyname);\n\t\t\tif (Check.isNotBlank(companyName))\n\t\t\t{\n\t\t\t\tqueryBuilder.addStringLikeFilter(I_I_BPartner.COLUMNNAME_Companyname, companyName, false);\n\t\t\t}\n\n\t\t\tfinal String bankDetails = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_BankDetails);\n\t\t\tif (Check.isNotBlank(bankDetails))\n\t\t\t{\n\t\t\t\tqueryBuilder.addStringLikeFilter(I_I_BPartner.COLUMNNAME_BankDetails, bankDetails, false);\n\t\t\t}\n\n\t\t\tfinal String iban = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IBAN);\n\t\t\tif (Check.isNotBlank(iban))\n\t\t\t{\n\t\t\t\tqueryBuilder.addStringLikeFilter(I_I_BPartner.COLUMNNAME_IBAN, iban, false);\n\t\t\t}\n\n\t\t\tfinal String qrIban = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_QR_IBAN);\n\t\t\tif (Check.isNotBlank(qrIban))\n\t\t\t{\n\t\t\t\tqueryBuilder.addStringLikeFilter(I_I_BPartner.COLUMNNAME_QR_IBAN, qrIban, false);\n\t\t\t}\n\n\t\t\tfinal I_I_BPartner importedRecord = queryBuilder.create()\n\t\t\t\t\t.firstOnly();\n\n\t\t\tfinal String iBpartnerRecordIdentifier = DataTableUtil.extractStringForColumnName(row, I_I_BPartner.COLUMNNAME_I_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tiBPartnerTable.putOrReplace(iBpartnerRecordIdentifier, importedRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ibpartner/I_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ibpartner",
      "filename": "I_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1632,
    "annotation": "\n\t@And(\"validate I_I_BPartner record:\")",
    "glue_code": "\t@And(\"validate I_I_BPartner record:\")\n\tpublic void validate_I_BPartner_record(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String iBpartnerRecordIdentifier = DataTableUtil.extractStringForColumnName(row, I_I_BPartner.COLUMNNAME_I_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_I_BPartner ibpRecord = iBPartnerTable.get(iBpartnerRecordIdentifier);\n\n\t\t\tfinal Boolean imported = DataTableUtil.extractBooleanForColumnNameOrNull(row, I_I_BPartner.COLUMNNAME_I_IsImported);\n\t\t\tsoftly.assertThat(ibpRecord.isI_IsImported()).as(\"IsImported\").isEqualTo(imported);\n\n\t\t\tfinal Boolean processed = DataTableUtil.extractBooleanForColumnNameOrNull(row, I_I_BPartner.COLUMNNAME_Processed);\n\t\t\tsoftly.assertThat(ibpRecord.isProcessed()).as(\"IsProcessed\").isEqualTo(processed);\n\n\t\t\tfinal String dataRecordIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_DataImport.COLUMNNAME_C_DataImport_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_DataImport dataImportRecord = dataImportTable.get(dataRecordIdentifier);\n\t\t\tsoftly.assertThat(ibpRecord.getC_DataImport_ID()).as(\"C_DataImport_ID\").isEqualTo(dataImportRecord.getC_DataImport_ID());\n\n\t\t\tfinal String bpValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_BPValue);\n\t\t\tif (Check.isNotBlank(bpValue))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getBPValue()).as(\"BPValue\").isEqualTo(bpValue);\n\t\t\t}\n\n\t\t\tfinal String companyName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Companyname);\n\t\t\tif (Check.isNotBlank(companyName))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getCompanyname()).as(\"Companyname\").isEqualTo(companyName);\n\t\t\t}\n\n\t\t\tfinal String taxId = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_TaxID);\n\t\t\tif (Check.isNotBlank(taxId))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getTaxID()).as(\"TaxID\").isEqualTo(taxId);\n\t\t\t}\n\n\t\t\tfinal String firstName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Firstname);\n\t\t\tif (Check.isNotBlank(firstName))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getFirstname()).as(\"Firstname\").isEqualTo(firstName);\n\t\t\t}\n\n\t\t\tfinal String lastName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Lastname);\n\t\t\tif (Check.isNotBlank(lastName))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getLastname()).as(\"Lastname\").isEqualTo(lastName);\n\t\t\t}\n\n\t\t\tfinal Boolean isShipToContactDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsShipToContact_Default, false);\n\t\t\tsoftly.assertThat(ibpRecord.isShipToContact_Default()).as(\"IsShipToContact_Default\").isEqualTo(isShipToContactDefault);\n\n\t\t\tfinal Boolean isBillToContactDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsBillToContact_Default, false);\n\t\t\tsoftly.assertThat(ibpRecord.isBillToContact_Default()).as(\"IsBillToContact_Default\").isEqualTo(isBillToContactDefault);\n\n\t\t\tfinal String address1 = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Address1);\n\t\t\tif (Check.isNotBlank(address1))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getAddress1()).as(\"Address1\").isEqualTo(address1);\n\t\t\t}\n\n\t\t\tfinal String city = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_City);\n\t\t\tif (Check.isNotBlank(city))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getCity()).as(\"City\").isEqualTo(city);\n\t\t\t}\n\n\t\t\tfinal String countryCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_CountryCode);\n\t\t\tif (Check.isNotBlank(countryCode))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getCountryCode()).as(\"CountryCode\").isEqualTo(countryCode);\n\t\t\t}\n\t\t\tfinal Boolean isBillToDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsBillToDefault, false);\n\n\t\t\tsoftly.assertThat(ibpRecord.isBillToDefault()).as(\"IsBillToDefault\").isEqualTo(isBillToDefault);\n\n\t\t\tfinal Boolean isShipToDefault = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsShipToDefault, false);\n\t\t\tsoftly.assertThat(ibpRecord.isShipToDefault()).as(\"IsShipToDefault\").isEqualTo(isShipToDefault);\n\n\t\t\tfinal String adLanguage = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_GroupValue);\n\t\t\tif (Check.isNotBlank(adLanguage))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getAD_Language()).as(\"AD_Language\").isEqualTo(adLanguage);\n\t\t\t}\n\t\t\tfinal String orgValue = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_OrgValue);\n\t\t\tif (Check.isNotBlank(orgValue))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getOrgValue()).as(\"OrgValue\").isEqualTo(orgValue);\n\t\t\t}\n\n\t\t\tfinal String postal = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_Postal);\n\t\t\tif (Check.isNotBlank(postal))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getPostal()).as(\"Postal\").isEqualTo(postal);\n\t\t\t}\n\n\t\t\tfinal String bankDetails = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_BankDetails);\n\t\t\tif (Check.isNotBlank(bankDetails))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getBankDetails()).as(\"BankDetails\").isEqualTo(bankDetails);\n\t\t\t}\n\n\t\t\tfinal String iban = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IBAN);\n\t\t\tif (Check.isNotBlank(iban))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getIBAN()).as(\"IBAN\").isEqualTo(iban);\n\t\t\t}\n\n\t\t\tfinal String qrIban = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_QR_IBAN);\n\t\t\tif (Check.isNotBlank(qrIban))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getQR_IBAN()).as(\"QR_IBAN\").isEqualTo(qrIban);\n\t\t\t}\n\n\t\t\tfinal String bpIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_C_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bpRecord = InterfaceWrapperHelper.load(ibpRecord.getC_BPartner_ID(), I_C_BPartner.class);\n\t\t\t\tbpartnerTable.putOrReplace(bpIdentifier, bpRecord);\n\t\t\t}\n\n\t\t\tfinal String bpLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_C_BPartner_Location_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location bpLocationRecord = InterfaceWrapperHelper.load(ibpRecord.getC_BPartner_Location_ID(), I_C_BPartner_Location.class);\n\t\t\t\tbpLocationTable.putOrReplace(bpLocationIdentifier, bpLocationRecord);\n\t\t\t}\n\n\t\t\tfinal String bpBankAccountIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_C_BP_BankAccount_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpBankAccountIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BP_BankAccount bpBankAccountRecord = InterfaceWrapperHelper.load(ibpRecord.getC_BP_BankAccount_ID(), I_C_BP_BankAccount.class);\n\t\t\t\tbpBankAccountTable.putOrReplace(bpBankAccountIdentifier, bpBankAccountRecord);\n\t\t\t}\n\n\t\t\tfinal String isoCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_ISO_Code);\n\t\t\tif (Check.isNotBlank(isoCode))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(ibpRecord.getISO_Code()).as(\"ISO_Code\").isEqualTo(isoCode);\n\t\t\t}\n\n\t\t\tfinal Boolean isManuallyCreated = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_I_BPartner.COLUMNNAME_IsManuallyCreated, false);\n\t\t\tsoftly.assertThat(ibpRecord.isManuallyCreated()).as(\"IsManuallyCreated\").isEqualTo(isManuallyCreated);\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 122,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ibpartner/I_BPartner_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/ibpartner",
      "filename": "I_BPartner_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1636,
    "annotation": "\n\t@And(\"I_Invoice_Candidate is found: searching by product value\")",
    "glue_code": "\t@And(\"I_Invoice_Candidate is found: searching by product value\")\n\tpublic void validate_I_Invoice_Candidate(@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tvalidateCreatedIInvoiceCandidate(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 103,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/iinvoicecandidate/I_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/iinvoicecandidate",
      "filename": "I_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1637,
    "annotation": "\n\t@And(\"locate I_Invoice_Candidate list searching by bill partner value\")",
    "glue_code": "\t@And(\"locate I_Invoice_Candidate list searching by bill partner value\")\n\tpublic void loadImportInvoiceCandidatesByPartnerValue(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String billBPartnerValue = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_Bill_BPartner_Value);\n\n\t\t\tfinal List<I_I_Invoice_Candidate> importInvoiceCandidates = queryBL.createQueryBuilder(I_I_Invoice_Candidate.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_I_Invoice_Candidate.COLUMNNAME_Bill_BPartner_Value, billBPartnerValue)\n\t\t\t\t\t.orderByDescending(I_I_Invoice_Candidate.COLUMNNAME_Created)\n\t\t\t\t\t.create()\n\t\t\t\t\t.list(I_I_Invoice_Candidate.class);\n\n\t\t\tfinal Integer numberOfCandidates = DataTableUtil.extractIntegerOrNullForColumnName(row, \"OPT.ExpectedCount\");\n\t\t\tif (numberOfCandidates != null)\n\t\t\t{\n\t\t\t\tassertThat(numberOfCandidates).as(\"ExpectedCount\").isEqualTo(importInvoiceCandidates.size());\n\t\t\t}\n\n\t\t\tfinal String iInvoiceCandidateIdentifier = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_I_Invoice_Candidate_ID + \"_List.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tiInvoiceCandidateListTable.putOrReplace(iInvoiceCandidateIdentifier, importInvoiceCandidates);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 112,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/iinvoicecandidate/I_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/iinvoicecandidate",
      "filename": "I_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1627,
    "annotation": "\n\t@And(\"load AD_ImpFormat:\")",
    "glue_code": "\t@And(\"load AD_ImpFormat:\")\n\tpublic void load_AD_ImpFormat_by_name(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_AD_ImpFormat.COLUMNNAME_Name);\n\n\t\t\tfinal I_AD_ImpFormat impFormat = queryBL.createQueryBuilder(I_AD_ImpFormat.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_AD_ImpFormat.COLUMNNAME_Name, name)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_AD_ImpFormat.class);\n\n\t\t\tassertThat(impFormat).isNotNull();\n\n\t\t\tfinal String impFormatIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_ImpFormat.COLUMNNAME_AD_ImpFormat_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\timpFormatTable.putOrReplace(impFormatIdentifier, impFormat);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/importFormat/AD_ImpFormat_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/importFormat",
      "filename": "AD_ImpFormat_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1628,
    "annotation": "\n\n\t@And(\"load AD_Org from AD_ImpFormat config:\")",
    "glue_code": "\n\t@And(\"load AD_Org from AD_ImpFormat config:\")\n\tpublic void load_AD_Org_for_AD_ImpFormat_value(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String impFormatIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_ImpFormat.COLUMNNAME_AD_ImpFormat_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_ImpFormat impFormat = impFormatTable.get(impFormatIdentifier);\n\t\t\tassertThat(impFormat).isNotNull();\n\n\t\t\tfinal String orgCodeFieldName = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_OrgCode + \".ImportRowFieldName\");\n\n\t\t\tfinal String orgCodeForImportRowFieldName = queryBL.createQueryBuilder(I_AD_ImpFormat.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_AD_ImpFormat.COLUMNNAME_AD_ImpFormat_ID, impFormat.getAD_ImpFormat_ID())\n\t\t\t\t\t.andCollectChildren(I_AD_ImpFormat_Row.COLUMNNAME_AD_ImpFormat_ID, I_AD_ImpFormat_Row.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_AD_ImpFormat_Row.COLUMNNAME_Name, orgCodeFieldName)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOptional(I_AD_ImpFormat_Row.class)\n\t\t\t\t\t.map(I_AD_ImpFormat_Row::getConstantValue)\n\t\t\t\t\t.orElse(null);\n\n\t\t\tassertThat(orgCodeForImportRowFieldName).isNotNull();\n\n\t\t\tfinal I_AD_Org org = queryBL.createQueryBuilder(I_AD_Org.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_AD_Org.COLUMNNAME_Value, orgCodeForImportRowFieldName)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_AD_Org.class);\n\n\t\t\tassertThat(org).isNotNull();\n\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_Org.COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\torgTable.putOrReplace(orgIdentifier, org);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/importFormat/AD_ImpFormat_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/importFormat",
      "filename": "AD_ImpFormat_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1727,
    "annotation": "\n\t@And(\"load C_Incoterms by id:\")",
    "glue_code": "\t@And(\"load C_Incoterms by id:\")\n\tpublic void load_C_Incoterms(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::loadC_Incoterm_ById);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 44,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/incoterms/C_Incoterms_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/incoterms",
      "filename": "C_Incoterms_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1728,
    "annotation": "\n\t@And(\"validate C_Incoterms:\")",
    "glue_code": "\t@And(\"validate C_Incoterms:\")\n\tpublic void validateC_Incoterms(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_C_Incoterms.COLUMNNAME_Value);\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_Incoterms.COLUMNNAME_Name);\n\n\t\t\tfinal String incotermsIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Incoterms.COLUMNNAME_C_Incoterms_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Incoterms incoterms = incotermsTable.get(incotermsIdentifier);\n\n\t\t\tsoftly.assertThat(incoterms.getValue()).isEqualTo(value);\n\t\t\tsoftly.assertThat(incoterms.getName()).isEqualTo(name);\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/incoterms/C_Incoterms_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/incoterms",
      "filename": "C_Incoterms_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1678,
    "annotation": "\n\t@And(\"create interim contract for modular contract\")",
    "glue_code": "\t@And(\"create interim contract for modular contract\")\n\tpublic void create_interim_contract(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String flatrateTermTableIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Flatrate_Term.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Flatrate_Term flatrateTerm = flatrateTermTable.get(flatrateTermTableIdentifier);\n\n\t\t\tinterimInvoiceFlatrateTermBL.create(flatrateTerm);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 51,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/interiminvoice/contract/C_Flatrate_Term_CreateInterimContract_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/interiminvoice/contract",
      "filename": "C_Flatrate_Term_CreateInterimContract_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1679,
    "annotation": "\n\t@And(\"create interim contract for modular contract with error\")",
    "glue_code": "\t@And(\"create interim contract for modular contract with error\")\n\tpublic void create_interim_contract_with_error(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String flatrateTermTableIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Flatrate_Term.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Flatrate_Term flatrateTerm = flatrateTermTable.get(flatrateTermTableIdentifier);\n\n\t\t\tfinal String errorCode = DataTableUtil.extractStringForColumnName(tableRow, \"errorCode\");\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tinterimInvoiceFlatrateTermBL.create(flatrateTerm);\n\t\t\t\tassertThat(1).as(\"An Exception should have been thrown !\").isEqualTo(2);\n\t\t\t}\n\t\t\tcatch (final AdempiereException exception)\n\t\t\t{\n\t\t\t\tassertThat(exception.getErrorCode()).as(\"ErrorCode of %s\", exception).isEqualTo(errorCode);\n\t\t\t}\n\t\t}\n\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 64,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/interiminvoice/contract/C_Flatrate_Term_CreateInterimContract_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/interiminvoice/contract",
      "filename": "C_Flatrate_Term_CreateInterimContract_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1722,
    "annotation": "\n\t@And(\"invoke \\\"createInterimInvoiceCandidatesFor\\\" function:\")",
    "glue_code": "\t@And(\"invoke \\\"createInterimInvoiceCandidatesFor\\\" function:\")\n\tpublic void invokeCreateInterimInvoiceCandidatesForFunction(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String flatrateTermIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Flatrate_Term.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Flatrate_Term flatrateTermRecord = contractTable.get(flatrateTermIdentifier);\n\n\t\t\tfinal Set<InvoiceCandidateId> generatedICIds = interimInvoiceCandidateService.createInterimInvoiceCandidatesFor(flatrateTermRecord);\n\t\t\tassociateGeneratedIds(generatedICIds, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/interiminvoice/invoice/C_BPartner_InterimContract_GenerateInterimInvoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/interiminvoice/invoice",
      "filename": "C_BPartner_InterimContract_GenerateInterimInvoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1701,
    "annotation": "\n\t@Given(\"metasfresh contains M_Inventories:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Inventories:\")\n\tpublic void addNewInventory(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Inventory.COLUMNNAME_M_Inventory_ID)\n\t\t\t\t.forEach(this::addNewInventory);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 107,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1702,
    "annotation": "\n\t@Given(\"metasfresh contains M_InventoriesLines:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_InventoriesLines:\")\n\tpublic void addNewInventoryLines(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_InventoryLine.COLUMNNAME_M_InventoryLine_ID)\n\t\t\t\t.forEach(this::addNewInventoryLine);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 115,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1703,
    "annotation": "\n\t@Given(\"^the inventory identified by (.*) is (completed|reversed)\")",
    "glue_code": "\t@Given(\"^the inventory identified by (.*) is (completed|reversed)\")\n\tpublic void inventory_is_completed(@NonNull final String inventoryIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_M_Inventory inventory = inventoryTable.get(inventoryIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase completed ->\n\t\t\t{\n\t\t\t\tinventory.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(inventory, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t}\n\t\t\tcase reversed ->\n\t\t\t{\n\t\t\t\tinventory.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(inventory, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t}\n\t\t\tdefault -> throw new AdempiereException(\"Unhandled M_Inventory action\")\n\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 123,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1704,
    "annotation": "\n\t@And(\"the following virtual inventory is created\")",
    "glue_code": "\t@And(\"the following virtual inventory is created\")\n\tpublic void createVirtualInventory(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal de.metas.inoutcandidate.model.I_M_ShipmentSchedule shipmentScheduleRecord = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Product.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_M_Product productRecord = productTable.get(productIdentifier);\n\n\t\tassertThat(productRecord).isNotNull();\n\n\t\tfinal I_C_UOM productUOM = uomDAO.getById(productRecord.getC_UOM_ID());\n\n\t\tfinal int qtyToBeAddedParam = DataTableUtil.extractIntForColumnName(row, \"QtyToBeAdded\");\n\n\t\tfinal Quantity qtyToBeAdded = Quantity.of(qtyToBeAddedParam, productUOM);\n\n\t\tfinal WarehouseId warehouseId = WarehouseId.ofRepoId(shipmentScheduleRecord.getM_Warehouse_ID());\n\t\tfinal OrgId orgId = OrgId.ofRepoId(shipmentScheduleRecord.getAD_Org_ID());\n\t\tfinal ClientId clientId = ClientId.ofRepoId(shipmentScheduleRecord.getAD_Client_ID());\n\t\tfinal ProductId productId = ProductId.ofRepoId(productRecord.getM_Product_ID());\n\t\tfinal AttributeSetInstanceId attributeSetInstanceId = AttributeSetInstanceId.ofRepoIdOrNull(shipmentScheduleRecord.getM_AttributeSetInstance_ID());\n\n\t\tfinal CreateVirtualInventoryWithQtyReq req = CreateVirtualInventoryWithQtyReq.builder()\n\t\t\t\t.clientId(clientId)\n\t\t\t\t.orgId(orgId)\n\t\t\t\t.warehouseId(warehouseId)\n\t\t\t\t.productId(productId)\n\t\t\t\t.qty(qtyToBeAdded)\n\t\t\t\t.movementDate(SystemTime.asZonedDateTime())\n\t\t\t\t.attributeSetInstanceId(attributeSetInstanceId)\n\t\t\t\t.build();\n\n\t\tfinal HuId huId = inventoryService.createInventoryForMissingQty(req);\n\n\t\thuTable.put(huIdentifier, InterfaceWrapperHelper.load(huId, I_M_HU.class));\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 146,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1705,
    "annotation": "\n\t@And(\"metasfresh initially has M_Inventory data\")",
    "glue_code": "\t@And(\"metasfresh initially has M_Inventory data\")\n\tpublic void setupM_Inventory_Data(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createM_Inventory);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1706,
    "annotation": "\n\t@And(\"metasfresh initially has M_InventoryLine data\")",
    "glue_code": "\t@And(\"metasfresh initially has M_InventoryLine data\")\n\tpublic void setupM_InventoryLine_Data(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createM_InventoryLine);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 194,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1707,
    "annotation": "\n\t@And(\"complete inventory with inventoryIdentifier {string}\")",
    "glue_code": "\t@And(\"complete inventory with inventoryIdentifier {string}\")\n\tpublic void complete_inventory(@NonNull final String identifiersString)\n\t{\n\t\tfinal List<StepDefDataIdentifier> identifiers = StepDefDataIdentifier.ofCommaSeparatedString(identifiersString);\n\t\tidentifiers.forEach(identifier -> {\n\t\t\tfinal InventoryId inventoryId = inventoryTable.getId(identifier);\n\t\t\tinventoryService.completeDocument(inventoryId);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 200,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1708,
    "annotation": "\n\t@Given(\"metasfresh contains single line completed inventories\")",
    "glue_code": "\t@Given(\"metasfresh contains single line completed inventories\")\n\tpublic void addSingleLineInventories(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::addSingleLineInventory);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 366,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory/M_Inventory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/inventory",
      "filename": "M_Inventory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1695,
    "annotation": "\n\t@And(\"metasfresh contains C_InvoiceLines\")",
    "glue_code": "\t@And(\"metasfresh contains C_InvoiceLines\")\n\tpublic void addC_InvoiceLines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_C_InvoiceLine.COLUMNNAME_C_InvoiceLine_ID)\n\t\t\t\t.forEach(this::create_C_InvoiceLine);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_InvoiceLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_InvoiceLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1696,
    "annotation": "\n\t@And(\"validate created invoice lines\")",
    "glue_code": "\t@And(\"validate created invoice lines\")\n\tpublic void validate_created_invoice_lines(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Invoice.COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Invoice invoiceRecord = invoiceTable.get(invoiceIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_InvoiceLine.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal int expectedProductId = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\n\t\t\tfinal BigDecimal qtyinvoiced = DataTableUtil.extractBigDecimalForColumnName(row, I_C_InvoiceLine.COLUMNNAME_QtyInvoiced);\n\n\t\t\t//dev-note: we assume the tests are generally not using the same product and qty on different lines...\n\t\t\tfinal IQueryBuilder<I_C_InvoiceLine> queryBuilder = queryBL.createQueryBuilder(I_C_InvoiceLine.class)\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_C_Invoice_ID, invoiceRecord.getC_Invoice_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_M_Product_ID, expectedProductId)\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_QtyInvoiced, qtyinvoiced);\n\n\t\t\t// ...or if they do, they have different inoutlines\n\t\t\tfinal String inoutLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_InvoiceLine.COLUMNNAME_M_InOutLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (EmptyUtil.isNotBlank(inoutLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_InOutLine inOutLineRecord = inOutLineTable.get(inoutLineIdentifier);\n\t\t\t\tqueryBuilder.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_M_InOutLine_ID, inOutLineRecord.getM_InOutLine_ID());\n\t\t\t}\n\n\t\t\tfinal I_C_InvoiceLine invoiceLineRecord = queryBuilder\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_InvoiceLine.class);\n\n\t\t\tvalidateInvoiceLine(invoiceLineRecord, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 122,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_InvoiceLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_InvoiceLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1697,
    "annotation": "\n\t@And(\"^validate invoice lines for (.*):$\")",
    "glue_code": "\t@And(\"^validate invoice lines for (.*):$\")\n\tpublic void validate_invoice_lines(@NonNull final String invoiceIdentifier, @NonNull final DataTable table)\n\t{\n\t\tfinal I_C_Invoice invoiceRecord = invoiceTable.get(invoiceIdentifier);\n\n\t\tfinal List<I_C_InvoiceLine> invoiceLines = queryBL.createQueryBuilder(I_C_InvoiceLine.class)\n\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_C_Invoice_ID, invoiceRecord.getC_Invoice_ID())\n\t\t\t\t.create()\n\t\t\t\t.list(I_C_InvoiceLine.class);\n\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\n\t\tfinal StringBuilder invoiceLinesErrorMessage = new StringBuilder(\"Found the following invoice lines: \\n\");\n\t\tinvoiceLines.forEach(invoiceLine -> {\n\t\t\tinvoiceLinesErrorMessage.append(\"C_InvoiceLine.QtyInvoiced: \").append(invoiceLine.getQtyInvoiced()).append(\"; \");\n\t\t\tinvoiceLinesErrorMessage.append(\"C_InvoiceLine.Processed: \").append(invoiceLine.isProcessed()).append(\"; \");\n\t\t\tinvoiceLinesErrorMessage.append(\"C_InvoiceLine.PriceEntered: \").append(invoiceLine.getPriceEntered()).append(\"; \");\n\t\t\tinvoiceLinesErrorMessage.append(\"C_InvoiceLine.PriceActual: \").append(invoiceLine.getPriceActual()).append(\"; \");\n\t\t\tinvoiceLinesErrorMessage.append(\"C_InvoiceLine.LineNetAmt: \").append(invoiceLine.getLineNetAmt()).append(\"; \");\n\t\t\tinvoiceLinesErrorMessage.append(\"C_InvoiceLine.Discount: \").append(invoiceLine.getDiscount()).append(\"; \");\n\t\t\tinvoiceLinesErrorMessage.append(\"\\n\");\n\t\t});\n\n\t\tassertThat(invoiceLines.size()).as(invoiceLinesErrorMessage.toString()).isEqualTo(dataTable.size());\n\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_InvoiceLine.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer productID = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\t\t\tassertThat(productID).isNotNull();\n\n\t\t\tfinal BigDecimal qtyinvoiced = DataTableUtil.extractBigDecimalForColumnName(row, I_C_InvoiceLine.COLUMNNAME_QtyInvoiced);\n\n\t\t\tfinal I_C_InvoiceLine currentInvoiceLine = Check.singleElement(invoiceLines.stream()\n\t\t\t\t\t.filter(line -> line.getM_Product_ID() == productID)\n\t\t\t\t\t.filter(line -> line.getQtyInvoiced().equals(qtyinvoiced))\n\t\t\t\t\t.collect(ImmutableList.toImmutableList()));\n\n\t\t\tvalidateInvoiceLine(currentInvoiceLine, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 161,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_InvoiceLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_InvoiceLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1698,
    "annotation": "\n\t@And(\"validate created modular invoice lines\")",
    "glue_code": "\t@And(\"validate created modular invoice lines\")\n\tpublic void validate_created_modular_invoice_lines(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Invoice.COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Invoice invoiceRecord = invoiceTable.get(invoiceIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_InvoiceLine.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal int expectedProductId = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\n\t\t\tfinal BigDecimal qtyinvoiced = DataTableUtil.extractBigDecimalForColumnName(row, I_C_InvoiceLine.COLUMNNAME_QtyInvoiced);\n\n\t\t\tfinal String productName = DataTableUtil.extractStringForColumnName(row, I_C_InvoiceLine.COLUMNNAME_ProductName);\n\n\t\t\t//dev-note: we assume the tests are not using the same product, qty and product name on different lines\n\t\t\tfinal Optional<I_C_InvoiceLine> invoiceLineRecord = queryBL.createQueryBuilder(I_C_InvoiceLine.class)\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_C_Invoice_ID, invoiceRecord.getC_Invoice_ID())\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_M_Product_ID, expectedProductId)\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_QtyInvoiced, qtyinvoiced)\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_ProductName, productName)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOptional(I_C_InvoiceLine.class);\n\n\t\t\tif (invoiceLineRecord.isEmpty())\n\t\t\t{\n\t\t\t\tfinal StringBuilder message = new StringBuilder();\n\n\t\t\t\tmessage.append(\"C_InvoiceLine records:\").append(\"\\n\");\n\n\t\t\t\tqueryBL.createQueryBuilder(I_C_InvoiceLine.class)\n\t\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_C_Invoice_ID, invoiceRecord.getC_Invoice_ID())\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.stream(I_C_InvoiceLine.class)\n\t\t\t\t\t\t.forEach(line -> message\n\t\t\t\t\t\t\t\t.append(COLUMNNAME_M_Product_ID).append(\" : \").append(line.getM_Product_ID()).append(\" ; \")\n\t\t\t\t\t\t\t\t.append(COLUMNNAME_QtyInvoiced).append(\" : \").append(line.getQtyInvoiced()).append(\" ; \")\n\t\t\t\t\t\t\t\t.append(I_C_InvoiceLine.COLUMNNAME_ProductName).append(\" : \").append(line.getProductName()).append(\" ; \")\n\t\t\t\t\t\t\t\t.append(\"\\n\"));\n\t\t\t\tfinal String invoiceLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_InvoiceLine.COLUMNNAME_C_InvoiceLine_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\t\tlogger.error(\"*** Error while looking for C_InvoiceLine: \" + invoiceLineIdentifier + \", see all lines: \\n\" + message);\n\t\t\t}\n\n\t\t\tvalidateInvoiceLine(invoiceLineRecord.get(), row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 206,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_InvoiceLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_InvoiceLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1756,
    "annotation": "\n\t@And(\"C_Invoice_Acct is found:\")",
    "glue_code": "\t@And(\"C_Invoice_Acct is found:\")\n\tpublic void find_C_Invoice_Acct(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfindInvoiceAcct(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1757,
    "annotation": "\n\t@And(\"metasfresh contains C_Invoice_Acct:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Invoice_Acct:\")\n\tpublic void contains_C_Invoice_Acct(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tcreateInvoiceAcct(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1758,
    "annotation": "\n\t@And(\"update C_Invoice_Acct:\")",
    "glue_code": "\t@And(\"update C_Invoice_Acct:\")\n\tpublic void update_C_Invoice_Acct(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tupdateInvoiceAcct(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 93,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Acct_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Acct_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1699,
    "annotation": "\n\t@Then(\"validate invoice candidate status response\")",
    "glue_code": "\t@Then(\"validate invoice candidate status response\")\n\tpublic void validateInvoiceCandidateStatusResponse(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonCheckInvoiceCandidatesStatusResponse statusResponse = objectMapper.readValue(testContext.getApiResponse().getContent(), JsonCheckInvoiceCandidatesStatusResponse.class);\n\t\tassertThat(statusResponse).isNotNull();\n\n\t\tfinal List<JsonCheckInvoiceCandidatesStatusResponseItem> responseItemList = statusResponse.getInvoiceCandidates();\n\t\tassertThat(responseItemList).isNotNull();\n\t\tassertThat(responseItemList.size()).isEqualTo(1);\n\n\t\tfinal JsonCheckInvoiceCandidatesStatusResponseItem responseItem = responseItemList.get(0);\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String externalHeaderId = DataTableUtil.extractStringForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_ExternalHeaderId);\n\t\t\tfinal String externalLineId = DataTableUtil.extractStringForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_ExternalLineId);\n\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_QtyEntered);\n\t\t\tfinal BigDecimal qtyToInvoice = DataTableUtil.extractBigDecimalForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_QtyToInvoice);\n\t\t\tfinal BigDecimal qtyInvoiced = DataTableUtil.extractBigDecimalForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_QtyInvoiced);\n\t\t\tfinal boolean processed = DataTableUtil.extractBooleanForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_Processed);\n\n\t\t\tsoftly.assertThat(responseItem.getExternalHeaderId().getValue()).as(\"externalHeaderId\").isEqualTo(externalHeaderId);\n\t\t\tsoftly.assertThat(responseItem.getExternalLineId().getValue()).as(\"externalLineId\").isEqualTo(externalLineId);\n\t\t\tsoftly.assertThat(responseItem.getQtyToInvoice()).as(\"qtyToInvoice\").isEqualTo(qtyToInvoice);\n\t\t\tsoftly.assertThat(responseItem.getQtyInvoiced()).as(\"qtyInvoiced\").isEqualTo(qtyInvoiced);\n\t\t\tsoftly.assertThat(responseItem.getQtyEntered()).as(\"qtyEntered\").isEqualTo(qtyEntered);\n\t\t\tsoftly.assertThat(responseItem.isProcessed()).as(\"processed\").isEqualTo(processed);\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Candidate_API_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Candidate_API_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1682,
    "annotation": "\n\t@And(\"the user creates a JsonInvoiceReviewUpsertItem and stores it in the context\")",
    "glue_code": "\t@And(\"the user creates a JsonInvoiceReviewUpsertItem and stores it in the context\")\n\tpublic void creteJsonInvoiceReviewUpsertItem(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tassertThat(tableRows.size()).isEqualTo(1);\n\t\tfinal Map<String, String> tableRow = tableRows.get(0);\n\n\t\tfinal String orgCode = tableRow.get(\"orgCode\");\n\t\tfinal String customColumn = tableRow.get(\"customColumn\");\n\n\t\tfinal JsonInvoiceReviewUpsertItem.JsonInvoiceReviewUpsertItemBuilder payloadBuilder = JsonInvoiceReviewUpsertItem.builder();\n\n\t\tif (tableRow.containsKey(\"OPT.\" + COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER))\n\t\t{\n\t\t\tfinal I_C_Invoice invoice = invoiceTable.get(tableRow.get(\"OPT.\" + COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER));\n\t\t\tpayloadBuilder.invoiceId(invoice.getC_Invoice_ID());\n\t\t}\n\t\telse if (tableRow.containsKey(\"OPT.\" + COLUMNNAME_ExternalId))\n\t\t{\n\t\t\tpayloadBuilder.externalId(tableRow.get(\"OPT.\" + COLUMNNAME_ExternalId));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new AdempiereException(\"Don't know how to identify invoice to review\");\n\t\t}\n\n\t\tfinal JsonInvoiceReviewUpsertItem payload = payloadBuilder\n\t\t\t\t.orgCode(orgCode)\n\t\t\t\t.extendedProps(Collections.singletonMap(\"customColumn\", customColumn))\n\t\t\t\t.build();\n\n\t\ttestContext.setRequestPayload(JsonObjectMapperHolder.newJsonObjectMapper().writeValueAsString(payload));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Review_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Review_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1683,
    "annotation": "\n\t@Then(\"validate invoice reviews and store them with their identifiers\")",
    "glue_code": "\t@Then(\"validate invoice reviews and store them with their identifiers\")\n\tpublic void validateInvoiceReviewAndStoreItsIdentifier(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal InvoiceReviewRepository invoiceReviewRepository = new InvoiceReviewRepository(customColumnService);\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal int invoiceId = invoiceTable.get(invoiceIdentifier).getC_Invoice_ID();\n\n\t\t\tfinal InvoiceReview review = invoiceReviewRepository.getByInvoiceId(InvoiceId.ofRepoId(invoiceId));\n\n\t\t\t// soft assertion makes no sense here, because if this fails we can't test any further and will run into an NPE\n\t\t\tassertThat(review).as(\"Missing InvoiceReview for invoiceId %s (identifier=%s)\", invoiceId, invoiceIdentifier).isNotNull();\n\n\t\t\tfinal I_C_Invoice_Review reviewRecord = InterfaceWrapperHelper.load(review.getId(), I_C_Invoice_Review.class);\n\n\t\t\tvalidateInvoiceReview(reviewRecord, row);\n\t\t\tinvoiceReviewTable.put(invoiceIdentifier, reviewRecord);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Review_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Review_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1684,
    "annotation": "\n\t@And(\"validate invoice reviews\")",
    "glue_code": "\t@And(\"validate invoice reviews\")\n\tpublic void validate_invoice_reviews(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String identifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Review_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Invoice_Review review = invoiceReviewTable.get(identifier);\n\n\t\t\tvalidateInvoiceReview(review, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 136,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Review_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Review_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1685,
    "annotation": "\n\t@And(\"process invoice review create response\")",
    "glue_code": "\t@And(\"process invoice review create response\")\n\tpublic void process_invoice_review_create_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonCreateInvoiceReviewResponse jsonCreateInvoiceResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonCreateInvoiceReviewResponse.class);\n\n\t\tfinal JsonCreateInvoiceReviewResponseResult result = jsonCreateInvoiceResponse.getResult();\n\t\tassertThat(result).as(\"the received jsonCreateInvoiceResponse has a null-result; response=%s\", jsonCreateInvoiceResponse).isNotNull();\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\tsoftly.assertThat(result.getReviewId()).as(\"result.reviewId\").isNotNull();\n\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getErrors()).as(\"result.errors\").isNull();\n\t\tsoftly.assertAll();\n\n\t\tfinal I_C_Invoice_Review review = InterfaceWrapperHelper.load(result.getReviewId().getValue(), I_C_Invoice_Review.class);\n\t\tassertThat(review).isNotNull();\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Review_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tinvoiceReviewTable.put(invoiceIdentifier, review);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 175,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Review_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Review_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1686,
    "annotation": "\n\t@Then(\"validate invoice review api response error message\")",
    "glue_code": "\t@Then(\"validate invoice review api response error message\")\n\tpublic void validate_api_response_error_message(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String message = DataTableUtil.extractStringForColumnName(row, \"JsonErrorItem.message\");\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal JsonCreateInvoiceReviewResponse jsonCreateInvoiceResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonCreateInvoiceReviewResponse.class);\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getResult()).isNull();\n\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getErrors()).isNotNull();\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getErrors()).hasSize(1);\n\t\t\tsoftly.assertAll();\n\n\t\t\tassertThat(jsonCreateInvoiceResponse.getErrors().get(0).getMessage()).contains(message);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 197,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_Review_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_Review_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1710,
    "annotation": "\n\t@And(\"validate created invoices\")",
    "glue_code": "\t@And(\"validate created invoices\")\n\tpublic void validate_created_invoices(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::validateInvoice);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 209,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1711,
    "annotation": "\n\t@And(\"^the invoice identified by (.*) is (completed|reversed|voided)$\")",
    "glue_code": "\t@And(\"^the invoice identified by (.*) is (completed|reversed|voided)$\")\n\tpublic void invoice_action(@NonNull final String invoiceIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_C_Invoice invoice = invoiceTable.get(invoiceIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase reversed:\n\t\t\t\tinvoice.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MInvoice.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(invoice, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t\tbreak;\n\t\t\tcase completed:\n\t\t\t\tinvoice.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(invoice, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tbreak;\n\t\t\tcase voided:\n\t\t\t\tdocumentBL.processEx(invoice, IDocument.ACTION_Void, IDocument.STATUS_Voided);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled C_Invoice action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 215,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1712,
    "annotation": "\n\t@And(\"load C_Invoice:\")",
    "glue_code": "\t@And(\"load C_Invoice:\")\n\tpublic void loadC_Invoice(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal BigDecimal qtyInvoiced = DataTableUtil.extractBigDecimalForColumnName(row, I_C_InvoiceLine.COLUMNNAME_QtyInvoiced);\n\n\t\t\tfinal IQueryBuilder<I_C_InvoiceLine> invoiceLineBuilder = queryBL.createQueryBuilder(I_C_InvoiceLine.class)\n\t\t\t\t\t.addEqualsFilter(I_C_InvoiceLine.COLUMNNAME_QtyInvoiced, qtyInvoiced);\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_InvoiceLine.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tinvoiceLineBuilder.addEqualsFilter(I_M_InOutLine.COLUMNNAME_C_OrderLine_ID, orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal I_C_InvoiceLine invoiceLine = invoiceLineBuilder.create()\n\t\t\t\t\t.firstOnlyNotNull(I_C_InvoiceLine.class);\n\n\t\t\tfinal String invoiceLineIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_InvoiceLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinvoiceLineTable.putOrReplace(invoiceLineIdentifier, invoiceLine);\n\n\t\t\tfinal I_C_Invoice invoice = InterfaceWrapperHelper.load(invoiceLine.getC_Invoice_ID(), I_C_Invoice.class);\n\t\t\tassertThat(invoice).isNotNull();\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_DocStatus);\n\t\t\tassertThat(invoice.getDocStatus()).isEqualTo(docStatus);\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice.COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\tassertThat(invoice.getC_Order_ID()).isEqualTo(order.getC_Order_ID());\n\t\t\t}\n\n\t\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinvoiceTable.putOrReplace(invoiceIdentifier, invoice);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 240,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1713,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_Invoice are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_Invoice are found:$\")\n\tpublic void wait_until_there_are_invoices(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> loadInvoice(tableRow));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 281,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1714,
    "annotation": "\n\t@And(\"metasfresh contains C_Invoice:\")",
    "glue_code": "\t@And(\"metasfresh contains C_Invoice:\")\n\tpublic void addC_Invoices(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::create_C_Invoice);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 290,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1715,
    "annotation": "\n\t@And(\"create credit memo for C_Invoice\")",
    "glue_code": "\t@And(\"create credit memo for C_Invoice\")\n\tpublic void create_credit_memo_for_invoice(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(\"CreditMemo\")\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal I_C_Invoice invoice = row.getAsIdentifier(COLUMNNAME_C_Invoice_ID).lookupNotNullIn(invoiceTable);\n\t\t\t\t\tfinal BigDecimal creditMemoLineAmt = row.getAsBigDecimal(\"CreditMemo.PriceEntered\");\n\t\t\t\t\tfinal DocTypeId creditMemoDocTypeId = docTypeBL.getDocTypeId(\n\t\t\t\t\t\t\tDocTypeQuery.builder()\n\t\t\t\t\t\t\t\t\t.docBaseType(invoice.isSOTrx() ? DocBaseType.SalesCreditMemo : DocBaseType.PurchaseCreditMemo)\n\t\t\t\t\t\t\t\t\t.docSubType(DocTypeQuery.DOCSUBTYPE_NONE)\n\t\t\t\t\t\t\t\t\t.adClientId(invoice.getAD_Client_ID())\n\t\t\t\t\t\t\t\t\t.adOrgId(invoice.getAD_Org_ID())\n\t\t\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tfinal InvoiceCreditContext creditCtx = InvoiceCreditContext.builder()\n\t\t\t\t\t\t\t.docTypeId(creditMemoDocTypeId)\n\t\t\t\t\t\t\t.completeAndAllocate(false)\n\t\t\t\t\t\t\t.referenceOriginalOrder(false)\n\t\t\t\t\t\t\t.referenceInvoice(true)\n\t\t\t\t\t\t\t.creditedInvoiceReinvoicable(false).build();\n\n\t\t\t\t\tfinal I_C_Invoice creditMemo = invoiceBL.creditInvoice(InterfaceWrapperHelper.create(invoice, de.metas.adempiere.model.I_C_Invoice.class), creditCtx);\n\n\t\t\t\t\tfor (final de.metas.adempiere.model.I_C_InvoiceLine creditMemoLine : invoiceDAO.retrieveLines(InvoiceId.ofRepoId(creditMemo.getC_Invoice_ID())))\n\t\t\t\t\t{\n\t\t\t\t\t\tcreditMemoLine.setPriceActual(creditMemoLineAmt);\n\n\t\t\t\t\t\t// dev note : manually triggering as callouts don't run in cucumber\n\t\t\t\t\t\tinvoiceLineBL.updatePrices(creditMemoLine);\n\t\t\t\t\t\tinvoiceBL.setLineNetAmt(creditMemoLine);\n\n\t\t\t\t\t\tInterfaceWrapperHelper.save(creditMemoLine);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.getAsIdentifier().putOrReplace(invoiceTable, creditMemo);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 296,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1716,
    "annotation": "\n\t@And(\"process invoice create response\")",
    "glue_code": "\t@And(\"process invoice create response\")\n\tpublic void process_invoice_create_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonCreateInvoiceResponse jsonCreateInvoiceResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonCreateInvoiceResponse.class);\n\n\t\tfinal JsonCreateInvoiceResponseResult result = jsonCreateInvoiceResponse.getResult();\n\t\tassertThat(result).isNotNull();\n\t\tassertThat(jsonCreateInvoiceResponse.getErrors()).isNull();\n\n\t\tfinal List<I_C_Invoice> invoiceRecords = invoiceDAO.getByDocumentNo(result.getDocumentNo(), Env.getOrgId(), I_C_Invoice.class);\n\t\tassertThat(invoiceRecords).hasSize(1);\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String invoiceIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tinvoiceTable.put(invoiceIdentifier, invoiceRecords.get(0));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 337,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1717,
    "annotation": "\n\t@Then(\"validate invoice api response error message\")",
    "glue_code": "\t@Then(\"validate invoice api response error message\")\n\tpublic void validate_api_response_error_message(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String message = DataTableUtil.extractStringForColumnName(row, \"JsonErrorItem.message\");\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal JsonCreateInvoiceResponse jsonCreateInvoiceResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonCreateInvoiceResponse.class);\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getResult()).isNull();\n\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getErrors()).isNotNull();\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getErrors()).hasSize(1);\n\t\t\tsoftly.assertThat(jsonCreateInvoiceResponse.getErrors().get(0).getMessage()).contains(message);\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 355,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1718,
    "annotation": "\n\t@And(\"^locate invoice by external id after not more than (.*)s and validate$\")",
    "glue_code": "\t@And(\"^locate invoice by external id after not more than (.*)s and validate$\")\n\tpublic void locate_invoice_by_external_id(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_C_Invoice invoice = StepDefUtil.tryAndWaitForItem(timeoutSec,\n\t\t\t\t\t10000,\n\t\t\t\t\t() -> findInvoiceByExternalIdAndCandidateCount(row));\n\n\t\t\tfinal LocalDate dateInvoiced = DataTableUtil.extractLocalDateOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_DateInvoiced);\n\n\t\t\tif (dateInvoiced != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(TimeUtil.asLocalDate(invoice.getDateInvoiced(), ZonedDateTime.now().getZone())).as(\"DateInvoiced\")\n\t\t\t\t\t\t.isEqualTo(dateInvoiced);\n\t\t\t}\n\n\t\t\tfinal Integer numberOfCandidates = DataTableUtil.extractIntegerOrNullForColumnName(row, \"OPT.NumberOfCandidates\");\n\n\t\t\tif (numberOfCandidates != null)\n\t\t\t{\n\t\t\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = invoiceCandDAO.retrieveInvoiceCandidates(InvoiceId.ofRepoId(invoice.getC_Invoice_ID()));\n\n\t\t\t\tsoftly.assertThat(invoiceCandidates.size()).as(\"NumberOfInvoiceCandidates\").isEqualTo(numberOfCandidates);\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 375,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1719,
    "annotation": "\n\t@And(\"update C_Invoice:\")",
    "glue_code": "\t@And(\"update C_Invoice:\")\n\tpublic void update_C_Invoice(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tupdateInvoice(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 938,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/C_Invoice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "C_Invoice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1677,
    "annotation": "\n\t@Then(\"validate invoice-api response error message\")",
    "glue_code": "\t@Then(\"validate invoice-api response error message\")\n\tpublic void validate_api_response_error_message(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper objectMapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\t\tfinal JsonCreateInvoiceResponse jsonErrorItem;\n\t\tfinal String responseContent = testContext.getApiResponse().getContent();\n\t\ttry\n\t\t{\n\t\t\tjsonErrorItem = objectMapper.readValue(responseContent, JsonCreateInvoiceResponse.class);\n\t\t}\n\t\tcatch (final RuntimeException rte)\n\t\t{\n\t\t\tfail(\"Error parsing string into class \" + JsonErrorItem.class + \"; string=\" + responseContent);\n\t\t\tthrow rte;\n\t\t}\n\n\t\tfinal List<JsonErrorItem> errors = jsonErrorItem.getErrors();\n\t\tassertThat(errors).as(\"errors\").isNotNull();\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfinal List<Map<String, String>> dataTableAsMaps = dataTable.asMaps();\n\t\tsoftly.assertThat(errors).as(\"number of errors\").hasSize(dataTableAsMaps.size());\n\n\t\tint i = 0;\n\t\tfor (final Map<String, String> row : dataTableAsMaps)\n\t\t{\n\t\t\tfinal String message = DataTableUtil.extractStringForColumnName(row, \"JsonErrorItem.message\");\n\n\t\t\tif (errors.size() > i)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(errors.get(i).getMessage()).startsWith(message);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsoftly.fail(\"missing error for row=\" + row);\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice/InvoiceRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoice",
      "filename": "InvoiceRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1732,
    "annotation": "\n\t@And(\"locate C_Invoice_Candidate records for each import record from list\")",
    "glue_code": "\t@And(\"locate C_Invoice_Candidate records for each import record from list\")\n\tpublic void locate_invoice_candidate_list_by_reference(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String iInvoiceCandListIdentifier = DataTableUtil.extractStringForColumnName(row, I_I_Invoice_Candidate.COLUMNNAME_I_Invoice_Candidate_ID + \"_List.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal List<I_I_Invoice_Candidate> iIInvoiceCandidateList = iInvoiceCandidateListTable.get(iInvoiceCandListIdentifier);\n\n\t\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = iIInvoiceCandidateList.stream()\n\t\t\t\t\t.map(TableRecordReference::of)\n\t\t\t\t\t.map(invoiceCandDAO::retrieveReferencing)\n\t\t\t\t\t.flatMap(List::stream)\n\t\t\t\t\t.collect(ImmutableList.toImmutableList());\n\n\t\t\tassertThat(invoiceCandidates.size()).as(\"I_C_Invoice_Candidate.list.size\").isEqualTo(iIInvoiceCandidateList.size());\n\n\t\t\tfinal String invoiceCandidateListIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \"_List.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinvoiceCandidateListTable.putOrReplace(invoiceCandidateListIdentifier, invoiceCandidates);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_List_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_List_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1733,
    "annotation": "\n\t@And(\"update invoice candidate list: filter by product\")",
    "glue_code": "\t@And(\"update invoice candidate list: filter by product\")\n\tpublic void update_invoice_candidate_list_filter_by_product(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String invoiceCandidateListIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Invoice_Candidate_ID + \"_List.\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = invoiceCandidateListTable.get(invoiceCandidateListIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal String externalHeaderId = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + COLUMNNAME_ExternalHeaderId);\n\n\t\t\tinvoiceCandidates\n\t\t\t\t\t.stream()\n\t\t\t\t\t.filter(candidate -> candidate.getM_Product_ID() == product.getM_Product_ID())\n\t\t\t\t\t.forEach(invoiceCandidate -> {\n\t\t\t\t\t\tif (externalHeaderId != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinvoiceCandidate.setExternalHeaderId(externalHeaderId);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tInterfaceWrapperHelper.saveRecord(invoiceCandidate);\n\t\t\t\t\t});\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 101,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_List_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_List_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1734,
    "annotation": "\n\t@And(\"build enqueue invoice candidates REST-API request\")",
    "glue_code": "\t@And(\"build enqueue invoice candidates REST-API request\")\n\tpublic void enqueue_invoice_candidates_list_for_invoicing_via_API(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal String invoiceCandidateListIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Invoice_Candidate_ID + \"_List.\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal LocalDate dateInvoiced = DataTableUtil.extractLocalDateOrNullForColumnName(tableRow, \"OPT.DateInvoiced\");\n\n\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidateList = invoiceCandidateListTable.get(invoiceCandidateListIdentifier);\n\n\t\tfinal List<JsonInvoiceCandidateReference> invoiceCandidateReferences = invoiceCandidateList.stream()\n\t\t\t\t.map(I_C_Invoice_Candidate::getExternalHeaderId)\n\t\t\t\t.distinct()\n\t\t\t\t.map(externalHeaderId -> JsonInvoiceCandidateReference.builder()\n\t\t\t\t\t\t.externalHeaderId(JsonExternalId.of(externalHeaderId))\n\t\t\t\t\t\t.build())\n\t\t\t\t.collect(ImmutableList.toImmutableList());\n\n\t\tfinal JsonEnqueueForInvoicingRequest enqueueForInvoicingRequest = JsonEnqueueForInvoicingRequest.builder()\n\t\t\t\t.dateInvoiced(dateInvoiced)\n\t\t\t\t.invoiceCandidates(invoiceCandidateReferences)\n\t\t\t\t.build();\n\n\t\ttestContext.setRequestPayload(objectMapper.writeValueAsString(enqueueForInvoicingRequest));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 128,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_List_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_List_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1751,
    "annotation": "\n\t@And(\"^locate invoice candidates for invoice: (.*)$\")",
    "glue_code": "\t@And(\"^locate invoice candidates for invoice: (.*)$\")\n\tpublic void locate_invoice_candidates_for_invoice(@NonNull final String invoiceIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_C_Invoice invoice = invoiceTable.get(invoiceIdentifier);\n\n\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = invoiceCandDAO.retrieveInvoiceCandidates(InvoiceId.ofRepoId(invoice.getC_Invoice_ID()));\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).isNotNull();\n\n\t\t\tfinal I_C_Invoice_Candidate matchingCandidate = invoiceCandidates.stream()\n\t\t\t\t\t.filter(candidate -> candidate.getM_Product_ID() == product.getM_Product_ID())\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No invoice candidate found for C_Invoice_ID \" + invoice.getC_Invoice_ID() + \" and m_product_id: \" + product.getM_Product_ID()));\n\n\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinvoiceCandTable.put(invoiceCandIdentifier, matchingCandidate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 234,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1752,
    "annotation": "\t@And(\"^after not more than (.*)s, C_Invoice_Candidate are found:$\")",
    "glue_code": "\tpublic void find_C_Invoice_Candidate(final int timeoutSec, @NonNull final DataTable dataTable) throws Throwable\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\ttry\n\t\t\t{\n\t\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, () -> load_C_Invoice_Candidate(row));\n\t\t\t}\n\t\t\tcatch (final Throwable exception)\n\t\t\t{\n\t\t\t\tmanuallyRecomputeInvoiceCandidate(exception, row, timeoutSec);\n\n\t\t\t\tStepDefUtil.tryAndWait(5, 1000, () -> load_C_Invoice_Candidate(row));\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 260,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1753,
    "annotation": "\n\t@And(\"validate C_Invoice_Candidates does not exist\")",
    "glue_code": "\t@And(\"validate C_Invoice_Candidates does not exist\")\n\tpublic void validate_no_created_C_Invoice_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = queryBL.createQueryBuilder(I_C_Invoice_Candidate.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_C_Order_ID, order.getC_Order_ID())\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_Product_ID, product.getM_Product_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_C_Invoice_Candidate.class);\n\n\t\t\tassertThat(invoiceCandidate).isNull();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 276,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1754,
    "annotation": "\n\t@And(\"update C_Invoice_Candidate:\")",
    "glue_code": "\t@And(\"update C_Invoice_Candidate:\")\n\tpublic void update_C_Invoice_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = invoiceCandTable.get(invoiceCandIdentifier);\n\n\t\t\tfinal BigDecimal qtyToInvoiceOverride = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyToInvoice_Override);\n\t\t\tif (qtyToInvoiceOverride != null)\n\t\t\t{\n\t\t\t\tinvoiceCandidate.setQtyToInvoice_Override(qtyToInvoiceOverride);\n\t\t\t}\n\n\t\t\tfinal BigDecimal priceEnteredOverride = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_PriceEntered_Override);\n\t\t\tif (priceEnteredOverride != null)\n\t\t\t{\n\t\t\t\tinvoiceCandidate.setPriceEntered_Override(priceEnteredOverride);\n\t\t\t}\n\n\t\t\tfinal String invoiceRuleOverride = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_InvoiceRule_Override);\n\t\t\tif (Check.isNotBlank(invoiceRuleOverride))\n\t\t\t{\n\t\t\t\tinvoiceCandidate.setInvoiceRule_Override(invoiceRuleOverride);\n\t\t\t}\n\n\t\t\tfinal Boolean approvalForInvoicing = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + COLUMNNAME_ApprovalForInvoicing);\n\t\t\tif (approvalForInvoicing != null)\n\t\t\t{\n\t\t\t\tinvoiceCandidate.setApprovalForInvoicing(approvalForInvoicing);\n\t\t\t}\n\n\t\t\tfinal String taxDepartureCountryIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_Tax_Departure_Country_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(taxDepartureCountryIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Country taxDepartureCountry = countryTable.get(taxDepartureCountryIdentifier);\n\t\t\t\tinvoiceCandidate.setC_Tax_Departure_Country_ID(taxDepartureCountry.getC_Country_ID());\n\t\t\t}\n\n\t\t\tsaveRecord(invoiceCandidate);\n\t\t\tinvoiceCandTable.putOrReplace(invoiceCandIdentifier, invoiceCandidate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 297,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1755,
    "annotation": "\n\t@And(\"^there is no C_Invoice_Candidate for C_Order (.*)$\")",
    "glue_code": "\t@And(\"^there is no C_Invoice_Candidate for C_Order (.*)$\")\n\tpublic void validate_no_C_Invoice_Candidate_created(@NonNull final String orderIdentifier) throws InterruptedException\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t// give IC handlers some time\n\t\tThread.sleep(1000);\n\n\t\tfinal I_C_Invoice_Candidate candidate = queryBL.createQueryBuilder(I_C_Invoice_Candidate.class)\n\t\t\t\t.addEqualsFilter(I_C_Invoice_Candidate.COLUMNNAME_C_Order_ID, order.getC_Order_ID())\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyOrNull(I_C_Invoice_Candidate.class);\n\t\tAssertions.assertThat(candidate).isNull();\n\n\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = invoiceCandidateHandlerBL.createMissingCandidatesFor(order);\n\t\tAssertions.assertThat(invoiceCandidates).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 341,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1759,
    "annotation": "\n\t@And(\"^there is no C_Invoice_Candidate for M_InOutLine (.*)$\")",
    "glue_code": "\t@And(\"^there is no C_Invoice_Candidate for M_InOutLine (.*)$\")\n\tpublic void validate_no_C_Invoice_Candidate_created_for_InOutLine(@NonNull final String inOutLineIdentifier) throws InterruptedException\n\t{\n\t\tfinal I_M_InOutLine inOutLineRecord = inoutLineTable.get(inOutLineIdentifier);\n\n\t\t// give IC handlers some time\n\t\tThread.sleep(1000);\n\n\t\tfinal I_C_Invoice_Candidate candidate = queryBL.createQueryBuilder(I_C_Invoice_Candidate.class)\n\t\t\t\t.addEqualsFilter(I_C_Invoice_Candidate.COLUMNNAME_M_InOut_ID, inOutLineRecord.getM_InOut_ID())\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyOrNull(I_C_Invoice_Candidate.class);\n\t\tAssertions.assertThat(candidate).isNull();\n\n\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = invoiceCandidateHandlerBL.createMissingCandidatesFor(inOutLineRecord);\n\t\tAssertions.assertThat(invoiceCandidates).isEmpty();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 359,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1760,
    "annotation": "\n\t@And(\"recompute invoice candidates if required\")",
    "glue_code": "\t@And(\"recompute invoice candidates if required\")\n\tpublic void recompute_invoice_candidates_if_required(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tboolean recompute = false;\n\n\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = invoiceCandTable.get(invoiceCandIdentifier);\n\n\t\t\tInterfaceWrapperHelper.refresh(invoiceCandidate);\n\n\t\t\tfinal String billBPIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_Bill_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer billBPartnerId = bPartnerTable.getOptional(billBPIdentifier)\n\t\t\t\t\t.map(I_C_BPartner::getC_BPartner_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(billBPIdentifier));\n\t\t\tassertThat(invoiceCandidate.getBill_BPartner_ID()).isEqualTo(billBPartnerId);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer productId = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\t\t\tassertThat(invoiceCandidate.getM_Product_ID()).isEqualTo(productId);\n\n\t\t\tfinal BigDecimal netAmountInvoiced = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_NetAmtInvoiced);\n\t\t\tif (netAmountInvoiced != null)\n\t\t\t{\n\t\t\t\trecompute = invoiceCandidate.getNetAmtInvoiced().compareTo(netAmountInvoiced) != 0;\n\t\t\t}\n\n\t\t\tfinal BigDecimal netAmtToInvoice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_NetAmtToInvoice);\n\t\t\tif (netAmtToInvoice != null)\n\t\t\t{\n\t\t\t\trecompute = invoiceCandidate.getNetAmtToInvoice().compareTo(netAmtToInvoice) != 0;\n\t\t\t}\n\n\t\t\tif (recompute)\n\t\t\t{\n\t\t\t\tfinal InvoiceCandidateIdsSelection onlyInvoiceCandidateIds = InvoiceCandidateIdsSelection.ofIdsSet(\n\t\t\t\t\t\tImmutableSet.of(InvoiceCandidateId.ofRepoId(invoiceCandidate.getC_Invoice_Candidate_ID())));\n\n\t\t\t\tServices.get(IInvoiceCandBL.class)\n\t\t\t\t\t\t.updateInvalid()\n\t\t\t\t\t\t.setContext(Env.getCtx(), ITrx.TRXNAME_None)\n\t\t\t\t\t\t.setTaggedWithAnyTag()\n\t\t\t\t\t\t.setOnlyInvoiceCandidateIds(onlyInvoiceCandidateIds)\n\t\t\t\t\t\t.update();\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 377,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1761,
    "annotation": "\n\t@Then(\"validate invoice candidate\")",
    "glue_code": "\t@Then(\"validate invoice candidate\")\n\tpublic void validate_invoice_candidate(@NonNull final DataTable dataTable) throws Throwable\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tDataTableRows.of(dataTable).forEach((rowObj) -> {\n\t\t\tfinal Map<String, String> row = rowObj.asMap();\n\t\t\tfinal String invoiceCandidateIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidateRecord = invoiceCandTable.get(invoiceCandidateIdentifier);\n\n\t\t\tfinal int maxSecondsToWait = 120;\n\t\t\tI_C_Invoice_Candidate updatedInvoiceCandidate;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tupdatedInvoiceCandidate = StepDefUtil.tryAndWaitForItem(maxSecondsToWait, 1000, () -> isInvoiceCandidateUpdated(row));\n\t\t\t}\n\t\t\tcatch (final Throwable e)\n\t\t\t{\n\t\t\t\tmanuallyRecomputeInvoiceCandidate(e, rowObj, maxSecondsToWait);\n\t\t\t\tupdatedInvoiceCandidate = null;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (updatedInvoiceCandidate == null)\n\t\t\t\t{\n\t\t\t\t\tupdatedInvoiceCandidate = StepDefUtil.tryAndWaitForItem(5, 1000, () -> isInvoiceCandidateUpdated(row));\n\t\t\t\t}\n\n\t\t\t\tInterfaceWrapperHelper.refresh(updatedInvoiceCandidate);\n\n\t\t\t\tfinal String billBPIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Bill_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(billBPIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_BPartner billBPartner = bPartnerTable.get(billBPIdentifier);\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getBill_BPartner_ID()).isEqualTo(billBPartner.getC_BPartner_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getM_Product_ID()).isEqualTo(product.getM_Product_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getC_Order_ID()).isEqualTo(order.getC_Order_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getC_OrderLine_ID()).isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyOrdered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyOrdered);\n\t\t\t\tif (qtyOrdered != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getQtyOrdered()).isEqualTo(qtyOrdered);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyDelivered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyDelivered);\n\t\t\t\tif (qtyDelivered != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getQtyDelivered()).isEqualTo(qtyDelivered);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyToInvoice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyToInvoice);\n\t\t\t\tif (qtyToInvoice != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getQtyToInvoice()).isEqualTo(qtyToInvoice);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyToInvoiceOverride = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyToInvoice_Override);\n\t\t\t\tif (qtyToInvoiceOverride != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getQtyToInvoice_Override()).isEqualTo(qtyToInvoiceOverride);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal netAmtToInvoice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_NetAmtToInvoice);\n\t\t\t\tif (netAmtToInvoice != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getNetAmtToInvoice()).isEqualTo(netAmtToInvoice);\n\t\t\t\t}\n\t\t\t\tfinal BigDecimal netAmountInvoiced = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_NetAmtInvoiced);\n\t\t\t\tif (netAmountInvoiced != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getNetAmtInvoiced()).isEqualTo(netAmountInvoiced);\n\t\t\t\t}\n\n\t\t\t\tfinal Boolean isSoTrx = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + COLUMNNAME_IsSOTrx, null);\n\t\t\t\tif (isSoTrx != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.isSOTrx()).isEqualTo(isSoTrx);\n\t\t\t\t}\n\n\t\t\t\tfinal String internalName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_AD_InputDataSource_ID + \".\" + I_AD_InputDataSource.COLUMNNAME_InternalName);\n\t\t\t\tif (Check.isNotBlank(internalName))\n\t\t\t\t{\n\t\t\t\t\tfinal I_AD_InputDataSource dataSource = inputDataSourceDAO.retrieveInputDataSource(Env.getCtx(), internalName, true, Trx.TRXNAME_None);\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getAD_InputDataSource_ID()).isEqualTo(dataSource.getAD_InputDataSource_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyWithIssuesEffective = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyWithIssues_Effective);\n\t\t\t\tif (qtyWithIssuesEffective != null)\n\t\t\t\t{\n\t\t\t\t\tassertThat(updatedInvoiceCandidate.getQtyWithIssues_Effective()).isEqualTo(qtyWithIssuesEffective);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (final Throwable e)\n\t\t\t{\n\t\t\t\twrapInvoiceCandidateRelatedException(e, invoiceCandidateRecord, invoiceCandidateIdentifier);\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 429,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1762,
    "annotation": "\n\t@And(\"^after not more than (.*)s, credit memo candidates are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, credit memo candidates are found:$\")\n\tpublic void find_credit_memo_candidates(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadCreditMemoCandidate(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 548,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1763,
    "annotation": "\n\t@And(\"validate C_Invoice_Candidate:\")",
    "glue_code": "\t@And(\"validate C_Invoice_Candidate:\")\n\tpublic void validate_C_Invoice_Candidate(@NonNull final DataTable dataTable) throws Throwable\n\t{\n\t\tDataTableRows.of(dataTable).forEach((rowObj) -> {\n\t\t\tfinal Map<String, String> row = rowObj.asMap();\n\t\t\tfinal String invoiceCandidateIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidateRecord = invoiceCandTable.get(invoiceCandidateIdentifier);\n\n\t\t\tfinal int maxSecondsToWait = 120;\n\t\t\tI_C_Invoice_Candidate updatedInvoiceCandidate;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tupdatedInvoiceCandidate = StepDefUtil.tryAndWaitForItem(maxSecondsToWait, 1000, () -> isInvoiceCandidateUpdated(row));\n\t\t\t}\n\t\t\tcatch (final Throwable e)\n\t\t\t{\n\t\t\t\tmanuallyRecomputeInvoiceCandidate(e, rowObj, maxSecondsToWait);\n\t\t\t\tupdatedInvoiceCandidate = null;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (updatedInvoiceCandidate == null)\n\t\t\t\t{\n\t\t\t\t\tupdatedInvoiceCandidate = StepDefUtil.tryAndWaitForItem(5, 1000, () -> isInvoiceCandidateUpdated(row));\n\t\t\t\t}\n\n\t\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\t\tfinal BigDecimal qtyToInvoice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, I_C_Invoice_Candidate.COLUMNNAME_QtyToInvoice);\n\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyToInvoice()).as(\"QtyToInvoice\").isEqualTo(qtyToInvoice);\n\n\t\t\t\tfinal BigDecimal qtyToInvoiceInUomCalc = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyToInvoiceInUOM_Calc);\n\t\t\t\tif (qtyToInvoiceInUomCalc != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyToInvoiceInUOM_Calc()).as(\"QtyToInvoiceInUOM_Calc\").isEqualTo(qtyToInvoiceInUomCalc);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyOrdered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyOrdered);\n\t\t\t\tif (qtyOrdered != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyOrdered()).as(\"QtyOrdered\").isEqualTo(qtyOrdered);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyDelivered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyDelivered);\n\t\t\t\tif (qtyDelivered != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyDelivered()).as(\"QtyDelivered\").isEqualTo(qtyDelivered);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyEntered);\n\t\t\t\tif (qtyEntered != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyEntered()).as(\"QtyEntered\").isEqualTo(qtyEntered);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyToInvoiceBeforeDiscount = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyToInvoiceBeforeDiscount);\n\t\t\t\tif (qtyToInvoiceBeforeDiscount != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyToInvoiceBeforeDiscount()).as(\"QtyToInvoiceBeforeDiscount\").isEqualTo(qtyToInvoiceBeforeDiscount);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyPicked = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyPicked);\n\t\t\t\tif (qtyPicked != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyPicked()).as(\"QtyPicked\").isEqualTo(qtyPicked);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyPickedInUOM = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyPickedInUOM);\n\t\t\t\tif (qtyPickedInUOM != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyPickedInUOM()).as(\"QtyPickedInUOM\").isEqualTo(qtyPickedInUOM);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyDeliveredInUOM = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyDeliveredInUOM);\n\t\t\t\tif (qtyPickedInUOM != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyDeliveredInUOM()).as(\"QtyDeliveredInUOM\").isEqualTo(qtyDeliveredInUOM);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyToInvoiceOverride = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_QtyToInvoice_Override);\n\t\t\t\tif (qtyToInvoiceOverride != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyToInvoice_Override()).as(\"QtyToInvoice_Override\").isEqualTo(qtyToInvoiceOverride);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyInvoiced = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyInvoiced);\n\t\t\t\tif (qtyInvoiced != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyInvoiced()).as(\"QtyInvoiced\").isEqualTo(qtyInvoiced);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal qtyInvoicedInUOM = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_QtyInvoicedInUOM);\n\t\t\t\tif (qtyInvoicedInUOM != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getQtyInvoicedInUOM()).as(\"QtyInvoicedInUOM\").isEqualTo(qtyInvoicedInUOM);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal netAmtToInvoice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_NetAmtToInvoice);\n\t\t\t\tif (netAmtToInvoice != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getNetAmtToInvoice()).as(\"NetAmtToInvoice\").isEqualTo(netAmtToInvoice);\n\t\t\t\t}\n\n\t\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_Order_ID()).as(\"C_Order_ID\").isEqualTo(order.getC_Order_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractNullableStringForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal String orderLineIdentifierValue = DataTableUtil.nullToken2Null(orderLineIdentifier);\n\t\t\t\t\tif (orderLineIdentifierValue != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_OrderLine_ID()).as(\"C_OrderLine_ID\").isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_OrderLine_ID()).as(\"C_OrderLine_ID\").isEqualTo(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfinal String paymentRule = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_PaymentRule);\n\n\t\t\t\tif (Check.isNotBlank(paymentRule))\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getPaymentRule()).as(\"PaymentRule\").isEqualTo(paymentRule);\n\t\t\t\t}\n\n\t\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getM_Product_ID()).as(\"M_Product_ID\").isEqualTo(product.getM_Product_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal Boolean isDeliveryClosed = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_IsDeliveryClosed, null);\n\n\t\t\t\tif (isDeliveryClosed != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.isDeliveryClosed()).as(\"DeliveryClosed\").isEqualTo(isDeliveryClosed);\n\t\t\t\t}\n\n\t\t\t\tfinal boolean processed = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + COLUMNNAME_Processed, false);\n\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.isProcessed()).as(\"Processed\").isEqualTo(processed);\n\n\t\t\t\tfinal String taxEffectiveIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_Tax_Effective_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(taxEffectiveIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal TaxId taxEffectiveId = taxTable.getId(taxEffectiveIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_Tax_Effective_ID()).isEqualTo(taxEffectiveId.getRepoId());\n\t\t\t\t}\n\n\t\t\t\tfinal String recordIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Record_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tfinal String tableName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.TableName\");\n\n\t\t\t\tif (Check.isNotBlank(recordIdentifier) && Check.isNotBlank(tableName))\n\t\t\t\t{\n\t\t\t\t\tfinal TableRecordReference tableRecordReference = tableRecordReferenceStepDefUtil.getTableRecordReferenceFromIdentifier(recordIdentifier, tableName);\n\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getRecord_ID()).as(\"Record_ID\").isEqualTo(tableRecordReference.getRecord_ID());\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getAD_Table_ID()).as(\"AD_Table_ID\").isEqualTo(tableRecordReference.getAD_Table_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal Boolean isInEffect = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + COLUMNNAME_IsInEffect, null);\n\t\t\t\tif (isInEffect != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.isInEffect()).as(\"IsInEffect\").isEqualTo(isInEffect);\n\t\t\t\t}\n\n\t\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Bill_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (de.metas.util.Check.isNotBlank(bPartnerIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bPartnerIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getBill_BPartner_ID()).as(\"C_BPartner_ID\").isEqualTo(bPartner.getC_BPartner_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String bPartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Bill_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (de.metas.util.Check.isNotBlank(bPartnerLocationIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(bPartnerLocationIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getBill_Location_ID()).as(\"C_BPartner_Location_ID\").isEqualTo(bPartnerLocation.getC_BPartner_Location_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String userIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_Bill_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (de.metas.util.Check.isNotBlank(userIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_AD_User user = contactTable.get(userIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getBill_User_ID()).as(\"Bill_User_ID\").isEqualTo(user.getAD_User_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String invoiceRule = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_InvoiceRule);\n\t\t\t\tif (Check.isNotBlank(invoiceRule))\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getInvoiceRule()).as(\"InvoiceRule\").isEqualTo(invoiceRule);\n\t\t\t\t}\n\n\t\t\t\tfinal String projectIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_C_Project_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(projectIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Project project = projectTable.get(projectIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_Project_ID()).as(\"C_Project_ID\").isEqualTo(project.getC_Project_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String costCenterIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_C_Activity_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(costCenterIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Activity activity = activityTable.get(costCenterIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_Activity_ID()).as(\"C_Activity_ID\").isEqualTo(activity.getC_Activity_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_Description);\n\t\t\t\tif (Check.isNotBlank(description))\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getDescription()).as(\"Description\").isEqualTo(description);\n\t\t\t\t}\n\n\t\t\t\tfinal String docTypeIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + org.compiere.model.I_M_InOut.COLUMNNAME_C_DocType_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(docTypeIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_DocType docTypeRecord = docTypeTable.get(docTypeIdentifier);\n\t\t\t\t\tsoftly.assertThat(docTypeRecord).as(\"C_DocType for Identifier=%s\", docTypeIdentifier).isNotNull();\n\t\t\t\t\tif (docTypeRecord != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_DocTypeInvoice_ID()).as(\"C_DocTypeInvoice_ID\").isEqualTo(docTypeRecord.getC_DocType_ID());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(warehouseIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_Warehouse warehouseRecord = warehouseTable.get(warehouseIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getM_Warehouse_ID()).as(\"M_Warehouse_ID\").isEqualTo(warehouseRecord.getM_Warehouse_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String harvestingCalendarIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_C_Harvesting_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(harvestingCalendarIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Calendar harvestingCalendarRecord = calendarTable.get(harvestingCalendarIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getC_Harvesting_Calendar_ID()).as(\"C_Harvesting_Calendar_ID\").isEqualTo(harvestingCalendarRecord.getC_Calendar_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String harvestingYearIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_Harvesting_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(harvestingYearIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Year harvestingYearRecord = yearTable.get(harvestingYearIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getHarvesting_Year_ID()).as(\"Harvesting_Year_ID\").isEqualTo(harvestingYearRecord.getC_Year_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal String aggregationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Invoice_Candidate.COLUMNNAME_HeaderAggregationKeyBuilder_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(aggregationIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal I_C_Aggregation aggregationRecord = aggregationTable.get(aggregationIdentifier);\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getHeaderAggregationKeyBuilder_ID()).as(\"HeaderAggregationKeyBuilder_ID\").isEqualTo(aggregationRecord.getC_Aggregation_ID());\n\t\t\t\t}\n\n\t\t\t\tfinal Boolean soTrx = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + COLUMNNAME_IsSOTrx);\n\t\t\t\tif (soTrx != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.isSOTrx()).as(\"IsSOTrx\").isEqualTo(soTrx);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal priceActual = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_PriceActual);\n\n\t\t\t\tif (priceActual != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getPriceActual()).as(COLUMNNAME_PriceActual).isEqualByComparingTo(priceActual);\n\t\t\t\t}\n\n\t\t\t\tfinal Boolean isToClear = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT\" + COLUMNNAME_IsToClear);\n\t\t\t\tif (isToClear != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.isToClear()).as(\"IsToClear\").isEqualTo(isToClear);\n\t\t\t\t}\n\n\t\t\t\tfinal BigDecimal netAmtInvoiced = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_NetAmtInvoiced);\n\t\t\t\tif (netAmtInvoiced != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.getNetAmtInvoiced()).as(COLUMNNAME_NetAmtInvoiced).isEqualTo(netAmtInvoiced);\n\t\t\t\t}\n\n\t\t\t\tfinal Boolean isHidePriceAndAmountOnPrint = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + COLUMNNAME_IsHidePriceAndAmountOnPrint);\n\t\t\t\tif (isHidePriceAndAmountOnPrint != null)\n\t\t\t\t{\n\t\t\t\t\tsoftly.assertThat(updatedInvoiceCandidate.isHidePriceAndAmountOnPrint()).as(COLUMNNAME_IsHidePriceAndAmountOnPrint).isEqualTo(isHidePriceAndAmountOnPrint);\n\t\t\t\t}\n\n\t\t\t\tsoftly.assertAll();\n\t\t\t}\n\t\t\tcatch (final Throwable e)\n\t\t\t{\n\t\t\t\twrapInvoiceCandidateRelatedException(e, invoiceCandidateRecord, invoiceCandidateIdentifier);\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 557,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1764,
    "annotation": "\n\t@And(\"process invoice candidates\")",
    "glue_code": "\t@And(\"process invoice candidates\")\n\tpublic void process_invoice_cand(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\ttry (final IAutoCloseable ignore = Loggables.temporarySetLoggable(new LogbackLoggable(logger, Level.INFO)))\n\t\t\t{\n\t\t\t\tfinal String invoiceCandIdentifiers = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\t\tfinal ImmutableSet<InvoiceCandidateId> invoiceCandidateIds = StepDefUtil.splitIdentifiers(invoiceCandIdentifiers)\n\t\t\t\t\t\t.stream()\n\t\t\t\t\t\t.map(invoiceCandTable::get)\n\t\t\t\t\t\t.map(I_C_Invoice_Candidate::getC_Invoice_Candidate_ID)\n\t\t\t\t\t\t.map(InvoiceCandidateId::ofRepoId)\n\t\t\t\t\t\t.collect(ImmutableSet.toImmutableSet());\n\n\t\t\t\tfinal AsyncBatchId asyncBatchId = asyncBatchBL.newAsyncBatch(C_Async_Batch_InternalName_InvoiceCandidate_Processing);\n\n\t\t\t\tinvoiceService.generateInvoicesFromInvoiceCandidateIds(invoiceCandidateIds, asyncBatchId);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 857,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1765,
    "annotation": "\n\t@And(\"validate invoice candidates by record reference:\")",
    "glue_code": "\t@And(\"validate invoice candidates by record reference:\")\n\tpublic void locate_invoice_candidate_by_record_id(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tloadAndValidateInvoiceCandidateByRecordId(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 882,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1766,
    "annotation": "\n\t@And(\"^after not more than (.*)s C_Invoice_Candidate matches:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s C_Invoice_Candidate matches:$\")\n\tpublic void wait_for_candidate_to_match(final int maxSecondsToWait, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = StepDefUtil.tryAndWaitForItem(maxSecondsToWait, 1000, () -> getInvoiceCandidateIfMatches(row));\n\t\t\tassertThat(invoiceCandidate).isNotNull();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 892,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1767,
    "annotation": "\n\t@And(\"invoice candidates are not billable\")",
    "glue_code": "\t@And(\"invoice candidates are not billable\")\n\tpublic void check_not_billable(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = invoiceCandTable.get(invoiceCandIdentifier);\n\n\t\t\tfinal InvoiceCandidateId invoiceCandidateId = InvoiceCandidateId.ofRepoId(invoiceCandidate.getC_Invoice_Candidate_ID());\n\n\t\t\tImmutableSet<InvoiceId> invoiceIds = ImmutableSet.of();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfinal AsyncBatchId asyncBatchId = asyncBatchBL.newAsyncBatch(C_Async_Batch_InternalName_InvoiceCandidate_Processing);\n\n\t\t\t\tinvoiceIds = invoiceService.generateInvoicesFromInvoiceCandidateIds(ImmutableSet.of(invoiceCandidateId), asyncBatchId);\n\t\t\t}\n\t\t\tcatch (final AdempiereException adempiereException)\n\t\t\t{\n\t\t\t\tassertThat(adempiereException.getMessage()).contains(\"Es wurden keine fakturierbaren Datenstze ausgewhlt.\");\n\t\t\t}\n\n\t\t\tassertThat(invoiceIds.size()).isEqualTo(0);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 902,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1768,
    "annotation": "\n\t@And(\"^after not more than (.*)s locate up2date invoice candidates by order line:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s locate up2date invoice candidates by order line:$\")\n\tpublic void locate_invoice_candidate(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfindInvoiceCandidateByOrderLine(timeoutSec, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 930,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1769,
    "annotation": "\n\t@And(\"^after not more than (.*)s locate invoice candidates of order identified by (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s locate invoice candidates of order identified by (.*)$\")\n\tpublic void loadInvoiceCandidatesByOrderId(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String orderIdentifierStr,\n\t\t\t@NonNull final DataTable dataTable) throws Throwable\n\t{\n\t\tfinal StepDefDataIdentifier orderIdentifier = StepDefDataIdentifier.ofString(orderIdentifierStr);\n\t\tfinal OrderId orderId = orderTable.getIdOptional(orderIdentifier).orElseGet(() -> orderIdentifier.getAsId(OrderId.class));\n\t\tfinal DataTableRows rows = DataTableRows.of(dataTable);\n\n\t\tSharedTestContext.run(() -> {\n\t\t\tSharedTestContext.put(\"orderId\", orderId);\n\t\t\tSharedTestContext.put(\"rows\", () -> rows.stream().toList());\n\n\t\t\tfinal ImmutableMap<StepDefDataIdentifier, I_C_Invoice_Candidate> records = StepDefUtil.tryAndWaitForItem(\n\t\t\t\t\ttimeoutSec,\n\t\t\t\t\t500,\n\t\t\t\t\t() -> loadInvoiceCandidatesByOrderIdNow(orderId, rows)\n\t\t\t);\n\n\t\t\trecords.forEach(invoiceCandTable::putOrReplace);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 940,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1770,
    "annotation": "\n\t@And(\"^after not more than (.*)s, locate C_Invoice_Candidates by externalHeaderId$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, locate C_Invoice_Candidates by externalHeaderId$\")\n\tpublic void locate_invoice_candidate_by_externalHeaderId(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadInvoiceCandidatesByExternalHeaderId(tableRow));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1020,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1771,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_Invoice_Candidates are not marked as 'to recompute'$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_Invoice_Candidates are not marked as 'to recompute'$\")\n\tpublic void check_not_marked_as_to_recompute(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWaitForItem(timeoutSec, 500,\n\t\t\t\t\t() -> isInvoiceCandidateUpdated(tableRow));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1029,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1772,
    "annotation": "\n\t@And(\"update invoice candidates\")",
    "glue_code": "\t@And(\"update invoice candidates\")\n\tpublic void update_invoice_candidates(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String invoiceCandidateIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidateRecord = invoiceCandTable.get(invoiceCandidateIdentifier);\n\n\t\t\tupdateInvoiceCandidates(tableRow, invoiceCandidateRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1039,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1773,
    "annotation": "\n\t@And(\"^process invoice candidates and wait (.*)s for C_Invoice_Candidate to be processed$\")",
    "glue_code": "\t@And(\"^process invoice candidates and wait (.*)s for C_Invoice_Candidate to be processed$\")\n\tpublic void process_invoice_cand(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = invoiceCandTable.get(invoiceCandIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(invoiceCandidate);\n\n\t\t\tfinal InvoiceCandidateId invoiceCandidateId = InvoiceCandidateId.ofRepoId(invoiceCandidate.getC_Invoice_Candidate_ID());\n\n\t\t\tfinal PInstanceId invoiceCandidatesSelectionId = DB.createT_Selection(ImmutableList.of(invoiceCandidateId.getRepoId()), Trx.TRXNAME_None);\n\n\t\t\tfinal InvoicingParams invoicingParams = InvoicingParams.builder()\n\t\t\t\t\t.ignoreInvoiceSchedule(false)\n\t\t\t\t\t.updateLocationAndContactForInvoice(DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.IsUpdateLocationAndContactForInvoice\", false))\n\t\t\t\t\t.completeInvoices(DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + InvoicingParams.PARA_IsCompleteInvoices, true))\n\t\t\t\t\t.build();\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> checkNotMarkedAsToRecompute(invoiceCandidate));\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tinvoiceCandBL.enqueueForInvoicing()\n\t\t\t\t\t\t.setContext(Env.getCtx())\n\t\t\t\t\t\t.setFailIfNothingEnqueued(true)\n\t\t\t\t\t\t.setInvoicingParams(invoicingParams)\n\t\t\t\t\t\t.prepareAndEnqueueSelection(invoiceCandidatesSelectionId);\n\t\t\t}\n\t\t\tcatch (final AdempiereException adempiereException)\n\t\t\t{\n\t\t\t\tlogCurrentContext(invoiceCandidate, row);\n\t\t\t\tthrow adempiereException;\n\t\t\t}\n\n\t\t\t//wait for the invoice to be created\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> isInvoiceCandidateProcessed(invoiceCandidate, row), () -> logCurrentContext(invoiceCandidate, row));\n\n\t\t\tDB.deleteT_Selection(invoiceCandidatesSelectionId, Trx.TRXNAME_None);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1052,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1774,
    "annotation": "\n\t@And(\"^there is no C_InvoiceCandidate_InOutLine for M_InOut_Line: (.*)$\")",
    "glue_code": "\t@And(\"^there is no C_InvoiceCandidate_InOutLine for M_InOut_Line: (.*)$\")\n\tpublic void validate_no_C_InvoiceCandidate_InOutLine_for_M_InOut(@NonNull final String shipmentLineIdentifier)\n\t{\n\t\tfinal I_M_InOutLine shipmentLine = inoutLineTable.get(shipmentLineIdentifier);\n\n\t\tfinal I_C_InvoiceCandidate_InOutLine invoiceCandidateInOutLine = queryBL.createQueryBuilder(I_C_InvoiceCandidate_InOutLine.class)\n\t\t\t\t.addEqualsFilter(I_C_InvoiceCandidate_InOutLine.COLUMNNAME_M_InOutLine_ID, shipmentLine.getM_InOutLine_ID())\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyOrNull(I_C_InvoiceCandidate_InOutLine.class);\n\n\t\tassertThat(invoiceCandidateInOutLine).isNull();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1096,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1775,
    "annotation": "\t@And(\"^after not more than (.*)s, C_Invoice_Candidates are found:$\")",
    "glue_code": "\tpublic void thereAreInvoiceCandidates(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal IQuery<I_C_Invoice_Candidate> candidatesQuery = createInvoiceCandidateQuery(row);\n\t\t\tfinal Runnable logContext = () -> logger.error(\"C_Invoice_Candidate not found\\n\"\n\t\t\t\t\t\t\t+ \"**tableRow:**\\n{}\\n\" + \"**candidatesQuery:**\\n{}\\n\"\n\t\t\t\t\t\t\t+ \"**query result:**\\n{}\\n\"\n\t\t\t\t\t\t\t+ \"**all candidates:**\\n{}\",\n\t\t\t\t\trow, candidatesQuery,\n\t\t\t\t\tcandidatesQuery.list(),\n\t\t\t\t\tServices.get(IQueryBL.class).createQueryBuilder(I_C_Invoice_Candidate.class).create().list());\n\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> retrieveInvoiceCandidate(candidatesQuery), logContext);\n\n\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinvoiceCandTable.putOrReplace(invoiceCandIdentifier, invoiceCandidate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1242,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1776,
    "annotation": "\n\t@And(\"process invoice candidate expecting error\")",
    "glue_code": "\t@And(\"process invoice candidate expecting error\")\n\tpublic void process_invoice_cand_expecting_error(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\ttry (final IAutoCloseable ignore = Loggables.temporarySetLoggable(new LogbackLoggable(logger, Level.INFO)))\n\t\t\t{\n\t\t\t\tfinal String invoiceCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Invoice_Candidate_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tfinal I_C_Invoice_Candidate invoiceCandidate = invoiceCandTable.get(invoiceCandIdentifier);\n\n\t\t\t\tfinal AsyncBatchId asyncBatchId = asyncBatchBL.newAsyncBatch(C_Async_Batch_InternalName_InvoiceCandidate_Processing);\n\t\t\t\tfinal InvoiceCandidateId invoiceCandidateId = InvoiceCandidateId.ofRepoId(invoiceCandidate.getC_Invoice_Candidate_ID());\n\t\t\t\tboolean isError = false;\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tinvoiceService.generateInvoicesFromInvoiceCandidateIds(ImmutableSet.of(invoiceCandidateId), asyncBatchId);\n\t\t\t\t}\n\t\t\t\tcatch (final Exception e)\n\t\t\t\t{\n\t\t\t\t\tisError = true;\n\t\t\t\t}\n\n\t\t\t\tassumeThat(isError).isTrue();\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1261,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1777,
    "annotation": "\n\t@And(\"there is no C_Invoice_Candidate for:\")",
    "glue_code": "\t@And(\"there is no C_Invoice_Candidate for:\")\n\tpublic void validate_no_C_Invoice_Candidate_created_for_record(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal Object icReferencedRecord = getICReferencedRecord(row);\n\n\t\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidates = invoiceCandidateHandlerBL.createMissingCandidatesFor(icReferencedRecord);\n\t\t\tassertThat(invoiceCandidates.isEmpty()).isTrue();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1290,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1778,
    "annotation": "\n\t@And(\"update invoice candidate list with unique external header identifier\")",
    "glue_code": "\t@And(\"update invoice candidate list with unique external header identifier\")\n\tpublic void update_invoice_candidate_external_header_identifier_list(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String invoiceCandidateListIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Invoice_Candidate_ID + \"_List.\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal List<I_C_Invoice_Candidate> invoiceCandidateList = invoiceCandidateListTable.get(invoiceCandidateListIdentifier);\n\n\t\t\tfinal List<I_C_Invoice_Candidate> updatedList = new ArrayList<>();\n\n\t\t\tfor (final I_C_Invoice_Candidate invoiceCandidate : invoiceCandidateList)\n\t\t\t{\n\t\t\t\tinvoiceCandidate.setExternalHeaderId(UUID.randomUUID().toString());\n\n\t\t\t\tInterfaceWrapperHelper.saveRecord(invoiceCandidate);\n\n\t\t\t\tupdatedList.add(invoiceCandidate);\n\t\t\t}\n\n\t\t\tinvoiceCandidateListTable.putOrReplace(invoiceCandidateListIdentifier, updatedList);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1302,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1779,
    "annotation": "\n\t@And(\"count invoice candidates by: external header id\")",
    "glue_code": "\t@And(\"count invoice candidates by: external header id\")\n\tpublic void count_invoice_candidates_matching_external_header_id(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String externalHeaderId = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_ExternalHeaderId);\n\t\t\tfinal int numberOfInvoiceCandidates = DataTableUtil.extractIntForColumnName(tableRow, \"NumberOfCandidates\");\n\n\t\t\tfinal int foundCandidates = queryBL.createQueryBuilder(I_C_Invoice_Candidate.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_ExternalHeaderId, externalHeaderId)\n\t\t\t\t\t.create()\n\t\t\t\t\t.count();\n\n\t\t\tassertThat(foundCandidates).as(\"Actual number of candidates\").isEqualTo(numberOfInvoiceCandidates);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1326,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1780,
    "annotation": "\n\t@And(\"^after not more than (.*)s, modular C_Invoice_Candidates are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, modular C_Invoice_Candidates are found:$\")\n\tpublic void thereAreModularInvoiceCandidates(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadModularInvoiceCandidate(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 1343,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate/C_Invoice_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate",
      "filename": "C_Invoice_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1729,
    "annotation": "\n\t@And(\"validate created C_InvoiceCandidate_InOutLine\")",
    "glue_code": "\t@And(\"validate created C_InvoiceCandidate_InOutLine\")\n\tpublic void validate_C_InvoiceCandidate_InOutLine(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tSupplier<String> logContext = null;\n\t\t\tfinal InvoiceCandidateId invoiceCandidateId = row.getAsOptionalIdentifier(I_C_InvoiceCandidate_InOutLine.COLUMNNAME_C_Invoice_Candidate_ID)\n\t\t\t\t\t.map(invoiceCandTable::getId)\n\t\t\t\t\t.orElse(null);\n\t\t\tif (invoiceCandidateId != null)\n\t\t\t{\n\t\t\t\tlogContext = () -> getContextInfo(invoiceCandidateId);\n\t\t\t}\n\n\t\t\tfinal int maxSecondsToWait = 120;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tStepDefUtil.tryAndWaitForItem(maxSecondsToWait, 1000, () -> isValid_C_InvoiceCandidate_InOutLine(row), logContext);\n\t\t\t}\n\t\t\tcatch (final Throwable e)\n\t\t\t{\n\t\t\t\tinvoiceCandidateStepDef.manuallyRecomputeInvoiceCandidate(e, row, maxSecondsToWait);\n\n\t\t\t\tStepDefUtil.tryAndWaitForItem(5, 1000, () -> isValid_C_InvoiceCandidate_InOutLine(row), logContext);\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 68,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate_inoutline/C_InvoiceCandidate_InOutLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/invoicecandidate_inoutline",
      "filename": "C_InvoiceCandidate_InOutLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1724,
    "annotation": "\n\t@Given(\"I_AD_PInstance with id {int} is created\")",
    "glue_code": "\t@Given(\"I_AD_PInstance with id {int} is created\")\n\tpublic void new_PInstanceId_is_created(final int pInstanceIdString)\n\t{\n\t\tpInstanceId = PInstanceId.ofRepoId(pInstanceIdString);\n\t\tfinal I_AD_PInstance pInstance = InterfaceWrapperHelper.newInstance(I_AD_PInstance.class);\n\t\tpInstance.setAD_PInstance_ID(pInstanceId.getRepoId());\n\t\tpInstance.setAD_Process_ID(150);\n\t\tpInstance.setRecord_ID(0);\n\t\tInterfaceWrapperHelper.save(pInstance);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 69,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/issue/AD_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/issue",
      "filename": "AD_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1725,
    "annotation": "\n\t@Then(\"a new metasfresh AD issue is created\")",
    "glue_code": "\t@Then(\"a new metasfresh AD issue is created\")\n\tpublic void new_metasfresh_ad_issue_is_created() throws IOException\n\t{\n\t\tfinal String responseJson = testContext.getApiResponse().getContent();\n\t\tfinal ObjectMapper mapper = new ObjectMapper();\n\n\t\tfinal JsonCreateIssueResponse response = mapper.readValue(responseJson, JsonCreateIssueResponse.class);\n\t\tfinal List<JsonErrorItem> requestErrorItemList = mapper.readValue(testContext.getRequestPayload(), JsonError.class).getErrors();\n\t\tassertThat(requestErrorItemList).isNotNull();\n\t\tfinal JsonErrorItem jsonErrorItem = requestErrorItemList.get(0);\n\t\tassertThat(jsonErrorItem).isNotNull();\n\n\t\tfinal AdIssueId adIssueId = AdIssueId.ofRepoId(response.getIds().get(0).getIssueId().getValue());\n\t\tfinal I_AD_Issue issue = queryBL\n\t\t\t\t.createQueryBuilderOutOfTrx(I_AD_Issue.class)\n\t\t\t\t.addEqualsFilter(I_AD_Issue.COLUMNNAME_AD_Issue_ID, adIssueId)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyOptional(I_AD_Issue.class).orElse(null);\n\n\t\tfinal I_AD_Org adOrg = Services.get(IQueryBL.class)\n\t\t\t\t.createQueryBuilder(I_AD_Org.class)\n\t\t\t\t.addEqualsFilter(I_AD_Org.COLUMNNAME_Value, jsonErrorItem.getOrgCode())\n\t\t\t\t.create()\n\t\t\t\t.firstOnly(I_AD_Org.class);\n\n\t\tfinal OrgId orgId = adOrg != null ? OrgId.ofRepoId(adOrg.getAD_Org_ID()) : OrgId.ANY;\n\n\t\tassertThat(issue).isNotNull();\n\t\tassertThat(issue.getStackTrace()).isEqualTo(jsonErrorItem.getStackTrace().replace(\"java.lang.\", \"\"));\n\t\tassertThat(issue.getSourceMethodName()).isEqualTo(jsonErrorItem.getSourceMethodName());\n\t\tassertThat(issue.getSourceClassName()).isEqualTo(jsonErrorItem.getSourceClassName());\n\t\tassertThat(issue.getIssueSummary()).isEqualTo(jsonErrorItem.getMessage());\n\t\tassertThat(issue.getIssueCategory()).isEqualTo(jsonErrorItem.getIssueCategory());\n\t\tassertThat(issue.getAD_PInstance_ID()).isEqualTo(pInstanceId.getRepoId());\n\t\tassertThat(orgId).isNotNull();\n\t\tassertThat(issue.getAD_Org_ID()).isEqualTo(orgId.getRepoId());\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/issue/AD_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/issue",
      "filename": "AD_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1726,
    "annotation": "\n\t@And(\"validate AD_Issue\")",
    "glue_code": "\t@And(\"validate AD_Issue\")\n\tpublic void validate_AD_Issue(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String issueIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_Issue.COLUMNNAME_AD_Issue_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Issue issue = issueTable.get(issueIdentifier);\n\n\t\t\tfinal String issueSummary = DataTableUtil.extractStringForColumnName(row, I_AD_Issue.COLUMNNAME_IssueSummary);\n\t\t\tfinal boolean containsSummary = issue.getIssueSummary().contains(issueSummary);\n\t\t\tassertThat(containsSummary).isTrue();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 118,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/issue/AD_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/issue",
      "filename": "AD_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1700,
    "annotation": "\n\t@Given(\"email successfully sent\")",
    "glue_code": "\t@Given(\"email successfully sent\")\n\tpublic void sendTestMail(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps(String.class, String.class);\n\t\tfinal Map<String, String> row = CollectionUtils.singleElement(rows);\n\n\t\tmailService.sendEMail(EMailRequest.builder()\n\t\t\t\t.debugLoggable(Loggables.withLogger(logger, Level.INFO))\n\t\t\t\t.mailbox(extractMailbox(row))\n\t\t\t\t.to(StringUtils.trimBlankToOptional(resolveEnv(row, \"to\"))\n\t\t\t\t\t\t.map(EMailAddress::ofNullableString)\n\t\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No 'to' specified\")))\n\t\t\t\t.subject(row.get(\"subject\"))\n\t\t\t\t.message(row.get(\"message\"))\n\t\t\t\t.html(StringUtils.toBoolean(row.get(\"html\")))\n\t\t\t\t.failIfNotSent(true)\n\t\t\t\t.build());\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 30,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mail/Mail_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mail",
      "filename": "Mail_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1720,
    "annotation": "\n\t@And(\"^M_MatchPO are found$\")",
    "glue_code": "\t@And(\"^M_MatchPO are found$\")\n\tpublic void loadMatchPOs(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_MatchPO.COLUMNNAME_M_MatchPO_ID)\n\t\t\t\t.forEach(this::loadMatchPO);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 28,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/match_po/M_MatchPO_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/match_po",
      "filename": "M_MatchPO_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1721,
    "annotation": "\n\t@And(\"^Wait until M_MatchPO (.*) (is|are) posted$\")",
    "glue_code": "\t@And(\"^Wait until M_MatchPO (.*) (is|are) posted$\")\n\tpublic void waitUntilPosted(\n\t\t\t@NonNull final String commaSeparatedIdentifiers,\n\t\t\t@SuppressWarnings(\"unused\") final String isOrAre) throws InterruptedException\n\t{\n\t\tfinal ImmutableSet<TableRecordReference> refs = StepDefDataIdentifier.ofCommaSeparatedString(commaSeparatedIdentifiers)\n\t\t\t\t.stream()\n\t\t\t\t.map(matchPOTable::getId)\n\t\t\t\t.map(inoutId -> TableRecordReference.of(I_M_MatchPO.Table_Name, inoutId))\n\t\t\t\t.collect(ImmutableSet.toImmutableSet());\n\n\t\tAccountingCucumberHelper.waitUtilPosted(refs);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 54,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/match_po/M_MatchPO_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/match_po",
      "filename": "M_MatchPO_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1723,
    "annotation": "\n\t@And(\"^after not more than (.*)s, M_MatchInv are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, M_MatchInv are found:$\")\n\tpublic void wait_until_there_are_matchInvoices(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_M_MatchInv matchInvRecord = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> loadMatchInv(tableRow));\n\n\t\t\tfinal String identifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_MatchInv.COLUMNNAME_M_MatchInv_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tmatchInvTable.putOrReplace(identifier, matchInvRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/matchinv/M_MatchInv_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/matchinv",
      "filename": "M_MatchInv_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1730,
    "annotation": "\n\t@And(\"^after not more than (.*)s, metasfresh has this MD_Cockpit_DDOrder_Detail data$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, metasfresh has this MD_Cockpit_DDOrder_Detail data$\")\n\tpublic void metasfresh_has_this_md_cockpit_ddOrder_Detail(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateCockpitDDOrderDetail(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit/MD_Cockpit_DDOrder_Detail_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit",
      "filename": "MD_Cockpit_DDOrder_Detail_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1680,
    "annotation": "\n\t@And(\"^after not more than (.*)s, metasfresh has this MD_Cockpit_DocumentDetail data$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, metasfresh has this MD_Cockpit_DocumentDetail data$\")\n\tpublic void metasfresh_has_this_md_cockpit_data(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateCockpitDocumentDetailRecord(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit/MD_Cockpit_DocumentDetail_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit",
      "filename": "MD_Cockpit_DocumentDetail_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1681,
    "annotation": "\n\t@And(\"metasfresh has no MD_Cockpit_DocumentDetail data\")",
    "glue_code": "\t@And(\"metasfresh has no MD_Cockpit_DocumentDetail data\")\n\tpublic void no_md_cockpit_documentDetail_data(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String cockpitIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_MD_Cockpit_DocumentDetail.COLUMNNAME_MD_Cockpit_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_MD_Cockpit cockpitRecord = cockpitTable.get(cockpitIdentifier);\n\t\t\tsoftly.assertThat(cockpitRecord).isNotNull();\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_MD_Cockpit_DocumentDetail.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_OrderLine orderLineRecord = orderLineTable.get(orderLineIdentifier);\n\t\t\tsoftly.assertThat(orderLineRecord).isNotNull();\n\n\t\t\tfinal CockpitId cockpitId = CockpitId.ofRepoId(cockpitRecord.getMD_Cockpit_ID());\n\t\t\tfinal OrderLineId orderLineId = OrderLineId.ofRepoId(orderLineRecord.getC_OrderLine_ID());\n\t\t\t\n\t\t\tsoftly.assertThat(getCockpitDocumentDetailSupplier(cockpitId, orderLineId).get().isPresent()).isFalse();\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit/MD_Cockpit_DocumentDetail_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit",
      "filename": "MD_Cockpit_DocumentDetail_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1709,
    "annotation": "\n\t@And(\"^after not more than (.*)s, metasfresh has this MD_Cockpit data$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, metasfresh has this MD_Cockpit data$\")\n\tpublic void metasfresh_has_this_md_cockpit_data(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> validateCockpitRecord(timeoutSec, row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 72,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit/MD_Cockpit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/cockpit",
      "filename": "MD_Cockpit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1735,
    "annotation": "\n\t@When(\"metasfresh initially has this MD_Candidate data\")",
    "glue_code": "\t@When(\"metasfresh initially has this MD_Candidate data\")\n\tpublic void metasfresh_has_this_md_candidate_data1(@NonNull final MD_Candidate_StepDefTable table) throws Throwable\n\t{\n\t\ttable.forEach((tableRow) -> {\n\t\t\tfinal WarehouseId warehouseId = CoalesceUtil.coalesceNotNull(tableRow.getWarehouseId(), StepDefConstants.WAREHOUSE_ID);\n\n\t\t\tfinal I_MD_Candidate mdCandidateRecord = InterfaceWrapperHelper.newInstance(I_MD_Candidate.class);\n\t\t\tmdCandidateRecord.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\t\t\tmdCandidateRecord.setM_Product_ID(tableRow.getProductId().getRepoId());\n\t\t\tmdCandidateRecord.setM_Warehouse_ID(warehouseId.getRepoId());\n\t\t\tmdCandidateRecord.setMD_Candidate_Type(tableRow.getType().getCode());\n\t\t\tmdCandidateRecord.setMD_Candidate_BusinessCase(CandidateBusinessCase.toCode(tableRow.getBusinessCase()));\n\t\t\tmdCandidateRecord.setQty(tableRow.getQty());\n\t\t\tmdCandidateRecord.setDateProjected(TimeUtil.asTimestamp(tableRow.getTime()));\n\n\t\t\tsetAttributeSetInstance(mdCandidateRecord, tableRow);\n\t\t\tInterfaceWrapperHelper.saveRecord(mdCandidateRecord);\n\n\t\t\tmdCandidateRecord.setSeqNo(mdCandidateRecord.getMD_Candidate_ID());\n\t\t\tInterfaceWrapperHelper.saveRecord(mdCandidateRecord);\n\n\t\t\tfinal I_MD_Candidate mdStockCandidateRecord = InterfaceWrapperHelper.newInstance(I_MD_Candidate.class);\n\t\t\tmdStockCandidateRecord.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\t\t\tmdStockCandidateRecord.setM_Product_ID(tableRow.getProductId().getRepoId());\n\t\t\tmdStockCandidateRecord.setM_Warehouse_ID(warehouseId.getRepoId());\n\t\t\tmdStockCandidateRecord.setMD_Candidate_Type(CandidateType.STOCK.getCode());\n\t\t\tmdStockCandidateRecord.setSeqNo(mdCandidateRecord.getMD_Candidate_ID());\n\t\t\tfinal boolean isDemand = CandidateType.DEMAND.equals(tableRow.getType()) || CandidateType.INVENTORY_DOWN.equals(tableRow.getType());\n\n\t\t\tsetAttributeSetInstance(mdStockCandidateRecord, tableRow);\n\n\t\t\tif (isDemand)\n\t\t\t{\n\t\t\t\tmdStockCandidateRecord.setMD_Candidate_Parent_ID(mdCandidateRecord.getMD_Candidate_ID());\n\t\t\t}\n\t\t\tmdStockCandidateRecord.setQty(tableRow.getAtp());\n\t\t\tmdStockCandidateRecord.setDateProjected(TimeUtil.asTimestamp(tableRow.getTime()));\n\t\t\tInterfaceWrapperHelper.saveRecord(mdStockCandidateRecord);\n\n\t\t\tfinal boolean isSupply = CandidateType.SUPPLY.equals(tableRow.getType()) || CandidateType.INVENTORY_UP.equals(tableRow.getType());\n\t\t\tif (isSupply)\n\t\t\t{\n\t\t\t\tmdCandidateRecord.setMD_Candidate_Parent_ID(mdStockCandidateRecord.getMD_Candidate_ID());\n\t\t\t\tInterfaceWrapperHelper.saveRecord(mdCandidateRecord);\n\t\t\t}\n\n\t\t\tif (!isDemand && !isSupply)\n\t\t\t{\n\t\t\t\tfail(\"Unsupported type \" + tableRow.getType());\n\t\t\t}\n\n\t\t\tstockCandidateTable.putOrReplace(tableRow.getIdentifier(), mdStockCandidateRecord);\n\t\t});\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 140,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1736,
    "annotation": "\n\t@Then(\"metasfresh has this MD_Candidate data\")",
    "glue_code": "\t@Then(\"metasfresh has this MD_Candidate data\")\n\tpublic void metasfresh_has_this_md_candidate_data(@NonNull final MD_Candidate_StepDefTable table) throws Throwable\n\t{\n\t\ttable.forEach((tableRow) -> {\n\t\t\tfinal MaterialDispoDataItem materialDispoRecord = materialDispoRecordRepository.getBy(tableRow.toCandidatesQuery());\n\t\t\tassertThat(materialDispoRecord).isNotNull(); // add message\n\n\t\t\tassertThat(materialDispoRecord.getType()).isEqualTo(tableRow.getType());\n\t\t\tassertThat(materialDispoRecord.getBusinessCase()).isEqualTo(tableRow.getBusinessCase());\n\t\t\tassertThat(materialDispoRecord.getMaterialDescriptor().getProductId()).isEqualTo(tableRow.getProductId().getRepoId());\n\t\t\tassertThat(materialDispoRecord.getMaterialDescriptor().getDate()).isEqualTo(tableRow.getTime());\n\t\t\tassertThat(materialDispoRecord.getMaterialDescriptor().getQuantity()).isEqualByComparingTo(tableRow.getQty());\n\t\t\tassertThat(materialDispoRecord.getAtp()).isEqualByComparingTo(tableRow.getAtp());\n\n\t\t\tmaterialDispoDataItemStepDefData.putIfMissing(tableRow.getIdentifier(), materialDispoRecord);\n\t\t});\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 195,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1737,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, metasfresh has this MD_Candidate data$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, metasfresh has this MD_Candidate data$\")\n\tpublic void metasfresh_has_this_md_candidate_data(final int timeoutSec, @NonNull final MD_Candidate_StepDefTable table) throws Throwable\n\t{\n\t\tfinal Supplier<Boolean> mdCandidateDemandDetailRecordsCounterChecker = () ->\n\t\t\t\tqueryBL.createQueryBuilderOutOfTrx(I_MD_Candidate_Demand_Detail.class)\n\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.count() > 0;\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, mdCandidateDemandDetailRecordsCounterChecker);\n\n\t\ttable.forEach((tableRow) -> {\n\t\t\tfinal MaterialDispoDataItem materialDispoDataItem = materialDispoRecordRepository.getBy(tableRow.toCandidatesQuery());\n\n\t\t\tassertThat(materialDispoDataItem).isNotNull(); // add message\n\t\t\tassertThat(materialDispoDataItem.getType()).isEqualTo(tableRow.getType());\n\t\t\tassertThat(materialDispoDataItem.getBusinessCase()).isEqualTo(tableRow.getBusinessCase());\n\t\t\tassertThat(materialDispoDataItem.getMaterialDescriptor().getProductId()).isEqualTo(tableRow.getProductId().getRepoId());\n\t\t\tassertThat(materialDispoDataItem.getMaterialDescriptor().getQuantity()).isEqualByComparingTo(tableRow.getQty());\n\t\t\tassertThat(materialDispoDataItem.getAtp()).isEqualByComparingTo(tableRow.getAtp());\n\n\t\t\tmaterialDispoDataItemStepDefData.putIfMissing(tableRow.getIdentifier(), materialDispoDataItem);\n\t\t});\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 213,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1738,
    "annotation": "\n\t@And(\"metasfresh generates this MD_Candidate_Demand_Detail data\")",
    "glue_code": "\t@And(\"metasfresh generates this MD_Candidate_Demand_Detail data\")\n\tpublic void metasfresh_generates_this_MD_Candidate_Demand_Detail_data(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String materialDispoItemIdentifier = tableRow.get(I_MD_Candidate_Demand_Detail.COLUMNNAME_MD_Candidate_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal MaterialDispoDataItem materialDispoDataItem = materialDispoDataItemStepDefData.get(materialDispoItemIdentifier);\n\n\t\t\tassertThat(materialDispoDataItem).isNotNull();    // add message\n\n\t\t\tfinal BusinessCaseDetail businessCaseDetail = materialDispoDataItem.getBusinessCaseDetail();\n\t\t\tassertThat(businessCaseDetail)\n\t\t\t\t\t.as(\"Missing BusinessCaseDetail of MaterialDispoDataItem %s\", materialDispoDataItem.toString())\n\t\t\t\t\t.isNotNull();\n\n\t\t\tfinal String orderLineIdentifier = tableRow.get(I_C_OrderLine.COLUMNNAME_C_OrderLine_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal BigDecimal plannedQty = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_MD_Candidate_Demand_Detail.COLUMNNAME_PlannedQty);\n\t\t\tfinal int orderLineId = StepDefUtil.extractId(orderLineIdentifier, orderLineTable);\n\n\t\t\tassertThat(DemandDetail.cast(businessCaseDetail).getOrderLineId()).isEqualTo(orderLineId);\n\t\t\tassertThat(DemandDetail.cast(businessCaseDetail).getQty()).isEqualByComparingTo(plannedQty);\n\t\t\tassertThat(DemandDetail.cast(businessCaseDetail).getShipmentScheduleId()).isGreaterThan(0);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 238,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1739,
    "annotation": "\n\t@Then(\"metasfresh has this MD_Candidate_Demand_Detail data\")",
    "glue_code": "\t@Then(\"metasfresh has this MD_Candidate_Demand_Detail data\")\n\tpublic void metasfresh_has_this_md_candidate_demand_detail_data(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String materialDispoItemIdentifier = tableRow.get(I_MD_Candidate_Demand_Detail.COLUMNNAME_MD_Candidate_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal MaterialDispoDataItem materialDispoDataItem = materialDispoDataItemStepDefData.get(materialDispoItemIdentifier);\n\t\t\tfinal BusinessCaseDetail businessCaseDetail = materialDispoDataItem.getBusinessCaseDetail();\n\n\t\t\tassertThat(businessCaseDetail)\n\t\t\t\t\t.as(\"Missing BusinessCaseDetail of MaterialDispoDataItem %s\", materialDispoDataItem.toString())\n\t\t\t\t\t.isNotNull();\n\n\t\t\tfinal int shipmentScheduleId = DataTableUtil.extractIntForColumnName(tableRow, I_MD_Candidate_Demand_Detail.COLUMNNAME_M_ShipmentSchedule_ID);\n\t\t\tassertThat(DemandDetail.cast(businessCaseDetail).getShipmentScheduleId()).isEqualTo(shipmentScheduleId);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 264,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1740,
    "annotation": "\n\t@And(\"metasfresh has this MD_Candidate_StockChange_Detail data\")",
    "glue_code": "\t@And(\"metasfresh has this MD_Candidate_StockChange_Detail data\")\n\tpublic void metasfresh_has_this_md_candidate_stockChange_detail_data(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String stockChangeDetailIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, I_MD_Candidate_StockChange_Detail.COLUMNNAME_MD_Candidate_StockChange_Detail_ID + \".Identifier\");\n\t\t\tfinal String candidateIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_MD_Candidate_ID + \".Identifier\");\n\t\t\tfinal int freshQtyOnHandId = DataTableUtil.extractIntForColumnName(row, \"Fresh_QtyOnHand_ID\");\n\t\t\tfinal int freshQtyOnHandLineId = DataTableUtil.extractIntForColumnName(row, \"Fresh_QtyOnHand_Line_ID\");\n\t\t\tfinal boolean isReverted = DataTableUtil.extractBooleanForColumnName(row, \"IsReverted\");\n\n\t\t\tfinal I_MD_Candidate_StockChange_Detail stockChangeDetail = queryBL.createQueryBuilder(I_MD_Candidate_StockChange_Detail.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_MD_Candidate_StockChange_Detail.COLUMNNAME_Fresh_QtyOnHand_Line_ID, freshQtyOnHandLineId)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_MD_Candidate_StockChange_Detail.class);\n\n\t\t\tsoftly.assertThat(stockChangeDetail).as(\"MD_Candidate_StockChange_Detail with Fresh_QtyOnHand_Line_ID=%s\", freshQtyOnHandLineId).isNotNull();\n\t\t\tsoftly.assertThat(stockChangeDetail.getFresh_QtyOnHand_ID()).as(\"MD_Candidate_StockChange_Detail with Fresh_QtyOnHand_Line_ID=%s - Fresh_QtyOnHand_ID\", freshQtyOnHandLineId).isEqualTo(freshQtyOnHandId);\n\t\t\tsoftly.assertThat(stockChangeDetail.isReverted()).as(\"MD_Candidate_StockChange_Detail with Fresh_QtyOnHand_Line_ID=%s - isReverted\", freshQtyOnHandLineId).isEqualTo(isReverted);\n\n\t\t\tif (candidateIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal MaterialDispoDataItem materialDispoDataItem = materialDispoDataItemStepDefData.get(candidateIdentifier);\n\t\t\t\tsoftly.assertThat(materialDispoDataItem.getCandidateId().getRepoId()).as(\"MD_Candidate_StockChange_Detail with Fresh_QtyOnHand_Line_ID=%s - MD_Candidate_ID\", freshQtyOnHandLineId).isEqualTo(stockChangeDetail.getMD_Candidate_ID());\n\t\t\t}\n\t\t\tif (stockChangeDetailIdentifier != null)\n\t\t\t{\n\t\t\t\tstockChangeDetailStepDefData.putOrReplace(stockChangeDetailIdentifier, stockChangeDetail);\n\t\t\t}\n\t\t}\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 283,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1741,
    "annotation": "\n\t@And(\"^metasfresh receives a (StockEstimateCreatedEvent|StockEstimateDeletedEvent)$\")",
    "glue_code": "\t@And(\"^metasfresh receives a (StockEstimateCreatedEvent|StockEstimateDeletedEvent)$\")\n\tpublic void metasfresh_receives_StockEstimateEvent(@NonNull final String eventType, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, \"M_Product_ID\");\n\n\t\tfinal int productId = productTable.getOptional(productIdentifier)\n\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\n\t\tfinal int freshQtyOnHandId = DataTableUtil.extractIntForColumnName(row, \"Fresh_QtyOnHand_ID\");\n\t\tfinal int freshQtyOnHandLineId = DataTableUtil.extractIntForColumnName(row, \"Fresh_QtyOnHand_Line_ID\");\n\t\tfinal Instant dateDoc = DataTableUtil.extractInstantForColumnName(row, \"DateDoc\");\n\t\tfinal BigDecimal qty = DataTableUtil.extractBigDecimalForColumnName(row, \"Qty\");\n\n\t\tfinal AbstractStockEstimateEvent event = switch (eventType)\n\t\t{\n\t\t\tcase StockEstimateCreatedEvent.TYPE -> MaterialDispoUtils.createStockEstimateCreatedEvent(productId, freshQtyOnHandId, freshQtyOnHandLineId, dateDoc, qty);\n\t\t\tcase StockEstimateDeletedEvent.TYPE -> MaterialDispoUtils.createStockEstimateDeletedEvent(productId, freshQtyOnHandId, freshQtyOnHandLineId, dateDoc, qty);\n\t\t\tdefault -> throw new AdempiereException(\"Event type not handled: \" + eventType);\n\t\t};\n\n\t\t//noinspection deprecation\n\t\tpostMaterialEventService.enqueueEventNow(event);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 319,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1742,
    "annotation": "\n\t@And(\"^after not more than (.*)s, metasfresh has no MD_Candidate for identifier (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, metasfresh has no MD_Candidate for identifier (.*)$\")\n\tpublic void metasfresh_has_no_md_candidate_for_identifier(final int timeoutSec, @NonNull final String identifier) throws InterruptedException\n\t{\n\t\tfinal MaterialDispoDataItem materialDispoDataItem = materialDispoDataItemStepDefData.get(identifier);\n\n\t\tfinal Supplier<Boolean> candidateWasDeleted = () -> MaterialDispoUtils.getCandidateRecordById(materialDispoDataItem.getCandidateId()) == null;\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, candidateWasDeleted);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 346,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1743,
    "annotation": "\n\t@And(\"^after not more than (.*)s, metasfresh has no MD_Candidate_StockChange_Detail data for identifier (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, metasfresh has no MD_Candidate_StockChange_Detail data for identifier (.*)$\")\n\tpublic void metasfresh_has_no_md_candidate_stockChange_detail_for_identifier(final int timeoutSec, @NonNull final String identifier) throws InterruptedException\n\t{\n\t\tfinal TableRecordReference stockChangeDetail = stockChangeDetailStepDefData.getRecordDataItem(identifier)\n\t\t\t\t.getTableRecordReference();\n\t\tassertThat(stockChangeDetail).isNotNull();\n\n\t\tfinal Supplier<Boolean> candidateDetailWasDeleted = () ->\n\t\t{\n\t\t\tfinal I_MD_Candidate_StockChange_Detail stockChangeDetailFromDB = queryBL.createQueryBuilder(I_MD_Candidate_StockChange_Detail.class)\n\t\t\t\t\t.addEqualsFilter(I_MD_Candidate_StockChange_Detail.COLUMNNAME_MD_Candidate_StockChange_Detail_ID, stockChangeDetail.getRecord_ID())\n\t\t\t\t\t.orderBy(I_MD_Candidate_StockChange_Detail.COLUMNNAME_MD_Candidate_StockChange_Detail_ID)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_MD_Candidate_StockChange_Detail.class);\n\t\t\treturn stockChangeDetailFromDB == null;\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, candidateDetailWasDeleted);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 356,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1744,
    "annotation": "\n\t@And(\"^after not more than (.*)s, the MD_Candidate table has only the following records$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, the MD_Candidate table has only the following records$\")\n\tpublic void validate_md_candidate_records(final int timeoutSec, @NonNull final MD_Candidate_StepDefTable table) throws Throwable\n\t{\n\t\tvalidate_md_candidates(timeoutSec, table);\n\n\t\tStepDefUtil.<Boolean>tryAndWaitForItem()\n\t\t\t\t.worker(() -> {\n\t\t\t\t\tfinal int expectedCandidatesCount = table.size();\n\n\t\t\t\t\tfinal List<I_MD_Candidate> actualCandidates = queryBL.createQueryBuilder(I_MD_Candidate.class)\n\t\t\t\t\t\t\t.addInArrayFilter(COLUMNNAME_M_Product_ID, table.getProductIds())\n\t\t\t\t\t\t\t.addNotEqualsFilter(COLUMNNAME_MD_Candidate_Type, CandidateType.STOCK) // skip STOCK candidates\n\t\t\t\t\t\t\t.orderBy(COLUMNNAME_MD_Candidate_ID)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.list();\n\t\t\t\t\tfinal int actualCandidatesCount = actualCandidates.size();\n\n\t\t\t\t\tif (actualCandidatesCount != expectedCandidatesCount)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn ProviderResult.resultWasNotFound(\n\t\t\t\t\t\t\t\t\"Expected \" + expectedCandidatesCount + \" MD_Candidate(s) but found \" + actualCandidatesCount + \" MD_Candidate(s)\"\n\t\t\t\t\t\t\t\t\t\t+ \"\\nActual MD_Candidate(s) - \" + actualCandidatesCount + \" records:\"\n\t\t\t\t\t\t\t\t\t\t+ \"\\n\" + toCandidatesTabularStringFromRecords(actualCandidates)\n\t\t\t\t\t\t\t\t\t\t+ \"\\nExpected Row(s) - \" + expectedCandidatesCount + \" rows:\"\n\t\t\t\t\t\t\t\t\t\t+ \"\\n\" + toTabularStringFromCandidateRows(table)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ProviderResult.resultWasFound(true);\n\t\t\t\t})\n\t\t\t\t.maxWaitSeconds(timeoutSec)\n\t\t\t\t.execute();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 376,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1745,
    "annotation": "\n\t@And(\"^after not more than (.*)s, MD_Candidates are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, MD_Candidates are found$\")\n\tpublic void validate_md_candidates(final int timeoutSec, @NonNull final MD_Candidate_StepDefTable table) throws Throwable\n\t{\n\t\tfinal Stopwatch stopwatch = Stopwatch.createStarted();\n\n\t\tfinal HashMap<CandidateId, StepDefDataIdentifier> candidateIdsAlreadyMatched = new HashMap<>();\n\t\ttable.forEach((row) -> {\n\t\t\t// make sure the given md_candidate has been created\n\t\t\tfinal MaterialDispoDataItem materialDispoRecord = tryAndWaitForCandidate(timeoutSec, row, candidateIdsAlreadyMatched);\n\t\t\tSharedTestContext.put(\"candidateId\", materialDispoRecord.getCandidateId().getRepoId());\n\t\t\tSharedTestContext.put(\"materialDispoRecord\", materialDispoRecord);\n\n\t\t\tvalidate_md_candidate(row, materialDispoRecord);\n\n\t\t\tmaterialDispoDataItemStepDefData.putOrReplace(row.getIdentifier(), materialDispoRecord);\n\t\t\tcandidateIdsAlreadyMatched.put(materialDispoRecord.getCandidateId(), row.getIdentifier());\n\t\t});\n\n\t\tstopwatch.stop();\n\t\tlogger.info(\"All candidates were created after {}\", stopwatch);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 410,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1746,
    "annotation": "\n\t@And(\"the following MD_Candidates are validated\")",
    "glue_code": "\t@And(\"the following MD_Candidates are validated\")\n\tpublic void validate_md_candidate_by_id(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal long timeoutSec = 60L; //FIXME: add to stepdef\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_MD_Candidate_ID)\n\t\t\t\t.forEach((row) -> validate_md_candidate_with_stock(row, timeoutSec));\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 453,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1747,
    "annotation": "\n\t@And(\"the following stock MD_Candidates are validated\")",
    "glue_code": "\t@And(\"the following stock MD_Candidates are validated\")\n\tpublic void validate_md_candidate_stock(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidate_md_candidate_stock(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 462,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1748,
    "annotation": "\n\t@And(\"post DeactivateAllSimulatedCandidatesEvent and wait for processing\")",
    "glue_code": "\t@And(\"post DeactivateAllSimulatedCandidatesEvent and wait for processing\")\n\tpublic void deactivate_simulated_md_candidates()\n\t{\n\t\tfinal String traceId = UUID.randomUUID().toString();\n\n\t\tfinal ClientAndOrgId clientAndOrgId = ClientAndOrgId.ofClientAndOrg(Env.getClientId(), Env.getOrgId());\n\n\t\tpostMaterialEventService.enqueueEventNow(DeactivateAllSimulatedCandidatesEvent.builder()\n\t\t\t\t.eventDescriptor(EventDescriptor.ofClientOrgAndTraceId(clientAndOrgId, traceId))\n\t\t\t\t.build());\n\n\t\tmaterialEventObserver.awaitProcessing(traceId);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 501,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1749,
    "annotation": "\n\t@And(\"delete all simulated candidates\")",
    "glue_code": "\t@And(\"delete all simulated candidates\")\n\tpublic void delete_simulated_candidates()\n\t{\n\t\tsimulatedCandidateService.deleteAllSimulatedCandidates();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 515,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1750,
    "annotation": "\n\t@And(\"validate there is no simulated md_candidate\")",
    "glue_code": "\t@And(\"validate there is no simulated md_candidate\")\n\tpublic void validate_no_simulated_md_candidate()\n\t{\n\t\tfinal int noOfRecords = queryBL.createQueryBuilder(I_MD_Candidate.class)\n\t\t\t\t.addEqualsFilter(I_MD_Candidate.COLUMNNAME_MD_Candidate_Status, X_MD_Candidate.MD_CANDIDATE_STATUS_Simulated)\n\t\t\t\t.create()\n\t\t\t\t.count();\n\n\t\tassertThat(noOfRecords).isZero();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 521,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo/MD_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/material/dispo",
      "filename": "MD_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1694,
    "annotation": "\n\t@And(\"load AD_Message:\")",
    "glue_code": "\t@And(\"load AD_Message:\")\n\tpublic void load_ad_message(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_AD_Message.COLUMNNAME_Value);\n\n\t\t\tfinal I_AD_Message adMessageRecord = queryBL.createQueryBuilder(I_AD_Message.class)\n\t\t\t\t\t.addStringLikeFilter(I_AD_Message.COLUMNNAME_Value, value, true)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_AD_Message.class);\n\n\t\t\tfinal String messageIdentifier = DataTableUtil.extractRecordIdentifier(row, StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tmessageTable.putOrReplace(messageIdentifier, adMessageRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 46,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/message/AD_Message_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/message",
      "filename": "AD_Message_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1687,
    "annotation": "\n\t@When(\"^start picking job for sales order identified by (.*)$\")",
    "glue_code": "\t@When(\"^start picking job for sales order identified by (.*)$\")\n\tpublic void start(@NonNull final String salesOrderIdentifier)\n\t{\n\t\tfinal I_C_Order salesOrder = ordersTable.get(salesOrderIdentifier);\n\t\tfinal JsonWFProcess wfProcess = mobileUIPickingClient.startJobBySalesDocumentNo(salesOrder.getDocumentNo());\n\t\tcontext.setWfProcess(wfProcess);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1688,
    "annotation": "\n\t@When(\"^scan picking slot identified by (.*)$\")",
    "glue_code": "\t@When(\"^scan picking slot identified by (.*)$\")\n\tpublic void scanPickingSlot(@NonNull final String pickingSlotIdentifier)\n\t{\n\t\tfinal PickingSlotIdAndCaption pickingSlotIdAndCaption = pickingSlotsTable.getPickingSlotIdAndCaption(pickingSlotIdentifier);\n\n\t\tfinal JsonWFProcess wfProcess = mobileUIPickingClient.scanPickingSlot(context.getWfProcessIdNotNull(), pickingSlotIdAndCaption);\n\t\tcontext.setWfProcess(wfProcess);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1689,
    "annotation": "\n\t@When(\"^set picking target as new LU identified by (.*)$\")",
    "glue_code": "\t@When(\"^set picking target as new LU identified by (.*)$\")\n\tpublic void setPickingLUTarget(@NonNull final String packingInstructionsIdentifier)\n\t{\n\t\tfinal HuPackingInstructionsId luPIId = huPiTable.getId(packingInstructionsIdentifier);\n\t\tfinal LUPickingTarget pickingTarget = LUPickingTarget.ofPackingInstructions(luPIId, packingInstructionsIdentifier);\n\n\t\tfinal JsonWFProcess wfProcess = mobileUIPickingClient.setPickingTarget(context.getWfProcessIdNotNull(), pickingTarget);\n\t\tcontext.setWfProcess(wfProcess);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1690,
    "annotation": "\n\t@When(\"^set picking target as new TU identified by (.*)$\")",
    "glue_code": "\t@When(\"^set picking target as new TU identified by (.*)$\")\n\tpublic void setPickingTUTarget(@NonNull final String packingInstructionsIdentifier)\n\t{\n\t\tfinal HuPackingInstructionsId tuPIId = huPiTable.getId(packingInstructionsIdentifier);\n\t\tfinal TUPickingTarget pickingTarget = TUPickingTarget.ofPackingInstructions(tuPIId, packingInstructionsIdentifier);\n\n\t\tfinal JsonWFProcess wfProcess = mobileUIPickingClient.setTUPickingTarget(context.getWfProcessIdNotNull(), pickingTarget);\n\t\tcontext.setWfProcess(wfProcess);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1691,
    "annotation": "\n\t@When(\"expect current picking target\")",
    "glue_code": "\t@When(\"expect current picking target\")\n\tpublic void setPickingLUTarget(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRows.of(dataTable).singleRow();\n\t\tfinal String wfProcessId = context.getWfProcessNotNull().getId();\n\n\t\trow.getAsOptionalIdentifier(\"Existing_LU\")\n\t\t\t\t.ifPresent(luIdentifier -> {\n\t\t\t\t\tfinal LUPickingTarget actualPickingTarget = mobileUIPickingClient.getPickingTarget(wfProcessId).orElse(null);\n\t\t\t\t\tassertThat(actualPickingTarget).as(\"actual picking LU target\").isNotNull();\n\t\t\t\t\tassertThat(actualPickingTarget.isExistingLU()).as(() -> \"actual picking LU target is existing LU: \" + actualPickingTarget).isTrue();\n\n\t\t\t\t\tfinal HuId luId = huTable.getIdOptional(luIdentifier).orElse(null);\n\t\t\t\t\tif (luId == null)\n\t\t\t\t\t{\n\t\t\t\t\t\thuTable.put(luIdentifier, handlingUnitsBL.getById(actualPickingTarget.getLuIdNotNull()));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tassertThat(actualPickingTarget.getLuIdNotNull()).as(\"actual picking LU target\").isEqualTo(luId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 102,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1692,
    "annotation": "\n\t@When(\"pick lines\")",
    "glue_code": "\t@When(\"pick lines\")\n\tpublic void pickLines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::pickLine);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 126,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1693,
    "annotation": "\n\t@When(\"complete picking job\")",
    "glue_code": "\t@When(\"complete picking job\")\n\tpublic void complete()\n\t{\n\t\tfinal JsonWFProcess wfProcess = mobileUIPickingClient.complete(context.getWfProcessIdNotNull());\n\t\tcontext.setWfProcess(wfProcess);\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 201,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking/MobileUI_Picking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/mobileui/picking",
      "filename": "MobileUI_Picking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1731,
    "annotation": "\n\t@And(\"validate I_M_MovementLine for distribution order line\")",
    "glue_code": "\t@And(\"validate I_M_MovementLine for distribution order line\")\n\tpublic void validate_movement_line(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_MovementLine.COLUMNNAME_DD_OrderLine_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_DD_OrderLine orderLine = ddOrderLineTable.get(orderLineIdentifier);\n\n\t\t\tfinal String locatorToIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_MovementLine.COLUMNNAME_M_LocatorTo_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Locator toLocator = locatorTable.get(locatorToIdentifier);\n\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_M_MovementLine.COLUMNNAME_MovementQty);\n\n\t\t\tfinal I_M_MovementLine movementLine = queryBL.createQueryBuilder(I_M_MovementLine.class)\n\t\t\t\t\t.addEqualsFilter(I_M_MovementLine.COLUMNNAME_DD_OrderLine_ID, orderLine.getDD_Order_ID())\n\t\t\t\t\t.addEqualsFilter(I_M_MovementLine.COLUMNNAME_M_LocatorTo_ID, toLocator.getM_Locator_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_M_MovementLine.class);\n\n\t\t\tassertThat(movementLine).isNotNull();\n\t\t\tassertThat(movementLine.getMovementQty()).isEqualTo(movementQty);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/movement/M_Movement_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/movement",
      "filename": "M_Movement_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1787,
    "annotation": "\n\t@And(\"AD_Note table is reset\")",
    "glue_code": "\t@And(\"AD_Note table is reset\")\n\tpublic void reset_ad_note()\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"DELETE FROM AD_Note\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/note/AD_Note_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/note",
      "filename": "AD_Note_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1788,
    "annotation": "\n\t@And(\"after not more than (.*)s, validate AD_Note:$\")",
    "glue_code": "\t@And(\"after not more than (.*)s, validate AD_Note:$\")\n\tpublic void validate_AD_Note(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String messageIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_Note.COLUMNNAME_AD_Message_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Message message = messageTable.get(messageIdentifier);\n\n\t\t\tfinal String noteIdentifier = DataTableUtil.extractRecordIdentifier(row, I_AD_Note.COLUMNNAME_AD_Note_ID);\n\n\t\t\tfinal Supplier<Boolean> adNoteRecordFound = () -> {\n\t\t\t\tfinal IQueryBuilder<I_AD_Note> noteQueryBuilder = queryBL.createQueryBuilder(I_AD_Note.class)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_Note.COLUMNNAME_AD_Message_ID, message.getAD_Message_ID());\n\n\t\t\t\tfinal String userIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_AD_UserGroup_User_Assign.COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\t\tif (Check.isNotBlank(userIdentifier))\n\t\t\t\t{\n\t\t\t\t\tfinal Integer userId = userTable.get(userIdentifier).getAD_User_ID();\n\n\t\t\t\t\tnoteQueryBuilder.addEqualsFilter(I_AD_Note.COLUMNNAME_AD_User_ID, userId);\n\t\t\t\t}\n\n\t\t\t\tfinal I_AD_Note noteRecord = noteQueryBuilder.create().firstOnly(I_AD_Note.class);\n\n\t\t\t\tif (noteRecord == null)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tnoteTable.putOrReplace(noteIdentifier, noteRecord);\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t//dev-note: tryAndWait will fail if ad_note record is not found\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, adNoteRecordFound);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/note/AD_Note_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/note",
      "filename": "AD_Note_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1793,
    "annotation": "\n\t@And(\"update C_OLCandAggAndOrder:\")",
    "glue_code": "\t@And(\"update C_OLCandAggAndOrder:\")\n\tpublic void update_C_OLCandAggAndOrder(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal int olCandProcessorId = DataTableUtil.extractIntForColumnName(row, I_C_OLCandAggAndOrder.COLUMNNAME_C_OLCandProcessor_ID);\n\t\t\tfinal int olCandColumnId = DataTableUtil.extractIntForColumnName(row, I_C_OLCandAggAndOrder.COLUMNNAME_AD_Column_OLCand_ID);\n\t\t\tfinal Boolean splitOrder = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_OLCandAggAndOrder.COLUMNNAME_SplitOrder, null);\n\n\t\t\tfinal I_C_OLCandAggAndOrder aggAndOrder = queryBL.createQueryBuilder(I_C_OLCandAggAndOrder.class)\n\t\t\t\t\t.addEqualsFilter(I_C_OLCandAggAndOrder.COLUMNNAME_C_OLCandProcessor_ID, olCandProcessorId)\n\t\t\t\t\t.addEqualsFilter(I_C_OLCandAggAndOrder.COLUMNNAME_AD_Column_OLCand_ID, olCandColumnId)\n\t\t\t\t\t.orderBy(I_C_OLCandAggAndOrder.COLUMN_C_OLCandAggAndOrder_ID)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstNotNull(I_C_OLCandAggAndOrder.class);\n\n\t\t\tif (splitOrder != null)\n\t\t\t{\n\t\t\t\taggAndOrder.setSplitOrder(splitOrder);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.save(aggAndOrder);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 39,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand/C_OLCandAggAndOrder_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand",
      "filename": "C_OLCandAggAndOrder_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1838,
    "annotation": "\n\t@Then(\"process metasfresh response\")",
    "glue_code": "\t@Then(\"process metasfresh response\")\n\tpublic void process_metasfresh_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\ttry\n\t\t{\n\t\t\tprocessResponse(table);\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\tfinal StringBuilder message = new StringBuilder();\n\t\t\tmessage.append(\"C_OLCand records could not be processed. See:\\n\");\n\n\t\t\tfinal JsonOLCandProcessRequest request = mapper.readValue(testContext.getRequestPayload(), JsonOLCandProcessRequest.class);\n\t\t\tassertThat(request).isNotNull();\n\n\t\t\tlogOLCandidateRecords(message, request);\n\n\t\t\tthrow e;\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 153,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand/C_OLCand_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand",
      "filename": "C_OLCand_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1839,
    "annotation": "\n\t@And(\"process metasfresh response JsonOLCandCreateBulkResponse\")",
    "glue_code": "\t@And(\"process metasfresh response JsonOLCandCreateBulkResponse\")\n\tpublic void process_JsonOLCandCreateBulkResponse(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonOLCandCreateBulkResponse olCandCreateBulkResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonOLCandCreateBulkResponse.class);\n\t\tassertThat(olCandCreateBulkResponse).isNotNull();\n\n\t\tfinal List<JsonOLCand> jsonOLCands = olCandCreateBulkResponse.getResult();\n\t\tassertThat(jsonOLCands).isNotEmpty();\n\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\t\tfinal String olCandIdentifiers = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_OLCand_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\tfinal List<String> identifiers = StepDefUtil.splitIdentifiers(olCandIdentifiers);\n\t\tassertThat(jsonOLCands.size()).isEqualTo(identifiers.size());\n\n\t\tfor (int index = 0; index < identifiers.size(); index++)\n\t\t{\n\t\t\tfinal int olCandId = jsonOLCands.get(index).getId();\n\n\t\t\tfinal I_C_OLCand olCandRecord = InterfaceWrapperHelper.load(olCandId, I_C_OLCand.class);\n\t\t\tassertThat(olCandRecord).isNotNull();\n\n\t\t\tfinal String olCandIdentifier = identifiers.get(index);\n\t\t\tolCandTable.putOrReplace(olCandIdentifier, olCandRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 184,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand/C_OLCand_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand",
      "filename": "C_OLCand_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1840,
    "annotation": "\n\t@And(\"validate C_OLCand is with error\")",
    "glue_code": "\t@And(\"validate C_OLCand is with error\")\n\tpublic void validate_C_OLCand_has_error(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tvalidateOLCandError(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 211,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand/C_OLCand_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand",
      "filename": "C_OLCand_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1841,
    "annotation": "\n\t@And(\"validate C_OLCand:\")",
    "glue_code": "\t@And(\"validate C_OLCand:\")\n\tpublic void validate_C_OLCand(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String olCandIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_OLCand_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_OLCand olCand = olCandTable.get(olCandIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(olCand);\n\t\t\tsoftly.assertThat(olCand).isNotNull();\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\t\t\tsoftly.assertThat(olCand.getC_BPartner_ID()).isEqualTo(bPartner.getC_BPartner_ID());\n\n\t\t\tfinal String bpLocationIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_OLCand.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bpartnerLocationTable.get(bpLocationIdentifier);\n\t\t\tsoftly.assertThat(olCand.getC_BPartner_Location_ID()).isEqualTo(bPartnerLocation.getC_BPartner_Location_ID());\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_OLCand.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tsoftly.assertThat(olCand.getM_Product_ID()).isEqualTo(product.getM_Product_ID());\n\n\t\t\tfinal String deliveryRule = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_DeliveryRule);\n\t\t\tsoftly.assertThat(olCand.getDeliveryRule()).isEqualTo(deliveryRule);\n\n\t\t\tfinal String deliveryViaRule = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_DeliveryViaRule);\n\t\t\tsoftly.assertThat(olCand.getDeliveryViaRule()).isEqualTo(deliveryViaRule);\n\n\t\t\tfinal String poReference = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_POReference);\n\t\t\tif (Check.isNotBlank(poReference))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(olCand.getPOReference()).isEqualTo(poReference);\n\t\t\t}\n\n\t\t\tfinal String adInputDataSourceName = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_AD_InputDataSource_ID + \".\" + I_AD_InputDataSource.COLUMNNAME_Name);\n\t\t\tif (Check.isNotBlank(adInputDataSourceName))\n\t\t\t{\n\t\t\t\tfinal I_AD_InputDataSource inputDataSource = InterfaceWrapperHelper.load(olCand.getAD_InputDataSource_ID(), I_AD_InputDataSource.class);\n\t\t\t\tsoftly.assertThat(inputDataSource.getName()).isEqualTo(adInputDataSourceName);\n\t\t\t}\n\n\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalForColumnName(row, I_C_OLCand.COLUMNNAME_QtyEntered);\n\t\t\tsoftly.assertThat(olCand.getQtyEntered()).isEqualTo(qtyEntered);\n\n\t\t\tfinal Boolean isError = DataTableUtil.extractBooleanForColumnName(row, COLUMNNAME_IsError);\n\t\t\tsoftly.assertThat(olCand.isError()).isEqualTo(isError);\n\n\t\t\tfinal Boolean processed = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_Processed, false);\n\t\t\tsoftly.assertThat(olCand.isProcessed()).isEqualTo(processed);\n\n\t\t\tfinal String externalHeaderId = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_ExternalHeaderId);\n\t\t\tif (Check.isNotBlank(externalHeaderId))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(olCand.getExternalHeaderId()).isEqualTo(externalHeaderId);\n\t\t\t}\n\n\t\t\tfinal String externalLineId = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_ExternalLineId);\n\t\t\tif (Check.isNotBlank(externalLineId))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(olCand.getExternalLineId()).isEqualTo(externalLineId);\n\t\t\t}\n\n\t\t\tfinal BigDecimal priceActual = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_PriceActual);\n\t\t\tif (priceActual != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(olCand.getPriceActual()).isEqualTo(priceActual);\n\t\t\t}\n\n\t\t\tfinal String issueIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_AD_Issue_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(issueIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_Issue issue = InterfaceWrapperHelper.load(olCand.getAD_Issue_ID(), I_AD_Issue.class);\n\t\t\t\tsoftly.assertThat(issue).isNotNull();\n\n\t\t\t\tissueTable.putOrReplace(issueIdentifier, issue);\n\t\t\t}\n\n\t\t\tfinal String huItemProductIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + de.metas.edi.model.I_C_OLCand.COLUMNNAME_M_HU_PI_Item_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(huItemProductIdentifier))\n\t\t\t{\n\t\t\t\tfinal int huPiItemProductId = huItemProductTable.getOptional(huItemProductIdentifier)\n\t\t\t\t\t\t.map(I_M_HU_PI_Item_Product::getM_HU_PI_Item_Product_ID)\n\t\t\t\t\t\t.orElseGet(() -> Integer.parseInt(huItemProductIdentifier));\n\n\t\t\t\tsoftly.assertThat(olCand.getM_HU_PI_Item_Product_ID()).isEqualTo(huPiItemProductId);\n\t\t\t}\n\n\t\t\tfinal String dropShipBPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_DropShip_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipBPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner dropShipBPartner = bpartnerTable.get(dropShipBPartnerIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipBPartner).isNotNull();\n\n\t\t\t\tsoftly.assertThat(olCand.getDropShip_BPartner_ID()).isEqualTo(dropShipBPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String dropShipLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_DropShip_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location dropShipLocation = bpartnerLocationTable.get(dropShipLocationIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipLocation).isNotNull();\n\n\t\t\t\tsoftly.assertThat(olCand.getDropShip_Location_ID()).isEqualTo(dropShipLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String handOverBPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_HandOver_Partner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(handOverBPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner handOverBPartner = bpartnerTable.get(handOverBPartnerIdentifier);\n\t\t\t\tsoftly.assertThat(handOverBPartner).isNotNull();\n\n\t\t\t\tsoftly.assertThat(olCand.getHandOver_Partner_ID()).isEqualTo(handOverBPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String handOverLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_OLCand.COLUMNNAME_HandOver_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(handOverLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location handOverLocation = bpartnerLocationTable.get(handOverLocationIdentifier);\n\t\t\t\tsoftly.assertThat(handOverLocation).isNotNull();\n\n\t\t\t\tsoftly.assertThat(olCand.getHandOver_Location_ID()).isEqualTo(handOverLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 234,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand/C_OLCand_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand",
      "filename": "C_OLCand_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1842,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_OLCand is found\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_OLCand is found\")\n\tpublic void load_OLCand(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> isOLCandFound(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 364,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand/C_OLCand_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/olcand",
      "filename": "C_OLCand_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1786,
    "annotation": "\n\t@Given(\"update AD_Client\")",
    "glue_code": "\t@Given(\"update AD_Client\")\n\tpublic void update_AD_Client(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateClient(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 52,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org/AD_Client_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org",
      "filename": "AD_Client_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1820,
    "annotation": "\n\t@And(\"^after not more than (.*)s, AD_OrgChange_History are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, AD_OrgChange_History are found:$\")\n\tpublic void validate_created_org_change_histories(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> tableRow : dataTable)\n\t\t{\n\t\t\tfinal String orgChangeIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgChange_History.COLUMNNAME_AD_OrgChange_History_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String bPartnerFromIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgChange_History.COLUMNNAME_C_BPartner_From_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedFromBPartnerId = bPartnerTable.getOptional(bPartnerFromIdentifier)\n\t\t\t\t\t.map(I_C_BPartner::getC_BPartner_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(bPartnerFromIdentifier));\n\n\t\t\tfinal String bPartnerToIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgChange_History.COLUMNNAME_C_BPartner_To_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedToBPartnerId = bPartnerTable.getOptional(bPartnerToIdentifier)\n\t\t\t\t\t.map(I_C_BPartner::getC_BPartner_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(bPartnerToIdentifier));\n\n\t\t\t\tfinal String orgFromIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgChange_History.COLUMNNAME_AD_Org_From_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedFromOrgId = orgTable.getOptional(orgFromIdentifier)\n\t\t\t\t\t.map(I_AD_Org::getAD_Org_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(orgFromIdentifier));\n\n\t\t\tfinal String orgToIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgChange_History.COLUMNNAME_AD_OrgTo_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedToOrgId = orgTable.getOptional(orgToIdentifier)\n\t\t\t\t\t.map(I_AD_Org::getAD_Org_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(orgToIdentifier));\n\n\t\t\tfinal Supplier<Boolean> QueryExecutor = () -> {\n\n\t\t\t\tfinal I_AD_OrgChange_History orgChangeRecord = queryBL.createQueryBuilder(I_AD_OrgChange_History.class)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_OrgChange_History.COLUMNNAME_C_BPartner_From_ID, expectedFromBPartnerId)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_OrgChange_History.COLUMNNAME_C_BPartner_To_ID, expectedToBPartnerId)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_OrgChange_History.COLUMNNAME_AD_Org_From_ID, expectedFromOrgId)\n\t\t\t\t\t\t.addEqualsFilter(I_AD_OrgChange_History.COLUMNNAME_AD_OrgTo_ID, expectedToOrgId)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.firstOnly(I_AD_OrgChange_History.class);\n\n\n\t\t\t\tif (orgChangeRecord == null)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\torgChangeHistoryTable.putOrReplace(orgChangeIdentifier, orgChangeRecord);\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, QueryExecutor);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org/AD_OrgChange_History_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org",
      "filename": "AD_OrgChange_History_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1792,
    "annotation": "\n\t@Given(\"metasfresh contains AD_OrgInfo:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_OrgInfo:\")\n\tpublic void metasfresh_contains_ad_org_info(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_Org.COLUMNNAME_AD_Org_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Org org = orgTable.get(orgIdentifier);\n\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgInfo.COLUMNNAME_Org_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner orgBPartner = bPartnerTable.get(bPartnerIdentifier);\n\n\t\t\tfinal String bPartnerLocationIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgInfo.COLUMNNAME_OrgBP_Location_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner_Location orgBPartnerLocation = bPartnerLocationTable.get(bPartnerLocationIdentifier);\n\n\t\t\tfinal I_AD_OrgInfo orgInfoRecord = CoalesceUtil.coalesce(queryBL.createQueryBuilder(I_AD_OrgInfo.class)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .addEqualsFilter(I_AD_OrgInfo.COLUMNNAME_AD_Org_ID, org.getAD_Org_ID())\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .create()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .firstOnly(I_AD_OrgInfo.class),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t InterfaceWrapperHelper.newInstanceOutOfTrx(I_AD_OrgInfo.class));\n\n\t\t\tassertThat(orgInfoRecord).isNotNull();\n\n\t\t\torgInfoRecord.setAD_Org_ID(org.getAD_Org_ID());\n\t\t\torgInfoRecord.setOrg_BPartner_ID(orgBPartner.getC_BPartner_ID());\n\t\t\torgInfoRecord.setOrgBP_Location_ID(orgBPartnerLocation.getC_BPartner_Location_ID());\n\n\t\t\tInterfaceWrapperHelper.saveRecord(orgInfoRecord);\n\n\t\t\tfinal String orgInfoIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_OrgInfo.COLUMNNAME_AD_OrgInfo_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\torgInfoTable.putOrReplace(orgInfoIdentifier, orgInfoRecord);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 66,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org/AD_OrgInfo_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org",
      "filename": "AD_OrgInfo_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1843,
    "annotation": "\n\t@Given(\"metasfresh contains AD_Org:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_Org:\")\n\tpublic void metasfresh_contains_ad_orgs(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, I_AD_Org.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(tableRow, I_AD_Org.COLUMNNAME_Value);\n\n\t\t\tfinal I_AD_Org orgRecord = CoalesceUtil.coalesce(queryBL.createQueryBuilder(I_AD_Org.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_AD_Org.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_AD_Org.class),\n\t\t\t\t\tInterfaceWrapperHelper.newInstanceOutOfTrx(I_AD_Org.class));\n\n\t\t\tAssertions.assertThat(orgRecord).isNotNull();\n\n\t\t\torgRecord.setName(name);\n\t\t\torgRecord.setValue(value);\n\n\t\t\torgDAO.save(orgRecord);\n\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_AD_Org.COLUMNNAME_AD_Org_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\torgTable.putOrReplace(orgIdentifier, orgRecord);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org/AD_Org_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org",
      "filename": "AD_Org_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1844,
    "annotation": "\n\t@And(\"load AD_Org:\")",
    "glue_code": "\t@And(\"load AD_Org:\")\n\tpublic void load_AD_Org(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal String orgCode = row.getAsString(\"Value\");\n\n\t\t\tfinal I_AD_Org orgRecord = queryBL.createQueryBuilder(I_AD_Org.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_AD_Org.COLUMNNAME_Value, orgCode)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_AD_Org.class);\n\n\t\t\tassertThat(orgRecord).as(\"AD_Org for identifier=%S\", orgCode).isNotNull();\n\n\t\t\tfinal StepDefDataIdentifier orgIdentifier = row.getAsIdentifier(\"AD_Org_ID\");\n\n\t\t\ttry (final IAutoCloseable ignored = orgTable.temporaryDisableDuplicatesChecking())\n\t\t\t{\n\t\t\t\torgTable.putOrReplace(orgIdentifier, orgRecord);\n\t\t\t}\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 85,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org/AD_Org_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/org",
      "filename": "AD_Org_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1781,
    "annotation": "\n\t@And(\"metasfresh contains C_Payment\")",
    "glue_code": "\t@And(\"metasfresh contains C_Payment\")\n\tpublic void createPayments(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_C_Payment.COLUMNNAME_C_Payment_ID)\n\t\t\t\t.forEach(this::createPayment);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 119,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment/C_Payment_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment",
      "filename": "C_Payment_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1782,
    "annotation": "\n\t@And(\"^the payment identified by (.*) is (completed|reversed)$\")",
    "glue_code": "\t@And(\"^the payment identified by (.*) is (completed|reversed)$\")\n\tpublic void payment_action(@NonNull final String paymentIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_C_Payment payment = paymentTable.get(paymentIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase reversed:\n\t\t\t\tpayment.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(payment, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t\tbreak;\n\t\t\tcase completed:\n\t\t\t\tpayment.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(payment, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled C_Payment action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 127,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment/C_Payment_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment",
      "filename": "C_Payment_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1783,
    "annotation": "\n\t@And(\"validate payments\")",
    "glue_code": "\t@And(\"validate payments\")\n\tpublic void validateCreatedPayments(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::validateCreatedPayment);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 149,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment/C_Payment_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment",
      "filename": "C_Payment_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1784,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_Payment is found\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_Payment is found\")\n\tpublic void find_C_Payment(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> dataTableRow : rows)\n\t\t{\n\t\t\tfindPayment(timeoutSec, dataTableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 209,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment/C_Payment_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment",
      "filename": "C_Payment_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1785,
    "annotation": "\n\t@Then(\"validate payment api response error message\")",
    "glue_code": "\t@Then(\"validate payment api response error message\")\n\tpublic void validate_payment_api_response_error_message(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String message = DataTableUtil.extractStringForColumnName(row, \"JsonErrorItem.message\");\n\n\t\t\tfinal JsonErrorItem jsonErrorItem = mapper.readValue(testContext.getApiResponse().getContent(), JsonErrorItem.class);\n\t\t\tassertThat(jsonErrorItem.getMessage()).contains(message);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 219,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment/C_Payment_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/payment",
      "filename": "C_Payment_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1803,
    "annotation": "\n\t@And(\"load C_PaymentTerm by id:\")",
    "glue_code": "\t@And(\"load C_PaymentTerm by id:\")\n\tpublic void loadC_PaymentTerm(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal int paymentTermId = DataTableUtil.extractIntForColumnName(row, I_C_PaymentTerm.COLUMNNAME_C_PaymentTerm_ID);\n\n\t\t\tfinal I_C_PaymentTerm paymentTerm = InterfaceWrapperHelper.load(paymentTermId, I_C_PaymentTerm.class);\n\n\t\t\tfinal String paymentTermIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_PaymentTerm.COLUMNNAME_C_PaymentTerm_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tpaymentTermTable.put(paymentTermIdentifier, paymentTerm);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 44,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/paymentterm/C_PaymentTerm_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/paymentterm",
      "filename": "C_PaymentTerm_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1804,
    "annotation": "\n\t@And(\"validate C_PaymentTerm:\")",
    "glue_code": "\t@And(\"validate C_PaymentTerm:\")\n\tpublic void validateC_PaymentTerm(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_C_PaymentTerm.COLUMNNAME_Value);\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_PaymentTerm.COLUMNNAME_Name);\n\n\t\t\tfinal String incotermsIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_PaymentTerm.COLUMNNAME_C_PaymentTerm_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_PaymentTerm paymentTerm = paymentTermTable.get(incotermsIdentifier);\n\n\t\t\tsoftly.assertThat(paymentTerm.getValue()).isEqualTo(value);\n\t\t\tsoftly.assertThat(paymentTerm.getName()).isEqualTo(name);\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/paymentterm/C_PaymentTerm_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/paymentterm",
      "filename": "C_PaymentTerm_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1796,
    "annotation": "\n\t@And(\"metasfresh contains C_Period\")",
    "glue_code": "\t@And(\"metasfresh contains C_Period\")\n\tpublic void createC_Period(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreatePeriod(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/period/C_Period_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/period",
      "filename": "C_Period_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1812,
    "annotation": "\n\t@And(\"validate picking candidate for shipment schedule:\")",
    "glue_code": "\t@And(\"validate picking candidate for shipment schedule:\")\n\tpublic void validate_picking_candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".Identifier\");\n\t\t\tfinal I_M_ShipmentSchedule shipmentSchedule = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\t\tfinal BigDecimal qtyPicked = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_QtyPicked);\n\n\t\t\tfinal String pickStatus = DataTableUtil.extractStringForColumnName(tableRow, I_M_Picking_Candidate.COLUMNNAME_PickStatus);\n\n\t\t\tfinal I_M_Picking_Candidate pickingCandidate = queryBL.createQueryBuilder(I_M_Picking_Candidate.class)\n\t\t\t\t\t.addEqualsFilter(I_M_Picking_Candidate.COLUMNNAME_M_ShipmentSchedule_ID, shipmentSchedule.getM_ShipmentSchedule_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_M_Picking_Candidate.class);\n\n\t\t\tassertThat(pickingCandidate).isNotNull();\n\t\t\tassertThat(pickingCandidate.getQtyPicked()).isEqualTo(qtyPicked);\n\t\t\tassertThat(pickingCandidate.getPickStatus()).isEqualTo(pickStatus);\n\t\t}\n\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 52,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking/M_Picking_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking",
      "filename": "M_Picking_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1845,
    "annotation": "\n\t@And(\"set mobile UI picking profile\")",
    "glue_code": "\t@And(\"set mobile UI picking profile\")\n\tpublic void updateProfile(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal MobileUIPickingUserProfile profile = repo.getProfile();\n\n\t\tfinal PickingJobOptionsBuilder defaultPickingJobOptionsBuilder = profile.getDefaultPickingJobOptions().toBuilder();\n\t\trow.getAsOptionalBoolean(\"IsAllowPickingAnyHU\").ifPresent(defaultPickingJobOptionsBuilder::isAllowPickingAnyHU);\n\t\trow.getAsOptionalString(\"CreateShipmentPolicy\").map(CreateShipmentPolicy::ofCodeOrName).ifPresent(defaultPickingJobOptionsBuilder::createShipmentPolicy);\n\t\trow.getAsOptionalBoolean(I_MobileUI_UserProfile_Picking.COLUMNNAME_IsAlwaysSplitHUsEnabled).ifPresent(defaultPickingJobOptionsBuilder::isAlwaysSplitHUsEnabled);\n\t\trow.getAsOptionalBoolean(I_MobileUI_UserProfile_Picking.COLUMNNAME_IsAllowNewTU).ifPresent(defaultPickingJobOptionsBuilder::isAllowNewTU);\n\t\trow.getAsOptionalBoolean(I_MobileUI_UserProfile_Picking.COLUMNNAME_IsPickingWithNewLU).ifPresent(defaultPickingJobOptionsBuilder::isPickWithNewLU);\n\n\t\tfinal MobileUIPickingUserProfile newProfile = profile.toBuilder()\n\t\t\t\t.defaultPickingJobOptions(defaultPickingJobOptionsBuilder.build())\n\t\t\t\t.build();\n\t\t\n\t\trepo.save(newProfile);\n\t\tlogger.info(\"Profile updated: {}\", newProfile);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 42,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking/MobileUIPickingUserProfile_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking",
      "filename": "MobileUIPickingUserProfile_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1789,
    "annotation": "\n\t@Given(\"metasfresh contains M_PickingSlot:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_PickingSlot:\")\n\tpublic void createPickingSlots(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createPickingSlot);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 34,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking/PickingSlot_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking",
      "filename": "PickingSlot_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1790,
    "annotation": "\n\t@Then(\"^after not more than (.*)s, validate M_PickingSlot:$\")",
    "glue_code": "\t@Then(\"^after not more than (.*)s, validate M_PickingSlot:$\")\n\tpublic void validateAndWaitPickingSlotStep(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tStepDefUtil.tryAndWait(timeoutSec, 1000,\n\t\t\t\t\t\t\t   () -> {\n\t\t\t\t\t\t\t\t   final SoftAssertions softAssertions = checkPickingSlot(dataTable);\n\t\t\t\t\t\t\t\t   return softAssertions.assertionErrorsCollected().isEmpty();\n\t\t\t\t\t\t\t   },\n\t\t\t\t\t\t\t   () -> checkPickingSlot(dataTable).assertAll());\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 40,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking/PickingSlot_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking",
      "filename": "PickingSlot_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1791,
    "annotation": "\n\t@Then(\"validate M_PickingSlot:\")",
    "glue_code": "\t@Then(\"validate M_PickingSlot:\")\n\tpublic void validatePickingSlotStep(@NonNull final DataTable dataTable)\n\t{\n\t\tcheckPickingSlot(dataTable).assertAll();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 51,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking/PickingSlot_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/picking",
      "filename": "PickingSlot_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1800,
    "annotation": "\n\t@Then(\"a new metasfresh AD_PInstance_Log is stored for PInstance id {string}\")",
    "glue_code": "\t@Then(\"a new metasfresh AD_PInstance_Log is stored for PInstance id {string}\")\n\tpublic void new_metasfresh_ad_pinstance_log_is_stored(final String pInstanceIdString)\n\t{\n\t\tfinal PInstanceId pInstanceId = PInstanceId.ofRepoId(Integer.parseInt(pInstanceIdString));\n\t\tfinal List<ProcessInfoLog> processInfoLogs = instanceDAO.retrieveProcessInfoLogs(pInstanceId);\n\n\t\tassertThat(processInfoLogs).isNotNull();\n\t\tassertThat(processInfoLogs.get(0).getP_Msg()).isEqualTo(\"External job finished successfully\");\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pinstance/AD_PInstance_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pinstance",
      "filename": "AD_PInstance_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1801,
    "annotation": "\n\t@Then(\"validate AD_PInstance_Log:\")",
    "glue_code": "\t@Then(\"validate AD_PInstance_Log:\")\n\tpublic void validate_created_pInstanceLog(final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal int pInstanceId = DataTableUtil.extractIntForColumnName(row, I_AD_PInstance_Log.COLUMNNAME_AD_PInstance_ID);\n\t\t\tfinal int recordId = DataTableUtil.extractIntForColumnName(row, I_AD_PInstance_Log.COLUMNNAME_Record_ID);\n\t\t\tfinal String message = DataTableUtil.extractStringForColumnName(row, I_AD_PInstance_Log.COLUMNNAME_P_Msg);\n\n\t\t\tfinal String tableName = DataTableUtil.extractStringForColumnName(row, I_AD_PInstance_Log.COLUMNNAME_AD_Table_ID + \".TableName\");\n\t\t\tfinal int tableId = tableDAO.retrieveTableId(tableName);\n\n\t\t\tfinal List<ProcessInfoLog> processInfoLogs = instanceDAO.retrieveProcessInfoLogs(PInstanceId.ofRepoId(pInstanceId));\n\n\t\t\tassertThat(processInfoLogs).isNotNull();\n\t\t\tassertThat(processInfoLogs.size()).isEqualTo(1);\n\t\t\tassertThat(processInfoLogs.get(0).getP_Msg()).isEqualTo(message);\n\n\t\t\tassertThat(processInfoLogs.get(0).getTableRecordReference()).isNotNull();\n\t\t\tassertThat(processInfoLogs.get(0).getTableRecordReference().getRecord_ID()).isEqualTo(recordId);\n\t\t\tassertThat(processInfoLogs.get(0).getTableRecordReference().getAD_Table_ID()).isEqualTo(tableId);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pinstance/AD_PInstance_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pinstance",
      "filename": "AD_PInstance_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1802,
    "annotation": "\n\t@Given(\"add I_AD_PInstance with id {int}\")",
    "glue_code": "\t@Given(\"add I_AD_PInstance with id {int}\")\n\tpublic void new_PInstanceId_is_created(final int pInstanceId)\n\t{\n\t\tfinal PInstanceId pInstanceIdRepoAware = PInstanceId.ofRepoId(pInstanceId);\n\t\tfinal I_AD_PInstance pInstance = CoalesceUtil.coalesceSuppliersNotNull(() -> InterfaceWrapperHelper.load(pInstanceIdRepoAware, I_AD_PInstance.class),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   () -> InterfaceWrapperHelper.newInstance(I_AD_PInstance.class));\n\n\t\tpInstance.setAD_PInstance_ID(pInstanceIdRepoAware.getRepoId());\n\t\tpInstance.setAD_Process_ID(150); //a valid processId, picked randomly as it doesn't matter for our test\n\t\tpInstance.setRecord_ID(0); //mandatory\n\n\t\tInterfaceWrapperHelper.save(pInstance);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pinstance/AD_PInstance_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pinstance",
      "filename": "AD_PInstance_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1797,
    "annotation": "\n\t@And(\"^store PP_Order endpointPath (.*) in context$\")",
    "glue_code": "\t@And(\"^store PP_Order endpointPath (.*) in context$\")\n\tpublic void store_pp_order_endpointPath_in_context(@NonNull String endpointPath)\n\t{\n\t\tfinal String regex = \".*(:[a-zA-Z]+)/?.*\";\n\n\t\tfinal Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);\n\t\tfinal Matcher matcher = pattern.matcher(endpointPath);\n\n\t\twhile (matcher.find())\n\t\t{\n\t\t\tfinal String ppOrderIdentifierGroup = matcher.group(1);\n\t\t\tfinal String ppOrderIdentifier = ppOrderIdentifierGroup.replace(\":\", \"\");\n\n\t\t\tfinal I_PP_Order ppOrder = ppOrderTable.get(ppOrderIdentifier);\n\t\t\tassertThat(ppOrder).isNotNull();\n\n\t\t\tendpointPath = endpointPath.replace(ppOrderIdentifierGroup, String.valueOf(ppOrder.getPP_Order_ID()));\n\n\t\t\ttestContext.setEndpointPath(endpointPath);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 68,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/ManufacturingOrderRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "ManufacturingOrderRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1798,
    "annotation": "\n\t@And(\"validate retrieve pp_order response:\")",
    "glue_code": "\t@And(\"validate retrieve pp_order response:\")\n\tpublic void validate_retrieve_pp_order_response(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\n\t\tfinal JsonResponseManufacturingOrder ppOrderResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseManufacturingOrder.class);\n\t\tassertThat(ppOrderResponse).isNotNull();\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tvalidatePPOrder(row, ppOrderResponse);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 90,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/ManufacturingOrderRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "ManufacturingOrderRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1810,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_Cost_Collector are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_Cost_Collector are found:$\")\n\tpublic void load_PP_Cost_Collector(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadPPCostCollector(tableRow));\n\n\t\t\tfinal String ppCostCollectorIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_PP_Cost_Collector_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Cost_Collector ppCostCollector = ppCostCollectorTable.get(ppCostCollectorIdentifier);\n\t\t\tassertThat(ppCostCollector).isNotNull();\n\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_MovementQty);\n\t\t\tfinal String status = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_DocStatus);\n\n\t\t\tassertThat(ppCostCollector.getMovementQty()).isEqualTo(movementQty);\n\t\t\tassertThat(ppCostCollector.getDocStatus()).isEqualTo(status);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Cost_Collector_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Cost_Collector_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1811,
    "annotation": "\n\t@And(\"validate I_PP_Cost_Collector\")",
    "glue_code": "\t@And(\"validate I_PP_Cost_Collector\")\n\tpublic void validate_cost_collector(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order order = ppOrderTable.get(orderIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_MovementQty);\n\n\t\t\tfinal String bomLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_PP_Order_BOMLine.COLUMNNAME_PP_Order_BOMLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order_BOMLine bomLine = bomLineIdentifier != null ? bomLineTable.get(bomLineIdentifier) : null;\n\n\t\t\tfinal I_PP_Cost_Collector costCollector = queryBL.createQueryBuilder(I_PP_Cost_Collector.class)\n\t\t\t\t\t.addEqualsFilter(I_PP_Cost_Collector.COLUMNNAME_PP_Order_ID, order.getPP_Order_ID())\n\t\t\t\t\t.addEqualsFilter(I_PP_Order.COLUMNNAME_M_Product_ID, product.getM_Product_ID())\n\t\t\t\t\t.orderBy(I_PP_Cost_Collector.COLUMNNAME_Created)\n\t\t\t\t\t.create()\n\t\t\t\t\t.first();\n\n\t\t\tassertThat(costCollector).isNotNull();\n\t\t\tassertThat(costCollector.isProcessed()).isEqualTo(true);\n\t\t\tassertThat(costCollector.getMovementQty()).isEqualTo(movementQty);\n\t\t\tif (bomLine != null)\n\t\t\t{\n\t\t\t\tassertThat(costCollector.getPP_Order_BOMLine_ID()).isEqualTo(bomLine.getPP_Order_BOMLine_ID());\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 136,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Cost_Collector_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Cost_Collector_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1794,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_OrderCandidate_PP_Order are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_OrderCandidate_PP_Order are found$\")\n\tpublic void validatePP_OrderCandidate_PP_Order(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> StepDefUtil.tryAndWaitForItem(timeoutSec, 500, toPPOrderCandidateQuery(row)));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 62,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_OrderCandidate_PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_OrderCandidate_PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1795,
    "annotation": "\n\t@And(\"^after not more than (.*)s, load PP_Order by candidate id: (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, load PP_Order by candidate id: (.*)$\")\n\tpublic void loadPPOrderByCandidateId(final int timeoutSec, @NonNull final String ppOrderCandidateIdentifier, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal DataTableRows dataTableRows = DataTableRows.of(dataTable);\n\n\t\tfinal I_PP_Order_Candidate ppOrderCandidate = ppOrderCandidateTable.get(ppOrderCandidateIdentifier);\n\t\tassertThat(ppOrderCandidate).as(\"Missing PP_Order_Candidate for identifier %s\", ppOrderCandidateIdentifier).isNotNull();\n\n\t\tfinal ItemProvider<ImmutableList<I_PP_OrderCandidate_PP_Order>> arePPOrdersCreated = () -> {\n\n\t\t\tfinal List<I_PP_OrderCandidate_PP_Order> allocations = queryBL.createQueryBuilder(I_PP_OrderCandidate_PP_Order.class)\n\t\t\t\t\t.addEqualsFilter(I_PP_OrderCandidate_PP_Order.COLUMNNAME_PP_Order_Candidate_ID, ppOrderCandidate.getPP_Order_Candidate_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.list(I_PP_OrderCandidate_PP_Order.class);\n\n\t\t\tfinal boolean allOrdersArePresent = allocations.size() == dataTableRows.size();\n\n\t\t\tfinal StringBuilder allocationsLog = new StringBuilder(\"PP_OrderCandidate_PP_Order records:\").append(\"\\n\");\n\n\t\t\tallocations.forEach(allocation -> allocationsLog.append(\"PP_OrderCandidate_PP_Order.QtyEntered=\").append(allocation.getQtyEntered())\n\t\t\t\t\t.append(\"; PP_OrderCandidate_PP_Order.PP_Order_ID=\").append(allocation.getPP_Order_ID())\n\t\t\t\t\t.append(\"\\n\"));\n\n\t\t\treturn allOrdersArePresent\n\t\t\t\t\t? ItemProvider.ProviderResult.resultWasFound(ImmutableList.copyOf(allocations))\n\t\t\t\t\t: ItemProvider.ProviderResult.resultWasNotFound(\n\t\t\t\t\t\"Only \" + allocations.size() + \" orders found! Expecting \" + dataTableRows.size() + \"\\n\" + allocationsLog\n\t\t\t\t\t\t\t+ \"PP_OrderCandidate.SeqNo=\" + ppOrderCandidate.getSeqNo());\n\t\t};\n\n\t\tfinal Supplier<String> getLogContext = () -> {\n\t\t\tfinal StringBuilder context = new StringBuilder(\"Found the following allocations for PP_Order_Candidate_ID: \")\n\t\t\t\t\t.append(ppOrderCandidate.getPP_Order_Candidate_ID())\n\t\t\t\t\t.append(\" (Identifier=\").append(ppOrderCandidateIdentifier).append(\")\");\n\n\t\t\tqueryBL.createQueryBuilder(I_PP_OrderCandidate_PP_Order.class)\n\t\t\t\t\t.addEqualsFilter(I_PP_OrderCandidate_PP_Order.COLUMN_PP_Order_Candidate_ID, ppOrderCandidate.getPP_Order_Candidate_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.forEach(ppOrderCandAlloc -> {\n\t\t\t\t\t\tcontext.append(\"\\n\\tPP_Order_ID=\").append(ppOrderCandAlloc.getPP_Order_ID());\n\t\t\t\t\t\tcontext.append(\"\\n\\tQtyOrdered=\").append(ppOrderCandAlloc.getQtyEntered());\n\t\t\t\t\t});\n\n\t\t\tcontext.append(\"Found the following PP_Orders for PP_Order_Candidate_ID: \")\n\t\t\t\t\t.append(ppOrderCandidate.getPP_Order_Candidate_ID())\n\t\t\t\t\t.append(\" (Identifier=\").append(ppOrderCandidateIdentifier).append(\")\");\n\n\t\t\tqueryBL.createQueryBuilder(I_PP_Order.class)\n\t\t\t\t\t.addEqualsFilter(I_PP_Order.COLUMNNAME_M_Product_ID, ppOrderCandidate.getM_Product_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.forEach(ppOrder -> {\n\t\t\t\t\t\tcontext.append(\"\\nPP_Order_ID=\").append(ppOrder.getPP_Order_ID());\n\t\t\t\t\t\tcontext.append(\"\\nM_Product_ID=\").append(ppOrder.getM_Product_ID());\n\t\t\t\t\t\tcontext.append(\"\\nQtyEntered=\").append(ppOrder.getQtyEntered());\n\t\t\t\t\t\tcontext.append(\"\\nQtyOrdered=\").append(ppOrder.getQtyOrdered());\n\t\t\t\t\t});\n\n\t\t\treturn context.toString();\n\t\t};\n\n\t\tfinal ImmutableList<I_PP_OrderCandidate_PP_Order> ppOrderAllocations = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, arePPOrdersCreated, getLogContext);\n\n\t\tloadPPOrders(dataTableRows, ppOrderAllocations);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_OrderCandidate_PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_OrderCandidate_PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1825,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_OrderLine_Candidates are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_OrderLine_Candidates are found$\")\n\tpublic void validatePP_Order_candidate(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_PP_OrderLine_Candidate.Table_Name)\n\t\t\t\t.forEach(row -> validatePP_OrderLine_Candidate(timeoutSec, row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_OrderLine_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_OrderLine_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1826,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_Order_Candidates are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_Order_Candidates are found$\")\n\tpublic void validatePP_Order_Candidate(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(\"PP_Order_Candidate_ID\")\n\t\t\t\t.forEach(row -> validatePP_Order_Candidate(timeoutSec, row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 154,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1827,
    "annotation": "\n\t@And(\"update PP_Order_Candidates\")",
    "glue_code": "\t@And(\"update PP_Order_Candidates\")\n\tpublic void updatePPOrderCandidate(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_PP_Order_Candidate_ID)\n\t\t\t\t.forEach(this::updatePPOrderCandidate);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 162,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1828,
    "annotation": "\n\t@And(\"the following PP_Order_Candidates are enqueued for generating PP_Orders\")",
    "glue_code": "\t@And(\"the following PP_Order_Candidates are enqueued for generating PP_Orders\")\n\tpublic void enqueuePP_Order_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tinvokeGeneratePPOrderProcess(null, false, dataTable);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 170,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1829,
    "annotation": "\n\t@And(\"the following PP_Order_Candidates are re-opened\")",
    "glue_code": "\t@And(\"the following PP_Order_Candidates are re-opened\")\n\tpublic void reOpenPP_Order_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> ppOrderCandidateService.reopenCandidate(getPPOrderCandidate(row)));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 176,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1830,
    "annotation": "\n\t@When(\"the following PP_Order_Candidates are closed\")",
    "glue_code": "\t@When(\"the following PP_Order_Candidates are closed\")\n\tpublic void close_PP_Order_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> ppOrderCandidateService.closeCandidate(getPPOrderCandidate(row)));\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 182,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1831,
    "annotation": "\n\t@Then(\"the following PP_Order_Candidates are closed and cannot be re-opened\")",
    "glue_code": "\t@Then(\"the following PP_Order_Candidates are closed and cannot be re-opened\")\n\tpublic void validate_closed_PP_Order_Candidates_cannot_be_reopened(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::validate_closed_PP_Order_Candidate_cannot_be_reopened);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1832,
    "annotation": "\n\t@Given(\"metasfresh contains PP_Order_Candidates\")",
    "glue_code": "\t@Given(\"metasfresh contains PP_Order_Candidates\")\n\tpublic void metasfresh_contains_PP_Order_Candidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tcreatePPOrderCandidate(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 215,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1833,
    "annotation": "\n\t@And(\"validate there is no simulated PP_Order_Candidate\")",
    "glue_code": "\t@And(\"validate there is no simulated PP_Order_Candidate\")\n\tpublic void validate_no_simulated_PP_Order_Candidate()\n\t{\n\t\tfinal int noOfRecords = queryBL.createQueryBuilder(I_PP_Order_Candidate.class)\n\t\t\t\t.addEqualsFilter(I_PP_Order_Candidate.COLUMNNAME_IsSimulated, true)\n\t\t\t\t.create()\n\t\t\t\t.count();\n\n\t\tassertThat(noOfRecords).isZero();\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 225,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1834,
    "annotation": "\n\t@And(\"^no PP_Order_Candidate found for orderLine (.*)$\")",
    "glue_code": "\t@And(\"^no PP_Order_Candidate found for orderLine (.*)$\")\n\tpublic void validate_no_PP_Order_Candidate_found(@NonNull final String orderLineIdentifier)\n\t{\n\t\tfinal OrderLineId orderLineId = getOrderLineIdByIdentifier(orderLineIdentifier);\n\t\tassertThat(orderLineId).isNotNull();\n\n\t\ttry\n\t\t{\n\t\t\tassertThat(getQueryByOrderLineId(orderLineId).count()).isZero();\n\t\t}\n\t\tcatch (final Throwable throwable)\n\t\t{\n\t\t\tlogCurrentContextExpectedNoRecords(orderLineId);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 236,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1835,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_Order_Candidate found for orderLine (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_Order_Candidate found for orderLine (.*)$\")\n\tpublic void validate_PP_Order_Candidate_found_for_OrderLine(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String orderLineIdentifier,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal OrderLineId orderLineId = getOrderLineIdByIdentifier(orderLineIdentifier);\n\t\tassertThat(orderLineId).isNotNull();\n\n\t\tfinal Supplier<Optional<I_PP_Order_Candidate>> ppOrderCandSupplier = () -> Optional.ofNullable(getQueryByOrderLineId(orderLineId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .first());\n\n\t\tfinal I_PP_Order_Candidate ppOrderCandidate = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, ppOrderCandSupplier);\n\n\t\tfinal String ppOrderCandidateIdentifier = DataTableUtil.extractStringForColumnName(tableRow, StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tppOrderCandidateTable.putOrReplace(ppOrderCandidateIdentifier, ppOrderCandidate);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 252,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1836,
    "annotation": "\n\t@And(\"^generate PP_Order process is invoked for selection, with completeDocument=(.*) and autoProcessCandidateAfterProduction=(.*)$\")",
    "glue_code": "\t@And(\"^generate PP_Order process is invoked for selection, with completeDocument=(.*) and autoProcessCandidateAfterProduction=(.*)$\")\n\tpublic void invokeGeneratePPOrderProcess(\n\t\t\t@Nullable final Boolean isDocComplete,\n\t\t\tfinal boolean autoProcessCandidate,\n\t\t\t@NonNull final DataTable table)\n\t{\n\t\tfinal PInstanceId selectionId = ppOrderCandidateEnqueuer.createSelection(getPPOrderCandidateIds(table));\n\t\tfinal PPOrderCandidateEnqueuer.Result result = ppOrderCandidateEnqueuer.enqueueSelection(\n\t\t\t\tEnqueuePPOrderCandidateRequest.builder()\n\t\t\t\t\t\t.adPInstanceId(selectionId)\n\t\t\t\t\t\t.ctx(Env.getCtx())\n\t\t\t\t\t\t.isCompleteDocOverride(isDocComplete)\n\t\t\t\t\t\t.autoProcessCandidatesAfterProduction(autoProcessCandidate)\n\t\t\t\t\t\t.build()\n\t\t);\n\n\t\tassertThat(result.getEnqueuedPackagesCount()).isOne();\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 272,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1837,
    "annotation": "\n\t@And(\"after not more than {int}s, no PP_Order_Candidates are found for Issue_HU_ID: {string}\")",
    "glue_code": "\t@And(\"after not more than {int}s, no PP_Order_Candidates are found for Issue_HU_ID: {string}\")\n\tpublic void validatePP_Order_Candidate(\n\t\t\tfinal int timeoutSec,\n\t\t\tfinal String issueHuIdentifier) throws InterruptedException\n\t{\n\t\tfinal HuId huId = huTable.getId(issueHuIdentifier);\n\n\t\tfinal IQuery<I_PP_Order_Candidate> query = queryBL.createQueryBuilder(I_PP_Order_Candidate.class)\n\t\t\t\t.addEqualsFilter(I_PP_Order_Candidate.COLUMNNAME_Issue_HU_ID, huId)\n\t\t\t\t.create();\n\n\t\tStepDefUtil.tryAndWaitForItem()\n\t\t\t\t.workerFromBooleanSupplier(query::noneMatch)\n\t\t\t\t.logContextUsingRunnable(null)\n\t\t\t\t.maxWaitSeconds(timeoutSec)\n\t\t\t\t.execute();\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 616,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Candidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Candidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1807,
    "annotation": "\n\t@And(\"select M_HU to be issued for productionOrder\")",
    "glue_code": "\t@And(\"select M_HU to be issued for productionOrder\")\n\tpublic void preselect_hu_to_be_issued(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\n\t\t\tfinal String bomLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_PP_Order_BOMLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order_BOMLine bomLine = ppOrderBOMLineTable.get(bomLineIdentifier);\n\n\t\t\tfinal ZonedDateTime movementDate = DataTableUtil.extractZonedDateTimeOrNullForColumnName(row, \"OPT.\" + I_PP_Order_Qty.COLUMNNAME_MovementDate);\n\n\t\t\tfinal List<I_PP_Order_Qty> ppOrderQties = CreateDraftIssuesCommand.builder()\n\t\t\t\t\t.targetOrderBOMLines(ImmutableList.of(bomLine))\n\t\t\t\t\t.movementDate(movementDate)\n\t\t\t\t\t.issueFromHUs(ImmutableList.of(hu))\n\t\t\t\t\t.changeHUStatusToIssued(true)\n\t\t\t\t\t.build()\n\t\t\t\t\t.execute();\n\n\t\t\tfinal String ppOrderQtyIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_PP_Order_Qty_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tppOrderQtyTable.putOrReplace(ppOrderQtyIdentifier, ppOrderQties.get(0));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Qty_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Qty_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1808,
    "annotation": "\n\t@And(\"validate PP_Order_Qty records\")",
    "glue_code": "\t@And(\"validate PP_Order_Qty records\")\n\tpublic void validate_pp_order_qty_records(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String ppOrderQtyIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_PP_Order_Qty_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order_Qty ppOrderQty = ppOrderQtyTable.get(ppOrderQtyIdentifier);\n\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal String bomLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order_Qty.COLUMNNAME_PP_Order_BOMLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order_BOMLine bomLine = ppOrderBOMLineTable.get(bomLineIdentifier);\n\n\t\t\tfinal boolean processed = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_PP_Order_Qty.COLUMNNAME_Processed, false);\n\n\t\t\tassertThat(ppOrderQty).isNotNull();\n\t\t\tassertThat(ppOrderQty.getM_HU_ID()).isEqualTo(hu.getM_HU_ID());\n\t\t\tassertThat(ppOrderQty.getM_Product_ID()).isEqualTo(product.getM_Product_ID());\n\t\t\tassertThat(ppOrderQty.getPP_Order_BOMLine_ID()).isEqualTo(bomLine.getPP_Order_BOMLine_ID());\n\t\t\tassertThat(ppOrderQty.isProcessed()).isEqualTo(processed);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 90,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_Qty_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_Qty_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1813,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_Orders are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_Orders are found$\")\n\tpublic void validatePP_Order_Candidate(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> validatePP_Order(timeoutSec, row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 180,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1814,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_Order_BomLines are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_Order_BomLines are found$\")\n\tpublic void validatePP_Order_BomLine(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> validatePP_Order_BomLine(timeoutSec, row));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1815,
    "annotation": "\n\t@And(\"create PP_Order:\")",
    "glue_code": "\t@And(\"create PP_Order:\")\n\tpublic void compute_PPOrderCreateRequest_to_create_pp_order(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String ppOrderDocBaseType = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_DocBaseType);\n\t\t\tfinal PPOrderDocBaseType docBaseType = PPOrderDocBaseType.ofCode(ppOrderDocBaseType);\n\n\t\t\tfinal ClientAndOrgId clientAndOrgId = ClientAndOrgId.ofClientAndOrg(Env.getClientId(), Env.getOrgId());\n\n\t\t\tfinal String resourceIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_S_Resource.COLUMNNAME_S_Resource_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_S_Resource testResource = resourceTable.get(resourceIdentifier);\n\t\t\tassertThat(testResource).isNotNull();\n\t\t\tfinal ResourceId resourceId = ResourceId.ofRepoId(testResource.getS_Resource_ID());\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_Product.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).isNotNull();\n\t\t\tfinal ProductId productId = ProductId.ofRepoId(product.getM_Product_ID());\n\n\t\t\tfinal int enteredQuantity = DataTableUtil.extractIntForColumnName(tableRow, I_PP_Order.COLUMNNAME_QtyEntered);\n\t\t\tfinal I_C_UOM uom = uomDAO.getEachUOM();\n\t\t\tfinal Quantity quantity = Quantity.of(enteredQuantity, uom);\n\n\t\t\tfinal Instant dateOrdered = DataTableUtil.extractInstantForColumnName(tableRow, I_PP_Order.COLUMNNAME_DateOrdered);\n\t\t\tfinal Instant datePromised = DataTableUtil.extractInstantForColumnName(tableRow, I_PP_Order.COLUMNNAME_DatePromised);\n\t\t\tfinal Instant dateStartSchedule = DataTableUtil.extractInstantForColumnName(tableRow, I_PP_Order.COLUMNNAME_DateStartSchedule);\n\n\t\t\tfinal Boolean completeDocument = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"completeDocument\", false);\n\n\t\t\tfinal String productPlanningIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_PP_Order.COLUMNNAME_PP_Product_Planning_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_PP_Order.COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal WarehouseId warehouseId;\n\t\t\tif (Check.isNotBlank(warehouseIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Warehouse warehouseRecord = warehouseTable.get(warehouseIdentifier);\n\t\t\t\twarehouseId = WarehouseId.ofRepoId(warehouseRecord.getM_Warehouse_ID());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twarehouseId = StepDefConstants.WAREHOUSE_ID;\n\t\t\t}\n\n\t\t\tfinal PPOrderCreateRequest.PPOrderCreateRequestBuilder ppOrderCreateRequest = PPOrderCreateRequest.builder()\n\t\t\t\t\t.docBaseType(docBaseType)\n\t\t\t\t\t.clientAndOrgId(clientAndOrgId)\n\t\t\t\t\t.plantId(resourceId)\n\t\t\t\t\t.warehouseId(warehouseId)\n\t\t\t\t\t.productId(productId)\n\t\t\t\t\t.qtyRequired(quantity)\n\t\t\t\t\t.dateOrdered(dateOrdered)\n\t\t\t\t\t.datePromised(datePromised)\n\t\t\t\t\t.dateStartSchedule(dateStartSchedule)\n\t\t\t\t\t.completeDocument(completeDocument);\n\n\t\t\tif (Check.isNotBlank(productPlanningIdentifier))\n\t\t\t{\n\t\t\t\tfinal ProductPlanning productPlanning = productPlanningTable.get(productPlanningIdentifier);\n\t\t\t\tppOrderCreateRequest.productPlanningId(productPlanning.getIdNotNull());\n\t\t\t}\n\n\t\t\tfinal I_PP_Order ppOrder = ppOrderService.createOrder(ppOrderCreateRequest.build());\n\t\t\tassertThat(ppOrder).isNotNull();\n\n\t\t\tfinal String modularContractIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_PP_Order.COLUMNNAME_Modular_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(modularContractIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Flatrate_Term modularContract = contractTable.get(modularContractIdentifier);\n\t\t\t\tppOrder.setModular_Flatrate_Term_ID(modularContract.getC_Flatrate_Term_ID());\n\t\t\t\tsaveRecord(ppOrder);\n\t\t\t}\n\n\t\t\tfinal String ppOrderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tppOrderTable.put(ppOrderIdentifier, ppOrder);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 194,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1816,
    "annotation": "\n\t@And(\"complete planning for PP_Order:\")",
    "glue_code": "\t@And(\"complete planning for PP_Order:\")\n\tpublic void process_pp_order(@NonNull final DataTable dataTable) throws Exception\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String ppOrderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order ppOrder = ppOrderTable.get(ppOrderIdentifier);\n\n\t\t\tfinal String errorMessage = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.ErrorMessage\");\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\ttrxManager.runInThreadInheritedTrx(() -> huPPOrderBL.processPlanning(PPOrderId.ofRepoId(ppOrder.getPP_Order_ID()), PPOrderPlanningStatus.COMPLETE));\n\n\t\t\t\tassertThat(errorMessage).as(\"ErrorMessage should be null if huPPOrderBL.processPlanning() finished with no error!\").isNull();\n\t\t\t}\n\t\t\tcatch (final Exception e)\n\t\t\t{\n\t\t\t\tStepDefUtil.validateErrorMessage(e, errorMessage);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 273,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1817,
    "annotation": "\n\t@And(\"update PP_Order:\")",
    "glue_code": "\t@And(\"update PP_Order:\")\n\tpublic void update_PP_Order(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tupdatePPOrder(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 296,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1818,
    "annotation": "\n\t@And(\"^validate that after not more than (.*)s, PP_Orders are created for PP_Order_Candidate in the following order:$\")",
    "glue_code": "\t@And(\"^validate that after not more than (.*)s, PP_Orders are created for PP_Order_Candidate in the following order:$\")\n\tpublic void validate_PP_Orders_created_in_the_following_order(final int timeoutSec, @NonNull final DataTable dataTable0) throws InterruptedException\n\t{\n\t\tfinal DataTableRows dataTableRows = DataTableRows.of(dataTable0);\n\t\tfinal Map<String, ArrayList<String>> ppOrderCandidate2PPOrderIdsOrdered = getPPOrderCandIdentifier2PPOrderIdentifiers(dataTableRows);\n\n\t\tlocateAndLoadPPOrders(timeoutSec, ppOrderCandidate2PPOrderIdsOrdered);\n\n\t\tfinal List<Integer> ppOrderIdsAsListedInFeatureFile = dataTableRows\n\t\t\t\t.stream()\n\t\t\t\t.map(row -> {\n\t\t\t\t\tfinal StepDefDataIdentifier ppOrderIdentifier = row.getAsIdentifier(I_PP_Order.COLUMNNAME_PP_Order_ID);\n\t\t\t\t\treturn ppOrderTable.get(ppOrderIdentifier).getPP_Order_ID();\n\t\t\t\t})\n\t\t\t\t.collect(ImmutableList.toImmutableList());\n\n\t\tassertThat(Ordering.<Integer>natural().isOrdered(ppOrderIdsAsListedInFeatureFile)).isTrue();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 306,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1819,
    "annotation": "\n\t@And(\"export PP_Order to LeichMehl external system\")",
    "glue_code": "\t@And(\"export PP_Order to LeichMehl external system\")\n\tpublic void export_PP_Order_LeichMehl(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String ppOrderIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_PP_Order ppOrder = ppOrderTable.get(ppOrderIdentifier);\n\t\tfinal TableRecordReference ppOrderRecordReference = TableRecordReference.of(ppOrder);\n\n\t\tfinal String leichMehlConfigIdentifier = DataTableUtil.extractStringForColumnName(row, I_ExternalSystem_Config_LeichMehl.COLUMNNAME_ExternalSystem_Config_LeichMehl_ID\n\t\t\t\t+ \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_ExternalSystem_Config_LeichMehl leichMehlConfig = leichMehlConfigTable.get(leichMehlConfigIdentifier);\n\t\tfinal ExternalSystemLeichMehlConfigId leichMehlConfigId = ExternalSystemLeichMehlConfigId.ofRepoId(leichMehlConfig.getExternalSystem_Config_LeichMehl_ID());\n\n\t\texportPPOrderToExternalSystem.exportToExternalSystem(leichMehlConfigId, ppOrderRecordReference, pinstanceDAO.createSelectionId());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 325,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1821,
    "annotation": "\n\t@And(\"export PP_Order to LeichMehl external system and expect MissingPLUConfigForProduct exception\")",
    "glue_code": "\t@And(\"export PP_Order to LeichMehl external system and expect MissingPLUConfigForProduct exception\")\n\tpublic void export_PP_Order_LeichMehl_expect_exception(@NonNull final DataTable dataTable)\n\t{\n\t\ttry\n\t\t{\n\t\t\texport_PP_Order_LeichMehl(dataTable);\n\n\t\t\tassertThat(false).as(\"ExportPPOrderToLeichMehlService.buildParameters should throw error!\").isTrue();\n\t\t}\n\t\tcatch (final AdempiereException adempiereException)\n\t\t{\n\t\t\tfinal String adLanguage = Env.getAD_Language();\n\t\t\t\n\t\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\t\t\tfinal String ppOrderIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order ppOrder = ppOrderTable.get(ppOrderIdentifier);\n\t\t\tfinal String productName = productBL.getProductName(ProductId.ofRepoId(ppOrder.getM_Product_ID()));\n\t\t\t\n\t\t\tfinal ITranslatableString message = msgBL.getTranslatableMsgText(MISSING_PRODUCT_PLU_CONFIG, productName);\n\n\t\t\tassertThat(adempiereException.getMessage()).contains(message.translate(adLanguage));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 342,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1822,
    "annotation": "\n\t@And(\"validate I_PP_Order_Qty\")",
    "glue_code": "\t@And(\"validate I_PP_Order_Qty\")\n\tpublic void validate_order_qty(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_PP_Order_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order order = ppOrderTable.get(orderIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_PP_Order.COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_PP_Order_Qty.COLUMNNAME_Qty);\n\n\t\t\tfinal String bomLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_PP_Order_BOMLine.COLUMNNAME_PP_Order_BOMLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_PP_Order_BOMLine bomLine = bomLineIdentifier != null ? ppOrderBomLineTable.get(bomLineIdentifier) : null;\n\n\t\t\tfinal I_PP_Order_Qty orderQty = queryBL.createQueryBuilder(I_PP_Order_Qty.class)\n\t\t\t\t\t.addEqualsFilter(I_PP_Order_Qty.COLUMNNAME_PP_Order_ID, order.getPP_Order_ID())\n\t\t\t\t\t.addEqualsFilter(I_PP_Order_Qty.COLUMNNAME_M_Product_ID, product.getM_Product_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_PP_Order_Qty.class);\n\n\t\t\tassertThat(orderQty).isNotNull();\n\t\t\tassertThat(orderQty.getQty()).isEqualTo(movementQty);\n\t\t\tif (bomLine != null)\n\t\t\t{\n\t\t\t\tassertThat(orderQty.getPP_Order_BOMLine_ID()).isEqualTo(bomLine.getPP_Order_BOMLine_ID());\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 366,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1823,
    "annotation": "\n\t@And(\"^the manufacturing order identified by (.*) is (reactivated|completed)$\")",
    "glue_code": "\t@And(\"^the manufacturing order identified by (.*) is (reactivated|completed)$\")\n\tpublic void order_action(\n\t\t\t@NonNull final String orderIdentifier,\n\t\t\t@NonNull final String action)\n\t{\n\t\tfinal I_PP_Order orderRecord = ppOrderTable.get(orderIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase reactivated:\n\t\t\t\torderRecord.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(orderRecord, IDocument.ACTION_ReActivate, IDocument.STATUS_InProgress);\n\t\t\t\tbreak;\n\t\t\tcase completed:\n\t\t\t\torderRecord.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(orderRecord, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled PP_Order action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 398,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1824,
    "annotation": "\n\t@And(\"load manufactured HU for PP_Order:\")",
    "glue_code": "\t@And(\"load manufactured HU for PP_Order:\")\n\tpublic void loadManufacturedHUs(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::loadManufacturedHu);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 642,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/PP_Order_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "PP_Order_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1799,
    "annotation": "\n\t@And(\"^validate no M_HUs available to be issued for bomLine identified by (.*)$\")",
    "glue_code": "\t@And(\"^validate no M_HUs available to be issued for bomLine identified by (.*)$\")\n\tpublic void validate_no_hu_available_to_issue(@NonNull final String bomLineIdentifier)\n\t{\n\t\tfinal org.eevolution.model.I_PP_Order_BOMLine bomLine = ppOrderBOMLineTable.get(bomLineIdentifier);\n\n\t\tfinal List<HuId> availableHUs = huPPOrderBL.retrieveAvailableToIssue(bomLine);\n\n\t\tassertThat(availableHUs.size()).isEqualTo(0);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/ProductionIssue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder",
      "filename": "ProductionIssue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1805,
    "annotation": "\n\t@Given(\"metasfresh contains M_Maturing_Configurations\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Maturing_Configurations\")\n\tpublic void createMaturingConfigurations(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Maturing_Configuration.COLUMNNAME_M_Maturing_Configuration_ID)\n\t\t\t\t.forEach(this::createUpdateMaturingConfigurationRow);\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/maturing/M_Maturing_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/maturing",
      "filename": "M_Maturing_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1806,
    "annotation": "\n\t@Given(\"metasfresh contains M_Maturing_Configuration_Lines\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Maturing_Configuration_Lines\")\n\tpublic void createMaturingConfigurationLines(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Maturing_Configuration_Line.COLUMNNAME_M_Maturing_Configuration_Line_ID)\n\t\t\t\t.forEach(this::createUpdateMaturingConfigurationLineRow);\n\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/maturing/M_Maturing_Configuration_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pporder/maturing",
      "filename": "M_Maturing_Configuration_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1809,
    "annotation": "\n\t@And(\"metasfresh contains C_CampaignPrices\")",
    "glue_code": "\t@And(\"metasfresh contains C_CampaignPrices\")\n\tpublic void add_C_CampaignPrice(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateC_CampaignPrice(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/C_CampaignPrice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "C_CampaignPrice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1897,
    "annotation": "\n\t@And(\"metasfresh contains C_UOM_Conversions\")",
    "glue_code": "\t@And(\"metasfresh contains C_UOM_Conversions\")\n\tpublic void add_C_UOM_Conversions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreate_C_UOM_Conversions(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/C_UOM_Conversion_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "C_UOM_Conversion_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1898,
    "annotation": "\n\t@And(\"update C_UOM_Conversion:\")",
    "glue_code": "\t@And(\"update C_UOM_Conversion:\")\n\tpublic void update_C_UOM_Conversions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdate_C_UOM_Conversions(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/C_UOM_Conversion_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "C_UOM_Conversion_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1899,
    "annotation": "\n\t@And(\"inactivate C_UOM_Conversion:\")",
    "glue_code": "\t@And(\"inactivate C_UOM_Conversion:\")\n\tpublic void inactivate_C_UOM_Conversions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tinactivate_C_UOM_Conversions(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/C_UOM_Conversion_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "C_UOM_Conversion_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1900,
    "annotation": "\n\t@And(\"validate C_UOM_Conversion:\")",
    "glue_code": "\t@And(\"validate C_UOM_Conversion:\")\n\tpublic void validate_C_UOM_Conversions(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidate_C_UOM_Conversions(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 101,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/C_UOM_Conversion_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "C_UOM_Conversion_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1870,
    "annotation": "\n\t@And(\"metasfresh contains M_PricingSystems\")",
    "glue_code": "\t@And(\"metasfresh contains M_PricingSystems\")\n\tpublic void add_M_PricingSystem(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createM_PricingSystem);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 113,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_PriceList_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_PriceList_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1871,
    "annotation": "\n\t@And(\"metasfresh contains M_PriceLists\")",
    "glue_code": "\t@And(\"metasfresh contains M_PriceLists\")\n\tpublic void add_M_PriceList(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createM_PriceList);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 119,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_PriceList_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_PriceList_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1872,
    "annotation": "\n\t@And(\"metasfresh contains M_PriceList_Versions\")",
    "glue_code": "\t@And(\"metasfresh contains M_PriceList_Versions\")\n\tpublic void add_M_PriceListVersion(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createM_PriceList_Version);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 219,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_PriceList_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_PriceList_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1873,
    "annotation": "\n\t@And(\"metasfresh contains M_ProductPrices\")",
    "glue_code": "\t@And(\"metasfresh contains M_ProductPrices\")\n\tpublic void add_M_ProductPrice(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createM_ProductPrice);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 250,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_PriceList_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_PriceList_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1874,
    "annotation": "\n\t@And(\"update metasfresh masterdata M_ProductPrice\")",
    "glue_code": "\t@And(\"update metasfresh masterdata M_ProductPrice\")\n\tpublic void update_masterdata_M_ProductPrice(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateMasterDataM_ProductPrice(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 256,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_PriceList_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_PriceList_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1875,
    "annotation": "\n\t@And(\"update M_ProductPrice:\")",
    "glue_code": "\t@And(\"update M_ProductPrice:\")\n\tpublic void update_M_ProductPrice(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps();\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String productPriceIdentifier = DataTableUtil.extractRecordIdentifier(tableRow, I_M_ProductPrice.COLUMNNAME_M_ProductPrice_ID, \"M_ProductPrice\");\n\t\t\tfinal Integer productPriceID = productPriceTable.getOptional(productPriceIdentifier)\n\t\t\t\t\t.map(I_M_ProductPrice::getM_ProductPrice_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productPriceIdentifier));\n\n\t\t\tassertThat(productPriceID).isNotNull();\n\n\t\t\tfinal I_M_ProductPrice productPrice = InterfaceWrapperHelper.load(productPriceID, I_M_ProductPrice.class);\n\n\t\t\tfinal BigDecimal priceStd = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, \"OPT.\" + I_M_ProductPrice.COLUMNNAME_PriceStd);\n\t\t\tif (priceStd != null)\n\t\t\t{\n\t\t\t\tproductPrice.setPriceStd(priceStd);\n\t\t\t}\n\n\t\t\tfinal String x12de355Code = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_UOM.COLUMNNAME_C_UOM_ID + \".\" + X12DE355.class.getSimpleName());\n\t\t\tif (Check.isNotBlank(x12de355Code))\n\t\t\t{\n\t\t\t\tfinal UomId productPriceUomId = uomDAO.getUomIdByX12DE355(X12DE355.ofCode(x12de355Code));\n\t\t\t\tproductPrice.setC_UOM_ID(productPriceUomId.getRepoId());\n\t\t\t}\n\t\t\tfinal Boolean isActive = DataTableUtil.extractBooleanForColumnNameOrNull(tableRow, \"OPT.\" + I_C_UOM.COLUMNNAME_IsActive);\n\t\t\tif (isActive != null)\n\t\t\t{\n\t\t\t\tproductPrice.setIsActive(isActive);\n\t\t\t}\n\t\t\tfinal String invoicableQtyBasedOn = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_M_ProductPrice.COLUMNNAME_InvoicableQtyBasedOn);\n\t\t\tif (Check.isNotBlank(invoicableQtyBasedOn))\n\t\t\t{\n\t\t\t\tproductPrice.setInvoicableQtyBasedOn(invoicableQtyBasedOn);\n\t\t\t}\n\n\t\t\tsaveRecord(productPrice);\n\n\t\t\tproductPriceTable.putOrReplace(productPriceIdentifier, productPrice);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 280,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_PriceList_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_PriceList_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1890,
    "annotation": "\n\t@And(\"metasfresh contains M_ProductScalePrices:\")",
    "glue_code": "\t@And(\"metasfresh contains M_ProductScalePrices:\")\n\tpublic void metasfresh_contains_m_product_scale_price(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateM_ProductScalePrice(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_ProductScalePrice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_ProductScalePrice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1918,
    "annotation": "\n\t@Given(\"metasfresh contains M_Product_TaxCategory:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Product_TaxCategory:\")\n\tpublic void metasfresh_contains_m_product_taxCategory(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateM_Product_TaxCategory(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/M_Product_TaxCategory_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "M_Product_TaxCategory_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1904,
    "annotation": "\n\t@When(\"update prices for order line\")",
    "glue_code": "\t@When(\"update prices for order line\")\n\tpublic void update_order_line_scale_prices(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_OrderLine.COLUMNNAME_C_OrderLine_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\n\t\t\tfinal OrderLinePriceUpdateRequest request = OrderLinePriceUpdateRequest.ofOrderLine(orderLine);\n\n\t\t\tOrderLinePriceCalculatorTest.builder()\n\t\t\t\t\t.request(request)\n\t\t\t\t\t.orderLineBL(orderLineBL)\n\t\t\t\t\t.build()\n\t\t\t\t\t.updateOrderLine();\n\n\t\t\tInterfaceWrapperHelper.refresh(orderLine);\n\n\t\t\torderLineTable.putOrReplace(orderLineIdentifier, orderLine);\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/OrderLineCalculator_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "OrderLineCalculator_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1901,
    "annotation": "\n\t@And(\"validate JsonResponseProductPriceQuery.JsonPriceListResponse\")",
    "glue_code": "\t@And(\"validate JsonResponseProductPriceQuery.JsonPriceListResponse\")\n\tpublic void validate_JsonResponseProductPriceQuery(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonResponseProductPriceQuery jsonResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseProductPriceQuery.class);\n\t\tassertThat(jsonResponse).isNotNull();\n\n\t\tfinal List<JsonPriceListResponse> jsonResponsePriceList = jsonResponse.getPriceList();\n\t\tassertThat(jsonResponsePriceList.size()).isGreaterThan(0);\n\n\t\tfinal List<Map<String, String>> expectedTableList = dataTable.asMaps();\n\t\tfor (int index = 0; index < expectedTableList.size(); index++)\n\t\t{\n\t\t\tfinal JsonPriceListResponse actualPriceList = jsonResponsePriceList.get(index);\n\t\t\tfinal Map<String, String> expectedPriceList = expectedTableList.get(index);\n\n\t\t\tvalidateJsonResponsePriceList(expectedPriceList, actualPriceList);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 80,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/PricesRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "PricesRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1902,
    "annotation": "\n\t@And(\"validate JsonResponseProductPriceQuery.JsonPriceListResponse.JsonPriceListVersionResponse\")",
    "glue_code": "\t@And(\"validate JsonResponseProductPriceQuery.JsonPriceListResponse.JsonPriceListVersionResponse\")\n\tpublic void validateJsonPriceListVersionResponse(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonResponseProductPriceQuery jsonResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseProductPriceQuery.class);\n\t\tassertThat(jsonResponse).isNotNull();\n\t\tfinal List<JsonPriceListResponse> jsonResponsePriceList = jsonResponse.getPriceList();\n\n\t\tfinal List<Map<String, String>> expectedTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> expectedRow : expectedTableList)\n\t\t{\n\t\t\tfinal String priceListIdentifier = DataTableUtil.extractStringForColumnName(expectedRow, I_M_PriceList.COLUMNNAME_M_PriceList_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_PriceList priceList = priceListTable.get(priceListIdentifier);\n\n\t\t\tfinal JsonPriceListResponse actualPriceList = jsonResponsePriceList.stream()\n\t\t\t\t\t.filter(jsonResponsePL -> jsonResponsePL.getMetasfreshId().getValue() == priceList.getM_PriceList_ID())\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No price list found for id\")\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"M_PriceList_ID\", priceList.getM_PriceList_ID()));\n\n\t\t\tfinal Timestamp validFrom = DataTableUtil.extractDateTimestampForColumnName(expectedRow, JsonPriceListVersionResponse.class.getSimpleName() + \".\" + I_M_PriceList_Version.COLUMNNAME_ValidFrom);\n\n\t\t\tfinal JsonPriceListVersionResponse jsonResponsePriceListVersion = actualPriceList.getPriceListVersions()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.filter(jsonResponsePLV -> jsonResponsePLV.getValidFrom().equals(validFrom.toInstant()))\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No M_PriceList_Version for validFrom\")\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"validFrom\", validFrom));\n\n\t\t\tvalidateJsonResponsePriceListVersion(expectedRow, jsonResponsePriceListVersion);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 99,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/PricesRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "PricesRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1903,
    "annotation": "\n\t@And(\"validate JsonResponseProductPriceQuery.JsonPriceListResponse.JsonPriceListVersionResponse.JsonResponsePrice\")",
    "glue_code": "\t@And(\"validate JsonResponseProductPriceQuery.JsonPriceListResponse.JsonPriceListVersionResponse.JsonResponsePrice\")\n\tpublic void validateJsonResponsePrice(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonResponseProductPriceQuery jsonResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseProductPriceQuery.class);\n\t\tassertThat(jsonResponse).isNotNull();\n\t\tfinal List<JsonPriceListResponse> jsonResponsePriceList = jsonResponse.getPriceList();\n\n\t\tfinal List<Map<String, String>> expectedTableList = dataTable.asMaps();\n\t\tfor (final Map<String, String> expectedRow : expectedTableList)\n\t\t{\n\t\t\tfinal String priceListIdentifier = DataTableUtil.extractStringForColumnName(expectedRow, I_M_PriceList.COLUMNNAME_M_PriceList_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_PriceList priceList = priceListTable.get(priceListIdentifier);\n\n\t\t\tfinal JsonPriceListResponse actualPriceList = jsonResponsePriceList.stream()\n\t\t\t\t\t.filter(jsonResponsePL -> jsonResponsePL.getMetasfreshId().getValue() == priceList.getM_PriceList_ID())\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No price list found for id\")\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"M_PriceList_ID\", priceList.getM_PriceList_ID()));\n\n\t\t\tfinal String priceListVersionIdentifier = DataTableUtil.extractStringForColumnName(expectedRow, I_M_PriceList_Version.COLUMNNAME_M_PriceList_Version_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_PriceList_Version priceListVersion = priceListVersionTable.get(priceListVersionIdentifier);\n\n\t\t\tfinal JsonPriceListVersionResponse jsonResponsePriceListVersion = actualPriceList.getPriceListVersions()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.filter(jsonResponsePLV -> jsonResponsePLV.getMetasfreshId().getValue() == priceListVersion.getM_PriceList_Version_ID())\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No M_PriceList_Version for M_PriceList_Version_ID\")\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"M_PriceList_Version_ID\", priceListVersion.getM_PriceList_Version_ID()));\n\n\t\t\tfinal String productCode = DataTableUtil.extractStringForColumnName(expectedRow, JsonResponsePrice.class.getSimpleName() + \".\" + I_M_Product.COLUMNNAME_Value);\n\t\t\tfinal BigDecimal priceStd = DataTableUtil.extractBigDecimalForColumnName(expectedRow, JsonResponsePrice.class.getSimpleName() + \".\" + I_M_ProductPrice.COLUMNNAME_PriceStd);\n\n\t\t\tfinal JsonResponsePrice jsonResponsePrice = jsonResponsePriceListVersion.getJsonResponsePrices()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.filter(jsonPrice -> jsonPrice.getPrice().equals(priceStd) && jsonPrice.getProductCode().equals(productCode))\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No M_PriceList_Version for M_PriceList_Version_ID\")\n\t\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t\t.setParameter(\"M_PriceList_Version_ID\", priceListVersion.getM_PriceList_Version_ID()));\n\n\t\t\tvalidateJsonResponsePrice(expectedRow, jsonResponsePrice);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 133,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/PricesRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "PricesRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1891,
    "annotation": "\n\t@When(\"the user adds price list version data\")",
    "glue_code": "\t@When(\"the user adds price list version data\")\n\tpublic void userAddsPriceListVersion(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal ImmutableList.Builder<JsonRequestPriceListVersionUpsertItem> requestItems = ImmutableList.builder();\n\t\tfinal List<Map<String, String>> priceListVersion = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : priceListVersion)\n\t\t{\n\t\t\trequestItems.add(mapPriceListVersionRequest(row));\n\t\t}\n\n\t\tjsonRequestPriceListVersionUpsert.requestItems(requestItems.build());\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 95,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/UpsertPricingAPI_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "UpsertPricingAPI_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1892,
    "annotation": "\n\t@And(\"the user adds product prices data\")",
    "glue_code": "\t@And(\"the user adds product prices data\")\n\tpublic void userAddsProductPrices(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal ImmutableList.Builder<JsonRequestProductPriceUpsertItem> requestItems = ImmutableList.builder();\n\n\t\tfinal List<Map<String, String>> priceListVersion = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : priceListVersion)\n\t\t{\n\t\t\trequestItems.add(mapProductPricesRequest(row));\n\t\t}\n\t\tjsonRequestProductPriceUpsert.requestItems(requestItems.build());\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 108,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/UpsertPricingAPI_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "UpsertPricingAPI_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1893,
    "annotation": "\n\t@And(\"we create a JsonRequestPriceListVersionUpsert, set syncAdvise to {string} and store request payload it in the test context\")",
    "glue_code": "\t@And(\"we create a JsonRequestPriceListVersionUpsert, set syncAdvise to {string} and store request payload it in the test context\")\n\tpublic void userAddsSyncAdvisePriceListVersion(@NonNull final String string) throws com.fasterxml.jackson.core.JsonProcessingException\n\t{\n\t\tfinal SyncAdvise syncAdvise = RESTUtil.mapSyncAdvise(string);\n\n\t\tjsonRequestPriceListVersionUpsert.syncAdvise(syncAdvise);\n\t\tnew com.fasterxml.jackson.databind.ObjectMapper()\n\t\t\t\t.registerModule(new JavaTimeModule());\n\n\t\ttestContext.setRequestPayload(objectMapper.writeValueAsString(jsonRequestPriceListVersionUpsert.build()));\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 121,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/UpsertPricingAPI_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "UpsertPricingAPI_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1894,
    "annotation": "\n\t@And(\"we create a JsonRequestProductPriceUpsert, set syncAdvise to {string} and store request payload it in the test context\")",
    "glue_code": "\t@And(\"we create a JsonRequestProductPriceUpsert, set syncAdvise to {string} and store request payload it in the test context\")\n\tpublic void userAddsSyncAdviseProductPrices(@NonNull final String string) throws com.fasterxml.jackson.core.JsonProcessingException\n\t{\n\t\tfinal SyncAdvise syncAdvise = RESTUtil.mapSyncAdvise(string);\n\n\t\tjsonRequestProductPriceUpsert.syncAdvise(syncAdvise);\n\t\ttestContext.setRequestPayload(objectMapper.writeValueAsString(jsonRequestProductPriceUpsert.build()));\n\t}",
    "original_keyword": "And",
    "keyword": "When",
    "line_in_the_file": 133,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/UpsertPricingAPI_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "UpsertPricingAPI_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1895,
    "annotation": "\n\t@Then(\"price list version is persisted correctly\")",
    "glue_code": "\t@Then(\"price list version is persisted correctly\")\n\tpublic void validatePriceListVersionPersistedCorrectly() throws IOException\n\t{\n\t\t//req\n\t\tfinal List<JsonRequestPriceListVersionUpsertItem> requestItems = jsonRequestPriceListVersionUpsert.build().getRequestItems();\n\n\t\t//resp\n\t\tfinal JsonResponseUpsert jsonResponseUpsertItem = objectMapper.readValue(testContext.getApiResponse().getContent(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t JsonResponseUpsert.class);\n\t\tfor (final JsonResponseUpsertItem upsertItem : jsonResponseUpsertItem.getResponseItems())\n\t\t{\n\t\t\tvalidatePriceListVersion(upsertItem, requestItems);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 142,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/UpsertPricingAPI_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "UpsertPricingAPI_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1896,
    "annotation": "\n\t@Then(\"product price is persisted correctly\")",
    "glue_code": "\t@Then(\"product price is persisted correctly\")\n\tpublic void validateProductPricesPersistedCorrectly() throws IOException\n\t{\n\t\t//req\n\t\tfinal List<JsonRequestProductPriceUpsertItem> requestItems = jsonRequestProductPriceUpsert.build().getRequestItems();\n\n\t\t//resp\n\t\tfinal JsonResponseUpsert jsonResponseUpsertItem = objectMapper.readValue(testContext.getApiResponse().getContent(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t JsonResponseUpsert.class);\n\n\t\tfor (final JsonResponseUpsertItem upsertItem : jsonResponseUpsertItem.getResponseItems())\n\t\t{\n\t\t\tvalidateProductPrices(upsertItem, requestItems);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 157,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing/UpsertPricingAPI_StefDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/pricing",
      "filename": "UpsertPricingAPI_StefDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1863,
    "annotation": "\n\t@When(\"metasfresh receives a GetAllBPartnersRequest via RabbitMQ\")",
    "glue_code": "\t@When(\"metasfresh receives a GetAllBPartnersRequest via RabbitMQ\")\n\tpublic void metasfresh_receives_a_get_all_b_partners_request() throws IOException, TimeoutException\n\t{\n\t\tfinal String string = Constants.PROCUREMENT_WEBUI_OBJECT_MAPPER.writeValueAsString(GetAllBPartnersRequest.builder().build());\n\n\t\ttry (final Connection connection = procurementWebuiFactory.newConnection())\n\t\t{\n\t\t\tfinal Channel channel = connection.createChannel();\n\t\t\tfinal BasicProperties properties = new BasicProperties.Builder()\n\t\t\t\t\t.contentEncoding(StandardCharsets.UTF_8.displayName())\n\t\t\t\t\t.contentType(MessageProperties.CONTENT_TYPE_JSON)\n\t\t\t\t\t.build();\n\n\t\t\tchannel.basicPublish(\"\", Constants.QUEUE_NAME_PW_TO_MF, properties, string.getBytes());\n\t\t\tSystem.out.println(\"[x] Sent on queue '\" + Constants.QUEUE_NAME_PW_TO_MF + \"': message= '\" + string + \"'\");\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 98,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb/ProcurementWebToMetasfresh_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb",
      "filename": "ProcurementWebToMetasfresh_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1864,
    "annotation": "\n\t@Then(\"metasfresh responds with a PutBPartnersRequest that contains these BPartners:\")",
    "glue_code": "\t@Then(\"metasfresh responds with a PutBPartnersRequest that contains these BPartners:\")\n\tpublic void metasfresh_responds_with_a_put_b_partners_request_that_contains_these_b_partners(@NonNull final DataTable dataTable) throws IOException, TimeoutException, InterruptedException\n\t{\n\t\tfinal PutBPartnersRequest putBPartnersRequest = receiveRequest(PutBPartnersRequest.class);\n\n\t\tfinal ImmutableMap<String, SyncBPartner> name2bpartner = Maps.uniqueIndex(putBPartnersRequest.getBpartners(), SyncBPartner::getName);\n\n\t\tfor (final Map<String, String> tableRow : dataTable.<String, String>asMaps(String.class, String.class))\n\t\t{\n\t\t\tfinal String name = tableRow.get(\"Name\");\n\t\t\tassertThat(name2bpartner).as(\"Missing syncBPartner with name=%s in %s\", name, name2bpartner).containsKey(name);\n\t\t\tfinal SyncBPartner syncBPartner = name2bpartner.get(name);\n\n\t\t\tfinal boolean deleted = DataTableUtil.extractBooleanForColumnName(tableRow, \"Deleted\");\n\t\t\tassertThat(syncBPartner.isDeleted()).isEqualTo(deleted);\n\n\t\t\tfinal String identifier = DataTableUtil.extractStringForColumnName(tableRow, StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tsyncBPartnerStepDefData.put(identifier, syncBPartner);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 116,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb/ProcurementWebToMetasfresh_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb",
      "filename": "ProcurementWebToMetasfresh_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1865,
    "annotation": "\n\t@Then(\"the PutBPartnersRequest contains these Users:\")",
    "glue_code": "\t@Then(\"the PutBPartnersRequest contains these Users:\")\n\tpublic void the_put_b_partners_request_contains_these_users(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.<String, String>asMaps(String.class, String.class))\n\t\t{\n\t\t\tfinal String identifier = DataTableUtil.extractStringForColumnName(tableRow, \"BPartner.\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal SyncBPartner syncBPartner = syncBPartnerStepDefData.get(identifier);\n\n\t\t\tfinal ImmutableMap<String, SyncUser> email2User = Maps.uniqueIndex(syncBPartner.getUsers(), SyncUser::getEmail);\n\n\t\t\tfinal String email = DataTableUtil.extractStringForColumnName(tableRow, \"Email\");\n\t\t\tassertThat(email2User).as(\"Missing syncUser with email=%s\", email).containsKey(email);\n\n\t\t\tfinal SyncUser syncUser = email2User.get(email);\n\t\t\tfinal String password = DataTableUtil.extractStringForColumnName(tableRow, \"Password\");\n\t\t\tfinal String language = DataTableUtil.extractStringForColumnName(tableRow, \"Language\");\n\n\t\t\tassertThat(syncUser.getPassword()).isEqualTo(password);\n\t\t\tassertThat(syncUser.getLanguage()).isEqualTo(language);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 166,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb/ProcurementWebToMetasfresh_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb",
      "filename": "ProcurementWebToMetasfresh_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1866,
    "annotation": "\n\t@Then(\"the PutBPartnersRequest contains these Contracts:\")",
    "glue_code": "\t@Then(\"the PutBPartnersRequest contains these Contracts:\")\n\tpublic void the_put_b_partners_request_contains_these_contracts(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.<String, String>asMaps(String.class, String.class))\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, \"BPartner.\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal SyncBPartner syncBPartner = syncBPartnerStepDefData.get(bpartnerIdentifier);\n\n\t\t\tfinal DateTimeFormatter df = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\");\n\n\t\t\tfinal String dateFromStr = DataTableUtil.extractStringForColumnName(tableRow, \"DateFrom\");\n\t\t\tfinal String dateToStr = DataTableUtil.extractStringForColumnName(tableRow, \"DateTo\");\n\n\t\t\tfinal Optional<SyncContract> syncContract = syncBPartner.getContracts().stream()\n\t\t\t\t\t.filter(c -> dateFromStr.equals(c == null ? \"\" : df.format(c.getDateFrom())))\n\t\t\t\t\t.filter(c -> dateToStr.equals(c == null ? \"\" : df.format(c.getDateTo())))\n\t\t\t\t\t.findAny();\n\t\t\tassertThat(syncContract).as(\"Missing SyncContract with DateFrom=%s and DateTo=%s\", dateFromStr, dateToStr).isPresent();\n\n\t\t\tfinal boolean deleted = DataTableUtil.extractBooleanForColumnName(tableRow, \"Deleted\");\n\t\t\tassertThat(syncContract.get().isDeleted()).isEqualTo(deleted);\n\n\t\t\tsyncContractStepDefData.put(DataTableUtil.extractRecordIdentifier(tableRow, \"Contract\"), syncContract.get());\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb/ProcurementWebToMetasfresh_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb",
      "filename": "ProcurementWebToMetasfresh_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1867,
    "annotation": "\n\t@Then(\"the PutBPartnersRequest contains these ContractLines:\")",
    "glue_code": "\t@Then(\"the PutBPartnersRequest contains these ContractLines:\")\n\tpublic void the_put_b_partners_request_contains_these_contract_lines(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.<String, String>asMaps(String.class, String.class))\n\t\t{\n\t\t\tfinal String contractIdentifier = DataTableUtil.extractStringForColumnName(tableRow, \"Contract.\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal SyncContract syncContract = syncContractStepDefData.get(contractIdentifier);\n\t\t\tfinal List<SyncContractLine> contractLines = syncContract.getContractLines();\n\n\t\t\tfinal String productName = DataTableUtil.extractStringForColumnName(tableRow, \"Product.Name\");\n\n\t\t\tfinal Optional<SyncContractLine> product = contractLines.stream()\n\t\t\t\t\t.filter(l -> productName.equals(l.getProduct().getName()))\n\t\t\t\t\t.findAny();\n\n\t\t\tassertThat(product)\n\t\t\t\t\t.as(\"Missing SyncContractLine with contractIdentifier=%s and product.name=%s\", contractIdentifier, productName)\n\t\t\t\t\t.isPresent();\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 214,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb/ProcurementWebToMetasfresh_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/procurementweb",
      "filename": "ProcurementWebToMetasfresh_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1848,
    "annotation": "\n\t@Given(\"metasfresh contains M_Products:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Products:\")\n\tpublic void metasfresh_contains_m_product(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Product.COLUMNNAME_M_Product_ID)\n\t\t\t\t.forEach(this::createM_Product);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 119,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1849,
    "annotation": "\n\t@Given(\"ensure product accounts exist\")",
    "glue_code": "\t@Given(\"ensure product accounts exist\")\n\tpublic void metasfresh_ensure_product_accounts()\n\t{\n\t\tDB.executeFunctionCallEx(ITrx.TRXNAME_None, \"select createm_product_acct();\", null);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 127,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1850,
    "annotation": "\n\t@And(\"no product with value {string} exists\")",
    "glue_code": "\t@And(\"no product with value {string} exists\")\n\tpublic void noProductWithCodeCodeExists(final String value)\n\t{\n\t\tfinal Optional<I_M_Product> product = queryBL.createQueryBuilder(I_M_Product.class)\n\t\t\t\t.addEqualsFilter(I_M_Product.COLUMNNAME_Value, value)\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyOptional(I_M_Product.class);\n\n\t\tif (product.isPresent())\n\t\t{\n\t\t\tqueryBL.createQueryBuilder(I_C_BPartner_Product.class)\n\t\t\t\t\t.addEqualsFilter(I_C_BPartner_Product.COLUMNNAME_M_Product_ID, product.get().getM_Product_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.delete();\n\n\t\t\tqueryBL.createQueryBuilder(I_C_UOM_Conversion.class)\n\t\t\t\t\t.addEqualsFilter(I_C_UOM_Conversion.COLUMNNAME_M_Product_ID, product.get().getM_Product_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.delete();\n\n\t\t\tqueryBL.createQueryBuilder(I_M_Product.class)\n\t\t\t\t\t.addEqualsFilter(I_M_Product.COLUMNNAME_Value, value)\n\t\t\t\t\t.create()\n\t\t\t\t\t.delete();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 133,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1851,
    "annotation": "\n\t@And(\"metasfresh contains C_BPartner_Products:\")",
    "glue_code": "\t@And(\"metasfresh contains C_BPartner_Products:\")\n\tpublic void metasfreshContainsC_BPartner_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal boolean isExcludedFromSale = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_IsExcludedFromSale, false);\n\t\t\tfinal boolean isExcludedFromPurchase = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_IsExcludedFromPurchase, false);\n\t\t\tfinal String exclusionFromSaleReason = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_ExclusionFromSaleReason);\n\t\t\tfinal String exclusionFromPurchaseReason = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_ExclusionFromPurchaseReason);\n\t\t\tfinal String productNumber = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_ProductNo);\n\t\t\tfinal String upc = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_UPC);\n\n\t\t\tfinal I_C_BPartner_Product bPartnerProduct = InterfaceWrapperHelper.newInstance(I_C_BPartner_Product.class);\n\t\t\tbPartnerProduct.setAD_Org_ID(StepDefConstants.ORG_ID.getRepoId());\n\t\t\tbPartnerProduct.setM_Product_ID(productTable.get(productIdentifier).getM_Product_ID());\n\t\t\tbPartnerProduct.setC_BPartner_ID(bpartnerTable.get(bpartnerIdentifier).getC_BPartner_ID());\n\t\t\tbPartnerProduct.setUsedForVendor(true);\n\t\t\tbPartnerProduct.setUsedForCustomer(true);\n\t\t\tbPartnerProduct.setShelfLifeMinPct(0);\n\t\t\tbPartnerProduct.setShelfLifeMinDays(0);\n\t\t\tbPartnerProduct.setIsExcludedFromSale(isExcludedFromSale);\n\t\t\tbPartnerProduct.setIsExcludedFromPurchase(isExcludedFromPurchase);\n\n\t\t\tfinal Boolean isCurrentVendor = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + I_C_BPartner_Product.COLUMNNAME_IsCurrentVendor, true);\n\t\t\tbPartnerProduct.setIsCurrentVendor(isCurrentVendor);\n\n\t\t\tif (Check.isNotBlank(exclusionFromSaleReason))\n\t\t\t{\n\t\t\t\tbPartnerProduct.setExclusionFromSaleReason(exclusionFromSaleReason);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(exclusionFromPurchaseReason))\n\t\t\t{\n\t\t\t\tbPartnerProduct.setExclusionFromPurchaseReason(exclusionFromPurchaseReason);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(productNumber))\n\t\t\t{\n\t\t\t\tbPartnerProduct.setProductNo(productNumber);\n\t\t\t}\n\n\t\t\tif (Check.isNotBlank(upc))\n\t\t\t{\n\t\t\t\tbPartnerProduct.setUPC(upc);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(bPartnerProduct);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 160,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1852,
    "annotation": "\n\t@And(\"locate product by external identifier\")",
    "glue_code": "\t@And(\"locate product by external identifier\")\n\tpublic void locate_product_by_external_identifier(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tlocate_product_by_external_identifier(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 214,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1853,
    "annotation": "\n\t@And(\"verify product info\")",
    "glue_code": "\t@And(\"verify product info\")\n\tpublic void verify_product_info(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tverify_product_info(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 224,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1854,
    "annotation": "\n\t@Given(\"update M_Product:\")",
    "glue_code": "\t@Given(\"update M_Product:\")\n\tpublic void update_M_Products(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Product.COLUMNNAME_M_Product_ID)\n\t\t\t\t.forEach(this::updateMProduct);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 234,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1855,
    "annotation": "\n\t@And(\"taxCategory {string} is updated to work with all productTypes\")",
    "glue_code": "\t@And(\"taxCategory {string} is updated to work with all productTypes\")\n\tpublic void update_tax_category(@NonNull final String taxCategoryInternalName)\n\t{\n\t\tfinal Optional<TaxCategoryId> taxCategoryId = taxBL.getTaxCategoryIdByInternalName(taxCategoryInternalName);\n\t\tassertThat(taxCategoryId).as(\"Missing taxCategory for internalName=%s\", taxCategoryInternalName).isPresent();\n\n\t\tfinal I_C_TaxCategory taxCategory = InterfaceWrapperHelper.loadOutOfTrx(taxCategoryId.get(), I_C_TaxCategory.class);\n\t\ttaxCategory.setProductType(null);\n\n\t\tInterfaceWrapperHelper.saveRecord(taxCategory);\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 242,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1856,
    "annotation": "\n\t@Given(\"load M_Product:\")",
    "glue_code": "\t@Given(\"load M_Product:\")\n\tpublic void load_M_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tloadProduct(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 254,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1857,
    "annotation": "\n\t@And(\"load product by value:\")",
    "glue_code": "\t@And(\"load product by value:\")\n\tpublic void load_product_by_value(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_Value);\n\n\t\t\tfinal I_M_Product loadedProduct = queryBL.createQueryBuilder(I_M_Product.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Value, value)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_Product.class);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tproductTable.put(productIdentifier, loadedProduct);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 264,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1858,
    "annotation": "\n\t@And(\"update M_Product and expect exception to be thrown:\")",
    "glue_code": "\t@And(\"update M_Product and expect exception to be thrown:\")\n\tpublic void update_M_Product_and_check_exception(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Product.COLUMNNAME_M_Product_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tupdateMProduct(row);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (final AdempiereException exception)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal String expectedExceptionMessage = row.getAsString(\"ExceptionMessage\");\n\t\t\t\t\t\tassertThat(exception.getMessage()).contains(expectedExceptionMessage);\n\t\t\t\t\t}\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 283,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/M_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "M_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1928,
    "annotation": "\n\t@Then(\"validate get products response\")",
    "glue_code": "\t@Then(\"validate get products response\")\n\tpublic void verify_getProducts_response_v2(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::verifyGetProductsResponseV2);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 76,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/ProductRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "ProductRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1929,
    "annotation": "\n\t@Then(\"validate retrieve product response\")",
    "glue_code": "\t@Then(\"validate retrieve product response\")\n\tpublic void validate_retrieve_product_response(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal ObjectMapper mapper = JsonObjectMapperHolder.newJsonObjectMapper();\n\n\t\tfinal JsonProduct jsonProduct = mapper.readValue(testContext.getApiResponse().getContent(), JsonProduct.class);\n\t\tassertThat(jsonProduct).isNotNull();\n\n\t\tDataTableRows.of(dataTable).forEach(row -> validateJsonProduct(row, jsonProduct));\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/ProductRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product",
      "filename": "ProductRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1846,
    "annotation": "\n\t@And(\"^validate created M_Quality_Attributes for product: (.*)$\")",
    "glue_code": "\t@And(\"^validate created M_Quality_Attributes for product: (.*)$\")\n\tpublic void validate_M_Quality_Attribute(@NonNull final String productIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\tfinal List<I_M_Quality_Attribute> qualityAttributeList = queryBL.createQueryBuilder(I_M_Quality_Attribute.class)\n\t\t\t\t.addEqualsFilter(I_M_Quality_Attribute.COLUMNNAME_M_Product_ID, product.getM_Product_ID())\n\t\t\t\t.addNotNull(I_M_Quality_Attribute.COLUMNNAME_QualityAttribute)\n\t\t\t\t.orderBy(I_M_Quality_Attribute.COLUMNNAME_QualityAttribute)\n\t\t\t\t.create()\n\t\t\t\t.list();\n\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (int idx = 0; idx < dataTable.asMaps().size(); idx++)\n\t\t{\n\t\t\tfinal String qualityAttribute = DataTableUtil.extractStringOrNullForColumnName(dataTable.asMaps().get(idx), \"OPT.\" + I_M_Quality_Attribute.COLUMNNAME_QualityAttribute);\n\n\t\t\tif (Check.isNotBlank(qualityAttribute))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(qualityAttributeList.get(idx).getQualityAttribute()).as(I_M_Quality_Attribute.COLUMNNAME_QualityAttribute).isEqualTo(qualityAttribute);\n\t\t\t}\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 51,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/qualityattribute/M_Quality_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/qualityattribute",
      "filename": "M_Quality_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1847,
    "annotation": "\n\t@And(\"no M_Quality_Attribute data is found\")",
    "glue_code": "\t@And(\"no M_Quality_Attribute data is found\")\n\tpublic void reset_data()\n\t{\n\t\tDB.executeUpdateAndThrowExceptionOnFail(\"TRUNCATE TABLE M_Quality_Attribute cascade\", ITrx.TRXNAME_None);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/qualityattribute/M_Quality_Attribute_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/product/qualityattribute",
      "filename": "M_Quality_Attribute_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1912,
    "annotation": "\n\t@And(\"load M_Product_Category:\")",
    "glue_code": "\t@And(\"load M_Product_Category:\")\n\tpublic void load_M_Product_Category(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Product_Category_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal String name = row.getAsString(I_M_Product_Category.COLUMNNAME_Name);\n\t\t\t\t\tfinal String value = row.getAsString(I_M_Product_Category.COLUMNNAME_Value);\n\n\t\t\t\t\tfinal I_M_Product_Category productCategory = queryBL.createQueryBuilder(I_M_Product_Category.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_Product_Category.COLUMNNAME_Name, name)\n\t\t\t\t\t\t\t.addEqualsFilter(I_M_Product_Category.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_M_Product_Category.class);\n\t\t\t\t\tassertThat(productCategory).as(\"Unable to load active M_ProductCategory with name=%s and value=%s\", name, value).isNotNull();\n\t\t\t\t\tproductCategoryTable.putOrReplace(row.getAsIdentifier(), productCategory);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productCategory/M_Product_Category_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productCategory",
      "filename": "M_Product_Category_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1913,
    "annotation": "\n\t@And(\"update M_Product_Category:\")",
    "glue_code": "\t@And(\"update M_Product_Category:\")\n\tpublic void update_M_Product_Category(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Product_Category_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal StepDefDataIdentifier identifier = row.getAsIdentifier();\n\t\t\t\t\tfinal I_M_Product_Category productCategory = identifier.lookupIn(productCategoryTable);\n\t\t\t\t\tassertThat(productCategory).as(\"Unable to load active M_ProductCategory with identifier=%s\", identifier).isNotNull();\n\n\t\t\t\t\trow.getAsOptionalIdentifier(COLUMNNAME_M_AttributeSet_ID)\n\t\t\t\t\t\t\t.map(attributeSetTable::getId)\n\t\t\t\t\t\t\t.ifPresent(attributeSetId -> productCategory.setM_AttributeSet_ID(attributeSetId.getRepoId()));\n\n\t\t\t\t\tsaveRecord(productCategory);\n\t\t\t\t\tproductCategoryTable.putOrReplace(identifier, productCategory);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productCategory/M_Product_Category_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productCategory",
      "filename": "M_Product_Category_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1914,
    "annotation": "\n\t@Given(\"metasfresh contains M_Product_Categories:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_Product_Categories:\")\n\tpublic void create_M_Product_Categories(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, I_M_Product_Category.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(tableRow, I_M_Product_Category.COLUMNNAME_Value);\n\n\t\t\tfinal I_M_Product_Category productCategoryRecord =\n\t\t\t\t\tCoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t\t\t() -> queryBL.createQueryBuilder(I_M_Product_Category.class)\n\t\t\t\t\t\t\t\t\t.addEqualsFilter(I_M_Product_Category.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t\t.firstOnly(I_M_Product_Category.class),\n\t\t\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_M_Product_Category.class)\n\t\t\t\t\t);\n\n\t\t\tproductCategoryRecord.setIsActive(true);\n\t\t\tproductCategoryRecord.setName(name);\n\t\t\tproductCategoryRecord.setValue(value);\n\t\t\tInterfaceWrapperHelper.saveRecord(productCategoryRecord);\n\n\t\t\tfinal String productCategoryIdentifier = DataTableUtil.extractStringForColumnName(tableRow, TABLECOLUMN_IDENTIFIER);\n\t\t\tproductCategoryTable.putOrReplace(productCategoryIdentifier, productCategoryRecord);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 97,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productCategory/M_Product_Category_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productCategory",
      "filename": "M_Product_Category_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1930,
    "annotation": "\n\t@Given(\"metasfresh contains PP_Product_Plannings\")",
    "glue_code": "\t@Given(\"metasfresh contains PP_Product_Plannings\")\n\tpublic void createOrUpdate(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(row -> createOrUpdate(row));\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 88,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productplanning/PP_Product_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productplanning",
      "filename": "PP_Product_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1931,
    "annotation": "\n\t@Given(\"update existing PP_Product_Plannings\")",
    "glue_code": "\t@Given(\"update existing PP_Product_Plannings\")\n\tpublic void updateExisting(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::updateExisting);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 94,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productplanning/PP_Product_Planning_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/productplanning",
      "filename": "PP_Product_Planning_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1859,
    "annotation": "\n\t@Given(\"metasfresh contains C_Project\")",
    "glue_code": "\t@Given(\"metasfresh contains C_Project\")\n\tpublic void metasfresh_contains_C_Project(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tmetasfreshContainsProject(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 110,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/C_Project_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project",
      "filename": "C_Project_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1860,
    "annotation": "\n\t@Given(\"create or update C_Project:\")",
    "glue_code": "\t@Given(\"create or update C_Project:\")\n\tpublic void create_update_C_Project(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(tableRow, I_C_Project.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(tableRow, I_C_Project.COLUMNNAME_Value);\n\t\t\tfinal String currencyIsoCode = DataTableUtil.extractStringForColumnName(tableRow, I_C_Project.COLUMNNAME_C_Currency_ID + \".ISO_Code\");\n\n\t\t\tfinal Currency currency = currencyDAO.getByCurrencyCode(CurrencyCode.ofThreeLetterCode(currencyIsoCode));\n\n\t\t\tfinal I_C_Project project = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t() -> queryBL.createQueryBuilder(I_C_Project.class)\n\t\t\t\t\t\t\t.addEqualsFilter(I_C_Project.COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnly(I_C_Project.class),\n\t\t\t\t\t() -> newInstance(I_C_Project.class));\n\n\t\t\tproject.setName(name);\n\t\t\tproject.setValue(value);\n\t\t\tproject.setR_StatusCategory_ID(OPPORTUNITY_STATUS_CATEGORY_ID.getRepoId());\n\t\t\tproject.setAD_Org_ID(OrgId.MAIN.getRepoId());\n\t\t\tproject.setC_Currency_ID(currency.getId().getRepoId());\n\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Project.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bPartnerIdentifier);\n\t\t\t\tproject.setC_BPartner_ID(bPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String bPartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Project.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bPartnerLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bpartnerLocationTable.get(bPartnerLocationIdentifier);\n\t\t\t\tproject.setC_BPartner_Location_ID(bPartnerLocation.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String userIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_C_Project.COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(userIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_User user = userTable.get(userIdentifier);\n\t\t\t\tproject.setAD_User_ID(user.getAD_User_ID());\n\t\t\t}\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractNullableStringForColumnName(tableRow, \"OPT.\" + I_C_Project.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t{\n\t\t\t\tfinal String nullableIdentifier = DataTableUtil.nullToken2Null(productIdentifier);\n\t\t\t\tif (nullableIdentifier == null)\n\t\t\t\t{\n\t\t\t\t\tproject.setM_Product_ID(-1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\t\tproject.setM_Product_ID(product.getM_Product_ID());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(project);\n\n\t\t\tfinal String projectIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_C_Project.COLUMNNAME_C_Project_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tprojectTable.putOrReplace(projectIdentifier, project);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 120,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/C_Project_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project",
      "filename": "C_Project_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1861,
    "annotation": "\n\t@When(\"process metasfresh project upsert response\")",
    "glue_code": "\t@When(\"process metasfresh project upsert response\")\n\tpublic void process_project_upsert_response(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfinal JsonResponseProjectUpsert jsonResponseProjectUpsert = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseProjectUpsert.class);\n\t\tassertThat(jsonResponseProjectUpsert).isNotNull();\n\t\tassertThat(jsonResponseProjectUpsert.getResponseItems().size()).isEqualTo(tableRows.size());\n\n\t\tint index = 0;\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tprocessProjectUpsertResponse(tableRow, jsonResponseProjectUpsert.getResponseItems().get(index));\n\t\t\tindex++;\n\t\t}\n\t}",
    "original_keyword": "When",
    "keyword": "When",
    "line_in_the_file": 188,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/C_Project_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project",
      "filename": "C_Project_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1862,
    "annotation": "\n\t@Then(\"validate the created projects\")",
    "glue_code": "\t@Then(\"validate the created projects\")\n\tpublic void validate_project(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateProject(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 205,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/C_Project_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project",
      "filename": "C_Project_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1889,
    "annotation": "\n\t@Then(\"process budget project upsert response\")",
    "glue_code": "\t@Then(\"process budget project upsert response\")\n\tpublic void process_budget_project_upsert_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonBudgetProjectUpsertResponse budgetProjectUpsertResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonBudgetProjectUpsertResponse.class);\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String projectIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Project.COLUMNNAME_C_Project_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\tfinal ProjectId projectId = ProjectId.ofRepoIdOrNull(JsonMetasfreshId.toValue(budgetProjectUpsertResponse.getProjectId()));\n\t\tassertThat(projectId).isNotNull();\n\n\t\tfinal I_C_Project project = InterfaceWrapperHelper.load(projectId, I_C_Project.class);\n\t\tassertThat(project).isNotNull();\n\n\t\tprojectTable.putOrReplace(projectIdentifier, project);\n\n\t\tfinal String budgetResourceIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Project_Resource_Budget.COLUMNNAME_C_Project_Resource_Budget_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tif (Check.isNotBlank(budgetResourceIdentifier))\n\t\t{\n\t\t\tfinal List<JsonResponseBudgetProjectResourceUpsertItem> budgetResources = budgetProjectUpsertResponse.getBudgetResources();\n\n\t\t\tassertThat(budgetResources).hasSize(1);\n\n\t\t\tfinal I_C_Project_Resource_Budget projectResourceBudget = InterfaceWrapperHelper.load(budgetResources.get(0).getMetasfreshId().getValue(), I_C_Project_Resource_Budget.class);\n\n\t\t\tbudgetProjectResourceTable.putOrReplace(budgetResourceIdentifier, projectResourceBudget);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 96,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/budget/BudgetProjectRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/budget",
      "filename": "BudgetProjectRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1932,
    "annotation": "\n\t@And(\"C_Project_WO_Resource_Conflict is found\")",
    "glue_code": "\t@And(\"C_Project_WO_Resource_Conflict is found\")\n\tpublic void lookup_C_Project_WO_Resource_Conflict(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfindProjectWoResourceConflict(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_Conflict_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_Conflict_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1933,
    "annotation": "\n\t@And(\"C_Project_WO_Resource_Conflict is validated\")",
    "glue_code": "\t@And(\"C_Project_WO_Resource_Conflict is validated\")\n\tpublic void validate_C_Project_WO_Resource_Conflict(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateC_Project_WO_Resource_Conflict(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_Conflict_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_Conflict_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1934,
    "annotation": "\n\t@And(\"C_Project_WO_Resource_Conflict is approved\")",
    "glue_code": "\t@And(\"C_Project_WO_Resource_Conflict is approved\")\n\tpublic void approve_C_Project_WO_Resource_Conflict(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tapproveC_Project_WO_Resource_Conflict(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_Conflict_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_Conflict_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1887,
    "annotation": "\n\t@And(\"load C_Project_WO_Resource_Simulation\")",
    "glue_code": "\t@And(\"load C_Project_WO_Resource_Simulation\")\n\tpublic void load_C_Project_WO_Resource_Simulation(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadProjectWoSimulation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_Simulation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_Simulation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1888,
    "annotation": "\n\t@And(\"validate C_Project_WO_Resource_Simulation\")",
    "glue_code": "\t@And(\"validate C_Project_WO_Resource_Simulation\")\n\tpublic void validate_C_Project_WO_Resource_Simulation(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateProjectWoSimulation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_Simulation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_Simulation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1868,
    "annotation": "\n\t@And(\"load C_Project_WO_Resources\")",
    "glue_code": "\t@And(\"load C_Project_WO_Resources\")\n\tpublic void load_C_Project_WO_Resources(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tloadProjectResources(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 63,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1869,
    "annotation": "\n\t@And(\"validate C_Project_WO_Resource\")",
    "glue_code": "\t@And(\"validate C_Project_WO_Resource\")\n\tpublic void validate_C_Project_WO_Resource(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tvalidateProjectWoResource(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 72,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Resource_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Resource_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1916,
    "annotation": "\n\t@And(\"validate C_Project_WO_Step_Simulation\")",
    "glue_code": "\t@And(\"validate C_Project_WO_Step_Simulation\")\n\tpublic void validate_C_Project_WO_Step_Simulation(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateProjectWoStepSimulation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Step_Simulation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Step_Simulation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1917,
    "annotation": "\n\t@And(\"load C_Project_WO_Step_Simulation\")",
    "glue_code": "\t@And(\"load C_Project_WO_Step_Simulation\")\n\tpublic void load_C_Project_WO_Step_Simulation(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadProjectWoStepSimulation(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Step_Simulation_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Step_Simulation_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1915,
    "annotation": "\n\t@And(\"validate C_Project_WO_Step\")",
    "glue_code": "\t@And(\"validate C_Project_WO_Step\")\n\tpublic void validate_C_Project_WO_Step(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tvalidateProjectWoStep(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/C_Project_WO_Step_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "C_Project_WO_Step_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1885,
    "annotation": "\n\t@And(\"process work order project upsert response\")",
    "glue_code": "\t@And(\"process work order project upsert response\")\n\tpublic void process_wo_project_upsert_response(@NonNull final DataTable table) throws JsonProcessingException\n\t{\n\t\tfinal JsonWorkOrderProjectUpsertResponse workOrderProjectUpsertResponse = mapper.readValue(testContext.getApiResponse().getContent(), JsonWorkOrderProjectUpsertResponse.class);\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String projectIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Project.COLUMNNAME_C_Project_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\tfinal I_C_Project woProject = InterfaceWrapperHelper.load(workOrderProjectUpsertResponse.getMetasfreshId().getValue(), I_C_Project.class);\n\t\tassertThat(woProject).isNotNull();\n\n\t\tprojectTable.putOrReplace(projectIdentifier, woProject);\n\n\t\tfinal String stepIdentifiers = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Project_WO_Resource.COLUMNNAME_C_Project_WO_Step_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tif (Check.isNotBlank(stepIdentifiers))\n\t\t{\n\t\t\tfinal ImmutableList<String> stepIdentifiersList = StepDefUtil.extractIdentifiers(stepIdentifiers);\n\t\t\tassertThat(workOrderProjectUpsertResponse.getSteps()).isNotNull();\n\t\t\tfinal List<JsonWorkOrderStepUpsertResponse> steps = workOrderProjectUpsertResponse.getSteps();\n\t\t\tassertThat(steps).isNotNull();\n\t\t\tassertThat(stepIdentifiersList.size()).isEqualTo(steps.size());\n\n\t\t\tfor (int index = 0; index < stepIdentifiersList.size(); index++)\n\t\t\t{\n\t\t\t\tfinal I_C_Project_WO_Step stepRecord = InterfaceWrapperHelper.load(steps.get(index).getMetasfreshId().getValue(), I_C_Project_WO_Step.class);\n\n\t\t\t\tprojectWOStepTable.putOrReplace(stepIdentifiersList.get(index), stepRecord);\n\t\t\t}\n\t\t}\n\n\t\tfinal String woResourceIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Project_WO_Resource.COLUMNNAME_C_Project_WO_Resource_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tif (Check.isNotBlank(woResourceIdentifier))\n\t\t{\n\t\t\tfinal List<JsonWorkOrderStepUpsertResponse> stepResponse = workOrderProjectUpsertResponse.getSteps();\n\t\t\tassertThat(stepResponse).isNotNull();\n\t\t\tassertThat(stepResponse).hasSize(1);\n\t\t\tfinal List<JsonWorkOrderResourceUpsertResponse> woResourcesResponse = stepResponse.get(0).getResources();\n\n\t\t\tassertThat(woResourcesResponse).hasSize(1);\n\n\t\t\tfinal I_C_Project_WO_Resource woResource = InterfaceWrapperHelper.load(woResourcesResponse.get(0).getMetasfreshId().getValue(), I_C_Project_WO_Resource.class);\n\n\t\t\twoResourceTable.putOrReplace(woResourceIdentifier, woResource);\n\t\t}\n\n\t\tfinal String woObjUnderTestIdentifiers = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Project_WO_ObjectUnderTest.COLUMNNAME_C_Project_WO_ObjectUnderTest_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\tif (Check.isNotBlank(woObjUnderTestIdentifiers))\n\t\t{\n\t\t\tfinal ImmutableList<String> woObjUnderTestIdentifierList = StepDefUtil.extractIdentifiers(woObjUnderTestIdentifiers);\n\t\t\tassertThat(workOrderProjectUpsertResponse.getObjectsUnderTest()).isNotNull();\n\n\t\t\tfinal List<JsonWorkOrderObjectUnderTestUpsertResponse> objUnderTestList = workOrderProjectUpsertResponse.getObjectsUnderTest();\n\t\t\tassertThat(objUnderTestList).isNotNull();\n\t\t\tassertThat(woObjUnderTestIdentifierList.size()).isEqualTo(objUnderTestList.size());\n\n\t\t\tfor (int index = 0; index < woObjUnderTestIdentifierList.size(); index++)\n\t\t\t{\n\t\t\t\tfinal I_C_Project_WO_ObjectUnderTest stepRecord = InterfaceWrapperHelper.load(objUnderTestList.get(index).getMetasfreshId().getValue(), I_C_Project_WO_ObjectUnderTest.class);\n\n\t\t\t\twoObjectUnderTestTable.putOrReplace(woObjUnderTestIdentifierList.get(index), stepRecord);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 92,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/WorkOrderProjectRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "WorkOrderProjectRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1886,
    "annotation": "\n\t@And(\"validate the following exception message was thrown by the work order project upsert endpoint\")",
    "glue_code": "\t@And(\"validate the following exception message was thrown by the work order project upsert endpoint\")\n\tpublic void validate_wo_project_upsert_response(@NonNull final DataTable table)\n\t{\n\t\tfinal String apiResponse = testContext.getApiResponse().getContent();\n\n\t\tfinal Map<String, String> row = table.asMaps().get(0);\n\n\t\tfinal String expectedApiResponse = DataTableUtil.extractStringForColumnName(row, \"ExceptionMessage\");\n\n\t\tassertThat(apiResponse).contains(expectedApiResponse);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 158,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder/WorkOrderProjectRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/project/workOrder",
      "filename": "WorkOrderProjectRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1919,
    "annotation": "\n\t@And(\"load C_ProjectType:\")",
    "glue_code": "\t@And(\"load C_ProjectType:\")\n\tpublic void load_C_ProjectType(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tloadProjectType(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/projectType/C_ProjectType_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/projectType",
      "filename": "C_ProjectType_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1905,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_PurchaseCandidate_Alloc are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_PurchaseCandidate_Alloc are found$\")\n\tpublic void findC_PurchaseCandidate_Alloc(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfindC_PurchaseCandidate_Alloc_ByCandidateId(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 67,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_Alloc_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_Alloc_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1906,
    "annotation": "\n\t@And(\"load C_OrderLines from C_PurchaseCandidate_Alloc\")",
    "glue_code": "\t@And(\"load C_OrderLines from C_PurchaseCandidate_Alloc\")\n\tpublic void loadC_OrderLines(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadC_OrderLines(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_Alloc_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_Alloc_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1907,
    "annotation": "\n\t@And(\"^no C_PurchaseCandidate found for orderLine (.*)$\")",
    "glue_code": "\t@And(\"^no C_PurchaseCandidate found for orderLine (.*)$\")\n\tpublic void validate_no_C_PurchaseCandidate_found(@NonNull final String orderLineIdentifier)\n\t{\n\t\tfinal OrderLineId orderLineId = getOrderLineIdByIdentifier(orderLineIdentifier);\n\t\tassertThat(orderLineId).isNotNull();\n\n\t\ttry\n\t\t{\n\t\t\tassertThat(getQueryByOrderLineId(orderLineId).count() == 0).isTrue();\n\t\t}\n\t\tcatch (final Throwable throwable)\n\t\t{\n\t\t\tlogCurrentContextExpectedNoRecords(orderLineId);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1908,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_PurchaseCandidates are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_PurchaseCandidates are found$\")\n\tpublic void find_purchase_candidates(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfindPurchaseCandidate(timeoutSec, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 102,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1909,
    "annotation": "\n\t@And(\"C_PurchaseCandidates are validated\")",
    "glue_code": "\t@And(\"C_PurchaseCandidates are validated\")\n\tpublic void validate_purchase_candidates(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tvalidatePurchaseCandidate(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 112,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1910,
    "annotation": "\n\t@And(\"^after not more than (.*)s, C_PurchaseCandidate found for orderLine (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, C_PurchaseCandidate found for orderLine (.*)$\")\n\tpublic void validate_C_PurchaseCandidate_found_for_OrderLine(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final String orderLineIdentifier,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal Map<String, String> tableRow = dataTable.asMaps().get(0);\n\n\t\tfinal OrderLineId orderLineId = getOrderLineIdByIdentifier(orderLineIdentifier);\n\t\tassertThat(orderLineId).isNotNull();\n\n\t\tfinal Supplier<Optional<I_C_PurchaseCandidate>> recordFound = () -> Optional.ofNullable(getQueryByOrderLineId(orderLineId).first());\n\n\t\tfinal I_C_PurchaseCandidate purchaseCandidateRecord = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, recordFound);\n\n\t\tfinal String purchaseCandidateIdentifier = DataTableUtil.extractStringForColumnName(tableRow, StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\tpurchaseCandidateTable.putOrReplace(purchaseCandidateIdentifier, purchaseCandidateRecord);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 122,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1911,
    "annotation": "\n\t@And(\"the following C_PurchaseCandidates are enqueued for generating C_Orders\")",
    "glue_code": "\t@And(\"the following C_PurchaseCandidates are enqueued for generating C_Orders\")\n\tpublic void enqueueC_PurchaseCandidates(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal ImmutableSet.Builder<PurchaseCandidateId> purchaseCandidateIds = ImmutableSet.builder();\n\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tpurchaseCandidateIds.add(getPurchaseCandidateId(row));\n\t\t}\n\n\t\tC_PurchaseCandidates_GeneratePurchaseOrders.enqueue(purchaseCandidateIds.build());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 141,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/C_PurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate",
      "filename": "C_PurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1920,
    "annotation": "\n\t@Given(\"the user adds a purchase candidate\")",
    "glue_code": "\t@Given(\"the user adds a purchase candidate\")\n\tpublic void addPurchaseCandidate(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> dataTableEntries = dataTable.asMaps().get(0);\n\t\tjsonPurchaseCandidateCreateItem = mapPurchaseCandidate(dataTableEntries);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 100,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1921,
    "annotation": "\n\t@And(\"the user adds a purchase candidate price\")",
    "glue_code": "\t@And(\"the user adds a purchase candidate price\")\n\tpublic void add_contacts(@NonNull final DataTable dataTable)\n\t{\n\t\tjsonPurchaseCandidateCreateItem.price(mapPrice(dataTable.asMaps().get(0)));\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 107,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1922,
    "annotation": "\n\t@And(\"the user adds attribute set instances\")",
    "glue_code": "\t@And(\"the user adds attribute set instances\")\n\tpublic void addAttributeSetInstance(@NonNull final DataTable dataTable)\n\t{\n\t\tjsonPurchaseCandidateCreateItem.attributeSetInstance(mapAttributes(dataTable.asMaps()));\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 113,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1923,
    "annotation": "\n\t@Given(\"the user adds a purchase candidate enqueue request\")",
    "glue_code": "\t@Given(\"the user adds a purchase candidate enqueue request\")\n\tpublic void addPurchaseCandidateEnqueueStatus(@NonNull final DataTable dataTable)\n\t{\n\t\tjsonPurchaseCandidateRequest.purchaseCandidates(mapEnqueueRequest(dataTable.asMaps()));\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 119,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1924,
    "annotation": "\n\t@And(\"the purchase candidate request is set in context\")",
    "glue_code": "\t@And(\"the purchase candidate request is set in context\")\n\tpublic void set_req_in_context() throws JsonProcessingException\n\t{\n\t\tfinal JsonPurchaseCandidateCreateRequest jsonPurchaseCandidateCreateRequest = JsonPurchaseCandidateCreateRequest.builder()\n\t\t\t\t.purchaseCandidate(jsonPurchaseCandidateCreateItem.build())\n\t\t\t\t.build();\n\t\ttestContext.setRequestPayload(new ObjectMapper().writeValueAsString(jsonPurchaseCandidateCreateRequest));\n\t}",
    "original_keyword": "And",
    "keyword": "Given",
    "line_in_the_file": 125,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1925,
    "annotation": "\n\t@Given(\"the purchase candidate enqueue-status request is set in context\")",
    "glue_code": "\t@Given(\"the purchase candidate enqueue-status request is set in context\")\n\tpublic void set_status_req_in_context() throws JsonProcessingException\n\t{\n\t\ttestContext.setRequestPayload(new ObjectMapper().writeValueAsString(jsonPurchaseCandidateRequest.build()));\n\t\ttestContext.setApiResponse(APIResponse.builder().build());\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 134,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1926,
    "annotation": "\n\t@Then(\"verify if data is persisted correctly for purchase candidate\")",
    "glue_code": "\t@Then(\"verify if data is persisted correctly for purchase candidate\")\n\tpublic void verify_purchase_candidate_is_persisted_correctly() throws IOException\n\t{\n\t\tfinal String responseJson = testContext.getApiResponse().getContent();\n\t\tfinal com.fasterxml.jackson.databind.ObjectMapper mapper = new com.fasterxml.jackson.databind.ObjectMapper();\n\n\t\t//response\n\t\tfinal JsonPurchaseCandidateResponse response = mapper.readValue(responseJson, JsonPurchaseCandidateResponse.class);\n\t\tassertThat(response.getPurchaseCandidates()).hasSize(1);\n\n\t\tfinal JsonPurchaseCandidate candidate = response.getPurchaseCandidates().get(0);\n\t\tfinal JsonMetasfreshId metasfreshId = candidate.getMetasfreshId();\n\n\t\tfinal PurchaseCandidate persistedResult = purchaseCandidateRepo.getById(PurchaseCandidateId.ofRepoId(metasfreshId.getValue()));\n\t\tvalidatePurchaseCandidate(persistedResult, candidate);\n\n\t\tassertThat(candidate.isProcessed()).isFalse();\n\t\tassertThat(candidate.getPurchaseOrders()).hasSize(0);\n\t\tassertThat(candidate.getWorkPackages()).hasSize(0);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 141,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1927,
    "annotation": "\n\t@Then(\"verify purchase candidate status\")",
    "glue_code": "\t@Then(\"verify purchase candidate status\")\n\tpublic void verify_purchase_candidate_status() throws IOException\n\t{\n\t\tfinal String responseJson = testContext.getApiResponse().getContent();\n\t\tfinal com.fasterxml.jackson.databind.ObjectMapper mapper = newJsonObjectMapper();\n\n\t\t//response\n\t\tfinal JsonPurchaseCandidateResponse response = mapper.readValue(responseJson, JsonPurchaseCandidateResponse.class);\n\t\tassertThat(response.getPurchaseCandidates()).hasSizeGreaterThan(0);\n\n\t\tfinal JsonPurchaseCandidate candidate = response.getPurchaseCandidates().get(0);\n\t\tfinal JsonMetasfreshId metasfreshId = candidate.getMetasfreshId();\n\n\t\tfinal PurchaseCandidate persistedResult = purchaseCandidateRepo.getById(PurchaseCandidateId.ofRepoId(metasfreshId.getValue()));\n\t\tvalidatePurchaseCandidate(persistedResult, candidate);\n\n\t\tassertThat(candidate.isProcessed()).isTrue();\n\t\tassertThat(candidate.getPurchaseOrders()).hasSize(1);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 162,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2/CreatePurchaseCandidate_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/purchasecandidate/v2",
      "filename": "CreatePurchaseCandidate_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1876,
    "annotation": "\n\t@And(\"wait until de.metas.material rabbitMQ queue is empty or throw exception after 5 minutes\")",
    "glue_code": "\t@And(\"wait until de.metas.material rabbitMQ queue is empty or throw exception after 5 minutes\")\n\tpublic void wait_empty_material_queue() throws InterruptedException\n\t{\n\t\twaitEmptyMaterialQueue();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 98,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1877,
    "annotation": "\n\t@Given(\"rabbitMQ queue is created\")",
    "glue_code": "\t@Given(\"rabbitMQ queue is created\")\n\tpublic void create_queue(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateQueue(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 104,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1878,
    "annotation": "\n\t@Given(\"rabbitMQ channel is created\")",
    "glue_code": "\t@Given(\"rabbitMQ channel is created\")\n\tpublic void create_channel(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateChannel(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 124,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1879,
    "annotation": "\n\t@Given(\"register consumer for queue\")",
    "glue_code": "\t@Given(\"register consumer for queue\")\n\tpublic void register_consumer_for_queue(@NonNull final DataTable dataTable) throws IOException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tregisterConsumerForQueue(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 134,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1880,
    "annotation": "\n\t@Then(\"consumer {string} receives messages\")",
    "glue_code": "\t@Then(\"consumer {string} receives messages\")\n\tpublic void consumer_receives_number_of_messages(\n\t\t\t@NonNull final String consumerIdentifier,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\n\t\tfinal Stream<String> expectedBodiesStream = tableRows.stream()\n\t\t\t\t.map(row -> DataTableUtil.extractStringForColumnName(row, \"Event.body\"));\n\n\t\tconsumerReceivesEvents(expectedBodiesStream, consumerIdentifier);\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 154,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1881,
    "annotation": "\n\t@Then(\"^consumer (.*) receives no message within the next (.)s$\")",
    "glue_code": "\t@Then(\"^consumer (.*) receives no message within the next (.)s$\")\n\tpublic void consumer_receives_no_message(@NonNull final String consumerIdentifier, final int timeoutSec) throws InterruptedException\n\t{\n\t\tfinal RabbitMQConsumer consumer = consumerTable.get(consumerIdentifier);\n\n\t\tfinal String receivedMessage = consumer.waitForMessage(timeoutSec);\n\n\t\tassertThat(receivedMessage).isNull();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 167,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1882,
    "annotation": "\n\t@Then(\"channel is closed\")",
    "glue_code": "\t@Then(\"channel is closed\")\n\tpublic void close_channel(@NonNull final DataTable dataTable) throws IOException, TimeoutException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcloseChannel(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 177,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1883,
    "annotation": "\n\t@And(\"serverBoot local queue is created\")",
    "glue_code": "\t@And(\"serverBoot local queue is created\")\n\tpublic void create_serverBoot_queue(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateServerBootQueue(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 187,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1884,
    "annotation": "\n\t@Then(\"deregister queue for topic\")",
    "glue_code": "\t@Then(\"deregister queue for topic\")\n\tpublic void deregister_queue_for_topic(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tderegisterQueueForTopic(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 197,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/RabbitMQ_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "RabbitMQ_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1935,
    "annotation": "\n\t@And(\"topic is created\")",
    "glue_code": "\t@And(\"topic is created\")\n\tpublic void register_topic(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tregisterTopic(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 43,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ/Topic_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/rabbitMQ",
      "filename": "Topic_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1945,
    "annotation": "\n\t@And(\"^after not more than (.*)s, M_ReceiptSchedule are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, M_ReceiptSchedule are found:$\")\n\tpublic void there_are_receiptSchedule(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, () -> loadReceiptSchedule(tableRow));\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String receiptScheduleIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_ReceiptSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ReceiptSchedule receiptSchedule = receiptScheduleTable.get(receiptScheduleIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(receiptSchedule);\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartnerRecord = bPartnerTable.get(bPartnerIdentifier);\n\n\t\t\tfinal String bpPartnerLocationIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer bPartnerLocationID = bPartnerLocationTable.getOptional(bpPartnerLocationIdentifier)\n\t\t\t\t\t.map(I_C_BPartner_Location::getC_BPartner_Location_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(bpPartnerLocationIdentifier));\n\t\t\tsoftly.assertThat(bPartnerLocationID).isNotNull();\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer productID = productTable.getOptional(productIdentifier)\n\t\t\t\t\t.map(I_M_Product::getM_Product_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(productIdentifier));\n\t\t\tsoftly.assertThat(productID).isNotNull();\n\n\t\t\tfinal BigDecimal qtyOrdered = DataTableUtil.extractBigDecimalForColumnName(tableRow, COLUMNNAME_QtyOrdered);\n\n\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringForColumnName(tableRow, COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Warehouse warehouse = warehouseTable.get(warehouseIdentifier);\n\n\t\t\tsoftly.assertThat(receiptSchedule.getC_Order_ID()).isEqualTo(order.getC_Order_ID());\n\t\t\tsoftly.assertThat(receiptSchedule.getC_OrderLine_ID()).isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\tsoftly.assertThat(receiptSchedule.getC_BPartner_ID()).isEqualTo(bPartnerRecord.getC_BPartner_ID());\n\t\t\tsoftly.assertThat(receiptSchedule.getC_BPartner_Location_ID()).isEqualTo(bPartnerLocationID);\n\t\t\tsoftly.assertThat(receiptSchedule.getM_Product_ID()).isEqualTo(productID);\n\t\t\tsoftly.assertThat(receiptSchedule.getQtyOrdered()).isEqualTo(qtyOrdered);\n\t\t\tsoftly.assertThat(receiptSchedule.getM_Warehouse_ID()).isEqualTo(warehouse.getM_Warehouse_ID());\n\n\t\t\tfinal BigDecimal qtyMoved = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, \"OPT.\" + I_M_ReceiptSchedule.COLUMNNAME_QtyMoved);\n\t\t\tif (qtyMoved != null)\n\t\t\t{\n\t\t\t\tsoftly.assertThat(receiptSchedule.getQtyMoved()).isEqualTo(qtyMoved);\n\t\t\t}\n\n\t\t\tfinal boolean processed = DataTableUtil.extractBooleanForColumnNameOr(tableRow, \"OPT.\" + I_M_ReceiptSchedule.COLUMNNAME_Processed, false);\n\t\t\tsoftly.assertThat(receiptSchedule.isProcessed()).isEqualTo(processed);\n\n\t\t\tfinal BigDecimal qtyOrderedTU = DataTableUtil.extractBigDecimalOrNullForColumnName(tableRow, \"OPT.\" + I_M_ReceiptSchedule.COLUMNNAME_QtyOrderedTU);\n\t\t\tif (qtyOrderedTU != null)\n\t\t\t{\n\t\t\t\tfinal de.metas.handlingunits.model.I_C_OrderLine orderLine1 = InterfaceWrapperHelper.load(receiptSchedule.getC_OrderLine_ID(), de.metas.handlingunits.model.I_C_OrderLine.class);\n\t\t\t\tsoftly.assertThat(orderLine1.getQtyEnteredTU()).isEqualTo(qtyOrderedTU);\n\t\t\t}\n\n\t\t\tfinal String flatrateTermIdentifier = DataTableUtil.extractStringOrNullForColumnName(tableRow, \"OPT.\" + I_ModCntr_Log.COLUMNNAME_C_Flatrate_Term_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(flatrateTermIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Flatrate_Term flatrateTermRecord = flatrateTermTable.get(flatrateTermIdentifier);\n\t\t\t\tsoftly.assertThat(receiptSchedule.getC_Flatrate_Term_ID()).as(I_M_ReceiptSchedule.COLUMNNAME_C_Flatrate_Term_ID).isEqualTo(flatrateTermRecord.getC_Flatrate_Term_ID());\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\n\t\t\treceiptScheduleTable.putOrReplace(receiptScheduleIdentifier, receiptSchedule);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 125,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule/M_ReceiptSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule",
      "filename": "M_ReceiptSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1946,
    "annotation": "\n\t@And(\"^there is no M_ReceiptSchedule for C_OrderLine (.*)$\")",
    "glue_code": "\t@And(\"^there is no M_ReceiptSchedule for C_OrderLine (.*)$\")\n\tpublic void validate_no_M_ReceiptSchedule_created(@NonNull final String purchaseOrderLineIdentifier)\n\t{\n\t\tfinal I_C_OrderLine purchaseOrderLine = orderLineTable.get(purchaseOrderLineIdentifier);\n\t\tfinal OrderLineId purchaseOrderLineId = OrderLineId.ofRepoId(purchaseOrderLine.getC_OrderLine_ID());\n\n\t\tvalidateNoReceiptScheduleCreatedForPurchaseOrderLine(purchaseOrderLineId);\n\n\t\tfinal IReceiptScheduleProducer producer = receiptScheduleProducerFactory.createProducer(I_C_OrderLine.Table_Name, false);\n\n\t\tfinal List<I_M_ReceiptSchedule> purchaseOrderReceiptSchedules = producer.createOrUpdateReceiptSchedules(purchaseOrderLine, Collections.emptyList());\n\t\tassertThat(purchaseOrderReceiptSchedules).isNull();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 201,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule/M_ReceiptSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule",
      "filename": "M_ReceiptSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1947,
    "annotation": "\n\t@And(\"^the M_ReceiptSchedule identified by (.*) is (closed|reactivated)$\")",
    "glue_code": "\t@And(\"^the M_ReceiptSchedule identified by (.*) is (closed|reactivated)$\")\n\tpublic void M_ReceiptSchedule_action(@NonNull final String receiptScheduleIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_M_ReceiptSchedule receiptSchedule = receiptScheduleTable.get(receiptScheduleIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase closed:\n\t\t\t\treceiptScheduleBL.close(receiptSchedule);\n\t\t\t\tbreak;\n\t\t\tcase reactivated:\n\t\t\t\treceiptScheduleBL.reopen(receiptSchedule);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled M_ReceiptSchedule action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 215,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule/M_ReceiptSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule",
      "filename": "M_ReceiptSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1948,
    "annotation": "\n\t@And(\"^trigger (EMPTIES RECEIVE|EMPTIES RETURN) process:$\")",
    "glue_code": "\t@And(\"^trigger (EMPTIES RECEIVE|EMPTIES RETURN) process:$\")\n\tpublic void trigger_empties_process(@NonNull final String type, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> table = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : table)\n\t\t{\n\t\t\tif (type.equals(EMPTIES_RECEIVE))\n\t\t\t{\n\t\t\t\tcreateInOutEmpties(X_M_InOut.MOVEMENTTYPE_CustomerReturns, row);\n\t\t\t}\n\t\t\telse if (type.equals(EMPTIES_RETURN))\n\t\t\t{\n\t\t\t\tcreateInOutEmpties(X_M_InOut.MOVEMENTTYPE_VendorReturns, row);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new RuntimeException(\"ReturnMovementType \" + type + \" not supported!\");\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 235,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule/M_ReceiptSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/receiptschedule",
      "filename": "M_ReceiptSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1936,
    "annotation": "\n\t@Given(\"update AD_Ref_Lists:\")",
    "glue_code": "\t@Given(\"update AD_Ref_Lists:\")\n\tpublic void metasfresh_contains_modcntr_types(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tupdateRefLists(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 49,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/reflist/AD_Ref_List_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/reflist",
      "filename": "AD_Ref_List_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1937,
    "annotation": "\n\t@Given(\"load AD_Ref_Lists:\")",
    "glue_code": "\t@Given(\"load AD_Ref_Lists:\")\n\tpublic void load_ad_ref_lists(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadRefLists(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/reflist/AD_Ref_List_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/reflist",
      "filename": "AD_Ref_List_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1956,
    "annotation": "\n\t@And(\"^after not more than (.*)s, R_Request are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, R_Request are found:$\")\n\tpublic void validate_created_r_requests(final int timeoutSec, @NonNull final DataTable table) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> tableRow : dataTable)\n\t\t{\n\t\t\tfinal String requestIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_R_Request.COLUMNNAME_R_RequestType_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_R_Request.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedBPartnerId = bPartnerTable.getOptional(bPartnerIdentifier)\n\t\t\t\t\t.map(I_C_BPartner::getC_BPartner_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(bPartnerIdentifier));\n\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_R_Request.COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedOrgId = orgTable.getOptional(orgIdentifier)\n\t\t\t\t\t.map(I_AD_Org::getAD_Org_ID)\n\t\t\t\t\t.orElseGet(() -> Integer.parseInt(orgIdentifier));\n\n\t\t\tfinal String internalName = DataTableUtil.extractStringForColumnName(tableRow, I_R_Request.COLUMNNAME_R_RequestType_InternalName);\n\n\t\t\tfinal Supplier<Boolean> QueryExecutor = () -> {\n\n\t\t\t\tfinal I_R_Request requestRecord = queryBL.createQueryBuilder(I_R_Request.class)\n\t\t\t\t\t\t.addEqualsFilter(I_R_Request.COLUMNNAME_C_BPartner_ID, expectedBPartnerId)\n\t\t\t\t\t\t.addEqualsFilter(I_R_Request.COLUMNNAME_AD_Org_ID, expectedOrgId)\n\t\t\t\t\t\t.addEqualsFilter(I_R_Request.COLUMNNAME_R_RequestType_InternalName, internalName)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.firstOnly(I_R_Request.class);\n\n\n\t\t\t\tif (requestRecord == null)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\trequestTable.putOrReplace(requestIdentifier, requestRecord);\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, QueryExecutor);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 62,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/request/R_Request_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/request",
      "filename": "R_Request_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1949,
    "annotation": "\n\t@And(\"load S_Resource:\")",
    "glue_code": "\t@And(\"load S_Resource:\")\n\tpublic void load_S_Resource(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(\"S_Resource_ID.Identifier\")\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal ResourceId resourceId = ResourceId.ofRepoId(row.getAsInt(COLUMNNAME_S_Resource_ID));\n\t\t\t\t\tfinal I_S_Resource resource = ResourceRepository.retrieveRecordById(resourceId);\n\t\t\t\t\tassertThat(resource).isNotNull();\n\n\t\t\t\t\tresourceTable.put(row.getAsIdentifier(), resource);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 53,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resource/S_Resource_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resource",
      "filename": "S_Resource_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1950,
    "annotation": "\n\t@And(\"update S_Resource:\")",
    "glue_code": "\t@And(\"update S_Resource:\")\n\tpublic void update_S_Resource(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_S_Resource_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal StepDefDataIdentifier identifier = row.getAsIdentifier();\n\t\t\t\t\tfinal I_S_Resource resource = resourceTable.get(identifier);\n\t\t\t\t\tassertThat(resource).isNotNull();\n\n\t\t\t\t\trow.getAsOptionalQuantity(I_S_Resource.COLUMNNAME_CapacityPerProductionCycle, I_S_Resource.COLUMNNAME_CapacityPerProductionCycle + \"UOMCode\", uomDao::getByX12DE355)\n\t\t\t\t\t\t\t.ifPresent(capacityPerProductionCycle -> {\n\t\t\t\t\t\t\t\tresource.setCapacityPerProductionCycle(capacityPerProductionCycle.toBigDecimal());\n\t\t\t\t\t\t\t\tresource.setCapacityPerProductionCycle_UOM_ID(capacityPerProductionCycle.getUomId().getRepoId());\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\tsaveRecord(resource);\n\n\t\t\t\t\tresourceTable.putOrReplace(identifier, resource);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 67,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resource/S_Resource_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resource",
      "filename": "S_Resource_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1951,
    "annotation": "\n\t@And(\"create S_Resource:\")",
    "glue_code": "\t@And(\"create S_Resource:\")\n\tpublic void createResources(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::createResource);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 89,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resource/S_Resource_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resource",
      "filename": "S_Resource_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1955,
    "annotation": "\n\t@And(\"metasfresh contains S_Resource_Group with the following id:\")",
    "glue_code": "\t@And(\"metasfresh contains S_Resource_Group with the following id:\")\n\tpublic void create_S_Resource_Group(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateResourceGroup(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resourceGroup/S_Resource_Group_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resourceGroup",
      "filename": "S_Resource_Group_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1999,
    "annotation": "\n\t@And(\"metasfresh contains S_ResourceType:\")",
    "glue_code": "\t@And(\"metasfresh contains S_ResourceType:\")\n\tpublic void metasfresh_contains_S_ResourceType(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_S_ResourceType.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_S_ResourceType.COLUMNNAME_Value);\n\t\t\tfinal String productCategoryIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Product_Category_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String uomCode = DataTableUtil.extractStringForColumnName(row, \"UomCode\");\n\t\t\tfinal boolean isTimeSlot = DataTableUtil.extractBooleanForColumnName(row, I_S_ResourceType.COLUMNNAME_IsTimeSlot);\n\n\t\t\tfinal I_S_ResourceType resourceType = InterfaceWrapperHelper.newInstance(I_S_ResourceType.class);\n\n\t\t\tresourceType.setName(name);\n\t\t\tresourceType.setValue(value);\n\t\t\tresourceType.setIsTimeSlot(isTimeSlot);\n\t\t\tresourceType.setTimeSlotStart(Timestamp.valueOf(\"2022-08-08 13:11:00\"));\n\t\t\tresourceType.setTimeSlotEnd(Timestamp.valueOf(\"2022-08-08 20:11:00\"));\n\n\t\t\tfinal I_C_UOM uom = uomDao.getByX12DE355(X12DE355.ofCode(uomCode));\n\t\t\tresourceType.setC_UOM_ID(uom.getC_UOM_ID());\n\n\t\t\tfinal I_M_Product_Category productCategory = productCategoryTable.get(productCategoryIdentifier);\n\t\t\tassertThat(productCategory).isNotNull();\n\t\t\tresourceType.setM_Product_Category_ID(productCategory.getM_Product_Category_ID());\n\n\t\t\tsaveRecord(resourceType);\n\n\t\t\tfinal String resourceTypeIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_ResourceType.COLUMNNAME_S_ResourceType_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tresourceTypeTable.putOrReplace(resourceTypeIdentifier, resourceType);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resourcetype/S_ResourceType_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/resourcetype",
      "filename": "S_ResourceType_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2084,
    "annotation": "\n\t@Given(\"load AD_Roles\")",
    "glue_code": "\t@Given(\"load AD_Roles\")\n\tpublic void load_AD_Role(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tloadADRole(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/role/AD_Role_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/role",
      "filename": "AD_Role_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2085,
    "annotation": "\n\t@Given(\"user has role\")",
    "glue_code": "\t@Given(\"user has role\")\n\tpublic void add_Role(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\taddRole(row);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/role/AD_Role_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/role",
      "filename": "AD_Role_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1995,
    "annotation": "\n\t@And(\"AD_Scheduler for classname {string} is disabled\")",
    "glue_code": "\t@And(\"AD_Scheduler for classname {string} is disabled\")\n\tpublic void disable_AD_Scheduler_for_className(@NonNull final String className)\n\t{\n\t\tfinal AdProcessId targetProcessId = adProcessDAO.retrieveProcessIdByClassIfUnique(className);\n\n\t\tCheck.assumeNotNull(targetProcessId, \"There should always be an AD_Process record for classname:\" + className);\n\n\t\tschedulerEventBusService.postRequest(ManageSchedulerRequest.builder()\n\t\t\t\t\t\t\t\t\t\t\t\t\t .schedulerSearchKey(SchedulerSearchKey.of(targetProcessId))\n\t\t\t\t\t\t\t\t\t\t\t\t\t .clientId(Env.getClientId())\n\t\t\t\t\t\t\t\t\t\t\t\t\t .schedulerAction(SchedulerAction.DISABLE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t .supervisorAction(ManageSchedulerRequest.SupervisorAction.DISABLE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t .build());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 42,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/scheduler/AD_Scheduler_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/scheduler",
      "filename": "AD_Scheduler_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1996,
    "annotation": "\n\t@And(\"AD_Scheduler for classname {string} is enabled\")",
    "glue_code": "\t@And(\"AD_Scheduler for classname {string} is enabled\")\n\tpublic void enable_AD_Scheduler_for_className(@NonNull final String className)\n\t{\n\t\tfinal AdProcessId targetProcessId = adProcessDAO.retrieveProcessIdByClassIfUnique(className);\n\n\t\tCheck.assumeNotNull(targetProcessId, \"There should always be an AD_Process record for classname:\" + className);\n\n\t\tschedulerEventBusService.postRequest(ManageSchedulerRequest.builder()\n\t\t\t\t\t\t\t\t\t\t\t\t\t .schedulerSearchKey(SchedulerSearchKey.of(targetProcessId))\n\t\t\t\t\t\t\t\t\t\t\t\t\t .clientId(Env.getClientId())\n\t\t\t\t\t\t\t\t\t\t\t\t\t .schedulerAction(SchedulerAction.ENABLE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t .supervisorAction(ManageSchedulerRequest.SupervisorAction.ENABLE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t .build());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/scheduler/AD_Scheduler_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/scheduler",
      "filename": "AD_Scheduler_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1997,
    "annotation": "\n\t@And(\"AD_Scheduler for classname {string} is ran once\")",
    "glue_code": "\t@And(\"AD_Scheduler for classname {string} is ran once\")\n\tpublic void runOnceNow_AD_Scheduler_for_className(@NonNull final String className)\n\t{\n\t\tfinal AdProcessId targetProcessId = adProcessDAO.retrieveProcessIdByClassIfUnique(className);\n\n\t\tCheck.assumeNotNull(targetProcessId, \"There should always be an AD_Process record for classname:\" + className);\n\n\t\tschedulerEventBusService.postRequest(ManageSchedulerRequest.builder()\n\t\t\t\t.schedulerSearchKey(SchedulerSearchKey.of(targetProcessId))\n\t\t\t\t.clientId(Env.getClientId())\n\t\t\t\t.schedulerAction(SchedulerAction.RESTART)\n\t\t\t\t.build());\n\n\t\tschedulerEventBusService.postRequest(ManageSchedulerRequest.builder()\n\t\t\t\t.schedulerSearchKey(SchedulerSearchKey.of(targetProcessId))\n\t\t\t\t.clientId(Env.getClientId())\n\t\t\t\t.schedulerAction(SchedulerAction.RUN_ONCE)\n\t\t\t\t.build());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 72,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/scheduler/AD_Scheduler_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/scheduler",
      "filename": "AD_Scheduler_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1971,
    "annotation": "\n\t@Given(\"metasfresh contains M_SectionCode:\")",
    "glue_code": "\t@Given(\"metasfresh contains M_SectionCode:\")\n\tpublic void metasfresh_contains_M_SectionCode(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::upsertM_SectionCode);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/sectioncode/M_SectionCode_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/sectioncode",
      "filename": "M_SectionCode_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1972,
    "annotation": "\n\t@Given(\"create M_SectionCode:\")",
    "glue_code": "\t@Given(\"create M_SectionCode:\")\n\tpublic void create_M_SectionCode(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::createM_SectionCode);\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 56,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/sectioncode/M_SectionCode_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/sectioncode",
      "filename": "M_SectionCode_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1986,
    "annotation": "\n\t@Given(\"metasfresh contains AD_Sequence:\")",
    "glue_code": "\t@Given(\"metasfresh contains AD_Sequence:\")\n\tpublic void metasfresh_contains_AD_Sequence(@NonNull final io.cucumber.datatable.DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateAD_Sequence(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 48,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/seqNo/AD_Sequence_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/seqNo",
      "filename": "AD_Sequence_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1952,
    "annotation": "\n\t@And(\"metasfresh contains S_EffortControl:\")",
    "glue_code": "\t@And(\"metasfresh contains S_EffortControl:\")\n\tpublic void create_S_EffortControl(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String activityIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Activity_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Activity activity = activityTable.get(activityIdentifier);\n\n\t\t\tfinal String projectIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Project_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Project project = projectTable.get(projectIdentifier);\n\n\t\t\tfinal I_S_EffortControl effortControl = CoalesceUtil.coalesceSuppliersNotNull(() -> queryBL.createQueryBuilder(I_S_EffortControl.class)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .addEqualsFilter(COLUMNNAME_C_Activity_ID, activity.getC_Activity_ID())\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .addEqualsFilter(COLUMNNAME_C_Project_ID, project.getC_Project_ID())\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .create()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .firstOnlyOrNull(I_S_EffortControl.class),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  () -> newInstance(I_S_EffortControl.class));\n\n\t\t\teffortControl.setC_Activity_ID(activity.getC_Activity_ID());\n\t\t\teffortControl.setC_Project_ID(project.getC_Project_ID());\n\n\t\t\tfinal BigDecimal invoiceableHours = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_S_EffortControl.COLUMNNAME_InvoiceableHours);\n\t\t\tif (invoiceableHours != null)\n\t\t\t{\n\t\t\t\teffortControl.setInvoiceableHours(invoiceableHours);\n\t\t\t}\n\n\t\t\tfinal BigDecimal budget = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_S_EffortControl.COLUMNNAME_Budget);\n\t\t\tif (budget != null)\n\t\t\t{\n\t\t\t\teffortControl.setBudget(budget);\n\t\t\t}\n\n\t\t\tfinal String pendingEffortSum = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_S_EffortControl.COLUMNNAME_PendingEffortSum);\n\t\t\tif (Check.isNotBlank(pendingEffortSum))\n\t\t\t{\n\t\t\t\teffortControl.setPendingEffortSum(pendingEffortSum);\n\t\t\t}\n\n\t\t\tfinal String effortSum = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_S_EffortControl.COLUMNNAME_EffortSum);\n\t\t\tif (Check.isNotBlank(effortSum))\n\t\t\t{\n\t\t\t\teffortControl.setEffortSum(effortSum);\n\t\t\t}\n\n\t\t\tsaveRecord(effortControl);\n\n\t\t\tfinal String effortControlIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_EffortControl.COLUMNNAME_S_EffortControl_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\teffortControlTable.put(effortControlIdentifier, effortControl);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 77,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_EffortControl_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_EffortControl_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1953,
    "annotation": "\n\t@And(\"^after not more than (.*)s, S_EffortControl is found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, S_EffortControl is found:$\")\n\tpublic void retrieve_S_EffortControl(final int timeoutSeconds, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWait(timeoutSeconds, 500, () -> loadEffortControl(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 129,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_EffortControl_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_EffortControl_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1954,
    "annotation": "\n\t@And(\"^after not more than (.*)s, S_EffortControl is validated:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, S_EffortControl is validated:$\")\n\tpublic void validate_S_EffortControl(final int timeoutSeconds, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tStepDefUtil.tryAndWaitForItem(timeoutSeconds, 500, () -> validateEffortControl(row));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 138,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_EffortControl_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_EffortControl_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1957,
    "annotation": "\n\t@And(\"metasfresh contains S_Issue:\")",
    "glue_code": "\t@And(\"metasfresh contains S_Issue:\")\n\tpublic void add_S_Issue(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\taddIssue(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 88,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1958,
    "annotation": "\n\t@And(\"update S_Issue:\")",
    "glue_code": "\t@And(\"update S_Issue:\")\n\tpublic void update_S_Issue(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::updateIssue);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 184,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1959,
    "annotation": "\n\t@And(\"load Cost Center Activity from issue:\")",
    "glue_code": "\t@And(\"load Cost Center Activity from issue:\")\n\tpublic void get_Cost_Center(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tloadCostCenterActivityFromIssue(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 190,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1960,
    "annotation": "\n\t@And(\"Cost Center Activity removed from issue:\")",
    "glue_code": "\t@And(\"Cost Center Activity removed from issue:\")\n\tpublic void removed_Cost_Center(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tassertThat(loadCostCenterActivityFromIssue(row)).isFalse();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 199,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1961,
    "annotation": "\n\t@And(\"metasfresh contains S_IssueLabel:\")",
    "glue_code": "\t@And(\"metasfresh contains S_IssueLabel:\")\n\tpublic void add_S_IssueLabel(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String issueIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_S_Issue_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_S_Issue issue = sIssueTable.get(issueIdentifier);\n\n\t\t\tfinal String label = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_Label);\n\n\t\t\tfinal I_S_IssueLabel issueLabel = newInstance(I_S_IssueLabel.class);\n\t\t\tissueLabel.setS_Issue_ID(issue.getS_Issue_ID());\n\t\t\tissueLabel.setLabel(label);\n\n\t\t\tsaveRecord(issueLabel);\n\n\t\t\tfinal String issueLabelIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_S_IssueLabel_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tsIssueLabelTable.put(issueLabelIdentifier, issueLabel);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 208,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1962,
    "annotation": "\n\t@And(\"S_IssueLabel is found:\")",
    "glue_code": "\t@And(\"S_IssueLabel is found:\")\n\tpublic void retrieve_S_IssueLabel(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String issueIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_S_Issue_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_S_Issue issue = sIssueTable.get(issueIdentifier);\n\n\t\t\tfinal String label = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_Label);\n\n\t\t\tfinal I_S_IssueLabel issueLabel = queryBL.createQueryBuilder(I_S_IssueLabel.class)\n\t\t\t\t\t.addEqualsFilter(I_S_IssueLabel.COLUMNNAME_S_Issue_ID, issue.getS_Issue_ID())\n\t\t\t\t\t.addEqualsFilter(I_S_IssueLabel.COLUMNNAME_Label, label)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_S_IssueLabel.class);\n\n\t\t\tfinal String issueLabelIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_S_IssueLabel_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tsIssueLabelTable.put(issueLabelIdentifier, issueLabel);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 229,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1963,
    "annotation": "\n\t@And(\"S_IssueLabel is removed:\")",
    "glue_code": "\t@And(\"S_IssueLabel is removed:\")\n\tpublic void removed_S_IssueLabel(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String issueLabelIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_S_IssueLabel_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Optional<I_S_IssueLabel> issueLabel = sIssueLabelTable.getOptional(issueLabelIdentifier);\n\n\t\t\tassertThat(issueLabel.isPresent()).isFalse();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 250,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1964,
    "annotation": "\n\t@And(\"remove S_IssueLabel:\")",
    "glue_code": "\t@And(\"remove S_IssueLabel:\")\n\tpublic void remove_S_IssueLabel(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String issueLabelIdentifier = DataTableUtil.extractStringForColumnName(row, I_S_IssueLabel.COLUMNNAME_S_IssueLabel_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_S_IssueLabel issueLabel = sIssueLabelTable.get(issueLabelIdentifier);\n\n\t\t\tdeleteRecord(issueLabel);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 262,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1965,
    "annotation": "\n\t@And(\"reopen S_Issue:\")",
    "glue_code": "\t@And(\"reopen S_Issue:\")\n\tpublic void reopenS_Issue(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::updateIssue);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 274,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1966,
    "annotation": "\n\t@And(\"validate S_Issue:\")",
    "glue_code": "\t@And(\"validate S_Issue:\")\n\tpublic void validateS_Issue(@NonNull final DataTable dataTable)\n\t{\n\t\tdataTable.asMaps().forEach(this::validateIssue);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 280,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_Issue_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_Issue_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1998,
    "annotation": "\n\t@And(\"metasfresh contains S_TimeBooking:\")",
    "glue_code": "\t@And(\"metasfresh contains S_TimeBooking:\")\n\tpublic void create_S_TimeBooking(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String issueIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_S_Issue_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_S_Issue issue = sIssueTable.get(issueIdentifier);\n\n\t\t\tfinal String hoursAndMinutes = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_HoursAndMinutes);\n\n\t\t\tfinal String userPerformingIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_User_Performing_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_User userPerforming = userTable.get(userPerformingIdentifier);\n\n\t\t\tfinal Timestamp bookedDate = DataTableUtil.extractDateTimestampForColumnName(row, COLUMNNAME_BookedDate);\n\n\t\t\tfinal String timeBookingIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_S_TimeBooking_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_S_TimeBooking timeBooking = timeBookingTable.getOptional(timeBookingIdentifier)\n\t\t\t\t\t.orElseGet(() -> newInstance(I_S_TimeBooking.class));\n\n\t\t\ttimeBooking.setS_Issue_ID(issue.getS_Issue_ID());\n\t\t\ttimeBooking.setHoursAndMinutes(hoursAndMinutes);\n\t\t\ttimeBooking.setAD_User_Performing_ID(userPerforming.getAD_User_ID());\n\t\t\ttimeBooking.setBookedDate(bookedDate);\n\n\t\t\tsaveRecord(timeBooking);\n\n\t\t\ttimeBookingTable.putOrReplace(timeBookingIdentifier, timeBooking);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 61,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue/S_TimeBooking_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/serviceIssue",
      "filename": "S_TimeBooking_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1938,
    "annotation": "\n\t@And(\"^validate the created (shipment|material receipt) lines$\")",
    "glue_code": "\t@And(\"^validate the created (shipment|material receipt) lines$\")\n\tpublic void validate_created_M_InOutLines(@NonNull final String model_UNUSED, @NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::validateAndLoadInOutLine);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 115,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1939,
    "annotation": "\n\t@And(\"^validate the created (shipment|material receipt) lines by id$\")",
    "glue_code": "\t@And(\"^validate the created (shipment|material receipt) lines by id$\")\n\tpublic void validateShipmentLinesById(@NonNull final String model_UNUSED, @NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach((row) -> {\n\t\t\tfinal I_M_InOutLine shipmentLine = InterfaceWrapperHelper.create(row.getAsIdentifier().lookupIn(shipmentLineTable), I_M_InOutLine.class);\n\t\t\tSharedTestContext.put(\"shipmentLine\", shipmentLine);\n\n\t\t\tvalidateShipmentLine(shipmentLine, row);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 171,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1940,
    "annotation": "\n\t@And(\"^validate the (shipment|material receipt) lines do not exist$\")",
    "glue_code": "\t@And(\"^validate the (shipment|material receipt) lines do not exist$\")\n\tpublic void validate_no_created_M_InOutLine(@NonNull final String model_UNUSED, @NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringForColumnName(row, \"M_InOut_ID.Identifier\");\n\n\t\t\tfinal I_M_InOut shipmentRecord = shipmentTable.get(shipmentIdentifier);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer expectedProductId = productTable.get(productIdentifier).getM_Product_ID();\n\n\t\t\t//dev-note: we assume the tests are not using the same product on different lines\n\t\t\tfinal IQueryBuilder<I_M_InOutLine> lineQueryBuilder = queryBL.createQueryBuilder(I_M_InOutLine.class)\n\t\t\t\t\t.addEqualsFilter(I_M_InOutLine.COLUMNNAME_M_InOut_ID, shipmentRecord.getM_InOut_ID())\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_Product_ID, expectedProductId);\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_InOutLine.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tlineQueryBuilder.addEqualsFilter(I_M_InOutLine.COLUMNNAME_C_OrderLine_ID, orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal I_M_InOutLine shipmentLineRecord = lineQueryBuilder\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_M_InOutLine.class);\n\n\t\t\tassertThat(shipmentLineRecord).isNull();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 182,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1941,
    "annotation": "\n\t@And(\"update M_InOutLine:\")",
    "glue_code": "\t@And(\"update M_InOutLine:\")\n\tpublic void update_M_InOutLine(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String shipmentLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOutLine.COLUMNNAME_M_InOutLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_InOutLine shipmentLine = shipmentLineTable.get(shipmentLineIdentifier, I_M_InOutLine.class);\n\t\t\tassertThat(shipmentLine).isNotNull();\n\n\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalForColumnName(row, I_M_InOutLine.COLUMNNAME_QtyEntered);\n\t\t\tshipmentLine.setQtyEntered(qtyEntered);\n\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(row, I_M_InOutLine.COLUMNNAME_MovementQty);\n\t\t\tshipmentLine.setMovementQty(movementQty);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(shipmentLine);\n\n\t\t\tshipmentLineTable.putOrReplace(shipmentLineIdentifier, shipmentLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 215,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1942,
    "annotation": "\n\t@And(\"metasfresh contains M_InOutLine\")",
    "glue_code": "\t@And(\"metasfresh contains M_InOutLine\")\n\tpublic void metasfresh_contains_M_InOutLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> table = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : table)\n\t\t{\n\t\t\tfinal de.metas.handlingunits.model.I_M_InOutLine inOutLine = InterfaceWrapperHelper.newInstance(de.metas.handlingunits.model.I_M_InOutLine.class);\n\n\t\t\tfinal String inOutIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_InOut inOut = shipmentTable.get(inOutIdentifier);\n\t\t\tassertThat(inOut).isNotNull();\n\n\t\t\tinOutLine.setM_InOut_ID(inOut.getM_InOut_ID());\n\n\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalForColumnName(row, COLUMNNAME_QtyEntered);\n\t\t\tinOutLine.setQtyEntered(qtyEntered);\n\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(row, COLUMNNAME_MovementQty);\n\t\t\tinOutLine.setMovementQty(movementQty);\n\n\t\t\tfinal String uomCode = DataTableUtil.extractStringForColumnName(row, \"UomCode\");\n\t\t\tfinal I_C_UOM uom = uomDAO.getByX12DE355(X12DE355.ofCode(uomCode));\n\t\t\tassertThat(uom).isNotNull();\n\n\t\t\tinOutLine.setC_UOM_ID(uom.getC_UOM_ID());\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\tassertThat(product).isNotNull();\n\n\t\t\t\tinOutLine.setM_Product_ID(product.getM_Product_ID());\n\t\t\t}\n\n\t\t\tfinal String locatorIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_M_Locator_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(locatorIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Locator locator = locatorTable.get(locatorIdentifier);\n\t\t\t\tassertThat(locator).isNotNull();\n\n\t\t\t\tinOutLine.setM_Locator_ID(locator.getM_Locator_ID());\n\t\t\t}\n\n\t\t\tfinal Boolean isPackingMaterial = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + de.metas.inout.model.I_M_InOutLine.COLUMNNAME_IsPackagingMaterial);\n\t\t\tif (isPackingMaterial != null)\n\t\t\t{\n\t\t\t\tinOutLine.setIsPackagingMaterial(isPackingMaterial);\n\t\t\t}\n\n\t\t\tfinal Boolean isManualPackingMaterial = DataTableUtil.extractBooleanForColumnNameOrNull(row, \"OPT.\" + de.metas.handlingunits.model.I_M_InOutLine.COLUMNNAME_IsManualPackingMaterial);\n\t\t\tif (isManualPackingMaterial != null)\n\t\t\t{\n\t\t\t\tinOutLine.setIsManualPackingMaterial(isManualPackingMaterial);\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(inOutLine);\n\n\t\t\tfinal String inOutLineIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_InOutLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tshipmentLineTable.putOrReplace(inOutLineIdentifier, inOutLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 237,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1943,
    "annotation": "\n\t@And(\"^validate no M_InOutLine found for M_InOut identified by (.*)$\")",
    "glue_code": "\t@And(\"^validate no M_InOutLine found for M_InOut identified by (.*)$\")\n\tpublic void validate_no_M_InOutLine_for_inOut(@NonNull final String inOutIdentifier)\n\t{\n\t\tfinal I_M_InOut inOut = shipmentTable.get(inOutIdentifier);\n\t\tassertThat(inOut).isNotNull();\n\n\t\tfinal I_M_InOutLine inOutLine = queryBL.createQueryBuilder(I_M_InOutLine.class)\n\t\t\t\t.addEqualsFilter(COLUMNNAME_M_InOut_ID, inOut.getM_InOut_ID())\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyOrNull(I_M_InOutLine.class);\n\n\t\tassertThat(inOutLine).isNull();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 300,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1944,
    "annotation": "\n\t@Given(\"^delete M_InOutLine identified by (.*) is expecting error$\")",
    "glue_code": "\t@Given(\"^delete M_InOutLine identified by (.*) is expecting error$\")\n\tpublic void order_action_expecting_error(@NonNull final String inOutLineIdentifier, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal org.compiere.model.I_M_InOutLine inOutLine = shipmentLineTable.get(inOutLineIdentifier);\n\t\tAssertions.assertThat(inOutLine).isNotNull();\n\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tboolean errorThrown = false;\n\n\t\ttry\n\t\t{\n\t\t\tInterfaceWrapperHelper.delete(inOutLine);\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\terrorThrown = true;\n\n\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tif (errorMessageIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\n\t\t\t\tAssertions.assertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t}\n\t\t}\n\n\t\tAssertions.assertThat(errorThrown).isTrue();\n\t}",
    "original_keyword": "Given",
    "keyword": "Given",
    "line_in_the_file": 416,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_Line_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_Line_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1968,
    "annotation": "\n\t@And(\"^validate the created (shipments|material receipt)$\")",
    "glue_code": "\t@And(\"^validate the created (shipments|material receipt)$\")\n\tpublic void validate_created_shipments(@NonNull final String ignoredInoutType, @NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table).forEach(this::validate_created_shipment);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 153,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1969,
    "annotation": "\n\t@And(\"^after not more than (.*)s, M_InOut is found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, M_InOut is found:$\")\n\tpublic void shipmentsAreFound(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfor (final Map<String, String> tableRow : dataTable.asMaps())\n\t\t{\n\t\t\tfindShipment(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 296,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1970,
    "annotation": "\n\t@And(\"^after not more than (.*)s, Customer Return is found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, Customer Return is found:$\")\n\tpublic void customerReturnIsFound(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfindCustomerReturn(timeoutSec, row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 415,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1973,
    "annotation": "\n\t@And(\"^the (shipment|material receipt) identified by (.*) is (completed) and an exception with error-code (.*) is thrown\")",
    "glue_code": "\t@And(\"^the (shipment|material receipt) identified by (.*) is (completed) and an exception with error-code (.*) is thrown\")\n\tpublic void complete_inOut_expect_exception(\n\t\t\t@NonNull final String model_UNUSED,\n\t\t\t@NonNull final String shipmentIdentifier,\n\t\t\t@NonNull final String action,\n\t\t\t@NonNull final String errorCode)\n\t{\n\t\ttry\n\t\t{\n\t\t\tprocessInOut(model_UNUSED, shipmentIdentifier, action);\n\t\t\tassertThat(1).as(\"An Exception should have been thrown !\").isEqualTo(2);\n\t\t}\n\t\tcatch (final AdempiereException exception)\n\t\t{\n\t\t\tassertThat(exception.getErrorCode()).as(\"ErrorCode of %s\", exception).isEqualTo(errorCode);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 425,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1974,
    "annotation": "\n\t@And(\"^the (shipment|material receipt|return inOut) identified by (.*) is reversed as (.*)$\")",
    "glue_code": "\t@And(\"^the (shipment|material receipt|return inOut) identified by (.*) is reversed as (.*)$\")\n\tpublic void reverseInOut(\n\t\t\t@NonNull @SuppressWarnings(\"unused\") final String model_UNUSED,\n\t\t\t@NonNull final String identifier,\n\t\t\t@NonNull final String reversalIdentifier)\n\t{\n\t\tfinal I_M_InOut inout = inoutTable.get(identifier);\n\t\tInterfaceWrapperHelper.refresh(inout);\n\t\tdocumentBL.processEx(inout, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\n\t\tfinal InOutId reversalId = InOutId.ofRepoId(inout.getReversal_ID());\n\t\tfinal I_M_InOut reversal = inOutDAO.getById(reversalId);\n\t\tinoutTable.put(reversalIdentifier, reversal);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 443,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1975,
    "annotation": "\n\t@And(\"^the (shipment|material receipt|return inOut) identified by (.*) is (completed|reactivated|reversed|voided|closed)$\")",
    "glue_code": "\t@And(\"^the (shipment|material receipt|return inOut) identified by (.*) is (completed|reactivated|reversed|voided|closed)$\")\n\tpublic void processInOut(\n\t\t\t@NonNull @SuppressWarnings(\"unused\") final String model_UNUSED, \n\t\t\t@NonNull final String shipmentIdentifier, \n\t\t\t@NonNull final String action)\n\t{\n\t\tfinal I_M_InOut shipment = inoutTable.get(shipmentIdentifier);\n\t\tInterfaceWrapperHelper.refresh(shipment);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase completed:\n\t\t\t\tshipment.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MInOut.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(shipment, IDocument.ACTION_Complete, IDocument.STATUS_Completed);\n\t\t\t\tbreak;\n\t\t\tcase reactivated:\n\t\t\t\tshipment.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MInOut.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(shipment, IDocument.ACTION_ReActivate, IDocument.STATUS_InProgress);\n\t\t\t\tbreak;\n\t\t\tcase reversed:\n\t\t\t\tshipment.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MInOut.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(shipment, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t\tbreak;\n\t\t\tcase voided:\n\t\t\t\tshipment.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MInOut.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(shipment, IDocument.ACTION_Void, IDocument.STATUS_Voided);\n\t\t\t\tbreak;\n\t\t\tcase closed:\n\t\t\t\tshipment.setDocAction(IDocument.ACTION_Complete); // we need this because otherwise MInOut.completeIt() won't complete it\n\t\t\t\tdocumentBL.processEx(shipment, IDocument.ACTION_Close, IDocument.STATUS_Closed);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled M_InOut action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 458,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1976,
    "annotation": "\n\t@And(\"load M_InOut:\")",
    "glue_code": "\t@And(\"load M_InOut:\")\n\tpublic void loadM_InOut(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal BigDecimal qtyEntered = DataTableUtil.extractBigDecimalForColumnName(row, I_M_InOutLine.COLUMNNAME_QtyEntered);\n\n\t\t\tfinal IQueryBuilder<I_M_InOutLine> shipmentLineBuilder = queryBL.createQueryBuilder(I_M_InOutLine.class)\n\t\t\t\t\t.addEqualsFilter(I_M_InOutLine.COLUMNNAME_QtyEntered, qtyEntered);\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_InOutLine.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tshipmentLineBuilder.addEqualsFilter(I_M_InOutLine.COLUMNNAME_C_OrderLine_ID, orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tfinal I_M_InOutLine shipmentLine = shipmentLineBuilder.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_InOutLine.class);\n\n\t\t\tfinal String shipmentLineIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOutLine.COLUMNNAME_M_InOutLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinoutLineTable.putOrReplace(shipmentLineIdentifier, shipmentLine);\n\n\t\t\tfinal I_M_InOut shipment = InterfaceWrapperHelper.load(shipmentLine.getM_InOut_ID(), I_M_InOut.class);\n\t\t\tassertThat(shipment).isNotNull();\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_DocStatus);\n\t\t\tassertThat(shipment.getDocStatus()).isEqualTo(docStatus);\n\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\t\t\tassertThat(shipment.getC_Order_ID()).isEqualTo(order.getC_Order_ID());\n\t\t\t}\n\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinoutTable.putOrReplace(shipmentIdentifier, shipment);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 496,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1977,
    "annotation": "\n\t@And(\"perform shipment document action\")",
    "glue_code": "\t@And(\"perform shipment document action\")\n\tpublic void reverseShipment(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_M_InOut_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String docAction = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_DocAction);\n\n\t\t\tfinal I_M_InOut shipment = inoutTable.get(shipmentIdentifier);\n\n\t\t\tdocumentBL.processEx(shipment, docAction);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 537,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1978,
    "annotation": "\n\t@Then(\"locate M_InOut by shipment schedule Id\")",
    "glue_code": "\t@Then(\"locate M_InOut by shipment schedule Id\")\n\tpublic void locate_shipment_by_scheduleId(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tlocateShipmentByScheduleId(row);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 553,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1979,
    "annotation": "\n\t@And(\"validate M_In_Out status\")",
    "glue_code": "\t@And(\"validate M_In_Out status\")\n\tpublic void validate_M_In_Out_status(@NonNull final DataTable table)\n\t{\n\t\tfinal List<Map<String, String>> dataTable = table.asMaps();\n\t\tfor (final Map<String, String> row : dataTable)\n\t\t{\n\t\t\tfinal String shipmentIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_InOut shipment = inoutTable.get(shipmentIdentifier);\n\t\t\tInterfaceWrapperHelper.refresh(shipment);\n\n\t\t\tfinal String docStatus = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_DocStatus);\n\t\t\tassertThat(shipment.getDocStatus()).isEqualTo(docStatus);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 563,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1980,
    "annotation": "\n\t@And(\"^reset M_InOut packing lines for shipment (.*)$\")",
    "glue_code": "\t@And(\"^reset M_InOut packing lines for shipment (.*)$\")\n\tpublic void reset_M_InOut_PackingLines(@NonNull final String shipmentIdentifier)\n\t{\n\t\tfinal I_M_InOut shipment = inoutTable.get(shipmentIdentifier);\n\t\tassertThat(shipment).isNotNull();\n\n\t\thuInOutBL.recreatePackingMaterialLines(shipment);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 578,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1981,
    "annotation": "\n\t@And(\"^validate no M_InOut found for C_Order identified by (.*)$\")",
    "glue_code": "\t@And(\"^validate no M_InOut found for C_Order identified by (.*)$\")\n\tpublic void no_M_InOut_found(@NonNull final String orderIdentifier)\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\tassertThat(order).isNotNull();\n\n\t\tfinal I_M_InOut inOut = queryBL.createQueryBuilder(I_M_InOut.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(COLUMNNAME_C_Order_ID, order.getC_Order_ID())\n\t\t\t\t.create()\n\t\t\t\t.firstOnly(I_M_InOut.class);\n\n\t\tassertThat(inOut).isNull();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 587,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1982,
    "annotation": "\n\t@And(\"metasfresh contains M_InOut:\")",
    "glue_code": "\t@And(\"metasfresh contains M_InOut:\")\n\tpublic void create_M_InOut(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_M_InOut inOut = InterfaceWrapperHelper.newInstance(I_M_InOut.class);\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner bPartner = bpartnerTable.get(bpartnerIdentifier);\n\t\t\tassertThat(bPartner).isNotNull();\n\t\t\tinOut.setC_BPartner_ID(bPartner.getC_BPartner_ID());\n\n\t\t\tfinal String bpartnerLocationIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bpartnerLocationTable.get(bpartnerLocationIdentifier);\n\t\t\tassertThat(bpartnerIdentifier).isNotNull();\n\t\t\tinOut.setC_BPartner_Location_ID(bPartnerLocation.getC_BPartner_Location_ID());\n\n\t\t\tfinal boolean isSOTrx = DataTableUtil.extractBooleanForColumnName(row, COLUMNNAME_IsSOTrx);\n\t\t\tinOut.setIsSOTrx(isSOTrx);\n\n\t\t\tfinal String docBaseType = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_DocBaseType);\n\t\t\tif (EmptyUtil.isNotBlank(docBaseType))\n\t\t\t{\n\t\t\t\tfinal String docSubType = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_DocSubType);\n\n\t\t\t\tfinal I_C_DocType docType = queryBL.createQueryBuilder(I_C_DocType.class)\n\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_DocBaseType, docBaseType)\n\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_DocSubType, docSubType)\n\t\t\t\t\t\t.create()\n\t\t\t\t\t\t.firstOnlyNotNull(I_C_DocType.class);\n\n\t\t\t\tassertThat(docType).isNotNull();\n\n\t\t\t\tinOut.setC_DocType_ID(docType.getC_DocType_ID());\n\t\t\t}\n\n\t\t\tfinal String deliveryRule = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_DeliveryRule);\n\t\t\tinOut.setDeliveryRule(deliveryRule);\n\n\t\t\tfinal String deliveryViaRule = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_DeliveryViaRule);\n\t\t\tinOut.setDeliveryViaRule(deliveryViaRule);\n\n\t\t\tfinal String freightCostRule = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_FreightCostRule);\n\t\t\tinOut.setFreightCostRule(freightCostRule);\n\n\t\t\tfinal String warehouseIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_M_Warehouse_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(warehouseIdentifier))\n\t\t\t{\n\t\t\t\tfinal int warehouseId = warehouseTable.get(warehouseIdentifier).getM_Warehouse_ID();\n\t\t\t\tinOut.setM_Warehouse_ID(warehouseId);\n\t\t\t}\n\n\t\t\tfinal Timestamp movementDate = DataTableUtil.extractDateTimestampForColumnName(row, I_M_InOut.COLUMNNAME_MovementDate);\n\t\t\tinOut.setMovementDate(movementDate);\n\n\t\t\tfinal String movementType = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_MovementType);\n\t\t\tinOut.setMovementType(movementType);\n\n\t\t\tfinal String priorityRule = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_PriorityRule);\n\t\t\tinOut.setPriorityRule(priorityRule);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(inOut);\n\n\t\t\tfinal String inOutIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_InOut.COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinoutTable.putOrReplace(inOutIdentifier, inOut);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 602,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1983,
    "annotation": "\n\t@And(\"^the (shipment|material receipt|return inOut) identified by (.*) is (completed|reactivated|reversed|voided|closed) expecting error$\")",
    "glue_code": "\t@And(\"^the (shipment|material receipt|return inOut) identified by (.*) is (completed|reactivated|reversed|voided|closed) expecting error$\")\n\tpublic void shipment_action_expecting_error(@NonNull final String model_UNUSED, @NonNull final String shipmentIdentifier, @NonNull final String action, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tboolean errorThrown = false;\n\n\t\ttry\n\t\t{\n\t\t\tprocessInOut(model_UNUSED, shipmentIdentifier, action);\n\t\t}\n\t\tcatch (final Exception e)\n\t\t{\n\t\t\terrorThrown = true;\n\n\t\t\tfinal String errorMessageIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_Message_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tif (errorMessageIdentifier != null)\n\t\t\t{\n\t\t\t\tfinal I_AD_Message errorMessage = messageTable.get(errorMessageIdentifier);\n\t\t\t\tassertThat(e.getMessage()).contains(msgBL.getMsg(Env.getCtx(), AdMessageKey.of(errorMessage.getValue())));\n\t\t\t}\n\t\t}\n\n\t\tassertThat(errorThrown).isTrue();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 684,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1984,
    "annotation": "\n\t@And(\"^after not more than (.*)s, locate reversal M_InOut$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, locate reversal M_InOut$\")\n\tpublic void find_reversal_M_InOut(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_M_InOut reversalInOut = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> load_reversal_InOut(row));\n\n\t\t\tsoftly.assertThat(reversalInOut).isNotNull();\n\n\t\t\tfinal String reversalInOutIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_InOut_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tinoutTable.putOrReplace(reversalInOutIdentifier, reversalInOut);\n\t\t}\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 711,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1985,
    "annotation": "\n\t@And(\"^Wait until (shipment|shipments|receipt|receipts) (.*) (is|are) posted$\")",
    "glue_code": "\t@And(\"^Wait until (shipment|shipments|receipt|receipts) (.*) (is|are) posted$\")\n\tpublic void waitUntilPosted(\n\t\t\t@SuppressWarnings(\"unused\") final String type,\n\t\t\t@NonNull final String commaSeparatedIdentifiers,\n\t\t\t@SuppressWarnings(\"unused\") final String isOrAre) throws InterruptedException\n\t{\n\t\tfinal ImmutableSet<TableRecordReference> inoutRefs = StepDefDataIdentifier.ofCommaSeparatedString(commaSeparatedIdentifiers)\n\t\t\t\t.stream()\n\t\t\t\t.map(inoutTable::getId)\n\t\t\t\t.map(inoutId -> TableRecordReference.of(I_M_InOut.Table_Name, inoutId))\n\t\t\t\t.collect(ImmutableSet.toImmutableSet());\n\n\t\tAccountingCucumberHelper.waitUtilPosted(inoutRefs);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 832,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/M_InOut_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "M_InOut_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1967,
    "annotation": "\n\t@And(\"the user creates a JsonCreateShipmentRequest and stores it in the context\")",
    "glue_code": "\t@And(\"the user creates a JsonCreateShipmentRequest and stores it in the context\")\n\tpublic void set_JsonCreateShipmentRequest_to_context(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".Identifier\");\n\t\t\tfinal I_M_ShipmentSchedule shipmentScheduleRecord = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\t\tfinal BigDecimal movementQuantity = DataTableUtil.extractBigDecimalForColumnName(tableRow, I_M_InOutLine.COLUMNNAME_MovementQty);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(tableRow, I_M_Product.COLUMNNAME_M_Product_ID + \".Identifier\");\n\t\t\tfinal I_M_Product productRecord = productTable.get(productIdentifier);\n\n\t\t\tfinal String deliveryRule = DataTableUtil.extractStringForColumnName(tableRow, I_M_ShipmentSchedule.COLUMNNAME_DeliveryRule);\n\t\t\tfinal ZonedDateTime movementDate = DataTableUtil.extractZonedDateTimeForColumnName(tableRow, I_M_InOut.COLUMNNAME_MovementDate);\n\n\t\t\tfinal JsonCreateShipmentRequest jsonCreateShipmentRequest = JsonCreateShipmentRequest.builder()\n\t\t\t\t\t.createShipmentInfoList(ImmutableList.of(JsonCreateShipmentInfo.builder()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .deliveryRule(deliveryRule)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .movementDate(LocalDateTime.from(movementDate))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .movementQuantity(movementQuantity)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .productSearchKey(productRecord.getValue())\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .shipmentScheduleIdentifier(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ShipmentScheduleIdentifier.builder()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .shipmentScheduleId(JsonMetasfreshId.of(shipmentScheduleRecord.getM_ShipmentSchedule_ID()))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .build())\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .build()))\n\t\t\t\t\t.build();\n\n\t\t\ttestContext.setRequestPayload(JsonObjectMapperHolder.newJsonObjectMapper().writeValueAsString(jsonCreateShipmentRequest));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/ShipmentRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment",
      "filename": "ShipmentRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1990,
    "annotation": "\n\t@And(\"the following qty is picked\")",
    "glue_code": "\t@And(\"the following qty is picked\")\n\tpublic void pickQty(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal de.metas.inoutcandidate.model.I_M_ShipmentSchedule shipmentSchedule = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\n\t\tfinal BigDecimal qtyPicked = DataTableUtil.extractBigDecimalForColumnName(row, I_M_Picking_Candidate.COLUMNNAME_QtyPicked);\n\n\t\tfinal HuPackingInstructionsId huPackingInstructionsId = Optional.ofNullable(DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Picking_Candidate.COLUMNNAME_PackTo_HU_PI_ID + \".\" + TABLECOLUMN_IDENTIFIER))\n\t\t\t\t.map(huPiTable::get)\n\t\t\t\t.map(I_M_HU_PI::getM_HU_PI_ID)\n\t\t\t\t.map(HuPackingInstructionsId::ofRepoId)\n\t\t\t\t.orElse(HuPackingInstructionsId.VIRTUAL);\n\n\t\tfinal HUPIItemProductId huPiItemProductId = Optional.ofNullable(DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Picking_Candidate.COLUMNNAME_PackTo_HU_PI_Item_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER))\n\t\t\t\t.map(huPiProductTable::get)\n\t\t\t\t.map(I_M_HU_PI_Item_Product::getM_HU_PI_Item_Product_ID)\n\t\t\t\t.map(HUPIItemProductId::ofRepoId)\n\t\t\t\t.orElse(null);\n\n\t\tfinal PackToSpec packToSpec = huPiItemProductId != null ?\n\t\t\t\tPackToSpec.ofTUPackingInstructionsId(huPiItemProductId)\n\t\t\t\t: PackToSpec.ofGenericPackingInstructionsId(huPackingInstructionsId);\n\n\t\tfinal I_M_Picking_Candidate pickingCandidate = InterfaceWrapperHelper.newInstance(I_M_Picking_Candidate.class);\n\t\tpickingCandidate.setStatus(STATUS_InProgress);\n\t\tpickingCandidate.setPickStatus(PICKSTATUS_Picked);\n\t\tpickingCandidate.setApprovalStatus(APPROVALSTATUS_Approved);\n\t\tpickingCandidate.setPickFrom_HU_ID(hu.getM_HU_ID());\n\t\tpickingCandidate.setQtyPicked(qtyPicked);\n\t\tpickingCandidate.setM_ShipmentSchedule_ID(shipmentSchedule.getM_ShipmentSchedule_ID());\n\t\tpickingCandidate.setC_UOM_ID(UomId.EACH.getRepoId());\n\t\tpickingCandidate.setPackTo_HU_PI_ID(HuPackingInstructionsId.toRepoId(packToSpec.getGenericPackingInstructionsId()));\n\t\tpickingCandidate.setPackTo_HU_PI_Item_Product_ID(HUPIItemProductId.toRepoId(packToSpec.getTuPackingInstructionsId()));\n\n\n\t\tsaveRecord(pickingCandidate);\n\n\t\tfinal ProcessPickingCandidatesCommand processPickingCandidatesCommand = ProcessPickingCandidatesCommand.builder()\n\t\t\t\t.pickingCandidateRepository(pickingCandidateRepository)\n\t\t\t\t.inventoryService(inventoryService)\n\t\t\t\t.request(ProcessPickingCandidatesRequest.builder()\n\t\t\t\t\t\t\t\t .pickingCandidateId(PickingCandidateId.ofRepoId(pickingCandidate.getM_Picking_Candidate_ID()))\n\t\t\t\t\t\t\t\t .build())\n\t\t\t\t.build();\n\n\t\tprocessPickingCandidatesCommand.execute();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 95,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal/Picking_Terminal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal",
      "filename": "Picking_Terminal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1991,
    "annotation": "\n\t@And(\"create M_PickingCandidate for M_HU\")",
    "glue_code": "\t@And(\"create M_PickingCandidate for M_HU\")\n\tpublic void create_M_PickingCand_for_M_HU(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, de.metas.inoutcandidate.model.I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal de.metas.inoutcandidate.model.I_M_ShipmentSchedule shipmentSchedule = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_HU.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\n\t\t\tfinal BigDecimal qtyPicked = DataTableUtil.extractBigDecimalForColumnName(row, I_M_Picking_Candidate.COLUMNNAME_QtyPicked);\n\t\t\tfinal String status = DataTableUtil.extractStringForColumnName(row, I_M_Picking_Candidate.COLUMNNAME_Status);\n\t\t\tfinal String pickStatus = DataTableUtil.extractStringForColumnName(row, I_M_Picking_Candidate.COLUMNNAME_PickStatus);\n\t\t\tfinal String approvalStatus = DataTableUtil.extractStringForColumnName(row, I_M_Picking_Candidate.COLUMNNAME_ApprovalStatus);\n\n\t\t\tfinal I_M_Picking_Candidate pickingCandidate = InterfaceWrapperHelper.newInstance(I_M_Picking_Candidate.class);\n\t\t\tpickingCandidate.setStatus(status);\n\t\t\tpickingCandidate.setPickStatus(pickStatus);\n\t\t\tpickingCandidate.setApprovalStatus(approvalStatus);\n\t\t\tpickingCandidate.setPickFrom_HU_ID(hu.getM_HU_ID());\n\t\t\tpickingCandidate.setQtyPicked(qtyPicked);\n\t\t\tpickingCandidate.setM_ShipmentSchedule_ID(shipmentSchedule.getM_ShipmentSchedule_ID());\n\t\t\tpickingCandidate.setC_UOM_ID(UomId.EACH.getRepoId());\n\n\t\t\tsaveRecord(pickingCandidate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 149,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal/Picking_Terminal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal",
      "filename": "Picking_Terminal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1992,
    "annotation": "\n\t@And(\"process picking\")",
    "glue_code": "\t@And(\"process picking\")\n\tpublic void process_picking(@NonNull final DataTable dataTable) throws Exception\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\t\t\tassertThat(hu).as(\"Missing M_HU for \" + COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER + \"=%s\", huIdentifier).isNotNull();\n\n\t\t\tfinal de.metas.inoutcandidate.model.I_M_ShipmentSchedule shipmentSchedule = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\t\t\tassertThat(shipmentSchedule).as(\"Missing M_ShipmentSchedule for \" + COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER + \"=%s\", shipmentScheduleIdentifier).isNotNull();\n\n\t\t\tfinal String errorMessage = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.ErrorMessage\");\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpickingCandidateService.processForHUIds(ImmutableSet.of(HuId.ofRepoId(hu.getM_HU_ID())), ShipmentScheduleId.ofRepoId(shipmentSchedule.getM_ShipmentSchedule_ID()));\n\n\t\t\t\tAssertions.assertThat(errorMessage).as(\"ErrorMessage should be null if pickingCandidateService.processForHUIds() finished with no error!\").isNull();\n\t\t\t}\n\t\t\tcatch (final Exception e)\n\t\t\t{\n\t\t\t\tStepDefUtil.validateErrorMessage(e, errorMessage);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 179,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal/Picking_Terminal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal",
      "filename": "Picking_Terminal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1993,
    "annotation": "\n\t@And(\"^validate M_HUs are available to pick for shipmentSchedule identified by (.*)$\")",
    "glue_code": "\t@And(\"^validate M_HUs are available to pick for shipmentSchedule identified by (.*)$\")\n\tpublic void validate_M_HUs_available_to_pick_for_SS(@NonNull final String shipmentScheduleIdentifier, @NonNull final DataTable table)\n\t{\n\t\tfinal I_M_ShipmentSchedule shipmentSchedule = InterfaceWrapperHelper.create(shipmentScheduleTable.get(shipmentScheduleIdentifier), I_M_ShipmentSchedule.class);\n\t\tassertThat(shipmentSchedule).isNotNull();\n\n\t\tfinal IHUPickingSlotBL.PickingHUsQuery query = IHUPickingSlotBL.PickingHUsQuery.builder()\n\t\t\t\t.onlyTopLevelHUs(false)\n\t\t\t\t.onlyIfAttributesMatchWithShipmentSchedules(true)\n\t\t\t\t.shipmentSchedule(shipmentSchedule)\n\t\t\t\t.build();\n\n\t\tfinal List<I_M_HU> availableHUsToPick = huPickingSlotBL.retrieveAvailableHUsToPick(query);\n\t\tassertThat(availableHUsToPick).isNotNull();\n\n\t\tfinal List<Map<String, String>> rows = table.asMaps();\n\t\tassertThat(availableHUsToPick.size()).isEqualTo(rows.size());\n\n\t\tfor (int huIndex = 0; huIndex < availableHUsToPick.size(); huIndex++)\n\t\t{\n\t\t\tfinal I_M_HU actualHU = availableHUsToPick.get(huIndex);\n\t\t\tfinal Map<String, String> expectedHU = rows.get(huIndex);\n\n\t\t\tfinal String huIdentifier = DataTableUtil.extractStringForColumnName(expectedHU, I_M_HU.COLUMNNAME_M_HU_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_HU hu = huTable.get(huIdentifier);\n\t\t\tassertThat(hu).isNotNull();\n\n\t\t\tassertThat(actualHU.getM_HU_ID()).isEqualTo(hu.getM_HU_ID());\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 209,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal/Picking_Terminal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal",
      "filename": "Picking_Terminal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1994,
    "annotation": "\n\t@And(\"^validate that there are no M_HUs available to pick for shipmentSchedule identified by (.*)$\")",
    "glue_code": "\t@And(\"^validate that there are no M_HUs available to pick for shipmentSchedule identified by (.*)$\")\n\tpublic void validate_no_M_HUs_available_to_pick_for_ShipmentSched(@NonNull final String shipmentScheduleIdentifier)\n\t{\n\t\tfinal I_M_ShipmentSchedule shipmentSchedule = InterfaceWrapperHelper.create(shipmentScheduleTable.get(shipmentScheduleIdentifier), I_M_ShipmentSchedule.class);\n\t\tassertThat(shipmentSchedule).isNotNull();\n\n\t\tfinal IHUPickingSlotBL.PickingHUsQuery query = IHUPickingSlotBL.PickingHUsQuery.builder()\n\t\t\t\t.onlyTopLevelHUs(false)\n\t\t\t\t.onlyIfAttributesMatchWithShipmentSchedules(true)\n\t\t\t\t.shipmentSchedule(shipmentSchedule)\n\t\t\t\t.build();\n\n\t\tfinal List<I_M_HU> availableHUsToPick = huPickingSlotBL.retrieveAvailableHUsToPick(query);\n\t\tassertThat(availableHUsToPick.size()).isEqualTo(0);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 240,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal/Picking_Terminal_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipment/pickingterminal",
      "filename": "Picking_Terminal_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2000,
    "annotation": "\n\t@And(\"validate M_ShipmentSchedule_ExportAudit:\")",
    "glue_code": "\t@And(\"validate M_ShipmentSchedule_ExportAudit:\")\n\tpublic void validate_M_ShipmentSchedule_ExportAudit(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String scheduleExportAuditIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ExportAudit_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipmentSchedule_ExportAudit scheduleExportAudit = shipmentScheduleExportAuditTable.get(scheduleExportAuditIdentifier);\n\t\t\tassertThat(scheduleExportAudit).isNotNull();\n\n\t\t\tfinal String exportStatus = DataTableUtil.extractStringForColumnName(row, I_M_ShipmentSchedule_ExportAudit.COLUMNNAME_ExportStatus);\n\t\t\tassertThat(scheduleExportAudit.getExportStatus()).isEqualTo(exportStatus);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 60,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_ExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_ExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2001,
    "annotation": "\n\t@And(\"validate M_ShipmentSchedule_ExportAudit_Item:\")",
    "glue_code": "\t@And(\"validate M_ShipmentSchedule_ExportAudit_Item:\")\n\tpublic void validate_M_ShipmentSchedule_ExportAudit_Item(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String scheduleExportAuditIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ExportAudit_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipmentSchedule_ExportAudit scheduleExportAudit = shipmentScheduleExportAuditTable.get(scheduleExportAuditIdentifier);\n\t\t\tassertThat(scheduleExportAudit).isNotNull();\n\n\t\t\tfinal String scheduleIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipmentSchedule schedule = shipmentScheduleTable.get(scheduleIdentifier);\n\t\t\tassertThat(schedule).isNotNull();\n\n\t\t\tfinal I_M_ShipmentSchedule_ExportAudit_Item scheduleExportAuditItem = queryBL.createQueryBuilder(I_M_ShipmentSchedule_ExportAudit_Item.class)\n\t\t\t\t\t.addEqualsFilter(I_M_ShipmentSchedule_ExportAudit_Item.COLUMN_M_ShipmentSchedule_ExportAudit_ID, scheduleExportAudit.getM_ShipmentSchedule_ExportAudit_ID())\n\t\t\t\t\t.addEqualsFilter(I_M_ShipmentSchedule_ExportAudit_Item.COLUMN_M_ShipmentSchedule_ID, schedule.getM_ShipmentSchedule_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_ShipmentSchedule_ExportAudit_Item.class);\n\n\t\t\tassertThat(scheduleExportAuditItem).isNotNull();\n\n\t\t\tfinal String exportStatus = DataTableUtil.extractStringForColumnName(row, I_M_ShipmentSchedule_ExportAudit_Item.COLUMNNAME_ExportStatus);\n\t\t\tassertThat(scheduleExportAuditItem.getExportStatus()).isEqualTo(exportStatus);\n\n\t\t\tfinal String scheduleExportAuditItemIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ExportAudit_Item_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tshipmentScheduleExportAuditItemTable.put(scheduleExportAuditItemIdentifier, scheduleExportAuditItem);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_ExportAudit_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_ExportAudit_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2005,
    "annotation": "\n\t@Then(\"validate M_ShipmentSchedule_Lock record for\")",
    "glue_code": "\t@Then(\"validate M_ShipmentSchedule_Lock record for\")\n\tpublic void validateLockForShipmentScheduleAndUser(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((tableRow) -> {\n\t\t\tfinal ShipmentScheduleId shipmentScheduleId = tableRow.getAsIdentifier(I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID)\n\t\t\t\t\t.lookupIdIn(shipmentScheduleTable);\n\n\t\t\tfinal String username = tableRow.getAsString(I_AD_User.COLUMNNAME_Login);\n\t\t\tSharedTestContext.put(\"username\", username);\n\n\t\t\tfinal UserId userId = userDAO.retrieveUserIdByLogin(username);\n\t\t\tassertThat(userId).as(\"User exists for login=\" + username).isNotNull();\n\t\t\tSharedTestContext.put(\"userId\", userId);\n\n\t\t\tfinal ShipmentScheduleLocksMap locks = lockRepository.getByShipmentScheduleIds(ImmutableSet.of(shipmentScheduleId));\n\t\t\tSharedTestContext.put(\"locks\", locks);\n\n\t\t\tfinal boolean lockExists = locks.isLockedBy(userId);\n\t\t\tfinal boolean expecting_lockExists = tableRow.getAsBoolean(\"Exists\");\n\n\t\t\tassertThat(lockExists)\n\t\t\t\t\t.as(\"Expecting M_ShipmentSchedule_Lock exists=\" + expecting_lockExists + \" for \" + shipmentScheduleId + \"; username: \" + username)\n\t\t\t\t\t.isEqualTo(expecting_lockExists);\n\t\t});\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 54,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_LockStepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_LockStepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2014,
    "annotation": "\n\t@And(\"there are no M_ShipmentSchedule_QtyPicked records created for the following shipment schedules\")",
    "glue_code": "\t@And(\"there are no M_ShipmentSchedule_QtyPicked records created for the following shipment schedules\")\n\tpublic void validate_no_m_shipmentSchedule_qtyPicked_records(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal ShipmentScheduleId shipmentScheduleId = getShipmentScheduleId(row);\n\t\t\tfinal List<I_M_ShipmentSchedule_QtyPicked> shipmentScheduleQtyPickedRecords = retrieveRecordsOrdered(shipmentScheduleId);\n\t\t\tassertThat(shipmentScheduleQtyPickedRecords).isEmpty();\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 75,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2015,
    "annotation": "\n\t@And(\"validate single M_ShipmentSchedule_QtyPicked record created for shipment schedule\")",
    "glue_code": "\t@And(\"validate single M_ShipmentSchedule_QtyPicked record created for shipment schedule\")\n\t@And(\"validate M_ShipmentSchedule_QtyPicked:\")\n\tpublic void validateQtyPickedRows(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal ShipmentScheduleId shipmentScheduleId = getShipmentScheduleId(row);\n\t\t\tfinal List<I_M_ShipmentSchedule_QtyPicked> shipmentScheduleQtyPickedRecords = retrieveRecordsOrdered(shipmentScheduleId);\n\t\t\tassertThat(shipmentScheduleQtyPickedRecords).hasSize(1);\n\n\t\t\tvalidateQtyPickedRow(row, shipmentScheduleQtyPickedRecords.get(0));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 85,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2016,
    "annotation": "\t@And(\"validate M_ShipmentSchedule_QtyPicked:\")",
    "glue_code": "\tpublic void validateQtyPickedRows(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal ShipmentScheduleId shipmentScheduleId = getShipmentScheduleId(row);\n\t\t\tfinal List<I_M_ShipmentSchedule_QtyPicked> shipmentScheduleQtyPickedRecords = retrieveRecordsOrdered(shipmentScheduleId);\n\t\t\tassertThat(shipmentScheduleQtyPickedRecords).hasSize(1);\n\n\t\t\tvalidateQtyPickedRow(row, shipmentScheduleQtyPickedRecords.get(0));\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 87,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2017,
    "annotation": "\n\t@And(\"^validate M_ShipmentSchedule_QtyPicked records for M_ShipmentSchedule identified by (.*)$\")",
    "glue_code": "\t@And(\"^validate M_ShipmentSchedule_QtyPicked records for M_ShipmentSchedule identified by (.*)$\")\n\tpublic void validateQtyPickedRowsByShipmentSchedule(\n\t\t\t@NonNull final String shipmentScheduleIdentifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRows rows = DataTableRows.of(dataTable);\n\n\t\tfinal ShipmentScheduleId shipmentScheduleId = shipmentScheduleTable.getId(shipmentScheduleIdentifier);\n\t\ttry (final IAutoCloseable ignored = SharedTestContext.temporaryPut(\"shipmentScheduleId\", shipmentScheduleId))\n\t\t{\n\t\t\tfinal ImmutableList<I_M_ShipmentSchedule_QtyPicked> records = retrieveRecordsOrdered(shipmentScheduleId);\n\t\t\tassertThat(records).hasSize(rows.size());\n\n\t\t\trows.forEach((expected, index) -> {\n\t\t\t\tfinal I_M_ShipmentSchedule_QtyPicked actual = records.get(index);\n\t\t\t\tSharedTestContext.put(\"actual\", actual);\n\n\t\t\t\tvalidateQtyPickedRow(expected, actual);\n\t\t\t});\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 98,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2018,
    "annotation": "\n\t@And(\"^M_ShipmentSchedule_QtyPicked records for M_ShipmentSchedule (.*) can be located in specified order$\")",
    "glue_code": "\t@And(\"^M_ShipmentSchedule_QtyPicked records for M_ShipmentSchedule (.*) can be located in specified order$\")\n\tpublic void locate_ordered_M_ShipmentSchedule_QtyPicked_records_by_M_ShipmentSchedule(\n\t\t\t@NonNull final String shipmentScheduleIdentifier,\n\t\t\t@NonNull final DataTable dataTable)\n\t{\n\t\tfinal ShipmentScheduleId shipmentScheduleId = shipmentScheduleTable.getId(shipmentScheduleIdentifier);\n\n\t\tfinal ImmutableList<I_M_ShipmentSchedule_QtyPicked> records = retrieveRecordsOrdered(shipmentScheduleId);\n\t\tassertThat(records).hasSameSizeAs(dataTable.asMaps());\n\n\t\tfor (int ssQtyPickedRecordIndex = 0; ssQtyPickedRecordIndex < dataTable.asMaps().size(); ssQtyPickedRecordIndex++)\n\t\t{\n\t\t\tfinal Map<String, String> currentRow = dataTable.asMaps().get(ssQtyPickedRecordIndex);\n\n\t\t\tfinal String shipmentScheduleQtyPickedIdentifier = DataTableUtil.extractStringForColumnName(currentRow, COLUMNNAME_M_ShipmentSchedule_QtyPicked_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tshipmentScheduleQtyPickedTable.putOrReplace(shipmentScheduleQtyPickedIdentifier, records.get(ssQtyPickedRecordIndex));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 212,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2019,
    "annotation": "\n\t@And(\"validate M_ShipmentSchedule_QtyPicked by id\")",
    "glue_code": "\t@And(\"validate M_ShipmentSchedule_QtyPicked by id\")\n\tpublic void validate_M_ShipmentSchedule_QtyPicked(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal I_M_ShipmentSchedule_QtyPicked shipmentScheduleQtyPicked = row.getAsIdentifier(COLUMNNAME_M_ShipmentSchedule_QtyPicked_ID).lookupIn(shipmentScheduleQtyPickedTable);\n\t\t\tSharedTestContext.put(\"shipmentScheduleQtyPicked\", shipmentScheduleQtyPicked);\n\n\t\t\tvalidateQtyPickedRow(row, shipmentScheduleQtyPicked);\n\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 242,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2020,
    "annotation": "\n\t@And(\"^load M_HU as (.*) from M_ShipmentSchedule_QtyPicked identified by (.*)$\")",
    "glue_code": "\t@And(\"^load M_HU as (.*) from M_ShipmentSchedule_QtyPicked identified by (.*)$\")\n\tpublic void load_HU_from_ShipmentScheduleQtyPicked(\n\t\t\t@NonNull final String huIdentifier,\n\t\t\t@NonNull final String shipmentScheduleQtyPickedIdentifier)\n\t{\n\t\tfinal I_M_ShipmentSchedule_QtyPicked record = shipmentScheduleQtyPickedTable.get(shipmentScheduleQtyPickedIdentifier);\n\t\tfinal HuId vhuId = HuId.ofRepoIdOrNull(record.getVHU_ID());\n\t\tassertThat(vhuId).isNotNull();\n\n\t\tfinal I_M_HU vhu = handlingUnitsBL.getById(vhuId);\n\t\thuTable.put(huIdentifier, vhu);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 253,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_QtyPicked_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_QtyPicked_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2002,
    "annotation": "\t@Then(\"^after not more than (.*)s, M_ShipmentSchedules are found:$\")",
    "glue_code": "\tpublic void thereAreShipmentSchedules(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\t// create query per table row; run the queries repeatedly until they succeed or the timeout is exceeded\n\t\t// if they succeed, put them into shipmentScheduleTable\n\t\tfinal ShipmentScheduleQueries shipmentScheduleQueries = createShipmentScheduleQueries(dataTable);\n\n\t\tfinal Supplier<Boolean> shipmentScheduleQueryExecutor = () -> {\n\t\t\tif (shipmentScheduleQueries.isAllDone())\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tshipmentScheduleTable.putAll(shipmentScheduleQueries.executeAllRemaining());\n\t\t\treturn shipmentScheduleQueries.isAllDone();\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, shipmentScheduleQueryExecutor);\n\n\t\tassertThat(shipmentScheduleQueries.isAllDone()).as(\"Not all M_ShipmentSchedules were created within the %s second timout\", timeoutSec).isTrue();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 179,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2003,
    "annotation": "\n\t@And(\"^the shipment schedule identified by (.*) is processed after not more than (.*) seconds$\")",
    "glue_code": "\t@And(\"^the shipment schedule identified by (.*) is processed after not more than (.*) seconds$\")\n\tpublic void processedShipmentScheduleByIdentifier(@NonNull final String identifier, final int timeoutSec) throws InterruptedException\n\t{\n\t\tfinal I_M_ShipmentSchedule shipmentSchedule = shipmentScheduleTable.get(identifier);\n\n\t\tfinal Supplier<Boolean> isShipmentScheduleProcessed = () -> {\n\n\t\t\tfinal I_M_ShipmentSchedule record = queryBL\n\t\t\t\t\t.createQueryBuilder(I_M_ShipmentSchedule.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_M_ShipmentSchedule_ID, shipmentSchedule.getM_ShipmentSchedule_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_ShipmentSchedule.class);\n\n\t\t\treturn record.isProcessed();\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, isShipmentScheduleProcessed);\n\n\t\tassertThat(isShipmentScheduleProcessed.get())\n\t\t\t\t.as(\"M_ShipmentSchedules with identifier %s was not processed within the %s second timout\", identifier, timeoutSec)\n\t\t\t\t.isTrue();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 200,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2004,
    "annotation": "\n\t@Then(\"the shipment-schedule is closed\")",
    "glue_code": "\t@Then(\"the shipment-schedule is closed\")\n\tpublic void assertShipmentScheduleIsClosed(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tassertShipmentScheduleIsClosed(tableRow);\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 224,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2006,
    "annotation": "\n\t@And(\"validate that there are no M_ShipmentSchedule_Recompute records after no more than {int} seconds for order {string}\")",
    "glue_code": "\t@And(\"validate that there are no M_ShipmentSchedule_Recompute records after no more than {int} seconds for order {string}\")\n\tpublic void validate_no_records(final int timeoutSec, final String orderIdentifier) throws InterruptedException\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\tfinal ImmutableList<Integer> shipmentScheduleIds = queryBL.createQueryBuilder(I_M_ShipmentSchedule.class)\n\t\t\t\t.addEqualsFilter(I_M_ShipmentSchedule.COLUMNNAME_C_Order_ID, order.getC_Order_ID())\n\t\t\t\t.create()\n\t\t\t\t.stream()\n\t\t\t\t.map(I_M_ShipmentSchedule::getM_ShipmentSchedule_ID)\n\t\t\t\t.collect(ImmutableList.toImmutableList());\n\n\t\tassertThat(shipmentScheduleIds).isNotEmpty();\n\n\t\tfinal Supplier<Boolean> noRecords = () -> {\n\t\t\tfinal List<I_M_ShipmentSchedule_Recompute> records = queryBL.createQueryBuilder(I_M_ShipmentSchedule_Recompute.class)\n\t\t\t\t\t.addInArrayFilter(I_M_ShipmentSchedule_Recompute.COLUMNNAME_M_ShipmentSchedule_ID, shipmentScheduleIds)\n\t\t\t\t\t.create()\n\t\t\t\t\t.list();\n\n\t\t\treturn records.isEmpty();\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(timeoutSec, 500, noRecords);\n\n\t\tassertThat(noRecords.get())\n\t\t\t\t.as(\"There are still records in M_ShipmentSchedules_Recompute after %s second timeout\", timeoutSec)\n\t\t\t\t.isTrue();\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 234,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2007,
    "annotation": "\n\t@And(\"shipment is generated for the following shipment schedule\")",
    "glue_code": "\t@And(\"shipment is generated for the following shipment schedule\")\n\tpublic void generateShipmentForSchedule(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tgenerateShipmentForSchedule(tableRow);\n\t\t\t}\n\t\t\tcatch (final Throwable e)\n\t\t\t{\n\t\t\t\tlogWorkPackageProgressForShipmentSchedule(tableRow);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 263,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2008,
    "annotation": "\n\t@And(\"the shipment schedule is split\")",
    "glue_code": "\t@And(\"the shipment schedule is split\")\n\tpublic void upsertShipmentScheduleSplit(@NonNull final DataTable table)\n\t{\n\t\tDataTableRows.of(table)\n\t\t\t\t.forEach(this::upsertShipmentScheduleSplit);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 281,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2009,
    "annotation": "\n\t@And(\"update shipment schedules\")",
    "glue_code": "\t@And(\"update shipment schedules\")\n\tpublic void update_shipment_schedule(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\talterShipmentSchedule(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 316,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2010,
    "annotation": "\n\t@And(\"^after not more than (.*)s, validate shipment schedules:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, validate shipment schedules:$\")\n\tpublic void validate_shipment_schedule(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateShipmentSchedule(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 326,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2011,
    "annotation": "\n\t@And(\"recompute shipment schedules\")",
    "glue_code": "\t@And(\"recompute shipment schedules\")\n\tpublic void recompute_shipment_schedules(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipmentSchedule shipmentScheduleRecord = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\t\tshipmentScheduleInvalidateRepository.invalidateShipmentSchedules(ImmutableSet.of(ShipmentScheduleId.ofRepoId(shipmentScheduleRecord.getM_ShipmentSchedule_ID())));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 336,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2012,
    "annotation": "\n\t@And(\"^after not more than (.*)s, shipment schedule is recomputed$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, shipment schedule is recomputed$\")\n\tpublic void wait_for_recompute_to_finish(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> row : tableRows)\n\t\t{\n\t\t\tfinal String shipmentScheduleIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShipmentSchedule.COLUMNNAME_M_ShipmentSchedule_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipmentSchedule shipmentScheduleRecord = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\t\tfinal Supplier<Boolean> shipmentScheduleWasRecomputed = () -> !shipmentScheduleInvalidateRepository.isFlaggedForRecompute(ShipmentScheduleId.ofRepoId(shipmentScheduleRecord.getM_ShipmentSchedule_ID()));\n\n\t\t\tStepDefUtil.tryAndWait(timeoutSec, 500, shipmentScheduleWasRecomputed);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 349,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2013,
    "annotation": "\n\t@And(\"validate M_ShipmentSchedule:\")",
    "glue_code": "\t@And(\"validate M_ShipmentSchedule:\")\n\tpublic void validate_M_ShipmentSchedule(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tvalidateSchedule(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 364,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2021,
    "annotation": "\n\t@And(\"validate JsonResponseShipmentCandidates.JsonCustomer\")",
    "glue_code": "\t@And(\"validate JsonResponseShipmentCandidates.JsonCustomer\")\n\tpublic void validate_JsonCustomer(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonResponseShipmentCandidates jsonResponseShipmentCandidates = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseShipmentCandidates.class);\n\t\tassertThat(jsonResponseShipmentCandidates).isNotNull();\n\n\t\tfinal List<JsonResponseShipmentCandidate> items = jsonResponseShipmentCandidates.getItems();\n\t\tassertThat(items).hasSize(1);\n\n\t\tfinal JsonResponseShipmentCandidate item = items.get(0);\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String qualifier = DataTableUtil.extractStringForColumnName(row, \"qualifier\");\n\n\t\t\tif (qualifier.equals(SHIP_BPARTNER))\n\t\t\t{\n\t\t\t\tvalidateJsonCustomer(item.getShipBPartner(), row);\n\t\t\t}\n\t\t\telse if (qualifier.equals(BILL_BPARTNER))\n\t\t\t{\n\t\t\t\tvalidateJsonCustomer(item.getBillBPartner(), row);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 373,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2022,
    "annotation": "\n\t@And(\"validate JsonResponseShipmentCandidates\")",
    "glue_code": "\t@And(\"validate JsonResponseShipmentCandidates\")\n\tpublic void validate_JsonResponseShipmentCandidates(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonResponseShipmentCandidates jsonResponseShipmentCandidates = mapper.readValue(testContext.getApiResponse().getContent(), JsonResponseShipmentCandidates.class);\n\t\tassertThat(jsonResponseShipmentCandidates).isNotNull();\n\n\t\tfinal List<JsonResponseShipmentCandidate> items = jsonResponseShipmentCandidates.getItems();\n\t\tassertThat(items).hasSize(1);\n\n\t\tfinal JsonResponseShipmentCandidate item = items.get(0);\n\t\tfinal Map<String, String> row = dataTable.asMaps().get(0);\n\n\t\tfinal I_M_ShipmentSchedule_ExportAudit scheduleExportAudit = queryBL.createQueryBuilder(I_M_ShipmentSchedule_ExportAudit.class)\n\t\t\t\t.addEqualsFilter(I_M_ShipmentSchedule_ExportAudit.COLUMNNAME_TransactionIdAPI, jsonResponseShipmentCandidates.getTransactionKey())\n\t\t\t\t.create()\n\t\t\t\t.firstOnlyNotNull(I_M_ShipmentSchedule_ExportAudit.class);\n\n\t\tfinal String scheduleExportAuditIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ExportAudit_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tshipmentScheduleExportAuditTable.put(scheduleExportAuditIdentifier, scheduleExportAudit);\n\n\t\tfinal String scheduleIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_ShipmentSchedule_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_M_ShipmentSchedule schedule = shipmentScheduleTable.get(scheduleIdentifier);\n\t\tassertThat(item.getId().getValue()).isEqualTo(schedule.getM_ShipmentSchedule_ID());\n\n\t\t//product\n\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Product.Table_Name + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\tfinal JsonProduct jsonProduct = item.getProduct();\n\n\t\tassertThat(jsonProduct.getProductNo()).isEqualTo(product.getValue());\n\t\tassertThat(jsonProduct.getName()).isEqualTo(product.getName());\n\t\tassertThat(jsonProduct.getDescription()).isEqualTo(product.getDescription());\n\t\tassertThat(jsonProduct.isStocked()).isEqualTo(product.isStocked());\n\n\t\tfinal String shipperIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_Shipper.Table_Name + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tif (Check.isNotBlank(shipperIdentifier))\n\t\t{\n\t\t\tfinal I_M_Shipper shipper = shipperTable.get(shipperIdentifier);\n\t\t\tassertThat(item.getShipperInternalSearchKey()).isEqualTo(shipper.getInternalName());\n\t\t}\n\n\t\tfinal String poReference = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShipmentSchedule.COLUMNNAME_POReference);\n\t\tif (Check.isNotBlank(poReference))\n\t\t{\n\t\t\tassertThat(item.getPoReference()).isEqualTo(poReference);\n\t\t}\n\n\t\tfinal BigDecimal orderedQty = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_M_ShipmentSchedule.COLUMNNAME_QtyOrdered);\n\t\tfinal String uomCode = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_UOM.COLUMNNAME_X12DE355);\n\t\tif (orderedQty != null)\n\t\t{\n\t\t\tassertThat(item.getOrderedQty()).isNotEmpty();\n\t\t\tassertThat(item.getOrderedQty().get(0).getQty()).isEqualTo(orderedQty);\n\t\t\tassertThat(item.getOrderedQty().get(0).getUomCode()).isEqualTo(uomCode);\n\t\t}\n\n\t\tfinal int numberOfItemsForSameShipment = DataTableUtil.extractIntOrMinusOneForColumnName(row, \"OPT.\" + I_M_ShipmentSchedule.COLUMNNAME_NrOfOLCandsWithSamePOReference);\n\t\tif (numberOfItemsForSameShipment > 0)\n\t\t{\n\t\t\tassertThat(item.getNumberOfItemsForSameShipment()).isEqualTo(numberOfItemsForSameShipment);\n\t\t}\n\n\t\tfinal String asiIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShipmentSchedule.COLUMN_M_AttributeSetInstance_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\tif (Check.isNotBlank(asiIdentifier))\n\t\t{\n\t\t\tfinal JsonAttributeSetInstance jsonAttributeSetInstance = item.getAttributeSetInstance();\n\n\t\t\tfinal AttributeSetInstanceId actualASI = jsonAttributeService.computeAttributeSetInstanceFromJson(jsonAttributeSetInstance)\n\t\t\t\t\t.orElse(null);\n\t\t\tassertThat(actualASI).isNotNull();\n\n\t\t\tfinal I_M_AttributeSetInstance expectedASI = attributeSetInstanceTable.get(asiIdentifier);\n\t\t\tassertThat(expectedASI).isNotNull();\n\n\t\t\tfinal AttributesKey actualAttributesKeys = AttributesKeys.createAttributesKeyFromASIStorageAttributes(actualASI).orElse(AttributesKey.NONE);\n\t\t\tfinal AttributesKey expectedAttributesKeys = AttributesKeys.createAttributesKeyFromASIStorageAttributes(AttributeSetInstanceId.ofRepoId(expectedASI.getM_AttributeSetInstance_ID()))\n\t\t\t\t\t.orElse(AttributesKey.NONE);\n\n\t\t\tassertThat(actualAttributesKeys).isEqualTo(expectedAttributesKeys);\n\t\t}\n\n\t\tfinal BigDecimal orderedQtyNetPrice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.OrderedQtyNetPrice\");\n\t\tif (orderedQtyNetPrice != null)\n\t\t{\n\t\t\tassertThat(item.getOrderedQtyNetPrice()).isEqualByComparingTo(orderedQtyNetPrice);\n\t\t}\n\n\t\tfinal BigDecimal qtyToDeliverNetPrice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.QtyToDeliverNetPrice\");\n\t\tif (qtyToDeliverNetPrice != null)\n\t\t{\n\t\t\tassertThat(item.getQtyToDeliverNetPrice()).isEqualByComparingTo(qtyToDeliverNetPrice);\n\t\t}\n\n\t\tfinal BigDecimal deliveredQtyNetPrice = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.DeliveredQtyNetPrice\");\n\t\tif (deliveredQtyNetPrice != null)\n\t\t{\n\t\t\tassertThat(item.getDeliveredQtyNetPrice()).isEqualByComparingTo(deliveredQtyNetPrice);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 399,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2023,
    "annotation": "\n\t@And(\"deactivate all M_ShipmentSchedule records\")",
    "glue_code": "\t@And(\"deactivate all M_ShipmentSchedule records\")\n\tpublic void deactivate_M_ShipmentSchedule()\n\t{\n\t\tfinal ICompositeQueryUpdater<I_M_ShipmentSchedule> updater = queryBL\n\t\t\t\t.createCompositeQueryUpdater(I_M_ShipmentSchedule.class)\n\t\t\t\t.addSetColumnValue(I_M_ShipmentSchedule.COLUMNNAME_IsActive, false);\n\n\t\tqueryBL.createQueryBuilder(I_M_ShipmentSchedule.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.create()\n\t\t\t\t.update(updater);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 500,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2024,
    "annotation": "\n\t@And(\"^there is no M_ShipmentSchedule for C_Order (.*)$\")",
    "glue_code": "\t@And(\"^there is no M_ShipmentSchedule for C_Order (.*)$\")\n\tpublic void validate_no_M_ShipmentSchedule_created(@NonNull final String orderIdentifier)\n\t{\n\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\t\tfinal OrderId orderId = OrderId.ofRepoId(order.getC_Order_ID());\n\n\t\tvalidateNoShipmentScheduleCreatedForOrder(orderId);\n\n\t\tshipmentScheduleHandlerBL.createMissingCandidates(Env.getCtx());\n\n\t\tvalidateNoShipmentScheduleCreatedForOrder(orderId);\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 513,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2025,
    "annotation": "\n\t@And(\"^the M_ShipmentSchedule identified by (.*) is (closed|reactivated)$\")",
    "glue_code": "\t@And(\"^the M_ShipmentSchedule identified by (.*) is (closed|reactivated)$\")\n\tpublic void M_ShipmentSchedule_action(@NonNull final String shipmentScheduleIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_M_ShipmentSchedule schedule = shipmentScheduleTable.get(shipmentScheduleIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase closed:\n\t\t\t\tshipmentScheduleBL.closeShipmentSchedule(schedule);\n\t\t\t\tbreak;\n\t\t\tcase reactivated:\n\t\t\t\tshipmentScheduleBL.openShipmentSchedule(schedule);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new AdempiereException(\"Unhandled M_ShipmentSchedule action\")\n\t\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "Then",
    "line_in_the_file": 526,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule/M_ShipmentSchedule_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipmentschedule",
      "filename": "M_ShipmentSchedule_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1987,
    "annotation": "\n\t@And(\"load M_Shipper:\")",
    "glue_code": "\t@And(\"load M_Shipper:\")\n\tpublic void load_M_Shipper(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::loadM_Shipper);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 51,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipper/M_Shipper_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipper",
      "filename": "M_Shipper_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1988,
    "annotation": "\n\t@And(\"contains M_Shippers\")",
    "glue_code": "\t@And(\"contains M_Shippers\")\n\tpublic void createOrUpdateShippers(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(I_M_Shipper.COLUMNNAME_M_Shipper_ID)\n\t\t\t\t.forEach(this::createOrUpdateShipper);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 68,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipper/M_Shipper_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shipper",
      "filename": "M_Shipper_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 1989,
    "annotation": "\n\t@And(\"validate M_Shipping_NotificationLines:\")",
    "glue_code": "\t@And(\"validate M_Shipping_NotificationLines:\")\n\tpublic void validate_M_Shipping_NotificationLine(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_M_Shipping_Notification shippingNotification = getShippingNotification(row);\n\t\t\tfinal I_M_ShipmentSchedule shipmentSchedule = getShipmentSchedule(row);\n\t\t\tfinal I_M_Shipping_NotificationLine shippingNotificationLine = getShippingNotificationLine(shippingNotification, shipmentSchedule);\n\t\t\tfinal I_M_Product product = getProduct(row);\n\t\t\tfinal BigDecimal movementQty = DataTableUtil.extractBigDecimalForColumnName(row, COLUMNNAME_MovementQty);\n\t\t\tfinal String shippingNotificationLineIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Shipping_NotificationLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\t\t\tsoftly.assertThat(product.getM_Product_ID()).isEqualTo(shippingNotificationLine.getM_Product_ID());\n\t\t\tsoftly.assertThat(movementQty).isEqualTo(shippingNotificationLine.getMovementQty());\n\t\t\tsoftly.assertAll();\n\n\t\t\tshippingNotificationLineTable.putOrReplace(shippingNotificationLineIdentifier, shippingNotificationLine);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 69,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification/M_Shipping_NotificationLine_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification",
      "filename": "M_Shipping_NotificationLine_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2064,
    "annotation": "\n\t@And(\"generate M_Shipping_Notification:\")",
    "glue_code": "\t@And(\"generate M_Shipping_Notification:\")\n\tpublic void generate_M_Shipping_Notification(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String salesOrderIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Instant physicalClearanceDate = DataTableUtil.extractLocalDateForColumnName(row, COLUMNNAME_PhysicalClearanceDate)\n\t\t\t\t\t.atStartOfDay(SystemTime.zoneId())\n\t\t\t\t\t.toInstant();\n\n\t\t\tfinal I_C_Order salesOrder = orderTable.get(salesOrderIdentifier);\n\t\t\tfinal OrderId salesOrderId = OrderId.ofRepoId(salesOrder.getC_Order_ID());\n\n\t\t\tfinal ShippingNotificationFromShipmentScheduleProducer shippingNotificationProducer = shipmentScheduleBL.newShippingNotificationProducer();\n\t\t\tshippingNotificationProducer.checkCanCreateShippingNotification(salesOrderId).throwExceptionIfRejected();\n\t\t\tshippingNotificationProducer.createShippingNotification(salesOrderId, physicalClearanceDate);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 127,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification/M_Shipping_Notification_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification",
      "filename": "M_Shipping_Notification_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2065,
    "annotation": "\n\t@And(\"^after not more than (.*)s, M_Shipping_Notifications are found$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, M_Shipping_Notifications are found$\")\n\tpublic void find_M_Shipping_Notification(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String orderIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_C_Order_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Order order = orderTable.get(orderIdentifier);\n\n\t\t\tfinal I_M_Shipping_Notification shippingNotification = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> load_ShippingNotification(row, order));\n\n\t\t\t// either invoice bpartner or dropship bpartner (dropship takes precedence over invoice)\n\n\t\t\tfinal String bPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bPartnerIdentifier);\n\t\t\t\tsoftly.assertThat(bPartner.getC_BPartner_ID()).isEqualTo(shippingNotification.getC_BPartner_ID()).isEqualTo(order.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String dropShipBPartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Order.COLUMNNAME_DropShip_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipBPartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner dropShipBPartner = bPartnerTable.get(dropShipBPartnerIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipBPartner.getC_BPartner_ID()).isEqualTo(shippingNotification.getC_BPartner_ID()).isEqualTo(order.getDropShip_BPartner_ID());\n\t\t\t}\n\n\t\t\t// either invoice bpartner location or dropship bpartner location (dropship takes precedence over invoice)\n\n\t\t\tfinal String bPartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bPartnerLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(bPartnerLocationIdentifier);\n\t\t\t\tsoftly.assertThat(bPartnerLocation.getC_BPartner_Location_ID()).isEqualTo(shippingNotification.getC_BPartner_Location_ID()).isEqualTo(order.getC_BPartner_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String dropShipBPartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, I_C_Order.COLUMNNAME_DropShip_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipBPartnerLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location dropShipBPartnerLocation = bPartnerLocationTable.get(dropShipBPartnerLocationIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipBPartnerLocation.getC_BPartner_Location_ID()).isEqualTo(shippingNotification.getC_BPartner_Location_ID()).isEqualTo(order.getDropShip_Location_ID());\n\t\t\t}\n\n\t\t\t// either invoice contact or dropship contact (dropship takes precedence over invoice)\n\n\t\t\tfinal String contactIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(contactIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_User contact = userTable.get(contactIdentifier);\n\t\t\t\tsoftly.assertThat(contact.getAD_User_ID()).isEqualTo(shippingNotification.getAD_User_ID()).isEqualTo(order.getAD_User_ID());\n\t\t\t}\n\n\t\t\tfinal String dropShipContactIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_C_Order.COLUMNNAME_DropShip_User_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(dropShipContactIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_User dropShipContact = userTable.get(dropShipContactIdentifier);\n\t\t\t\tsoftly.assertThat(dropShipContact.getAD_User_ID()).isEqualTo(shippingNotification.getAD_User_ID()).isEqualTo(order.getDropShip_User_ID());\n\t\t\t}\n\n\t\t\tfinal String orgIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_Org_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Org org = orgTable.get(orgIdentifier);\n\t\t\tsoftly.assertThat(org.getAD_Org_ID()).isEqualTo(shippingNotification.getAD_Org_ID()).isEqualTo(order.getAD_Org_ID());\n\n\t\t\tfinal String locatorIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Locator_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Locator locator = locatorTable.get(locatorIdentifier);\n\t\t\tsoftly.assertThat(locator.getM_Locator_ID()).isEqualTo(shippingNotification.getM_Locator_ID()).isEqualTo(order.getM_Locator_ID());\n\n\n\t\t\tfinal String shipFromPartnerLocationIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_ShipFrom_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(shipFromPartnerLocationIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner_Location shipFromPartnerLocation = shipFromPartnerLocationTable.get(shipFromPartnerLocationIdentifier);\n\t\t\t\tsoftly.assertThat(shipFromPartnerLocation.getC_BPartner_Location_ID()).isEqualTo(shippingNotification.getShipFrom_Location_ID());\n\t\t\t}\n\n\t\t\tfinal String harvestingCalendarIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_C_Harvesting_Calendar_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(harvestingCalendarIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Calendar harvestingCalendar = calendarTable.get(harvestingCalendarIdentifier);\n\t\t\t\tsoftly.assertThat(harvestingCalendar.getC_Calendar_ID()).isEqualTo(shippingNotification.getC_Harvesting_Calendar_ID()).isEqualTo(order.getC_Harvesting_Calendar_ID());\n\t\t\t}\n\n\t\t\tfinal String harvestingYearIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, COLUMNNAME_Harvesting_Year_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(harvestingYearIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Year harvestingYear = yearTable.get(harvestingYearIdentifier);\n\t\t\t\tsoftly.assertThat(harvestingYear.getC_Year_ID()).isEqualTo(shippingNotification.getHarvesting_Year_ID()).isEqualTo(order.getHarvesting_Year_ID());\n\t\t\t}\n\n\t\t\tfinal String auctionIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_C_Auction_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(auctionIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_Auction auction = auctionTable.get(auctionIdentifier);\n\t\t\t\tsoftly.assertThat(auction.getC_Auction_ID()).isEqualTo(shippingNotification.getC_Auction_ID()).isEqualTo(order.getC_Auction_ID());\n\t\t\t}\n\n\t\t\tfinal String poReference = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_POReference);\n\t\t\tif (Check.isNotBlank(poReference))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(poReference).isEqualTo(shippingNotification.getPOReference()).isEqualTo(order.getPOReference());\n\t\t\t}\n\n\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_Description);\n\t\t\tif (Check.isNotBlank(description))\n\t\t\t{\n\t\t\t\tsoftly.assertThat(description).isEqualTo(shippingNotification.getDescription()).isEqualTo(order.getDescription());\n\t\t\t}\n\t\t\tfinal String shippingNotificationIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Shipping_Notification_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tshippingNotificationTable.putOrReplace(shippingNotificationIdentifier, shippingNotification);\n\t\t}\n\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 146,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification/M_Shipping_Notification_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification",
      "filename": "M_Shipping_Notification_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2066,
    "annotation": "\n\t@And(\"^after not more than (.*)s, locate reversal M_Shipping_Notifications$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, locate reversal M_Shipping_Notifications$\")\n\tpublic void find_reversal_M_Shipping_Notification(final int timeoutSec, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal I_M_Shipping_Notification reversalShippingNotification = StepDefUtil.tryAndWaitForItem(timeoutSec, 500, () -> load_reversal_ShippingNotification(row));\n\n\t\t\tsoftly.assertThat(reversalShippingNotification).isNotNull();\n\n\t\t\tfinal String reversalShippingNotificationIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_M_Shipping_Notification_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tshippingNotificationTable.putOrReplace(reversalShippingNotificationIdentifier, reversalShippingNotification);\n\t\t}\n\t\tsoftly.assertAll();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 261,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification/M_Shipping_Notification_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification",
      "filename": "M_Shipping_Notification_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2067,
    "annotation": "\n\t@And(\"^the ShippingNotification identified by (.*) is (reversed)$\")",
    "glue_code": "\t@And(\"^the ShippingNotification identified by (.*) is (reversed)$\")\n\tpublic void shippingNotification_action(@NonNull final String notificationIdentifier, @NonNull final String action)\n\t{\n\t\tfinal I_M_Shipping_Notification shippingNotification = shippingNotificationTable.get(notificationIdentifier);\n\n\t\tswitch (StepDefDocAction.valueOf(action))\n\t\t{\n\t\t\tcase reversed ->\n\t\t\t{\n\t\t\t\tshippingNotification.setDocAction(IDocument.ACTION_Complete);\n\t\t\t\tdocumentBL.processEx(shippingNotification, IDocument.ACTION_Reverse_Correct, IDocument.STATUS_Reversed);\n\t\t\t}\n\t\t\tdefault -> throw new AdempiereException(\"Unhandled shippingNotification action\")\n\t\t\t\t\t.appendParametersToMessage()\n\t\t\t\t\t.setParameter(\"action:\", action);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 278,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification/M_Shipping_Notification_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingNotification",
      "filename": "M_Shipping_Notification_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2071,
    "annotation": "\n\t@And(\"load M_Shipping_Package:\")",
    "glue_code": "\t@And(\"load M_Shipping_Package:\")\n\tpublic void load_M_Shipping_Package(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String deliveryInstructionIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipperTransportation deliveryInstruction = shipperTransportationTable.get(deliveryInstructionIdentifier);\n\t\t\tassertThat(deliveryInstruction).isNotNull();\n\n\t\t\tfinal String packageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_M_Package_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Package packageRecord = packageTable.get(packageIdentifier);\n\t\t\tassertThat(packageRecord).isNotNull();\n\n\t\t\tfinal I_M_ShippingPackage shippingPackage = queryBL.createQueryBuilder(I_M_ShippingPackage.class)\n\t\t\t\t\t.addEqualsFilter(I_M_ShippingPackage.COLUMNNAME_M_Package_ID, packageRecord.getM_Package_ID())\n\t\t\t\t\t.addEqualsFilter(I_M_ShippingPackage.COLUMNNAME_M_ShipperTransportation_ID, deliveryInstruction.getM_ShipperTransportation_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_M_ShippingPackage.class);\n\n\t\t\tfinal String shippingPackageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_M_ShippingPackage_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tshippingPackageTable.putOrReplace(shippingPackageIdentifier, shippingPackage);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 82,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingPackage/M_ShippingPackage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingPackage",
      "filename": "M_ShippingPackage_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2072,
    "annotation": "\n\t@And(\"validate M_Shipping_Package:\")",
    "glue_code": "\t@And(\"validate M_Shipping_Package:\")\n\tpublic void validate_M_Shipping_Package(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal SoftAssertions softly = new SoftAssertions();\n\n\t\t\tfinal String shippingPackageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_M_ShippingPackage_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShippingPackage shippingPackage = shippingPackageTable.get(shippingPackageIdentifier);\n\t\t\tsoftly.assertThat(shippingPackage).isNotNull();\n\n\t\t\tfinal String deliveryInstructionIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_M_ShipperTransportation_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_ShipperTransportation deliveryInstruction = shipperTransportationTable.get(deliveryInstructionIdentifier);\n\t\t\tsoftly.assertThat(deliveryInstruction).isNotNull();\n\t\t\tsoftly.assertThat(shippingPackage.getM_ShipperTransportation_ID()).as(I_M_ShippingPackage.COLUMNNAME_M_ShipperTransportation_ID).isEqualTo(deliveryInstruction.getM_ShipperTransportation_ID());\n\n\t\t\tfinal String packageIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_M_Package_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Package packageRecord = packageTable.get(packageIdentifier);\n\t\t\tsoftly.assertThat(packageRecord).isNotNull();\n\t\t\tsoftly.assertThat(shippingPackage.getM_Package_ID()).as(I_M_ShippingPackage.COLUMNNAME_M_Package_ID).isEqualTo(packageRecord.getM_Package_ID());\n\n\t\t\tfinal String bpartnerLocIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_ShippingPackage.COLUMNNAME_C_BPartner_Location_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_BPartner_Location bPartnerLocation = bPartnerLocationTable.get(bpartnerLocIdentifier);\n\t\t\tsoftly.assertThat(bPartnerLocation).isNotNull();\n\t\t\tsoftly.assertThat(shippingPackage.getC_BPartner_Location_ID()).as(I_M_ShippingPackage.COLUMNNAME_C_BPartner_Location_ID).isEqualTo(bPartnerLocation.getC_BPartner_Location_ID());\n\n\t\t\tfinal BigDecimal actualLoadQty = DataTableUtil.extractBigDecimalForColumnName(row, I_M_ShippingPackage.COLUMNNAME_ActualLoadQty);\n\t\t\tsoftly.assertThat(shippingPackage.getActualLoadQty()).as(I_M_ShippingPackage.COLUMNNAME_ActualLoadQty).isEqualTo(actualLoadQty);\n\n\t\t\tfinal String bpartnerIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShippingPackage.COLUMNNAME_C_BPartner_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(bpartnerIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_BPartner bPartner = bPartnerTable.get(bpartnerIdentifier);\n\t\t\t\tsoftly.assertThat(bPartner).isNotNull();\n\t\t\t\tsoftly.assertThat(shippingPackage.getC_BPartner_ID()).as(I_M_ShippingPackage.COLUMNNAME_C_BPartner_ID).isEqualTo(bPartner.getC_BPartner_ID());\n\t\t\t}\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShippingPackage.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(productIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\t\tsoftly.assertThat(product).isNotNull();\n\t\t\t\tsoftly.assertThat(shippingPackage.getM_Product_ID()).as(I_M_ShippingPackage.COLUMNNAME_M_Product_ID).isEqualTo(product.getM_Product_ID());\n\t\t\t}\n\n\t\t\tfinal String orderLineIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_M_ShippingPackage.COLUMNNAME_C_OrderLine_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(orderLineIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_C_OrderLine orderLine = orderLineTable.get(orderLineIdentifier);\n\t\t\t\tsoftly.assertThat(orderLine).isNotNull();\n\t\t\t\tsoftly.assertThat(shippingPackage.getC_OrderLine_ID()).as(I_M_ShippingPackage.COLUMNNAME_C_OrderLine_ID).isEqualTo(orderLine.getC_OrderLine_ID());\n\t\t\t}\n\n\t\t\tsoftly.assertAll();\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 106,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingPackage/M_ShippingPackage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/shippingPackage",
      "filename": "M_ShippingPackage_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2037,
    "annotation": "\n\t@And(\"master C_SimulationPlan is found\")",
    "glue_code": "\t@And(\"master C_SimulationPlan is found\")\n\tpublic void lookup_master_C_SimulationPlan(@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfindMasterSimulationPlan(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 74,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan/C_SimulationPlan_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan",
      "filename": "C_SimulationPlan_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2038,
    "annotation": "\n\t@And(\"C_SimulationPlan is processed\")",
    "glue_code": "\t@And(\"C_SimulationPlan is processed\")\n\tpublic void process_C_SimulationPlan(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tprocessSimulationPlan(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 84,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan/C_SimulationPlan_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan",
      "filename": "C_SimulationPlan_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2039,
    "annotation": "\n\t@And(\"validate C_SimulationPlan\")",
    "glue_code": "\t@And(\"validate C_SimulationPlan\")\n\tpublic void lookup_C_SimulationPlan(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfindSimulationPlan(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 94,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan/C_SimulationPlan_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan",
      "filename": "C_SimulationPlan_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2040,
    "annotation": "\n\t@And(\"metasfresh contains C_SimulationPlan\")",
    "glue_code": "\t@And(\"metasfresh contains C_SimulationPlan\")\n\tpublic void create_C_SimulationPlan(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateSimulationPlan(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 104,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan/C_SimulationPlan_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan",
      "filename": "C_SimulationPlan_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2041,
    "annotation": "\n\t@And(\"C_SimulationPlan is deactivated\")",
    "glue_code": "\t@And(\"C_SimulationPlan is deactivated\")\n\tpublic void deactivate_C_SimulationPlan(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tdeactivateSimulationPlan(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan/C_SimulationPlan_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan",
      "filename": "C_SimulationPlan_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2042,
    "annotation": "\n\t@And(\"deactivate all master C_SimulationPlan\")",
    "glue_code": "\t@And(\"deactivate all master C_SimulationPlan\")\n\tpublic void deactivate_all_master_C_SimulationPlan()\n\t{\n\t\tqueryBL.createQueryBuilder(I_C_SimulationPlan.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_SimulationPlan.COLUMNNAME_IsMainSimulation, true)\n\t\t\t\t.create()\n\t\t\t\t.updateDirectly()\n\t\t\t\t.addSetColumnValue(I_C_SimulationPlan.COLUMNNAME_IsActive, false);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 124,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan/C_SimulationPlan_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/simulationplan",
      "filename": "C_SimulationPlan_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2033,
    "annotation": "\n\t@And(\"after not more than {int} seconds metasfresh has MD_Stock data\")",
    "glue_code": "\t@And(\"after not more than {int} seconds metasfresh has MD_Stock data\")\n\tpublic void verify_MD_Stock_Data( final int timeoutSeconds, @NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\n\t\tfinal Supplier<Boolean> supplier = () -> rows.stream().allMatch(this::waitForStock);\n\n\t\tStepDefUtil.tryAndWait(timeoutSeconds, 500, supplier);\n\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tvalidateMD_Stock(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 57,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/stock/MD_Stock_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/stock",
      "filename": "MD_Stock_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2051,
    "annotation": "\n\t@And(\"^after not more than (.*)s, metasfresh has this M_Transaction data$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, metasfresh has this M_Transaction data$\")\n\tpublic void metasfresh_has_this_md_cockpit_ddOrder_Detail(\n\t\t\tfinal int timeoutSec,\n\t\t\t@NonNull final DataTable dataTable) throws InterruptedException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateTransaction(timeoutSec, tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transaction/M_Transaction_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transaction",
      "filename": "M_Transaction_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2078,
    "annotation": "\n\t@And(\"load C_Flatrate_Transition from metasfresh:\")",
    "glue_code": "\t@And(\"load C_Flatrate_Transition from metasfresh:\")\n\tpublic void load_C_Flatrate_Transition(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tloadTransition(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 59,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transition/C_Flatrate_Transition_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transition",
      "filename": "C_Flatrate_Transition_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2079,
    "annotation": "\n\t@And(\"validate C_Flatrate_Transition\")",
    "glue_code": "\t@And(\"validate C_Flatrate_Transition\")\n\tpublic void validate_C_Flatrate_Transition(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidateTransition(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 69,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transition/C_Flatrate_Transition_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transition",
      "filename": "C_Flatrate_Transition_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2080,
    "annotation": "\n\t@And(\"metasfresh contains C_Flatrate_Transition\")",
    "glue_code": "\t@And(\"metasfresh contains C_Flatrate_Transition\")\n\tpublic void create_C_Flatrate_Transition(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateTransition(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 79,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transition/C_Flatrate_Transition_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/transition",
      "filename": "C_Flatrate_Transition_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2030,
    "annotation": "\n\t@And(\"load C_UOM:\")",
    "glue_code": "\t@And(\"load C_UOM:\")\n\tpublic void load_C_UOM(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String uomCode = DataTableUtil.extractStringForColumnName(row, I_C_UOM.COLUMNNAME_X12DE355);\n\n\t\t\tfinal I_C_UOM uomRecord = queryBL.createQueryBuilder(I_C_UOM.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_C_UOM.COLUMNNAME_X12DE355, uomCode)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_C_UOM.class);\n\n\t\t\tassertThat(uomRecord).isNotNull();\n\n\t\t\tfinal String uomIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_UOM.COLUMNNAME_C_UOM_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tuomTable.putOrReplace(uomIdentifier, uomRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/uom/C_UOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/uom",
      "filename": "C_UOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2031,
    "annotation": "\n\t@And(\"load C_UOM for product:\")",
    "glue_code": "\t@And(\"load C_UOM for product:\")\n\tpublic void load_C_UOM_for_product(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_M_Product.COLUMNNAME_M_Product_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\t\t\tassertThat(product).isNotNull();\n\n\t\t\tfinal I_C_UOM uomRecord = queryBL.createQueryBuilder(I_C_UOM.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_C_UOM.COLUMNNAME_C_UOM_ID, product.getC_UOM_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyOrNull(I_C_UOM.class);\n\n\t\t\tassertThat(uomRecord).isNotNull();\n\n\t\t\tfinal String uomIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_UOM.COLUMNNAME_C_UOM_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tuomTable.putOrReplace(uomIdentifier, uomRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 78,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/uom/C_UOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/uom",
      "filename": "C_UOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2032,
    "annotation": "\n\t@And(\"metasfresh contains C_UOMs:\")",
    "glue_code": "\t@And(\"metasfresh contains C_UOMs:\")\n\tpublic void metasfresh_contains_C_UOMs(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String uomIdentifier = DataTableUtil.extractStringForColumnName(row, TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String x12de355 = DataTableUtil.extractStringForColumnName(row, I_C_UOM.COLUMNNAME_X12DE355);\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_C_UOM.COLUMNNAME_Name);\n\t\t\tfinal String symbol = DataTableUtil.extractStringForColumnName(row, I_C_UOM.COLUMNNAME_UOMSymbol);\n\t\t\tfinal int stdPrecision = DataTableUtil.extractIntForColumnName(row, I_C_UOM.COLUMNNAME_StdPrecision);\n\t\t\tfinal int costingPrecision = DataTableUtil.extractIntForColumnName(row, I_C_UOM.COLUMNNAME_CostingPrecision);\n\t\t\tfinal String uomType = DataTableUtil.extractNullableStringForColumnName(row, \"OPT.\" + I_C_UOM.COLUMNNAME_UOMType);\n\n\t\t\tfinal I_C_UOM uomRecord = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t() -> uomDao.getByX12DE355IfExists(X12DE355.ofCode(x12de355)).orElse(null),\n\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_C_UOM.class));\n\n\t\t\tuomRecord.setX12DE355(x12de355);\n\t\t\tuomRecord.setName(name);\n\t\t\tuomRecord.setUOMSymbol(symbol);\n\t\t\tuomRecord.setStdPrecision(stdPrecision);\n\t\t\tuomRecord.setCostingPrecision(costingPrecision);\n\t\t\tif (EmptyUtil.isNotBlank(uomType))\n\t\t\t{\n\t\t\t\tuomRecord.setUOMType(DataTableUtil.nullToken2Null(uomType));\n\t\t\t}\n\n\t\t\tInterfaceWrapperHelper.saveRecord(uomRecord);\n\n\t\t\tuomTable.putOrReplace(uomIdentifier, uomRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 100,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/uom/C_UOM_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/uom",
      "filename": "C_UOM_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2060,
    "annotation": "\n\t@And(\"update M_Warehouse:\")",
    "glue_code": "\t@And(\"update M_Warehouse:\")\n\tpublic void update_M_Warehouse(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tupdateWarehouse(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 73,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse/M_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse",
      "filename": "M_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2061,
    "annotation": "\n\t@And(\"load M_Warehouse:\")",
    "glue_code": "\t@And(\"load M_Warehouse:\")\n\tpublic void load_M_Warehouse(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Warehouse_ID)\n\t\t\t\t.forEach(row -> {\n\t\t\t\t\tfinal String value = row.getAsString(COLUMNNAME_Value);\n\n\t\t\t\t\tfinal I_M_Warehouse warehouseRecord = queryBL.createQueryBuilder(I_M_Warehouse.class)\n\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Value, value)\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.firstOnlyNotNull(I_M_Warehouse.class);\n\n\t\t\t\t\trow.getAsOptionalIdentifier(I_M_Warehouse.COLUMNNAME_C_BPartner_Location_ID)\n\t\t\t\t\t\t\t.ifPresent(bpartnerLocationIdentifier -> {\n\t\t\t\t\t\t\t\tfinal I_C_BPartner_Location bPartnerLocation = load(warehouseRecord.getC_BPartner_Location_ID(), I_C_BPartner_Location.class);\n\t\t\t\t\t\t\t\tassertThat(bPartnerLocation).isNotNull();\n\t\t\t\t\t\t\t\tbpartnerLocationTable.putOrReplace(bpartnerLocationIdentifier, bPartnerLocation);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\trow.getAsIdentifier().put(warehouseTable, warehouseRecord);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 83,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse/M_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse",
      "filename": "M_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2062,
    "annotation": "\n\t@And(\"metasfresh contains M_Warehouse:\")",
    "glue_code": "\t@And(\"metasfresh contains M_Warehouse:\")\n\tpublic void create_M_Warehouse(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable)\n\t\t\t\t.setAdditionalRowIdentifierColumnName(COLUMNNAME_M_Warehouse_ID)\n\t\t\t\t.forEach((row) -> {\n\t\t\t\t\tfinal ValueAndName valueAndName = row.suggestValueAndName();\n\n\t\t\t\t\tfinal I_M_Warehouse warehouseRecord = CoalesceUtil.coalesceSuppliersNotNull(\n\t\t\t\t\t\t\t() -> queryBL.createQueryBuilder(I_M_Warehouse.class)\n\t\t\t\t\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Value, valueAndName.getValue())\n\t\t\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t\t\t.firstOnlyOrNull(I_M_Warehouse.class),\n\t\t\t\t\t\t\t() -> InterfaceWrapperHelper.newInstance(I_M_Warehouse.class));\n\n\t\t\t\t\tassertThat(warehouseRecord).isNotNull();\n\n\t\t\t\t\tfinal boolean isIssueWarehouse = row.getAsOptionalBoolean(COLUMNNAME_IsIssueWarehouse).orElse(false);\n\t\t\t\t\tif (isIssueWarehouse)\n\t\t\t\t\t{ // we can have just one issue-warehouse, so make sure that all other WHs are not issue-warehouses\n\t\t\t\t\t\tfinal ICompositeQueryUpdater<I_M_Warehouse> updater = queryBL.createCompositeQueryUpdater(I_M_Warehouse.class).addSetColumnValue(COLUMNNAME_IsIssueWarehouse, false);\n\t\t\t\t\t\tqueryBL.createQueryBuilder(I_M_Warehouse.class).addEqualsFilter(COLUMNNAME_IsIssueWarehouse, true).create().updateDirectly(updater);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal BPartnerId bpartnerId = row.getAsOptionalIdentifier(I_M_Warehouse.COLUMNNAME_C_BPartner_ID)\n\t\t\t\t\t\t\t.map(bpartnerTable::getId)\n\t\t\t\t\t\t\t.orElse(StepDefConstants.METASFRESH_AG_BPARTNER_ID);\n\n\t\t\t\t\tfinal int bpartnerLocationRepoId = row.getAsOptionalIdentifier(I_M_Warehouse.COLUMNNAME_C_BPartner_Location_ID)\n\t\t\t\t\t\t\t.map(bpartnerLocationTable::get)\n\t\t\t\t\t\t\t.map(I_C_BPartner_Location::getC_BPartner_Location_ID)\n\t\t\t\t\t\t\t.orElse(-1);\n\n\t\t\t\t\tfinal BPartnerLocationId bpartnerLocationId = bpartnerLocationRepoId > 0\n\t\t\t\t\t\t\t? BPartnerLocationId.ofRepoIdOrNull(bpartnerId, bpartnerLocationRepoId)\n\t\t\t\t\t\t\t: StepDefConstants.METASFRESH_AG_BPARTNER_LOCATION_ID;\n\n\t\t\t\t\tfinal boolean isInTransit = row.getAsOptionalBoolean(I_M_Warehouse.COLUMNNAME_IsInTransit).orElse(false);\n\t\t\t\t\tfinal boolean isQuarantineWarehouse = row.getAsOptionalBoolean(I_M_Warehouse.COLUMNNAME_IsQuarantineWarehouse).orElse(false);\n\t\t\t\t\tfinal boolean isQualityReturnWarehouse = row.getAsOptionalBoolean(I_M_Warehouse.COLUMNNAME_IsQualityReturnWarehouse).orElse(false);\n\n\t\t\t\t\twarehouseRecord.setValue(valueAndName.getValue());\n\t\t\t\t\twarehouseRecord.setName(valueAndName.getName());\n\t\t\t\t\twarehouseRecord.setSeparator(\"*\");\n\t\t\t\t\twarehouseRecord.setC_BPartner_ID(BPartnerId.toRepoId(bpartnerId));\n\t\t\t\t\twarehouseRecord.setC_BPartner_Location_ID(BPartnerLocationId.toRepoId(bpartnerLocationId));\n\t\t\t\t\twarehouseRecord.setIsIssueWarehouse(isIssueWarehouse);\n\t\t\t\t\twarehouseRecord.setIsInTransit(isInTransit);\n\t\t\t\t\twarehouseRecord.setIsQuarantineWarehouse(isQuarantineWarehouse);\n\t\t\t\t\twarehouseRecord.setIsQualityReturnWarehouse(isQualityReturnWarehouse);\n\n\t\t\t\t\trow.getAsOptionalIdentifier(I_M_Warehouse.COLUMNNAME_PP_Plant_ID)\n\t\t\t\t\t\t\t.map(identifier -> resourceTable.getIdOptional(identifier).orElseGet(() -> identifier.getAsId(ResourceId.class)))\n\t\t\t\t\t\t\t.ifPresent(resourceId -> warehouseRecord.setPP_Plant_ID(resourceId.getRepoId()));\n\n\t\t\t\t\tsaveRecord(warehouseRecord);\n\n\t\t\t\t\tfinal I_M_Locator locator = warehouseBL.getOrCreateDefaultLocator(WarehouseId.ofRepoId(warehouseRecord.getM_Warehouse_ID()));\n\t\t\t\t\trow.getAsOptionalIdentifier(I_M_Locator.COLUMNNAME_M_Locator_ID)\n\t\t\t\t\t\t\t.ifPresent(locatorIdentifier -> locatorTable.put(locatorIdentifier, locator));\n\n\t\t\t\t\trow.getAsIdentifier().put(warehouseTable, warehouseRecord);\n\t\t\t\t});\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 107,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse/M_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse",
      "filename": "M_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2063,
    "annotation": "\n\t@And(\"there is no in transit M_Warehouse\")",
    "glue_code": "\t@And(\"there is no in transit M_Warehouse\")\n\tpublic void no_inTransit_M_Warehouse()\n\t{\n\t\tqueryBL.createQueryBuilder(I_M_Warehouse.class)\n\t\t\t\t.addEqualsFilter(I_M_Warehouse.COLUMNNAME_IsInTransit, true)\n\t\t\t\t.create()\n\t\t\t\t.updateDirectly()\n\t\t\t\t.addSetColumnValue(I_M_Warehouse.COLUMNNAME_IsInTransit, false)\n\t\t\t\t.execute();\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 172,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse/M_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse",
      "filename": "M_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2029,
    "annotation": "\n\t@Then(\"there is a new completed inventory for the issued out of stock notice\")",
    "glue_code": "\t@Then(\"there is a new completed inventory for the issued out of stock notice\")\n\tpublic void inventoryIsCompleted(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tfinal String content = testContext.getApiResponse().getContent();\n\n\t\t\tfinal JsonOutOfStockResponse outOfStockResponse = JsonObjectMapperHolder.sharedJsonObjectMapper().readValue(content, JsonOutOfStockResponse.class);\n\n\t\t\tassertEquals(1, outOfStockResponse.getAffectedWarehouses().size());\n\n\t\t\tfinal JsonOutOfStockResponseItem affectedWarehouse = outOfStockResponse.getAffectedWarehouses().get(0);\n\n\t\t\tassertNotNull(affectedWarehouse.getInventoryDocNo());\n\t\t\tassertEquals(affectedWarehouse.getWarehouseId().getValue(), DataTableUtil.extractIntForColumnName(tableRow, I_M_Inventory.COLUMNNAME_M_Warehouse_ID));\n\n\t\t\tfinal I_M_Inventory inventory = queryBL.createQueryBuilderOutOfTrx(I_M_Inventory.class)\n\t\t\t\t\t.addEqualsFilter(I_M_Inventory.COLUMNNAME_DocumentNo, affectedWarehouse.getInventoryDocNo())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_M_Inventory.class);\n\n\t\t\tassertNotNull(inventory);\n\n\t\t\tassertEquals(IDocument.STATUS_Completed, inventory.getDocStatus());\n\n\t\t\tfinal I_M_InventoryLine inventoryLineRecord = queryBL.createQueryBuilderOutOfTrx(I_M_InventoryLine.class)\n\t\t\t\t\t.addEqualsFilter(I_M_InventoryLine.COLUMNNAME_M_Inventory_ID, inventory.getM_Inventory_ID())\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnly(I_M_InventoryLine.class);\n\n\t\t\tassertNotNull(inventoryLineRecord);\n\n\t\t\tassertEquals(DataTableUtil.extractIntForColumnName(tableRow, I_M_InventoryLine.COLUMNNAME_QtyCount),\n\t\t\t\t\t\t inventoryLineRecord.getQtyCount().intValue());\n\n\t\t\tassertEquals(DataTableUtil.extractIntForColumnName(tableRow, I_M_InventoryLine.COLUMNNAME_QtyBook),\n\t\t\t\t\t\t inventoryLineRecord.getQtyBook().intValue());\n\t\t}\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 55,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse/OutOfStockNotice_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouse",
      "filename": "OutOfStockNotice_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2034,
    "annotation": "\n\t@And(\"metasfresh contains M_Product_Warehouse\")",
    "glue_code": "\t@And(\"metasfresh contains M_Product_Warehouse\")\n\tpublic void metasfresh_contains_warehouse_assignments(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tcreateWarehouseAssignment(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 71,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouseassignment/M_Product_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouseassignment",
      "filename": "M_Product_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2035,
    "annotation": "\n\t@And(\"locate warehouse assignments\")",
    "glue_code": "\t@And(\"locate warehouse assignments\")\n\tpublic void locate_assignments_by_product_id(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tlocate_assignments_by_product_id(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouseassignment/M_Product_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouseassignment",
      "filename": "M_Product_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2036,
    "annotation": "\n\t@And(\"validate warehouse assignments\")",
    "glue_code": "\t@And(\"validate warehouse assignments\")\n\tpublic void validate_assignments(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> tableRows = dataTable.asMaps(String.class, String.class);\n\t\tfor (final Map<String, String> tableRow : tableRows)\n\t\t{\n\t\t\tvalidate_assignment(tableRow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 91,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouseassignment/M_Product_Warehouse_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/warehouseassignment",
      "filename": "M_Product_Warehouse_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2026,
    "annotation": "\n\t@And(\"load AD_WF_Node:\")",
    "glue_code": "\t@And(\"load AD_WF_Node:\")\n\tpublic void load_AD_WF_Node(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal Integer id = DataTableUtil.extractIntegerOrNullForColumnName(row, COLUMNNAME_AD_WF_Node_ID);\n\t\t\tassertThat(id).isNotNull();\n\n\t\t\tfinal I_AD_WF_Node workflowNode = InterfaceWrapperHelper.load(id, I_AD_WF_Node.class);\n\n\t\t\tfinal String workflowNodeIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_WF_Node_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tworkflowNodeTable.putOrReplace(workflowNodeIdentifier, workflowNode);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 65,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_WF_Node_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_WF_Node_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2027,
    "annotation": "\n\t@And(\"create AD_WF_Node:\")",
    "glue_code": "\t@And(\"create AD_WF_Node:\")\n\tpublic void create_AD_WF_Node(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String name = DataTableUtil.extractStringForColumnName(row, I_AD_WF_Node.COLUMNNAME_Name);\n\t\t\tfinal String value = DataTableUtil.extractStringForColumnName(row, I_AD_WF_Node.COLUMNNAME_Value);\n\t\t\tfinal String description = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_AD_WF_Node.COLUMNNAME_Description);\n\t\t\tfinal int duration = DataTableUtil.extractIntForColumnName(row, I_AD_WF_Node.COLUMNNAME_Duration);\n\n\t\t\tfinal String workflowIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_WF_Node.COLUMNNAME_AD_Workflow_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Workflow workflow = workflowTable.get(workflowIdentifier);\n\n\t\t\tfinal String resourceIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_AD_WF_Node.COLUMNNAME_S_Resource_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal Integer resourceID = Optional.ofNullable(resourceIdentifier)\n\t\t\t\t\t.map(resourceTable::get)\n\t\t\t\t\t.map(I_S_Resource::getS_Resource_ID)\n\t\t\t\t\t.orElse(-1);\n\n\t\t\tfinal I_AD_WF_Node wfNode = InterfaceWrapperHelper.newInstance(I_AD_WF_Node.class);\n\t\t\twfNode.setName(name);\n\t\t\twfNode.setDescription(description);\n\t\t\twfNode.setValue(value);\n\t\t\twfNode.setDuration(duration);\n\t\t\twfNode.setAD_Workflow_ID(workflow.getAD_Workflow_ID());\n\t\t\twfNode.setS_Resource_ID(resourceID);\n\n\t\t\tInterfaceWrapperHelper.saveRecord(wfNode);\n\n\t\t\tfinal String wfNodeIdentifier = DataTableUtil.extractStringForColumnName(row, I_AD_WF_Node.COLUMNNAME_AD_WF_Node_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tworkflowNodeTable.put(wfNodeIdentifier, wfNode);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 81,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_WF_Node_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_WF_Node_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2028,
    "annotation": "\n\t@And(\"^after not more than (.*)s, AD_WF_Node are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, AD_WF_Node are found:$\")\n\tpublic void validate_AD_WF_Node(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, () -> load_AD_WF_Node(row));\n\t\t\t}\n\t\t\tcatch (InterruptedException e)\n\t\t\t{\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 116,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_WF_Node_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_WF_Node_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2054,
    "annotation": "\t\n\t@And(\"load AD_Workflow:\")",
    "glue_code": "\t@And(\"load AD_Workflow:\")\n\tpublic void load_AD_Workflow(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String workflowName = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_Name);\n\n\t\t\tfinal I_AD_Workflow workflow = queryBL.createQueryBuilder(I_AD_Workflow.class)\n\t\t\t\t\t.addEqualsFilter(COLUMNNAME_Name, workflowName)\n\t\t\t\t\t.create()\n\t\t\t\t\t.firstOnlyNotNull(I_AD_Workflow.class);\n\n\t\t\tfinal String workflowIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_Workflow_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tworkflowTable.put(workflowIdentifier, workflow);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 86,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_Workflow_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_Workflow_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2055,
    "annotation": "\n\t@And(\"create AD_Workflow:\")",
    "glue_code": "\t@And(\"create AD_Workflow:\")\n\tpublic void create_AD_Workflow(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcreateWorkflow(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 104,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_Workflow_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_Workflow_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2056,
    "annotation": "\n\t@And(\"clone AD_Workflow:\")",
    "glue_code": "\t@And(\"clone AD_Workflow:\")\n\tpublic void clone_AD_Workflow(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tcloneWorkflow(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 114,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_Workflow_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_Workflow_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2057,
    "annotation": "\n\t@And(\"validate AD_Workflow:\")",
    "glue_code": "\t@And(\"validate AD_Workflow:\")\n\tpublic void validate_AD_Workflow(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tvalidateWorkflow(row);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 124,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_Workflow_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_Workflow_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2058,
    "annotation": "\n\t@And(\"update AD_Workflow:\")",
    "glue_code": "\t@And(\"update AD_Workflow:\")\n\tpublic void update_AD_Workflow(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal String workflowIdentifier = DataTableUtil.extractStringForColumnName(row, COLUMNNAME_AD_Workflow_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Workflow workflowRecord = workflowTable.get(workflowIdentifier);\n\n\t\t\tfinal String wfNodeIdentifier = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + COLUMNNAME_AD_WF_Node_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tif (Check.isNotBlank(wfNodeIdentifier))\n\t\t\t{\n\t\t\t\tfinal I_AD_WF_Node wfNode = wfNodeTable.get(wfNodeIdentifier);\n\t\t\t\tworkflowRecord.setAD_WF_Node_ID(wfNode.getAD_WF_Node_ID());\n\t\t\t}\n\t\t\tInterfaceWrapperHelper.saveRecord(workflowRecord);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 134,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/AD_Workflow_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "AD_Workflow_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2081,
    "annotation": "\n\t@And(\"create JsonWFProcessStartRequest for distribution and store it in context as request payload:\")",
    "glue_code": "\t@And(\"create JsonWFProcessStartRequest for distribution and store it in context as request payload:\")\n\tpublic void wf_distribution_process_start_set_request_payload_in_context(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\t\tfinal StepDefDataIdentifier ddOrderIdentifier = row.getAsIdentifier(I_DD_Order.COLUMNNAME_DD_Order_ID);\n\t\tfinal JsonWFProcessStartRequest request = createJsonWFProcessStartRequest(ddOrderIdentifier);\n\t\ttestContext.setRequestPayload(request);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 54,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/DistributionWorkflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "DistributionWorkflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2082,
    "annotation": "\n\t@And(\"process response and extract distribution step and pickFrom HU distribution candidate:\")",
    "glue_code": "\t@And(\"process response and extract distribution step and pickFrom HU distribution candidate:\")\n\tpublic void extract_distribution_information(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal WFProcessResponse wfProcess = extractWFProcessResponse(testContext.getApiResponse());\n\t\trow.getAsIdentifier(\"WorkflowProcess\").putOrReplace(workflowProcessTable, wfProcess.getWfProcessId());\n\t\trow.getAsIdentifier(\"WorkflowActivity\").put(workflowActivityTable, wfProcess.getWfActivityId());\n\t\trow.getAsIdentifier(\"WorkflowStep\").put(workflowDistributionStepTable, wfProcess.getSingleStepOrNull());\n\t\tqrCodeTable.put(row.getAsIdentifier(\"WorkflowStepQRCode\"), wfProcess.getStepPickFromHUQRCode());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 154,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/DistributionWorkflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "DistributionWorkflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2083,
    "annotation": "\n\t@And(\"create JsonDistributionEvent and store it in context as request payload:\")",
    "glue_code": "\t@And(\"create JsonDistributionEvent and store it in context as request payload:\")\n\tpublic void distribution_event_request_payload(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal JsonDistributionEvent.JsonDistributionEventBuilder distributionEventBuilder = JsonDistributionEvent.builder()\n\t\t\t\t.wfProcessId(row.getAsIdentifier(\"WorkflowProcess\").lookupIn(workflowProcessTable).getAsString())\n\t\t\t\t.wfActivityId(row.getAsIdentifier(\"WorkflowActivity\").lookupIn(workflowActivityTable).getAsString())\n\t\t\t\t.distributionStepId(row.getAsIdentifier(\"WorkflowStep\").lookupIn(workflowDistributionStepTable).getId());\n\n\t\tfinal String event = row.getAsString(\"Event\");\n\t\tif (event.equals(\"PickFrom\"))\n\t\t{\n\t\t\tfinal JsonHUQRCode stepQRCode = row.getAsIdentifier(\"WorkflowStepQRCode\").lookupIn(qrCodeTable);\n\t\t\tdistributionEventBuilder.pickFrom(JsonDistributionEvent.PickFrom.builder().qrCode(stepQRCode.getCode()).build());\n\t\t}\n\t\telse if (event.equals(\"DropTo\"))\n\t\t{\n\t\t\tdistributionEventBuilder.dropTo(JsonDistributionEvent.DropTo.builder().build());\n\t\t}\n\n\t\ttestContext.setRequestPayload(jsonObjectMapper.writeValueAsString(distributionEventBuilder.build()));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 166,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/DistributionWorkflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "DistributionWorkflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2043,
    "annotation": "\n\t@And(\"create PP_WF_Node_Product:\")",
    "glue_code": "\t@And(\"create PP_WF_Node_Product:\")\n\tpublic void create_PP_WF_Node_Product(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\tfinal BigDecimal quantity = DataTableUtil.extractBigDecimalOrNullForColumnName(row, \"OPT.\" + I_PP_WF_Node_Product.COLUMNNAME_Qty);\n\t\t\tfinal String specification = DataTableUtil.extractStringOrNullForColumnName(row, \"OPT.\" + I_PP_WF_Node_Product.COLUMNNAME_Specification);\n\t\t\tfinal boolean isSubcontracting = DataTableUtil.extractBooleanForColumnNameOr(row, \"OPT.\" + I_PP_WF_Node_Product.COLUMNNAME_IsSubcontracting, false);\n\n\t\t\tfinal String productIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_WF_Node_Product.COLUMNNAME_M_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_M_Product product = productTable.get(productIdentifier);\n\n\t\t\tfinal String wfStepIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_WF_Node_Product.COLUMNNAME_AD_WF_Node_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_WF_Node wfNode = workflowNodeTable.get(wfStepIdentifier);\n\n\t\t\tfinal String workflowIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_WF_Node_Product.COLUMNNAME_AD_Workflow_ID + \".\" + TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_AD_Workflow workflow = workflowTable.get(workflowIdentifier);\n\n\t\t\tfinal I_PP_WF_Node_Product wfNodeProduct = InterfaceWrapperHelper.newInstance(I_PP_WF_Node_Product.class);\n\t\t\twfNodeProduct.setQty(quantity);\n\t\t\twfNodeProduct.setSpecification(specification);\n\t\t\twfNodeProduct.setIsSubcontracting(isSubcontracting);\n\t\t\twfNodeProduct.setM_Product_ID(product.getM_Product_ID());\n\t\t\twfNodeProduct.setAD_WF_Node_ID(wfNode.getAD_WF_Node_ID());\n\t\t\twfNodeProduct.setAD_Workflow_ID(workflow.getAD_Workflow_ID());\n\n\t\t\tInterfaceWrapperHelper.saveRecord(wfNodeProduct);\n\n\t\t\tfinal String wfNodeProductIdentifier = DataTableUtil.extractStringForColumnName(row, I_PP_WF_Node_Product.COLUMNNAME_PP_WF_Node_Product_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tworkflowNodeProductTable.put(wfNodeProductIdentifier, wfNodeProduct);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 69,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PP_WF_Node_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PP_WF_Node_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2044,
    "annotation": "\n\t@And(\"^after not more than (.*)s, PP_WF_Node_Product are found:$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, PP_WF_Node_Product are found:$\")\n\tpublic void validate_PP_WF_Node_Product(final int timeoutSec, @NonNull final DataTable dataTable)\n\t{\n\t\tfinal List<Map<String, String>> rows = dataTable.asMaps();\n\t\tfor (final Map<String, String> row : rows)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tStepDefUtil.tryAndWait(timeoutSec, 1000, () -> load_PP_WF_Node_Product(row));\n\t\t\t}\n\t\t\tcatch (InterruptedException e)\n\t\t\t{\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 103,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PP_WF_Node_Product_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PP_WF_Node_Product_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2073,
    "annotation": "\n\t@And(\"process response and extract picking step and main HU picking candidate:\")",
    "glue_code": "\t@And(\"process response and extract picking step and main HU picking candidate:\")\n\tpublic void extract_picking_information(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal String content = testContext.getApiResponse().getContent();\n\t\tfinal JsonNode response = objectMapper.readValue(content, JsonNode.class);\n\n\t\tfinal WFProcessId wfProcessId = WFProcessId.ofString(response.at(\"/id\").asText());\n\t\trow.getAsIdentifier(\"WorkflowProcess\").putOrReplace(workflowProcessTable, wfProcessId);\n\n\t\tfinal JsonNode wfActivities = response.at(\"/activities\");\n\t\tfor (final JsonNode wfActivityNode : wfActivities)\n\t\t{\n\t\t\tif (!PICKING_ACTIVITY_COMPONENT_TYPE.equals(wfActivityNode.at(\"/componentType\").asText()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal WFActivityId wfActivityId = WFActivityId.ofString(wfActivityNode.at(\"/activityId\").asText());\n\t\t\trow.getAsIdentifier(\"WorkflowActivity\").put(workflowActivityTable, wfActivityId);\n\n\t\t\tfinal JsonNode pickingLinesNodes = wfActivityNode.at(\"/componentProps/pickingJob/lines\");\n\t\t\tassertThat(pickingLinesNodes.size()).isOne();\n\t\t\tfinal JsonPickingJobLine pickingLine = objectMapper.treeToValue(pickingLinesNodes.get(0), JsonPickingJobLine.class);\n\t\t\trow.getAsIdentifier(\"PickingLine\").put(workflowPickingLineTable, pickingLine);\n\n\t\t\tif (row.getAsOptionalIdentifier(\"PickingStep\").isPresent())\n\t\t\t{\n\t\t\t\tfinal JsonNode pickingStepsNodes = pickingLinesNodes.get(0).at(\"/steps\");\n\t\t\t\tassertThat(pickingStepsNodes.size()).isOne();\n\t\t\t\tfinal JsonWFPickingStep pickingStep = objectMapper.treeToValue(pickingStepsNodes.get(0), JsonWFPickingStep.class);\n\n\t\t\t\trow.getAsIdentifier(\"PickingStep\").put(workflowPickingStepTable, pickingStep);\n\t\t\t\trow.getAsIdentifier(\"PickingStepQRCode\").put(qrCodeTable, pickingStep.getMainPickFrom().getHuQRCode());\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 70,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PickingRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PickingRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2074,
    "annotation": "\n\t@And(\"process response and extract activityId:\")",
    "glue_code": "\t@And(\"process response and extract activityId:\")\n\tpublic void extract_activity(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal String content = testContext.getApiResponse().getContent();\n\t\tfinal JsonNode response = objectMapper.readValue(content, JsonNode.class);\n\t\tfinal String componentType = row.getAsString(\"componentType\");\n\n\t\tfinal JsonNode wfActivities = response.at(\"/activities\");\n\t\tfor (final JsonNode wfActivityNode : wfActivities)\n\t\t{\n\t\t\tif (!componentType.equals(wfActivityNode.at(\"/componentType\").asText()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal WFActivityId wfActivityId = WFActivityId.ofString(wfActivityNode.at(\"/activityId\").asText());\n\t\t\trow.getAsIdentifier(\"WorkflowActivity\").put(workflowActivityTable, wfActivityId);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 109,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PickingRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PickingRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2075,
    "annotation": "\n\t@And(\"create JsonPickingEventsList and store it in context as request payload:\")",
    "glue_code": "\t@And(\"create JsonPickingEventsList and store it in context as request payload:\")\n\tpublic void picking_events_request_payload(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal JsonPickingStepEvent pickingEvent = extractJsonPickingStepEvent(dataTable);\n\t\ttestContext.setRequestPayload(objectMapper.writeValueAsString(pickingEvent));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 131,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PickingRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PickingRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2076,
    "annotation": "\n\t@And(\"^store workflow endpointPath (.*) in context$\")",
    "glue_code": "\t@And(\"^store workflow endpointPath (.*) in context$\")\n\tpublic void store_workflow_endpointPath_in_context(@NonNull final String endpointPath)\n\t{\n\t\tfinal String regex = \"(:[a-zA-Z0-9\\\\-]+)\";\n\n\t\tfinal Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);\n\t\tfinal Matcher matcher = pattern.matcher(endpointPath);\n\n\t\tassertThat(matcher.find()).isTrue();\n\t\tfinal String workflowIdentifierGroup = matcher.group(1);\n\t\tfinal String workflowIdentifier = workflowIdentifierGroup.replace(\":\", \"\");\n\t\tfinal WFProcessId wfProcessId = workflowProcessTable.get(workflowIdentifier);\n\n\t\tString actualEndpoint = endpointPath.replace(workflowIdentifierGroup, wfProcessId.getAsString());\n\n\t\tif (matcher.find())\n\t\t{\n\t\t\tfinal String activityIdentifierGroup = matcher.group(1);\n\t\t\tfinal String activityIdentifier = activityIdentifierGroup.replace(\":\", \"\");\n\t\t\tfinal de.metas.workflow.rest_api.model.WFActivityId activityId = workflowActivityTable.get(activityIdentifier);\n\n\t\t\tactualEndpoint = actualEndpoint.replace(activityIdentifierGroup, activityId.getAsString());\n\t\t}\n\n\t\ttestContext.setEndpointPath(actualEndpoint);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 138,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PickingRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PickingRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2077,
    "annotation": "\n\t@And(\"scan M_PickingSlot for PickingJob\")",
    "glue_code": "\t@And(\"scan M_PickingSlot for PickingJob\")\n\tpublic void scan_picking_slot(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\t\tfinal I_M_PickingSlot slot = pickingSlotsTable.getOptional(row.getAsIdentifier(I_M_PickingSlot.COLUMNNAME_M_PickingSlot_ID))\n\t\t\t\t.orElseThrow(() -> new AdempiereException(\"No M_PickingSlot found for identifier=\" + row.getAsIdentifier(I_M_PickingSlot.COLUMNNAME_M_PickingSlot_ID)));\n\n\t\tmobileUIPickingClient.scanPickingSlot(workflowProcessTable.get(row.getAsIdentifier(\"WorkflowProcess\")).getAsString(),\n\t\t\t\t\t\t\t\t\t\t\t  PickingSlotIdAndCaption.of(PickingSlotId.ofRepoId(slot.getM_PickingSlot_ID()), slot.getPickingSlot()));\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 165,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/PickingRestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "PickingRestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2052,
    "annotation": "\n\t@Then(\"validate workflow process\")",
    "glue_code": "\t@Then(\"validate workflow process\")\n\tpublic void validateDocStatusForProcess(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal SoftAssertions softAssertions = new SoftAssertions();\n\t\tDataTableRows.of(dataTable).forEach((row) -> {\n\t\t\tfinal WFProcessId processId = row.getAsIdentifier(\"WorkflowProcess\").lookupIn(workflowProcessTable);\n\n\t\t\tif (processId.getAsString().startsWith(PickingMobileApplication.APPLICATION_ID.getAsString()))\n\t\t\t{\n\t\t\t\tvalidatePickingJob(processId, row, softAssertions);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsoftAssertions.fail(\"Unknown processId = \" + processId.getAsString());\n\t\t\t}\n\t\t});\n\n\t\tsoftAssertions.assertAll();\n\t}",
    "original_keyword": "Then",
    "keyword": "Then",
    "line_in_the_file": 45,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/WorkflowProcess_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "WorkflowProcess_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2045,
    "annotation": "\n\t@And(\"update duration for AD_Workflow nodes\")",
    "glue_code": "\t@And(\"update duration for AD_Workflow nodes\")\n\tpublic void update_AD_Workflow_nodes(@NonNull final DataTable dataTable)\n\t{\n\t\tDataTableRows.of(dataTable).forEach(this::updateADWorkflowNodes);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 94,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/Workflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "Workflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2046,
    "annotation": "\n\t@And(\"create JsonWFProcessStartRequest for picking and store it in context as request payload:\")",
    "glue_code": "\t@And(\"create JsonWFProcessStartRequest for picking and store it in context as request payload:\")\n\tpublic void wf_picking_process_start_set_request_payload_in_context(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\t\tfinal I_C_Order salesOrder = row.getAsIdentifier(I_C_Order.COLUMNNAME_C_Order_ID).lookupIn(orderTable);\n\t\tassertThat(salesOrder).isNotNull();\n\n\t\tfinal LinkedHashMap<String, Object> wfParams = new LinkedHashMap<>(PickingWFProcessStartParams.builder()\n\t\t\t\t.aggregationType(PickingJobAggregationType.SALES_ORDER)\n\t\t\t\t.salesOrderId(OrderId.ofRepoId(salesOrder.getC_Order_ID()))\n\t\t\t\t.deliveryBPLocationId(BPartnerLocationId.ofRepoId(salesOrder.getC_BPartner_ID(), salesOrder.getC_BPartner_Location_ID()))\n\t\t\t\t.build()\n\t\t\t\t.toParams()\n\t\t\t\t.toJson());\n\t\twfParams.put(\"applicationId\", PickingMobileApplication.APPLICATION_ID.getAsString());\n\t\tfinal JsonWFProcessStartRequest request = JsonWFProcessStartRequest.builder().wfParameters(wfParams).build();\n\n\t\ttestContext.setRequestPayload(request);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 100,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/Workflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "Workflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2047,
    "annotation": "\n\t@And(\"create JsonWFProcessStartRequest for manufacturing and store it in context as request payload:\")",
    "glue_code": "\t@And(\"create JsonWFProcessStartRequest for manufacturing and store it in context as request payload:\")\n\tpublic void wf_manufacturing_process_start_set_request_payload_in_context(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\t\tfinal I_PP_Order ppOrder = row.getAsIdentifier(I_PP_Order.COLUMNNAME_PP_Order_ID).lookupIn(ppOrderTable);\n\n\t\tfinal Map<String, Object> wfParams = new HashMap<>();\n\t\twfParams.put(\"applicationId\", ManufacturingMobileApplication.APPLICATION_ID.getAsString());\n\t\twfParams.put(\"ppOrderId\", ppOrder.getPP_Order_ID());\n\n\t\tfinal JsonWFProcessStartRequest request = JsonWFProcessStartRequest.builder().wfParameters(wfParams).build();\n\n\t\ttestContext.setRequestPayload(request);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 120,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/Workflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "Workflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2048,
    "annotation": "\n\t@And(\"process response and extract manufacturing step and issueTo HU manufacturing candidate:\")",
    "glue_code": "\t@And(\"process response and extract manufacturing step and issueTo HU manufacturing candidate:\")\n\tpublic void extract_manufacturing_issue_to_information(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal String content = testContext.getApiResponse().getContent();\n\t\tfinal JsonNode response = objectMapper.readValue(content, JsonNode.class);\n\n\t\tfinal WFProcessId wfProcessId = WFProcessId.ofString(response.at(\"/id\").asText());\n\t\trow.getAsIdentifier(\"WorkflowProcess\").putOrReplace(workflowProcessTable, wfProcessId);\n\n\t\tfor (final JsonNode activityNode : response.at(\"/activities\"))\n\t\t{\n\t\t\tif (!MANUFACTURING_ISSUE_TO_ACTIVITY_COMPONENT_TYPE.equals(activityNode.at(\"/componentType\").asText()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal WFActivityId workflowActivity = WFActivityId.ofString(activityNode.at(\"/activityId\").asText());\n\t\t\trow.getAsIdentifier(\"WorkflowActivity\").put(workflowActivityTable, workflowActivity);\n\n\t\t\tfinal JsonNode manufacturingActivityLines = activityNode.at(\"/componentProps/lines\");\n\t\t\tassertThat(manufacturingActivityLines.size()).isOne();\n\t\t\tfinal JsonNode workflowSteps = manufacturingActivityLines.get(0).at(\"/steps\");\n\t\t\tassertThat(workflowSteps.size()).isOne();\n\t\t\tfinal JsonWFManufacturingStep workflowManufacturingStep = objectMapper.treeToValue(workflowSteps.get(0), JsonWFManufacturingStep.class);\n\t\t\trow.getAsIdentifier(\"WorkflowStep\").put(workflowManufacturingStepTable, workflowManufacturingStep);\n\t\t\trow.getAsIdentifier(\"WorkflowStepQRCode\").put(qrCodeTable, workflowManufacturingStep.getHuQRCode());\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 135,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/Workflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "Workflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2049,
    "annotation": "\n\t@And(\"process response and extract manufacturing line and receiving target values:\")",
    "glue_code": "\t@And(\"process response and extract manufacturing line and receiving target values:\")\n\tpublic void extract_manufacturing_receive_from_information(@NonNull final DataTable dataTable) throws JsonProcessingException\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal String content = testContext.getApiResponse().getContent();\n\t\tfinal JsonNode response = objectMapper.readValue(content, JsonNode.class);\n\n\t\tfinal WFProcessId wfProcessId = WFProcessId.ofString(response.at(\"/id\").asText());\n\t\trow.getAsIdentifier(\"WorkflowProcess\").putOrReplace(workflowProcessTable, wfProcessId);\n\n\t\tfor (final JsonNode activityNode : response.at(\"/activities\"))\n\t\t{\n\t\t\tif (!MANUFACTURING_RECEIVE_FROM_ACTIVITY_COMPONENT_TYPE.equals(activityNode.at(\"/componentType\").asText()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal WFActivityId workflowActivity = WFActivityId.ofString(activityNode.at(\"/activityId\").asText());\n\t\t\trow.getAsIdentifier(\"WorkflowActivity\").put(workflowActivityTable, workflowActivity);\n\n\t\t\tfinal JsonNode manufacturingActivityLines = activityNode.at(\"/componentProps/lines\");\n\t\t\tassertThat(manufacturingActivityLines.size()).isOne();\n\t\t\tfinal JsonNode workflowLine = manufacturingActivityLines.get(0);\n\t\t\tfinal JsonWFLineManufacturingMaterialReceipt materialReceiptLine = objectMapper.treeToValue(workflowLine, JsonWFLineManufacturingMaterialReceipt.class);\n\t\t\trow.getAsIdentifier(\"WorkflowLine\").put(materialReceiptLineTable, materialReceiptLine);\n\n\t\t\tfinal JsonNode availableReceivingTargetValues = workflowLine.at(\"/availableReceivingTargets/values\");\n\t\t\tassertThat(availableReceivingTargetValues.size()).isOne();\n\t\t\tfinal JsonWFManufacturingReceivingTargetValues receivingTargetValues = objectMapper.treeToValue(availableReceivingTargetValues.get(0), JsonWFManufacturingReceivingTargetValues.class);\n\t\t\trow.getAsIdentifier(\"WorkflowReceivingTargetValues\").put(receivingTargetValuesTable, receivingTargetValues);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 166,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/Workflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "Workflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2050,
    "annotation": "\n\t@And(\"create JsonManufacturingOrderEvent and store it in context as request payload:\")",
    "glue_code": "\t@And(\"create JsonManufacturingOrderEvent and store it in context as request payload:\")\n\tpublic void manufacturing_event_request_payload(@NonNull final DataTable dataTable)\n\t{\n\t\tfinal DataTableRow row = DataTableRow.singleRow(dataTable);\n\n\t\tfinal String event = row.getAsString(\"Event\");\n\t\tfinal WFProcessId workflowProcess = row.getAsIdentifier(\"WorkflowProcess\").lookupIn(workflowProcessTable);\n\t\tfinal WFActivityId workflowActivity = row.getAsIdentifier(\"WorkflowActivity\").lookupIn(workflowActivityTable);\n\n\t\tfinal JsonManufacturingOrderEvent.JsonManufacturingOrderEventBuilder manufacturingOrderEventBuilder = JsonManufacturingOrderEvent.builder();\n\n\t\tif (event.equals(\"IssueTo\"))\n\t\t{\n\t\t\tfinal JsonWFManufacturingStep workflowStep = row.getAsIdentifier(\"WorkflowStep\").lookupIn(workflowManufacturingStepTable);\n\t\t\tfinal JsonHUQRCode qrCode = row.getAsIdentifier(\"WorkflowStepQRCode\").lookupIn(qrCodeTable);\n\n\t\t\tmanufacturingOrderEventBuilder\n\t\t\t\t\t.wfProcessId(workflowProcess.getAsString())\n\t\t\t\t\t.wfActivityId(workflowActivity.getAsString())\n\t\t\t\t\t.issueTo(JsonManufacturingOrderEvent.IssueTo.builder()\n\t\t\t\t\t\t\t.issueStepId(workflowStep.getId())\n\t\t\t\t\t\t\t.qtyIssued(workflowStep.getQtyToIssue())\n\t\t\t\t\t\t\t.huQRCode(qrCode.getCode())\n\t\t\t\t\t\t\t.build());\n\t\t}\n\t\telse if (event.equals(\"ReceiveFrom\"))\n\t\t{\n\t\t\tfinal JsonWFLineManufacturingMaterialReceipt workflowLine = row.getAsIdentifier(\"WorkflowLine\").lookupIn(materialReceiptLineTable);\n\t\t\tfinal JsonWFManufacturingReceivingTargetValues receivingTargetValues = row.getAsIdentifier(\"WorkflowReceivingTargetValues\").lookupIn(receivingTargetValuesTable);\n\n\t\t\tmanufacturingOrderEventBuilder\n\t\t\t\t\t.wfProcessId(workflowProcess.getAsString())\n\t\t\t\t\t.wfActivityId(workflowActivity.getAsString())\n\t\t\t\t\t.receiveFrom(JsonManufacturingOrderEvent.ReceiveFrom.builder()\n\t\t\t\t\t\t\t.lineId(workflowLine.getId())\n\t\t\t\t\t\t\t.qtyReceived(workflowLine.getQtyToReceive())\n\t\t\t\t\t\t\t.aggregateToLU(JsonLUReceivingTarget.builder()\n\t\t\t\t\t\t\t\t\t.newLU(JsonNewLUTarget.builder()\n\t\t\t\t\t\t\t\t\t\t\t.luCaption(receivingTargetValues.getLuCaption())\n\t\t\t\t\t\t\t\t\t\t\t.tuCaption(receivingTargetValues.getTuCaption())\n\t\t\t\t\t\t\t\t\t\t\t.luPIItemId(HuPackingInstructionsItemId.ofRepoId(receivingTargetValues.getLuPIItemId()))\n\t\t\t\t\t\t\t\t\t\t\t.tuPIItemProductId(HUPIItemProductId.ofRepoId(receivingTargetValues.getTuPIItemProductId()))\n\t\t\t\t\t\t\t\t\t\t\t.build())\n\t\t\t\t\t\t\t\t\t.build())\n\t\t\t\t\t\t\t.build());\n\t\t}\n\n\t\ttestContext.setRequestPayload(manufacturingOrderEventBuilder.build());\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 200,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow/Workflow_RestController_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workflow",
      "filename": "Workflow_RestController_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2059,
    "annotation": "\n\t@And(\"load C_Queue_PackageProcessor by classname:\")",
    "glue_code": "\t@And(\"load C_Queue_PackageProcessor by classname:\")\n\tpublic void load_C_Queue_PackageProcessor(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String classname = DataTableUtil.extractStringForColumnName(row, I_C_Queue_PackageProcessor.COLUMNNAME_Classname);\n\n\t\t\tassertThat(classname).as(\"Missing classname\").isNotNull();\n\n\t\t\tfinal QueuePackageProcessorId packageProcessorId = queueDAO.retrieveQueuePackageProcessorIdFor(classname);\n\n\t\t\tassertThat(packageProcessorId).as(\"Missing C_Queue_PackageProcessor for classname=%s\", classname).isNotNull();\n\n\t\t\tfinal I_C_Queue_PackageProcessor packageProcessor = InterfaceWrapperHelper.load(packageProcessorId, I_C_Queue_PackageProcessor.class);\n\n\t\t\tfinal String packageProcessIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_PackageProcessor.COLUMNNAME_C_Queue_PackageProcessor_ID + \".Identifier\");\n\n\t\t\tpackageProcessorTable.putOrReplace(packageProcessIdentifier, packageProcessor);\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 50,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage/C_Queue_PackageProcessor_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage",
      "filename": "C_Queue_PackageProcessor_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2053,
    "annotation": "\n\t@And(\"load C_Queue_Processor by C_Queue_PackageProcessor:\")",
    "glue_code": "\t@And(\"load C_Queue_Processor by C_Queue_PackageProcessor:\")\n\tpublic void load_C_Queue_Processor(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String packageProcessIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_PackageProcessor.COLUMNNAME_C_Queue_PackageProcessor_ID + \".Identifier\");\n\t\t\tassertThat(packageProcessIdentifier).isNotNull();\n\n\t\t\tfinal I_C_Queue_PackageProcessor packageProcessor = packageProcessorTable.get(packageProcessIdentifier);\n\n\t\t\tfinal Set<Integer> queueProcessorIds = queryBL.createQueryBuilder(I_C_Queue_Processor_Assign.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.addEqualsFilter(I_C_Queue_Processor_Assign.COLUMNNAME_C_Queue_PackageProcessor_ID, packageProcessor.getC_Queue_PackageProcessor_ID())\n\t\t\t\t\t.andCollect(I_C_Queue_Processor.COLUMNNAME_C_Queue_Processor_ID, I_C_Queue_Processor.class)\n\t\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t\t.create()\n\t\t\t\t\t.stream()\n\t\t\t\t\t.map(I_C_Queue_Processor::getC_Queue_Processor_ID)\n\t\t\t\t\t.collect(ImmutableSet.toImmutableSet());\n\n\t\t\tassertThat(queueProcessorIds.size()).isEqualTo(1);\n\n\t\t\tfinal Integer queueProcessorId = queueProcessorIds.iterator().next();\n\n\t\t\tfinal String queueProcessorIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_Processor.COLUMNNAME_C_Queue_Processor_ID + \".Identifier\");\n\t\t\tprocessorTable.putOrReplace(queueProcessorIdentifier, InterfaceWrapperHelper.load(queueProcessorId, I_C_Queue_Processor.class));\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 58,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage/C_Queue_Processor_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage",
      "filename": "C_Queue_Processor_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2068,
    "annotation": "\n\t@And(\"locate last C_Queue_WorkPackage by enqueued element\")",
    "glue_code": "\t@And(\"locate last C_Queue_WorkPackage by enqueued element\")\n\tpublic void locate_C_Queue_WorkPackage_by_enqueued_element(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String workPackageIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_WorkPackage.COLUMNNAME_C_Queue_WorkPackage_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String packageProcessorInternalName = DataTableUtil.extractStringForColumnName(row, I_C_Queue_PackageProcessor.COLUMNNAME_C_Queue_PackageProcessor_ID + \".\" + I_C_Queue_PackageProcessor.COLUMNNAME_InternalName);\n\t\t\tfinal String tableName = DataTableUtil.extractStringForColumnName(row, I_AD_Table.COLUMNNAME_AD_Table_ID + \".\" + I_AD_Table.COLUMNNAME_TableName);\n\t\t\tfinal String recordIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_Element.COLUMNNAME_Record_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_AD_Table adTable = tableDAO.retrieveTable(tableName);\n\n\t\t\tswitch (adTable.getTableName())\n\t\t\t{\n\t\t\t\tcase I_C_OLCand.Table_Name:\n\t\t\t\t\tfinal I_C_OLCand candidate = candidateTable.get(recordIdentifier);\n\t\t\t\t\tfinal TableRecordReference candidateReference = TableRecordReference.of(candidate);\n\n\t\t\t\t\tresolveWorkPackageByQueueElementAndPackageProcessor(workPackageIdentifier, candidateReference, packageProcessorInternalName);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new AdempiereException(\"Table not supported! TableName:\" + tableName);\n\t\t\t}\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 77,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage/C_Queue_WorkPackage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage",
      "filename": "C_Queue_WorkPackage_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2069,
    "annotation": "\n\t@And(\"validate enqueued elements for C_Queue_WorkPackage\")",
    "glue_code": "\t@And(\"validate enqueued elements for C_Queue_WorkPackage\")\n\tpublic void validate_enqueued_elements_for_C_Queue_WorkPackage(@NonNull final DataTable dataTable)\n\t{\n\t\tfor (final Map<String, String> row : dataTable.asMaps())\n\t\t{\n\t\t\tfinal String queueElementIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_Element.COLUMNNAME_C_Queue_Element_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal String workPackageIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_WorkPackage.COLUMNNAME_C_Queue_WorkPackage_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\t\t\tfinal I_C_Queue_WorkPackage workPackage = workPackageTable.get(workPackageIdentifier);\n\t\t\tfinal QueueWorkPackageId workPackageId = QueueWorkPackageId.ofRepoId(workPackage.getC_Queue_WorkPackage_ID());\n\n\t\t\tfinal String tableName = DataTableUtil.extractStringForColumnName(row, I_AD_Table.COLUMNNAME_AD_Table_ID + \".\" + I_AD_Table.COLUMNNAME_TableName);\n\t\t\tfinal String recordIdentifier = DataTableUtil.extractStringForColumnName(row, I_C_Queue_Element.COLUMNNAME_Record_ID + \".\" + StepDefConstants.TABLECOLUMN_IDENTIFIER);\n\n\t\t\tfinal I_AD_Table adTable = tableDAO.retrieveTable(tableName);\n\n\t\t\tswitch (adTable.getTableName())\n\t\t\t{\n\t\t\t\tcase I_C_OLCand.Table_Name:\n\t\t\t\t\tfinal I_C_OLCand candidate = candidateTable.get(recordIdentifier);\n\t\t\t\t\tfinal TableRecordReference candidateReference = TableRecordReference.of(candidate);\n\n\t\t\t\t\tvalidateC_Queue_Element(workPackageId, candidateReference, queueElementIdentifier);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new AdempiereException(\"Table not supported! TableName:\" + tableName);\n\t\t\t}\n\n\t\t}\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 105,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage/C_Queue_WorkPackage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage",
      "filename": "C_Queue_WorkPackage_StepDef.java",
      "extension": ".java"
    }
  },
  {
    "step_definition_id": 2070,
    "annotation": "\n\t@And(\"^after not more than (.*)s, there are no C_Queue_WorkPackage pending or running in queue (.*)$\")",
    "glue_code": "\t@And(\"^after not more than (.*)s, there are no C_Queue_WorkPackage pending or running in queue (.*)$\")\n\tpublic void there_are_no_C_Queue_WorkPackage_Pending_Running(final int nrOfSeconds, @NonNull final String queueProcessorIdentifier) throws InterruptedException\n\t{\n\t\tfinal I_C_Queue_Processor processor = processorTable.get(queueProcessorIdentifier);\n\n\t\tfinal Set<Integer> assignedPackageProcessorsIds = queryBL.createQueryBuilder(I_C_Queue_Processor_Assign.class)\n\t\t\t\t.addOnlyActiveRecordsFilter()\n\t\t\t\t.addEqualsFilter(I_C_Queue_Processor_Assign.COLUMNNAME_C_Queue_Processor_ID, processor.getC_Queue_Processor_ID())\n\t\t\t\t.create()\n\t\t\t\t.stream()\n\t\t\t\t.map(I_C_Queue_Processor_Assign::getC_Queue_PackageProcessor_ID)\n\t\t\t\t.collect(ImmutableSet.toImmutableSet());\n\n\t\tassertThat(assignedPackageProcessorsIds.size()).isGreaterThan(0);\n\n\t\tfinal Supplier<Boolean> noPendingOrRunningPackage = () -> {\n\n\t\t\tfinal IQueryFilter<I_C_Queue_WorkPackage> isNotDoneYet = queryBL.createCompositeQueryFilter(I_C_Queue_WorkPackage.class)\n\t\t\t\t\t.addEqualsFilter(I_C_Queue_WorkPackage.COLUMNNAME_Processed, false)\n\t\t\t\t\t.addEqualsFilter(I_C_Queue_WorkPackage.COLUMNNAME_IsError, false)\n\t\t\t\t\t.addEqualsFilter(I_C_Queue_WorkPackage.COLUMNNAME_IsReadyForProcessing, true);\n\n\t\t\treturn queryBL.createQueryBuilder(I_C_Queue_WorkPackage.class)\n\t\t\t\t\t.addInArrayFilter(I_C_Queue_WorkPackage.COLUMNNAME_C_Queue_PackageProcessor_ID, assignedPackageProcessorsIds)\n\t\t\t\t\t.filter(isNotDoneYet)\n\t\t\t\t\t.create()\n\t\t\t\t\t.count() == 0;\n\t\t};\n\n\t\tStepDefUtil.tryAndWait(nrOfSeconds, 1000, noPendingOrRunningPackage);\n\t}",
    "original_keyword": "And",
    "keyword": "And",
    "line_in_the_file": 187,
    "file_info": {
      "path": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage/C_Queue_WorkPackage_StepDef.java",
      "directory": "backend/de.metas.cucumber/src/test/java/de/metas/cucumber/stepdefs/workpackage",
      "filename": "C_Queue_WorkPackage_StepDef.java",
      "extension": ".java"
    }
  }
]